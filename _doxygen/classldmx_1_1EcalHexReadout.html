<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.9.4"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>LDMX Software: ldmx::EcalHexReadout Class Reference</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">LDMX Software
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part --><!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ldmx</b></li><li class="navelem"><a class="el" href="classldmx_1_1EcalHexReadout.html">EcalHexReadout</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classldmx_1_1EcalHexReadout-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ldmx::EcalHexReadout Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementation of ECal hexagonal cell readout.  
 <a href="classldmx_1_1EcalHexReadout.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa2f2a9f43fbc3e02dee49ce92b4a2da0"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#aa2f2a9f43fbc3e02dee49ce92b4a2da0">~EcalHexReadout</a> ()</td></tr>
<tr class="separator:aa2f2a9f43fbc3e02dee49ce92b4a2da0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e179626757c116ccc8dc85e825fbf66"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a9e179626757c116ccc8dc85e825fbf66">getCellAbsolutePosition</a> (<a class="el" href="classldmx_1_1EcalID.html">EcalID</a> id, double &amp;x, double &amp;y, double &amp;z) const</td></tr>
<tr class="separator:a9e179626757c116ccc8dc85e825fbf66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53eb62b5d96ad24072aff1a1752e0bad"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a53eb62b5d96ad24072aff1a1752e0bad">getZPosition</a> (int layer) const</td></tr>
<tr class="separator:a53eb62b5d96ad24072aff1a1752e0bad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab99906ecb21a277c8a4e2d2120fcfd41"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#ab99906ecb21a277c8a4e2d2120fcfd41">getNumLayers</a> () const</td></tr>
<tr class="separator:ab99906ecb21a277c8a4e2d2120fcfd41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49da1b34dc302998328380ddb7b6f12f"><td class="memItemLeft" align="right" valign="top">std::pair&lt; double, double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a49da1b34dc302998328380ddb7b6f12f">getModuleCenter</a> (int moduleID) const</td></tr>
<tr class="separator:a49da1b34dc302998328380ddb7b6f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac96616bb78ad72d92149cd438a2fb37c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#ac96616bb78ad72d92149cd438a2fb37c">getNumModulesPerLayer</a> () const</td></tr>
<tr class="separator:ac96616bb78ad72d92149cd438a2fb37c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5b455834faccba33f2a2235b9888c81"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#ab5b455834faccba33f2a2235b9888c81">getModuleID</a> (double x, double y) const</td></tr>
<tr class="separator:ab5b455834faccba33f2a2235b9888c81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b24c37eeb6ad660963022e4758b92c5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a1b24c37eeb6ad660963022e4758b92c5">getCellIDRelative</a> (double x, double y) const</td></tr>
<tr class="separator:a1b24c37eeb6ad660963022e4758b92c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad91c22322de8e789fe3da50531c6e6b2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#ad91c22322de8e789fe3da50531c6e6b2">getNumCellsPerModule</a> () const</td></tr>
<tr class="separator:ad91c22322de8e789fe3da50531c6e6b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75975c787f7af86f8a4f112f27dd09da"><td class="memItemLeft" align="right" valign="top">std::pair&lt; double, double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a75975c787f7af86f8a4f112f27dd09da">getCellCenterRelative</a> (int cellID) const</td></tr>
<tr class="separator:a75975c787f7af86f8a4f112f27dd09da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5293b7b33e0eea806b797069a7ca1ffb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classldmx_1_1EcalID.html">EcalID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a5293b7b33e0eea806b797069a7ca1ffb">getCellModuleID</a> (double x, double y) const</td></tr>
<tr class="separator:a5293b7b33e0eea806b797069a7ca1ffb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adccb623906b33ba70b3803f1bc33c3eb"><td class="memItemLeft" align="right" valign="top">std::pair&lt; double, double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#adccb623906b33ba70b3803f1bc33c3eb">getCellCenterAbsolute</a> (<a class="el" href="classldmx_1_1EcalID.html">EcalID</a> cellModuleID) const</td></tr>
<tr class="separator:adccb623906b33ba70b3803f1bc33c3eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba0999d9c878a1ac5746d1b1f8cd7856"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#aba0999d9c878a1ac5746d1b1f8cd7856">distanceToEdge</a> (<a class="el" href="classldmx_1_1EcalID.html">EcalID</a> cellModuleID) const</td></tr>
<tr class="separator:aba0999d9c878a1ac5746d1b1f8cd7856"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ae3be71cc7980920b64eccf59b0c27d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a7ae3be71cc7980920b64eccf59b0c27d">isEdgeCell</a> (<a class="el" href="classldmx_1_1EcalID.html">EcalID</a> cellModuleID) const</td></tr>
<tr class="separator:a7ae3be71cc7980920b64eccf59b0c27d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d22369c3704814a3c52667b1373bbe8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a9d22369c3704814a3c52667b1373bbe8">isInside</a> (double normX, double normY) const</td></tr>
<tr class="separator:a9d22369c3704814a3c52667b1373bbe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7068dc315aed6511dd1446cea7ba1c2"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classldmx_1_1EcalID.html">EcalID</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#aa7068dc315aed6511dd1446cea7ba1c2">getNN</a> (<a class="el" href="classldmx_1_1EcalID.html">EcalID</a> id) const</td></tr>
<tr class="separator:aa7068dc315aed6511dd1446cea7ba1c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d10081ac0818753db568097c765a4d8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a1d10081ac0818753db568097c765a4d8">isNN</a> (<a class="el" href="classldmx_1_1EcalID.html">EcalID</a> centroid, <a class="el" href="classldmx_1_1EcalID.html">EcalID</a> probe) const</td></tr>
<tr class="separator:a1d10081ac0818753db568097c765a4d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9141af468bdb73cc7031a980a30852b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classldmx_1_1EcalID.html">EcalID</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#ae9141af468bdb73cc7031a980a30852b">getNNN</a> (<a class="el" href="classldmx_1_1EcalID.html">EcalID</a> id) const</td></tr>
<tr class="separator:ae9141af468bdb73cc7031a980a30852b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21bde7564d75c3b1b2fb83ffdf5ac1cd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a21bde7564d75c3b1b2fb83ffdf5ac1cd">isNNN</a> (<a class="el" href="classldmx_1_1EcalID.html">EcalID</a> centroid, <a class="el" href="classldmx_1_1EcalID.html">EcalID</a> probe) const</td></tr>
<tr class="separator:a21bde7564d75c3b1b2fb83ffdf5ac1cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a289142dae34069b42b7ffa372cf3f53d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a289142dae34069b42b7ffa372cf3f53d">getModuleMinR</a> () const</td></tr>
<tr class="separator:a289142dae34069b42b7ffa372cf3f53d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ab7f40c71a70b5a0be206cf5f915075"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a0ab7f40c71a70b5a0be206cf5f915075">getModuleMaxR</a> () const</td></tr>
<tr class="separator:a0ab7f40c71a70b5a0be206cf5f915075"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dafb9299318aa1deb12c35d2b83d4e7"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a8dafb9299318aa1deb12c35d2b83d4e7">getCellMinR</a> () const</td></tr>
<tr class="separator:a8dafb9299318aa1deb12c35d2b83d4e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2fdc7bf74be4dcaf22c2b9a38743889"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#aa2fdc7bf74be4dcaf22c2b9a38743889">getCellMaxR</a> () const</td></tr>
<tr class="separator:aa2fdc7bf74be4dcaf22c2b9a38743889"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b2c02174680827cf81180e8cc119367"><td class="memItemLeft" align="right" valign="top">const std::map&lt; int, std::pair&lt; double, double &gt; &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a5b2c02174680827cf81180e8cc119367">getCellPositionMap</a> () const</td></tr>
<tr class="separator:a5b2c02174680827cf81180e8cc119367"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8f1143364f5204712cecc7a177f268c"><td class="memItemLeft" align="right" valign="top">const std::map&lt; <a class="el" href="classldmx_1_1EcalID.html">EcalID</a>, std::pair&lt; double, double &gt; &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#af8f1143364f5204712cecc7a177f268c">getCellModulePositionMap</a> () const</td></tr>
<tr class="separator:af8f1143364f5204712cecc7a177f268c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79b1285bdac4c5ccd141bb82bd5fc574"><td class="memItemLeft" align="right" valign="top">TH2Poly *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a79b1285bdac4c5ccd141bb82bd5fc574">getCellPolyMap</a> () const</td></tr>
<tr class="separator:a79b1285bdac4c5ccd141bb82bd5fc574"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classframework_1_1ConditionsObject"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classframework_1_1ConditionsObject')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classframework_1_1ConditionsObject.html">framework::ConditionsObject</a></td></tr>
<tr class="memitem:a47cde9473f38ece4308bc86449b7f7cd inherit pub_methods_classframework_1_1ConditionsObject"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1ConditionsObject.html#a47cde9473f38ece4308bc86449b7f7cd">ConditionsObject</a> (const std::string &amp;name)</td></tr>
<tr class="separator:a47cde9473f38ece4308bc86449b7f7cd inherit pub_methods_classframework_1_1ConditionsObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acad27a2b212637154ee120a39d2218fa inherit pub_methods_classframework_1_1ConditionsObject"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1ConditionsObject.html#acad27a2b212637154ee120a39d2218fa">~ConditionsObject</a> ()</td></tr>
<tr class="separator:acad27a2b212637154ee120a39d2218fa inherit pub_methods_classframework_1_1ConditionsObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9b359953434555cd095503c57344fca inherit pub_methods_classframework_1_1ConditionsObject"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1ConditionsObject.html#aa9b359953434555cd095503c57344fca">getName</a> () const</td></tr>
<tr class="separator:aa9b359953434555cd095503c57344fca inherit pub_methods_classframework_1_1ConditionsObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a40554b3fa32d5527e0f7f6b59a02d6e7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classldmx_1_1EcalHexReadout.html">EcalHexReadout</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a40554b3fa32d5527e0f7f6b59a02d6e7">debugMake</a> (const <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;p)</td></tr>
<tr class="separator:a40554b3fa32d5527e0f7f6b59a02d6e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a35f253930e8da972d8e1df09edb1e34c"><td class="memItemLeft" align="right" valign="top">static constexpr const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a35f253930e8da972d8e1df09edb1e34c">CONDITIONS_OBJECT_NAME</a> {&quot;EcalHexReadout&quot;}</td></tr>
<tr class="separator:a35f253930e8da972d8e1df09edb1e34c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a3a824ba5e30c2c4d07f088a5c562076d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a3a824ba5e30c2c4d07f088a5c562076d">EcalHexReadout</a> (const <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;ps)</td></tr>
<tr class="separator:a3a824ba5e30c2c4d07f088a5c562076d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05e3dc7a3e36411474327cc877cb0079"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a05e3dc7a3e36411474327cc877cb0079">buildModuleMap</a> ()</td></tr>
<tr class="separator:a05e3dc7a3e36411474327cc877cb0079"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab42dd6bfd06539ace4bedfa6e5c6bfad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#ab42dd6bfd06539ace4bedfa6e5c6bfad">buildCellMap</a> ()</td></tr>
<tr class="separator:ab42dd6bfd06539ace4bedfa6e5c6bfad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a201ec824d6806ff70bdb716cc42cc70e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a201ec824d6806ff70bdb716cc42cc70e">buildCellModuleMap</a> ()</td></tr>
<tr class="separator:a201ec824d6806ff70bdb716cc42cc70e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4aeb2b9831ad98110e4984f2c6f766b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#ac4aeb2b9831ad98110e4984f2c6f766b">buildNeighborMaps</a> ()</td></tr>
<tr class="separator:ac4aeb2b9831ad98110e4984f2c6f766b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f0f75f6681b73e09cee4268710c55a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a7f0f75f6681b73e09cee4268710c55a5">buildTriggerGroup</a> ()</td></tr>
<tr class="separator:a7f0f75f6681b73e09cee4268710c55a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aeac683d8c4aa534f55488f2dbff4d511"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> {2}</td></tr>
<tr class="memdesc:aeac683d8c4aa534f55488f2dbff4d511"><td class="mdescLeft">&#160;</td><td class="mdescRight">verbosity, not configurable but helpful if developing  <a href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">More...</a><br /></td></tr>
<tr class="separator:aeac683d8c4aa534f55488f2dbff4d511"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8283a781129c83d72b4b05b411b4906"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#aa8283a781129c83d72b4b05b411b4906">gap_</a></td></tr>
<tr class="memdesc:aa8283a781129c83d72b4b05b411b4906"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gap between module flat sides [mm].  <a href="classldmx_1_1EcalHexReadout.html#aa8283a781129c83d72b4b05b411b4906">More...</a><br /></td></tr>
<tr class="separator:aa8283a781129c83d72b4b05b411b4906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa411a6f3c759da91bd9ddda4ba1decb9"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#aa411a6f3c759da91bd9ddda4ba1decb9">cellr_</a> {0}</td></tr>
<tr class="memdesc:aa411a6f3c759da91bd9ddda4ba1decb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Center-to-Flat Radius of cell hexagon [mm].  <a href="classldmx_1_1EcalHexReadout.html#aa411a6f3c759da91bd9ddda4ba1decb9">More...</a><br /></td></tr>
<tr class="separator:aa411a6f3c759da91bd9ddda4ba1decb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe8818450ac613540a84aca91c808fe8"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a> {0}</td></tr>
<tr class="memdesc:abe8818450ac613540a84aca91c808fe8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Center-to-Flat Radius of module hexagon [mm].  <a href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">More...</a><br /></td></tr>
<tr class="separator:abe8818450ac613540a84aca91c808fe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1481095039b9283d620827b825ca06b1"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a1481095039b9283d620827b825ca06b1">cellR_</a> {0}</td></tr>
<tr class="memdesc:a1481095039b9283d620827b825ca06b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Center-to-Corner Radius of cell hexagon [mm].  <a href="classldmx_1_1EcalHexReadout.html#a1481095039b9283d620827b825ca06b1">More...</a><br /></td></tr>
<tr class="separator:a1481095039b9283d620827b825ca06b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbf95653cded8772299056d5ea557105"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a> {0}</td></tr>
<tr class="memdesc:acbf95653cded8772299056d5ea557105"><td class="mdescLeft">&#160;</td><td class="mdescRight">Center-to-Corner Radius of module hexagon [mm].  <a href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">More...</a><br /></td></tr>
<tr class="separator:acbf95653cded8772299056d5ea557105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7879f9a66c5bf6b76a93b36a36619511"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a7879f9a66c5bf6b76a93b36a36619511">cornersSideUp_</a></td></tr>
<tr class="memdesc:a7879f9a66c5bf6b76a93b36a36619511"><td class="mdescLeft">&#160;</td><td class="mdescRight">indicator of geometry orientation &ndash; if true, flower shape's corners side (ie: side with two modules) is at the top  <a href="classldmx_1_1EcalHexReadout.html#a7879f9a66c5bf6b76a93b36a36619511">More...</a><br /></td></tr>
<tr class="separator:a7879f9a66c5bf6b76a93b36a36619511"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bbd845808c2836b6c1530c12b4e0fa4"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a1bbd845808c2836b6c1530c12b4e0fa4">nCellRHeight_</a> {0}</td></tr>
<tr class="separator:a1bbd845808c2836b6c1530c12b4e0fa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d6cf2d6aa9ed38913936445e031fa0a"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a3d6cf2d6aa9ed38913936445e031fa0a">ecalFrontZ_</a> {0}</td></tr>
<tr class="memdesc:a3d6cf2d6aa9ed38913936445e031fa0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Front of ECal relative to world geometry [mm].  <a href="classldmx_1_1EcalHexReadout.html#a3d6cf2d6aa9ed38913936445e031fa0a">More...</a><br /></td></tr>
<tr class="separator:a3d6cf2d6aa9ed38913936445e031fa0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabdd321c511fa6728a4d22a376eeae14"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#aabdd321c511fa6728a4d22a376eeae14">layerZPositions_</a></td></tr>
<tr class="memdesc:aabdd321c511fa6728a4d22a376eeae14"><td class="mdescLeft">&#160;</td><td class="mdescRight">The layer Z postions are with respect to the front of the ECal [mm].  <a href="classldmx_1_1EcalHexReadout.html#aabdd321c511fa6728a4d22a376eeae14">More...</a><br /></td></tr>
<tr class="separator:aabdd321c511fa6728a4d22a376eeae14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d2ee17d6362bf3e84e08773e431c835"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::pair&lt; double, double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a0d2ee17d6362bf3e84e08773e431c835">modulePositionMap_</a></td></tr>
<tr class="separator:a0d2ee17d6362bf3e84e08773e431c835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca8458c4b257c3191e09ebd750034d2a"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::pair&lt; double, double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#aca8458c4b257c3191e09ebd750034d2a">cellPositionMap_</a></td></tr>
<tr class="memdesc:aca8458c4b257c3191e09ebd750034d2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Position of cell centers relative to module (uses cell ID as key)  <a href="classldmx_1_1EcalHexReadout.html#aca8458c4b257c3191e09ebd750034d2a">More...</a><br /></td></tr>
<tr class="separator:aca8458c4b257c3191e09ebd750034d2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55a984f644e63a53738a65695ed3234b"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classldmx_1_1EcalID.html">EcalID</a>, std::pair&lt; double, double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a55a984f644e63a53738a65695ed3234b">cellModulePositionMap_</a></td></tr>
<tr class="separator:a55a984f644e63a53738a65695ed3234b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a910aa8077878771e6b264ce5c804409c"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classldmx_1_1EcalID.html">EcalID</a>, std::vector&lt; <a class="el" href="classldmx_1_1EcalID.html">EcalID</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a910aa8077878771e6b264ce5c804409c">NNMap_</a></td></tr>
<tr class="separator:a910aa8077878771e6b264ce5c804409c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a769854d7fb0c67df7e56f7a73c9bf207"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classldmx_1_1EcalID.html">EcalID</a>, std::vector&lt; <a class="el" href="classldmx_1_1EcalID.html">EcalID</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a769854d7fb0c67df7e56f7a73c9bf207">NNNMap_</a></td></tr>
<tr class="separator:a769854d7fb0c67df7e56f7a73c9bf207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefa08ab9e0e15d4ff4283b0ff4d416ca"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#aefa08ab9e0e15d4ff4283b0ff4d416ca">triggerGroups_</a></td></tr>
<tr class="memdesc:aefa08ab9e0e15d4ff4283b0ff4d416ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of Trigger Group IDs (index is cell ID)  <a href="classldmx_1_1EcalHexReadout.html#aefa08ab9e0e15d4ff4283b0ff4d416ca">More...</a><br /></td></tr>
<tr class="separator:aefa08ab9e0e15d4ff4283b0ff4d416ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af15a164a554997823d0a6ac5479dfab6"><td class="memItemLeft" align="right" valign="top">TH2Poly&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#af15a164a554997823d0a6ac5479dfab6">ecalMap_</a></td></tr>
<tr class="separator:af15a164a554997823d0a6ac5479dfab6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a3fd818642a78fd5349c18c901426f594"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EcalHexReadout.html#a3fd818642a78fd5349c18c901426f594">ecal::EcalGeometryProvider</a></td></tr>
<tr class="separator:a3fd818642a78fd5349c18c901426f594"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Implementation of ECal hexagonal cell readout. </p>
<p >This is the object that does the extra geometry <em>not</em> implemented in the gdml. In order to save time during the simulation, the individual cells in the readout hexagons are not constructed individually in Geant4. This means we have to have a translation between position and cell ID which is accomplished by this class.</p>
<h2><a class="anchor" id="autotoc_md1"></a>
ORIENTATION ASSUMPTIONS:</h2>
<ul>
<li>modules are oriented flat side down.</li>
<li>cells are oriented corner side down.</li>
</ul>
<h2><a class="anchor" id="autotoc_md2"></a>
SOME GEOMETRY:</h2>
<ul>
<li>hexagons have two radii:<ul>
<li>r (half of flat-to-flat width) and R (half of corner-to-corner width).</li>
<li>r = (sqrt(3)/2)R and s = R, where s is the length of an edge.</li>
</ul>
</li>
<li>for seven ecal modules oriented flat-side-down, maximum x and y extents are:<ul>
<li>deltaY = 6r' + 2g = 3sqrt(3)R' + 2g</li>
<li>deltaX = 4R' + s' + 2g/cos(30 deg) = 5R' + 4g/sqrt(3)</li>
<li>where g is uniform gap width between modules, and primed variables correspond to modules.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
THIS GRID:</h2>
<ul>
<li>column-to-column distance in a grid such as ours is 2r = sqrt(3)R.</li>
<li>row-to-row distance is 1.5R (easy to observe that twice that distance = 3R)</li>
</ul>
<p >The cell radius is calculated from the total number of center-to-corner cell radii that span the module height. This count can have fractional counts to account for the fractions of cell radii at the module edges. </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00067">67</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa2f2a9f43fbc3e02dee49ce92b4a2da0" name="aa2f2a9f43fbc3e02dee49ce92b4a2da0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2f2a9f43fbc3e02dee49ce92b4a2da0">&#9670;&nbsp;</a></span>~EcalHexReadout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual ldmx::EcalHexReadout::~EcalHexReadout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Class destructor.</p>
<p >Does nothing because the stl containers clean up automatically. </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00076">76</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   76</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3a824ba5e30c2c4d07f088a5c562076d" name="a3a824ba5e30c2c4d07f088a5c562076d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a824ba5e30c2c4d07f088a5c562076d">&#9670;&nbsp;</a></span>EcalHexReadout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ldmx::EcalHexReadout::EcalHexReadout </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;&#160;</td>
          <td class="paramname"><em>ps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Class constructor, for use only by the provider</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ps</td><td>Parameters to configure the <a class="el" href="classldmx_1_1EcalHexReadout.html" title="Implementation of ECal hexagonal cell readout.">EcalHexReadout</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8cxx_source.html#l00015">15</a> of file <a class="el" href="EcalHexReadout_8cxx_source.html">EcalHexReadout.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   16</span>    : <a class="code hl_class" href="classframework_1_1ConditionsObject.html">framework::ConditionsObject</a>(EcalHexReadout::CONDITIONS_OBJECT_NAME) {</div>
<div class="line"><span class="lineno">   17</span>  <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aabdd321c511fa6728a4d22a376eeae14">layerZPositions_</a> = ps.<a class="code hl_function" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;std::vector&lt;double&gt;&gt;(<span class="stringliteral">&quot;layerZPositions&quot;</span>);</div>
<div class="line"><span class="lineno">   18</span>  <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a3d6cf2d6aa9ed38913936445e031fa0a">ecalFrontZ_</a> = ps.<a class="code hl_function" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;ecalFrontZ&quot;</span>);</div>
<div class="line"><span class="lineno">   19</span>  <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a> = ps.<a class="code hl_function" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;moduleMinR&quot;</span>);</div>
<div class="line"><span class="lineno">   20</span>  <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa8283a781129c83d72b4b05b411b4906">gap_</a> = ps.<a class="code hl_function" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;gap&quot;</span>);</div>
<div class="line"><span class="lineno">   21</span>  <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a1bbd845808c2836b6c1530c12b4e0fa4">nCellRHeight_</a> = ps.<a class="code hl_function" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;nCellRHeight&quot;</span>);</div>
<div class="line"><span class="lineno">   22</span>  <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> = ps.<a class="code hl_function" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;verbose&quot;</span>);</div>
<div class="line"><span class="lineno">   23</span>  <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a7879f9a66c5bf6b76a93b36a36619511">cornersSideUp_</a> = ps.<a class="code hl_function" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;cornersSideUp&quot;</span>);</div>
<div class="line"><span class="lineno">   24</span> </div>
<div class="line"><span class="lineno">   25</span>  </div>
<div class="line"><span class="lineno">   26</span>  <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a> = <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a> * (2 / sqrt(3));</div>
<div class="line"><span class="lineno">   27</span>  <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a1481095039b9283d620827b825ca06b1">cellR_</a> = 2 * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a> / <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a1bbd845808c2836b6c1530c12b4e0fa4">nCellRHeight_</a>;</div>
<div class="line"><span class="lineno">   28</span>  <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa411a6f3c759da91bd9ddda4ba1decb9">cellr_</a> = (sqrt(3.) / 2.) * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a1481095039b9283d620827b825ca06b1">cellR_</a>;</div>
<div class="line"><span class="lineno">   29</span> </div>
<div class="line"><span class="lineno">   30</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 0) {</div>
<div class="line"><span class="lineno">   31</span>    std::cout &lt;&lt; std::endl</div>
<div class="line"><span class="lineno">   32</span>              &lt;&lt; <span class="stringliteral">&quot;[EcalHexReadout] Verbosity set in header to &quot;</span> &lt;&lt; <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a></div>
<div class="line"><span class="lineno">   33</span>              &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">   34</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;     Building module map with gap &quot;</span> &lt;&lt; std::setprecision(2)</div>
<div class="line"><span class="lineno">   35</span>              &lt;&lt; <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa8283a781129c83d72b4b05b411b4906">gap_</a> &lt;&lt; <span class="stringliteral">&quot;, nCellRHeight &quot;</span> &lt;&lt; <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a1bbd845808c2836b6c1530c12b4e0fa4">nCellRHeight_</a></div>
<div class="line"><span class="lineno">   36</span>              &lt;&lt; <span class="stringliteral">&quot;,  min/max radii of cell &quot;</span> &lt;&lt; <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa411a6f3c759da91bd9ddda4ba1decb9">cellr_</a> &lt;&lt; <span class="stringliteral">&quot; / &quot;</span> &lt;&lt; <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a1481095039b9283d620827b825ca06b1">cellR_</a></div>
<div class="line"><span class="lineno">   37</span>              &lt;&lt; <span class="stringliteral">&quot;, and module &quot;</span> &lt;&lt; <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a> &lt;&lt; <span class="stringliteral">&quot; / &quot;</span> &lt;&lt; <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">   38</span>  }</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>  <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#a05e3dc7a3e36411474327cc877cb0079">buildModuleMap</a>();</div>
<div class="line"><span class="lineno">   41</span>  <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#ab42dd6bfd06539ace4bedfa6e5c6bfad">buildCellMap</a>();</div>
<div class="line"><span class="lineno">   42</span>  <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#a201ec824d6806ff70bdb716cc42cc70e">buildCellModuleMap</a>();</div>
<div class="line"><span class="lineno">   43</span>  <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#ac4aeb2b9831ad98110e4984f2c6f766b">buildNeighborMaps</a>();</div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 0) {</div>
<div class="line"><span class="lineno">   46</span>    std::cout &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">   47</span>  }</div>
<div class="line"><span class="lineno">   48</span>}</div>
<div class="ttc" id="aclassframework_1_1ConditionsObject_html"><div class="ttname"><a href="classframework_1_1ConditionsObject.html">framework::ConditionsObject</a></div><div class="ttdoc">Base class for all conditions objects, very simple.</div><div class="ttdef"><b>Definition:</b> <a href="ConditionsObject_8h_source.html#l00018">ConditionsObject.h:18</a></div></div>
<div class="ttc" id="aclassframework_1_1config_1_1Parameters_html_a18206b7c01007dd706abce7e5505eae1"><div class="ttname"><a href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">framework::config::Parameters::getParameter</a></div><div class="ttdeci">T getParameter(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="Parameters_8h_source.html#l00089">Parameters.h:89</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a05e3dc7a3e36411474327cc877cb0079"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a05e3dc7a3e36411474327cc877cb0079">ldmx::EcalHexReadout::buildModuleMap</a></div><div class="ttdeci">void buildModuleMap()</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8cxx_source.html#l00050">EcalHexReadout.cxx:50</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a1481095039b9283d620827b825ca06b1"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a1481095039b9283d620827b825ca06b1">ldmx::EcalHexReadout::cellR_</a></div><div class="ttdeci">double cellR_</div><div class="ttdoc">Center-to-Corner Radius of cell hexagon [mm].</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00522">EcalHexReadout.h:522</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a1bbd845808c2836b6c1530c12b4e0fa4"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a1bbd845808c2836b6c1530c12b4e0fa4">ldmx::EcalHexReadout::nCellRHeight_</a></div><div class="ttdeci">double nCellRHeight_</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00537">EcalHexReadout.h:537</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a201ec824d6806ff70bdb716cc42cc70e"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a201ec824d6806ff70bdb716cc42cc70e">ldmx::EcalHexReadout::buildCellModuleMap</a></div><div class="ttdeci">void buildCellModuleMap()</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8cxx_source.html#l00386">EcalHexReadout.cxx:386</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a3d6cf2d6aa9ed38913936445e031fa0a"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a3d6cf2d6aa9ed38913936445e031fa0a">ldmx::EcalHexReadout::ecalFrontZ_</a></div><div class="ttdeci">double ecalFrontZ_</div><div class="ttdoc">Front of ECal relative to world geometry [mm].</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00540">EcalHexReadout.h:540</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a7879f9a66c5bf6b76a93b36a36619511"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a7879f9a66c5bf6b76a93b36a36619511">ldmx::EcalHexReadout::cornersSideUp_</a></div><div class="ttdeci">bool cornersSideUp_</div><div class="ttdoc">indicator of geometry orientation – if true, flower shape's corners side (ie: side with two modules) ...</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00528">EcalHexReadout.h:528</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_aa411a6f3c759da91bd9ddda4ba1decb9"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#aa411a6f3c759da91bd9ddda4ba1decb9">ldmx::EcalHexReadout::cellr_</a></div><div class="ttdeci">double cellr_</div><div class="ttdoc">Center-to-Flat Radius of cell hexagon [mm].</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00516">EcalHexReadout.h:516</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_aa8283a781129c83d72b4b05b411b4906"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#aa8283a781129c83d72b4b05b411b4906">ldmx::EcalHexReadout::gap_</a></div><div class="ttdeci">double gap_</div><div class="ttdoc">Gap between module flat sides [mm].</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00513">EcalHexReadout.h:513</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_aabdd321c511fa6728a4d22a376eeae14"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#aabdd321c511fa6728a4d22a376eeae14">ldmx::EcalHexReadout::layerZPositions_</a></div><div class="ttdeci">std::vector&lt; double &gt; layerZPositions_</div><div class="ttdoc">The layer Z postions are with respect to the front of the ECal [mm].</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00543">EcalHexReadout.h:543</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_ab42dd6bfd06539ace4bedfa6e5c6bfad"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#ab42dd6bfd06539ace4bedfa6e5c6bfad">ldmx::EcalHexReadout::buildCellMap</a></div><div class="ttdeci">void buildCellMap()</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8cxx_source.html#l00086">EcalHexReadout.cxx:86</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_abe8818450ac613540a84aca91c808fe8"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">ldmx::EcalHexReadout::moduler_</a></div><div class="ttdeci">double moduler_</div><div class="ttdoc">Center-to-Flat Radius of module hexagon [mm].</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00519">EcalHexReadout.h:519</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_ac4aeb2b9831ad98110e4984f2c6f766b"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#ac4aeb2b9831ad98110e4984f2c6f766b">ldmx::EcalHexReadout::buildNeighborMaps</a></div><div class="ttdeci">void buildNeighborMaps()</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8cxx_source.html#l00410">EcalHexReadout.cxx:410</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_acbf95653cded8772299056d5ea557105"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">ldmx::EcalHexReadout::moduleR_</a></div><div class="ttdeci">double moduleR_</div><div class="ttdoc">Center-to-Corner Radius of module hexagon [mm].</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00525">EcalHexReadout.h:525</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_aeac683d8c4aa534f55488f2dbff4d511"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">ldmx::EcalHexReadout::verbose_</a></div><div class="ttdeci">int verbose_</div><div class="ttdoc">verbosity, not configurable but helpful if developing</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00510">EcalHexReadout.h:510</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8cxx_source.html#l00086">buildCellMap()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00386">buildCellModuleMap()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00050">buildModuleMap()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00410">buildNeighborMaps()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00516">cellr_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00522">cellR_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00528">cornersSideUp_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00540">ecalFrontZ_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00513">gap_</a>, <a class="el" href="Parameters_8h_source.html#l00089">framework::config::Parameters::getParameter()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00543">layerZPositions_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00519">moduler_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00525">moduleR_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00537">nCellRHeight_</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00510">verbose_</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab42dd6bfd06539ace4bedfa6e5c6bfad" name="ab42dd6bfd06539ace4bedfa6e5c6bfad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab42dd6bfd06539ace4bedfa6e5c6bfad">&#9670;&nbsp;</a></span>buildCellMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ldmx::EcalHexReadout::buildCellMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Constructs the flat-bottomed hexagonal grid (cellID) of corner-down hexagonal cells.</p>
<p >Sets ecalMap_ with the defined bins being the ecal cells in coordinates with respect to the module center. Also sets cellPostionMap_ with the keys being the cell ID and the values being the position of the cell with respect to the module center.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Strategy</h2>
<p >Use ROOT's TH2Poly::HoneyComb method to build a large hexagonal grid, then copy the polygons from it which overlap with the module with more than one vertex.</p>
<p >A vertex between three cells is placed at the origin, then the bottom left corner of the honeycomb and the number of x and y cells across the honeycomb is calculated by continuing to decrement the grid x/y point until the module center-to-flat distance is reached.</p>
<p >The hexagons that only have one vertex outside the module hexagon leave a small space un-covered by the tiling, so the vertices adjacent to the external vertex are projected onto the module edge.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cellr_</td><td>the center-to-flat cell radius </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cellR_</td><td>the center-to-corner cell radius </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">moduler_</td><td>the center-to-flat module radius </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">moduleR_</td><td>the center-to-flat module radius </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ecalMap_</td><td>TH2Poly with local cell ID to local cell position mapping </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cellPostionMap_</td><td>map of local cell ID to cell center position relative to module </td></tr>
  </table>
  </dd>
</dl>
<p >STRATEGY rotated cells are hardcoded unrotated cells use ROOT HoneyComb method (build large hex grid, copy polygons that cover module)</p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8cxx_source.html#l00086">86</a> of file <a class="el" href="EcalHexReadout_8cxx_source.html">EcalHexReadout.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   86</span>                                  {</div>
<div class="line"><span class="lineno">   91</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a7879f9a66c5bf6b76a93b36a36619511">cornersSideUp_</a>) {</div>
<div class="line"><span class="lineno">   92</span>    Double_t a = <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a1481095039b9283d620827b825ca06b1">cellR_</a>;  <span class="comment">// cell long radius (or hexagon flat side length)</span></div>
<div class="line"><span class="lineno">   93</span>    Double_t xCenter = 0.;</div>
<div class="line"><span class="lineno">   94</span>    Double_t yCenter = 0.;</div>
<div class="line"><span class="lineno">   95</span>    Double_t numberOfCellsFlatSide = 12;</div>
<div class="line"><span class="lineno">   96</span>    Double_t x[6], y[6];</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>    <span class="comment">//(xLoop,yLoop)-coordinate of the first starting vertex in the &quot;for&quot; loops</span></div>
<div class="line"><span class="lineno">   99</span>    <span class="comment">//(xTemp,yTemp)-the changing starting vertex as loops through columns/rows</span></div>
<div class="line"><span class="lineno">  100</span>    Double_t xLoop, yLoop, xTemp, yTemp;</div>
<div class="line"><span class="lineno">  101</span>    <span class="keywordtype">int</span> yColNum;</div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordtype">int</span> ecalMapID = 0;</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>    <span class="comment">// The hexagon grid divides into two sections: two trapezoids</span></div>
<div class="line"><span class="lineno">  105</span>    <span class="comment">// Cell map starts from top left</span></div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>    <span class="comment">// Section 1: Left trapezoid (13cell short base, 24cell long base, 12cell</span></div>
<div class="line"><span class="lineno">  108</span>    <span class="comment">// lateral side</span></div>
<div class="line"><span class="lineno">  109</span>    xLoop = xCenter - a * 18.0;</div>
<div class="line"><span class="lineno">  110</span>    yLoop = yCenter + a * 18.0 / TMath::Sqrt(3);</div>
<div class="line"><span class="lineno">  111</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> xCounter = 0; xCounter &lt; numberOfCellsFlatSide;</div>
<div class="line"><span class="lineno">  112</span>         xCounter++) {  <span class="comment">// lateral side-&gt;12cells</span></div>
<div class="line"><span class="lineno">  113</span>      yTemp = yLoop;    <span class="comment">// resets the temporary variable</span></div>
<div class="line"><span class="lineno">  114</span>      yColNum =</div>
<div class="line"><span class="lineno">  115</span>          numberOfCellsFlatSide + xCounter + 1;  <span class="comment">// number of cells in each column</span></div>
<div class="line"><span class="lineno">  116</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> yCounter = 0; yCounter &lt; yColNum; yCounter++) {</div>
<div class="line"><span class="lineno">  117</span>        <span class="comment">// Create a cell: go clockwise around the hexagon vertices starting from</span></div>
<div class="line"><span class="lineno">  118</span>        <span class="comment">// the left-most one</span></div>
<div class="line"><span class="lineno">  119</span>        x[0] = xLoop;</div>
<div class="line"><span class="lineno">  120</span>        y[0] = yTemp;</div>
<div class="line"><span class="lineno">  121</span>        x[1] = x[0] + a / 2.0;</div>
<div class="line"><span class="lineno">  122</span>        y[1] = y[0] + a * TMath::Sqrt(3) / 2.0;</div>
<div class="line"><span class="lineno">  123</span>        x[2] = x[1] + a;</div>
<div class="line"><span class="lineno">  124</span>        y[2] = y[1];</div>
<div class="line"><span class="lineno">  125</span>        x[3] = x[2] + a / 2.0;</div>
<div class="line"><span class="lineno">  126</span>        y[3] = y[0];</div>
<div class="line"><span class="lineno">  127</span>        x[4] = x[2];</div>
<div class="line"><span class="lineno">  128</span>        y[4] = y[3] - a * TMath::Sqrt(3) / 2.0;</div>
<div class="line"><span class="lineno">  129</span>        x[5] = x[1];</div>
<div class="line"><span class="lineno">  130</span>        y[5] = y[4];</div>
<div class="line"><span class="lineno">  131</span>        <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#af15a164a554997823d0a6ac5479dfab6">ecalMap_</a>.AddBin(6, x, y);</div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordtype">double</span> cellx = (x[0] + x[3]) / 2;</div>
<div class="line"><span class="lineno">  133</span>        <span class="keywordtype">double</span> celly = (y[1] + y[4]) / 2;</div>
<div class="line"><span class="lineno">  134</span>        <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aca8458c4b257c3191e09ebd750034d2a">cellPositionMap_</a>[ecalMapID] = std::pair&lt;double, double&gt;(cellx, celly);</div>
<div class="line"><span class="lineno">  135</span>        ecalMapID++;</div>
<div class="line"><span class="lineno">  136</span>        <span class="comment">// Go down</span></div>
<div class="line"><span class="lineno">  137</span>        yTemp -= a * TMath::Sqrt(3);</div>
<div class="line"><span class="lineno">  138</span>      }</div>
<div class="line"><span class="lineno">  139</span>      <span class="comment">// Increment the starting position from column to column</span></div>
<div class="line"><span class="lineno">  140</span>      yLoop += a * TMath::Sqrt(3) / 2.0;</div>
<div class="line"><span class="lineno">  141</span>      xLoop += 1.5 * a;</div>
<div class="line"><span class="lineno">  142</span>    }</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>    <span class="comment">// Section 2: Right trapezoid (12cell short base, 23cell long base, 12cell</span></div>
<div class="line"><span class="lineno">  145</span>    <span class="comment">// lateral side</span></div>
<div class="line"><span class="lineno">  146</span>    xLoop = xCenter;</div>
<div class="line"><span class="lineno">  147</span>    yLoop = yCenter + a * 11.0 * TMath::Sqrt(3);</div>
<div class="line"><span class="lineno">  148</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> xCounter = 0; xCounter &lt; numberOfCellsFlatSide; xCounter++) {</div>
<div class="line"><span class="lineno">  149</span>      yTemp = yLoop;</div>
<div class="line"><span class="lineno">  150</span>      yColNum = 2 * numberOfCellsFlatSide - xCounter -</div>
<div class="line"><span class="lineno">  151</span>                1;  <span class="comment">// number of cells in each column</span></div>
<div class="line"><span class="lineno">  152</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> yCounter = 0; yCounter &lt; yColNum; yCounter++) {</div>
<div class="line"><span class="lineno">  153</span>        <span class="comment">// Create a cell: go clockwise around the hexagon vertices starting from</span></div>
<div class="line"><span class="lineno">  154</span>        <span class="comment">// the left-most one</span></div>
<div class="line"><span class="lineno">  155</span>        x[0] = xLoop;</div>
<div class="line"><span class="lineno">  156</span>        y[0] = yTemp;</div>
<div class="line"><span class="lineno">  157</span>        x[1] = x[0] + a / 2.0;</div>
<div class="line"><span class="lineno">  158</span>        y[1] = y[0] + a * TMath::Sqrt(3) / 2.0;</div>
<div class="line"><span class="lineno">  159</span>        x[2] = x[1] + a;</div>
<div class="line"><span class="lineno">  160</span>        y[2] = y[1];</div>
<div class="line"><span class="lineno">  161</span>        x[3] = x[2] + a / 2.0;</div>
<div class="line"><span class="lineno">  162</span>        y[3] = y[0];</div>
<div class="line"><span class="lineno">  163</span>        x[4] = x[2];</div>
<div class="line"><span class="lineno">  164</span>        y[4] = y[3] - a * TMath::Sqrt(3) / 2.0;</div>
<div class="line"><span class="lineno">  165</span>        x[5] = x[1];</div>
<div class="line"><span class="lineno">  166</span>        y[5] = y[4];</div>
<div class="line"><span class="lineno">  167</span>        <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#af15a164a554997823d0a6ac5479dfab6">ecalMap_</a>.AddBin(6, x, y);</div>
<div class="line"><span class="lineno">  168</span>        <span class="keywordtype">double</span> cellx = (x[0] + x[3]) / 2;</div>
<div class="line"><span class="lineno">  169</span>        <span class="keywordtype">double</span> celly = (y[1] + y[4]) / 2;</div>
<div class="line"><span class="lineno">  170</span>        <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aca8458c4b257c3191e09ebd750034d2a">cellPositionMap_</a>[ecalMapID] = std::pair&lt;double, double&gt;(cellx, celly);</div>
<div class="line"><span class="lineno">  171</span>        ecalMapID++;</div>
<div class="line"><span class="lineno">  172</span>        <span class="comment">// Go down</span></div>
<div class="line"><span class="lineno">  173</span>        yTemp -= a * TMath::Sqrt(3);</div>
<div class="line"><span class="lineno">  174</span>      }</div>
<div class="line"><span class="lineno">  175</span>      <span class="comment">// Increment the starting position from column to column</span></div>
<div class="line"><span class="lineno">  176</span>      yLoop -= a * TMath::Sqrt(3) / 2.0;</div>
<div class="line"><span class="lineno">  177</span>      xLoop += 1.5 * a;</div>
<div class="line"><span class="lineno">  178</span>    }</div>
<div class="line"><span class="lineno">  179</span>  }</div>
<div class="line"><span class="lineno">  180</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  181</span>    TH2Poly gridMap;</div>
<div class="line"><span class="lineno">  182</span>    </div>
<div class="line"><span class="lineno">  183</span>    <span class="comment">// make hexagonal grid [boundary is rectangle] larger than the module</span></div>
<div class="line"><span class="lineno">  184</span>    <span class="keywordtype">double</span> gridMinX = 0., gridMinY = 0.;  <span class="comment">// start at the origin</span></div>
<div class="line"><span class="lineno">  185</span>    <span class="keywordtype">int</span> numXCells = 0, numYCells = 0;</div>
<div class="line"><span class="lineno">  186</span>    </div>
<div class="line"><span class="lineno">  187</span>    <span class="comment">// first x-cell is only a half</span></div>
<div class="line"><span class="lineno">  188</span>    gridMinX -= <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa411a6f3c759da91bd9ddda4ba1decb9">cellr_</a>;</div>
<div class="line"><span class="lineno">  189</span>    numXCells++;</div>
<div class="line"><span class="lineno">  190</span>    <span class="keywordflow">while</span> (gridMinX &gt; -1 * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a>) {</div>
<div class="line"><span class="lineno">  191</span>      gridMinX -= 2 * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa411a6f3c759da91bd9ddda4ba1decb9">cellr_</a>;  <span class="comment">// decrement x by cell center-to-flat diameter</span></div>
<div class="line"><span class="lineno">  192</span>      numXCells++;</div>
<div class="line"><span class="lineno">  193</span>    }</div>
<div class="line"><span class="lineno">  194</span>    <span class="keywordflow">while</span> (gridMinY &gt; -1 * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a>) {</div>
<div class="line"><span class="lineno">  195</span>      <span class="comment">// decrement y by cell center-to-corner radius</span></div>
<div class="line"><span class="lineno">  196</span>      <span class="comment">//  alternate between a full corner-to-corner diameter</span></div>
<div class="line"><span class="lineno">  197</span>      <span class="comment">//  and a side of a cell (center-to-corner radius)</span></div>
<div class="line"><span class="lineno">  198</span>      <span class="keywordflow">if</span> (numYCells % 2 == 0)</div>
<div class="line"><span class="lineno">  199</span>    gridMinY -= 1 * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a1481095039b9283d620827b825ca06b1">cellR_</a>;</div>
<div class="line"><span class="lineno">  200</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  201</span>    gridMinY -= 2 * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a1481095039b9283d620827b825ca06b1">cellR_</a>;</div>
<div class="line"><span class="lineno">  202</span>      numYCells++;</div>
<div class="line"><span class="lineno">  203</span>    }</div>
<div class="line"><span class="lineno">  204</span>    <span class="comment">// only counted one half of the cells</span></div>
<div class="line"><span class="lineno">  205</span>    numXCells *= 2;</div>
<div class="line"><span class="lineno">  206</span>    numYCells *= 2;</div>
<div class="line"><span class="lineno">  207</span>    </div>
<div class="line"><span class="lineno">  208</span>    gridMap.Honeycomb(gridMinX, gridMinY, <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a1481095039b9283d620827b825ca06b1">cellR_</a>, numXCells, numYCells);</div>
<div class="line"><span class="lineno">  209</span>    </div>
<div class="line"><span class="lineno">  210</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 0) {</div>
<div class="line"><span class="lineno">  211</span>      std::cout &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  212</span>      std::cout &lt;&lt; std::setprecision(2) &lt;&lt; <span class="stringliteral">&quot;[buildCellMap] cell rmin: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa411a6f3c759da91bd9ddda4ba1decb9">cellr_</a></div>
<div class="line"><span class="lineno">  213</span>        &lt;&lt; <span class="stringliteral">&quot; cell rmax: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a1481095039b9283d620827b825ca06b1">cellR_</a> &lt;&lt; <span class="stringliteral">&quot; (gridMinX,gridMinY) = (&quot;</span></div>
<div class="line"><span class="lineno">  214</span>        &lt;&lt; gridMinX &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; gridMinY &lt;&lt; <span class="stringliteral">&quot;)&quot;</span></div>
<div class="line"><span class="lineno">  215</span>        &lt;&lt; <span class="stringliteral">&quot; (numXCells,numYCells) = (&quot;</span> &lt;&lt; numXCells &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; numYCells</div>
<div class="line"><span class="lineno">  216</span>        &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  217</span>    }</div>
<div class="line"><span class="lineno">  218</span>        </div>
<div class="line"><span class="lineno">  219</span>    <span class="comment">// copy cells lying within module boundaries to a module grid</span></div>
<div class="line"><span class="lineno">  220</span>    TListIter next(gridMap.GetBins());  <span class="comment">// a TH2Poly is a TList of TH2PolyBin</span></div>
<div class="line"><span class="lineno">  221</span>    TH2PolyBin* polyBin = 0;</div>
<div class="line"><span class="lineno">  222</span>    TGraph* poly = 0;   <span class="comment">// a polygon returned by TH2Poly is a TGraph</span></div>
<div class="line"><span class="lineno">  223</span>    <span class="keywordtype">int</span> ecalMapID = 0;  <span class="comment">// ecalMap cell IDs go from 0 to N-1, not equal to</span></div>
<div class="line"><span class="lineno">  224</span>    <span class="comment">// original grid cell ID.</span></div>
<div class="line"><span class="lineno">  225</span>    <span class="keywordflow">while</span> ((polyBin = (TH2PolyBin*)next())) {</div>
<div class="line"><span class="lineno">  226</span>      <span class="comment">// these bins are coming from the honeycomb</span></div>
<div class="line"><span class="lineno">  227</span>      <span class="comment">//  grid so we assume that they are regular</span></div>
<div class="line"><span class="lineno">  228</span>      <span class="comment">//  hexagons i.e. has 6 vertices</span></div>
<div class="line"><span class="lineno">  229</span>      poly = (TGraph*)polyBin-&gt;GetPolygon();</div>
<div class="line"><span class="lineno">  230</span>      </div>
<div class="line"><span class="lineno">  231</span>      <span class="comment">// decide whether to copy polygon to new map.</span></div>
<div class="line"><span class="lineno">  232</span>      <span class="comment">// use all vertices in case of cut-off edge polygons.</span></div>
<div class="line"><span class="lineno">  233</span>      <span class="keywordtype">int</span> numVerticesInside = 0;</div>
<div class="line"><span class="lineno">  234</span>      <span class="keywordtype">double</span> vertex_x[6], vertex_y[6];  <span class="comment">// vertices of the cell</span></div>
<div class="line"><span class="lineno">  235</span>      <span class="keywordtype">bool</span> isinside[6];                 <span class="comment">// which vertices are inside</span></div>
<div class="line"><span class="lineno">  236</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 2) std::cout &lt;&lt; <span class="stringliteral">&quot;[buildCellMap] Cell vertices&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  237</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; 6; i++) {</div>
<div class="line"><span class="lineno">  238</span>    poly-&gt;GetPoint(i, vertex_x[i], vertex_y[i]);</div>
<div class="line"><span class="lineno">  239</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 2) {</div>
<div class="line"><span class="lineno">  240</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;     vtx # &quot;</span> &lt;&lt; i &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  241</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;     vtx x,y &quot;</span> &lt;&lt; vertex_x[i] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; vertex_y[i]</div>
<div class="line"><span class="lineno">  242</span>            &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  243</span>    }</div>
<div class="line"><span class="lineno">  244</span>    isinside[i] = <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#a9d22369c3704814a3c52667b1373bbe8">isInside</a>(vertex_x[i] / <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a>, vertex_y[i] / <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a>);</div>
<div class="line"><span class="lineno">  245</span>    <span class="keywordflow">if</span> (isinside[i]) numVerticesInside++;</div>
<div class="line"><span class="lineno">  246</span>      }</div>
<div class="line"><span class="lineno">  247</span>      </div>
<div class="line"><span class="lineno">  248</span>      <span class="keywordflow">if</span> (numVerticesInside &gt; 1) {</div>
<div class="line"><span class="lineno">  249</span>    <span class="comment">// Include this cell if more than one of its vertices is inside the module</span></div>
<div class="line"><span class="lineno">  250</span>    <span class="comment">// hexagon</span></div>
<div class="line"><span class="lineno">  251</span>    <span class="keywordtype">double</span> actual_x[8], actual_y[8];</div>
<div class="line"><span class="lineno">  252</span>    <span class="keywordtype">int</span> num_vertices{0};</div>
<div class="line"><span class="lineno">  253</span>    <span class="keywordflow">if</span> (numVerticesInside &lt; 6) {</div>
<div class="line"><span class="lineno">  254</span>      <span class="comment">// This cell is stradling the edge of the module</span></div>
<div class="line"><span class="lineno">  255</span>      <span class="comment">// and is NOT cleanly cut by module edge</span></div>
<div class="line"><span class="lineno">  256</span>      </div>
<div class="line"><span class="lineno">  257</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 1) {</div>
<div class="line"><span class="lineno">  258</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;[buildCellMap] Polygon &quot;</span> &lt;&lt; ecalMapID</div>
<div class="line"><span class="lineno">  259</span>              &lt;&lt; <span class="stringliteral">&quot; has vertices poking out of module hexagon.&quot;</span></div>
<div class="line"><span class="lineno">  260</span>              &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  261</span>      }</div>
<div class="line"><span class="lineno">  262</span>      </div>
<div class="line"><span class="lineno">  263</span>      <span class="comment">// loop through vertices</span></div>
<div class="line"><span class="lineno">  264</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 6; i++) {</div>
<div class="line"><span class="lineno">  265</span>        <span class="keywordtype">int</span> up = i == 5 ? 0 : i + 1;</div>
<div class="line"><span class="lineno">  266</span>        <span class="keywordtype">int</span> dn = i == 0 ? 5 : i - 1;</div>
<div class="line"><span class="lineno">  267</span>        <span class="keywordflow">if</span> (isinside[i] and (not isinside[up] or not isinside[dn])) {</div>
<div class="line"><span class="lineno">  268</span>          <span class="comment">// this vertex is inside the module hexagon and is adjacent to a</span></div>
<div class="line"><span class="lineno">  269</span>          <span class="comment">// vertex outside</span></div>
<div class="line"><span class="lineno">  270</span>            <span class="comment">// ==&gt; project this vertex onto the nearest edge of the module</span></div>
<div class="line"><span class="lineno">  271</span>            <span class="comment">// hexagon</span></div>
<div class="line"><span class="lineno">  272</span>          </div>
<div class="line"><span class="lineno">  273</span>            <span class="comment">// determine which side of hexagon we should project onto</span></div>
<div class="line"><span class="lineno">  274</span>          <span class="keywordtype">double</span> edge_origin_x, edge_origin_y;</div>
<div class="line"><span class="lineno">  275</span>          <span class="keywordtype">double</span> edge_dest_x, edge_dest_y;</div>
<div class="line"><span class="lineno">  276</span>          <span class="keywordflow">if</span> (vertex_x[i] &lt; -<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a> / 2.) {</div>
<div class="line"><span class="lineno">  277</span>        <span class="comment">// sloped edge on negative-x side</span></div>
<div class="line"><span class="lineno">  278</span>        edge_origin_x = -1. * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a>;</div>
<div class="line"><span class="lineno">  279</span>        edge_origin_y = 0.;</div>
<div class="line"><span class="lineno">  280</span>        edge_dest_x = -0.5 * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a>;</div>
<div class="line"><span class="lineno">  281</span>        edge_dest_y = <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a>;</div>
<div class="line"><span class="lineno">  282</span>          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vertex_x[i] &gt; <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a> / 2.) {</div>
<div class="line"><span class="lineno">  283</span>        <span class="comment">// sloped edge on positive-x side</span></div>
<div class="line"><span class="lineno">  284</span>        edge_origin_x = 0.5 * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a>;</div>
<div class="line"><span class="lineno">  285</span>        edge_origin_y = <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a>;</div>
<div class="line"><span class="lineno">  286</span>        edge_dest_x = <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a>;</div>
<div class="line"><span class="lineno">  287</span>        edge_dest_y = 0.;</div>
<div class="line"><span class="lineno">  288</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  289</span>        <span class="comment">// flat edge at top</span></div>
<div class="line"><span class="lineno">  290</span>        edge_origin_x = 0.5 * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a>;</div>
<div class="line"><span class="lineno">  291</span>        edge_origin_y = <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a>;</div>
<div class="line"><span class="lineno">  292</span>        edge_dest_x = -0.5 * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a>;</div>
<div class="line"><span class="lineno">  293</span>        edge_dest_y = <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a>;</div>
<div class="line"><span class="lineno">  294</span>          }</div>
<div class="line"><span class="lineno">  295</span>          <span class="comment">// flip to bottom half if below x-axis</span></div>
<div class="line"><span class="lineno">  296</span>          <span class="keywordflow">if</span> (vertex_y[i] &lt; 0) {</div>
<div class="line"><span class="lineno">  297</span>        edge_dest_y *= -1;</div>
<div class="line"><span class="lineno">  298</span>        edge_origin_y *= -1;</div>
<div class="line"><span class="lineno">  299</span>          }</div>
<div class="line"><span class="lineno">  300</span>          </div>
<div class="line"><span class="lineno">  301</span>          <span class="comment">// get edge slope vector</span></div>
<div class="line"><span class="lineno">  302</span>          <span class="keywordtype">double</span> edge_slope_x = edge_dest_x - edge_origin_x;</div>
<div class="line"><span class="lineno">  303</span>          <span class="keywordtype">double</span> edge_slope_y = edge_dest_y - edge_origin_y;</div>
<div class="line"><span class="lineno">  304</span>          </div>
<div class="line"><span class="lineno">  305</span>          <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 2) {</div>
<div class="line"><span class="lineno">  306</span>              std::cout</div>
<div class="line"><span class="lineno">  307</span>        &lt;&lt; <span class="stringliteral">&quot;Vertex &quot;</span> &lt;&lt; i</div>
<div class="line"><span class="lineno">  308</span>        &lt;&lt; <span class="stringliteral">&quot; is inside and adjacent to a vertex outside the module.&quot;</span></div>
<div class="line"><span class="lineno">  309</span>        &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  310</span>              std::cout &lt;&lt; <span class="stringliteral">&quot;Working on edge with slope (&quot;</span> &lt;&lt; edge_slope_x &lt;&lt; <span class="stringliteral">&quot;,&quot;</span></div>
<div class="line"><span class="lineno">  311</span>                        &lt;&lt; edge_slope_y &lt;&lt; <span class="stringliteral">&quot;)&quot;</span></div>
<div class="line"><span class="lineno">  312</span>                        &lt;&lt; <span class="stringliteral">&quot; and origin (&quot;</span> &lt;&lt; edge_origin_x &lt;&lt; <span class="stringliteral">&quot;,&quot;</span></div>
<div class="line"><span class="lineno">  313</span>                        &lt;&lt; edge_origin_y &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  314</span>          }</div>
<div class="line"><span class="lineno">  315</span>          </div>
<div class="line"><span class="lineno">  316</span>          </div>
<div class="line"><span class="lineno">  317</span>          <span class="comment">// project vertices adjacent to the vertex outside the module onto</span></div>
<div class="line"><span class="lineno">  318</span>          <span class="comment">// the module edge</span></div>
<div class="line"><span class="lineno">  319</span>          <span class="keywordtype">double</span> projection_factor =</div>
<div class="line"><span class="lineno">  320</span>                ((vertex_x[i] - edge_origin_x) * edge_slope_x +</div>
<div class="line"><span class="lineno">  321</span>                 (vertex_y[i] - edge_origin_y) * edge_slope_y) /</div>
<div class="line"><span class="lineno">  322</span>                (edge_slope_x * edge_slope_x + edge_slope_y * edge_slope_y);</div>
<div class="line"><span class="lineno">  323</span>          </div>
<div class="line"><span class="lineno">  324</span>          <span class="keywordtype">double</span> proj_x = edge_origin_x + projection_factor * edge_slope_x;</div>
<div class="line"><span class="lineno">  325</span>          <span class="keywordtype">double</span> proj_y = edge_origin_y + projection_factor * edge_slope_y;</div>
<div class="line"><span class="lineno">  326</span>          </div>
<div class="line"><span class="lineno">  327</span>          <span class="keywordflow">if</span> (not isinside[up]) {</div>
<div class="line"><span class="lineno">  328</span>        <span class="comment">// the next point is outside</span></div>
<div class="line"><span class="lineno">  329</span>        actual_x[num_vertices] = vertex_x[i];</div>
<div class="line"><span class="lineno">  330</span>        actual_y[num_vertices] = vertex_y[i];</div>
<div class="line"><span class="lineno">  331</span>        actual_x[num_vertices + 1] = proj_x;</div>
<div class="line"><span class="lineno">  332</span>        actual_y[num_vertices + 1] = proj_y;</div>
<div class="line"><span class="lineno">  333</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  334</span>        <span class="comment">// the previous point was outside</span></div>
<div class="line"><span class="lineno">  335</span>        actual_x[num_vertices] = proj_x;</div>
<div class="line"><span class="lineno">  336</span>        actual_y[num_vertices] = proj_y;</div>
<div class="line"><span class="lineno">  337</span>        actual_x[num_vertices + 1] = vertex_x[i];</div>
<div class="line"><span class="lineno">  338</span>        actual_y[num_vertices + 1] = vertex_y[i];</div>
<div class="line"><span class="lineno">  339</span>          }</div>
<div class="line"><span class="lineno">  340</span>          num_vertices += 2;</div>
<div class="line"><span class="lineno">  341</span>          </div>
<div class="line"><span class="lineno">  342</span>          <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 2) {</div>
<div class="line"><span class="lineno">  343</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;New Vertex &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; : (&quot;</span> &lt;&lt; vertex_x[i] &lt;&lt; <span class="stringliteral">&quot;,&quot;</span></div>
<div class="line"><span class="lineno">  344</span>              &lt;&lt; vertex_y[i] &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  345</span>          }</div>
<div class="line"><span class="lineno">  346</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  347</span>          actual_x[num_vertices] = vertex_x[i];</div>
<div class="line"><span class="lineno">  348</span>          actual_y[num_vertices] = vertex_y[i];</div>
<div class="line"><span class="lineno">  349</span>          num_vertices++;</div>
<div class="line"><span class="lineno">  350</span>        }  <span class="comment">// should we project or not</span></div>
<div class="line"><span class="lineno">  351</span>      }    <span class="comment">// loop through vertices</span></div>
<div class="line"><span class="lineno">  352</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  353</span>      <span class="comment">// all 6 inside, just copy the vertices over</span></div>
<div class="line"><span class="lineno">  354</span>      num_vertices = 6;</div>
<div class="line"><span class="lineno">  355</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 6; i++) {</div>
<div class="line"><span class="lineno">  356</span>        actual_x[i] = vertex_x[i];</div>
<div class="line"><span class="lineno">  357</span>        actual_y[i] = vertex_y[i];</div>
<div class="line"><span class="lineno">  358</span>      }</div>
<div class="line"><span class="lineno">  359</span>    }  <span class="comment">// if numVerticesInside is less than 5</span></div>
<div class="line"><span class="lineno">  360</span>    </div>
<div class="line"><span class="lineno">  361</span>    <span class="comment">// ecalMap_ needs to have its own copy of the polygon TGraph</span></div>
<div class="line"><span class="lineno">  362</span>    <span class="comment">//  otherwise, we get a seg fault when EcalHexReadout is destructed</span></div>
<div class="line"><span class="lineno">  363</span>    <span class="comment">//  because the polygon that was copied over from gridMap is deleted at</span></div>
<div class="line"><span class="lineno">  364</span>    <span class="comment">//  the end of this function</span></div>
<div class="line"><span class="lineno">  365</span>    <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#af15a164a554997823d0a6ac5479dfab6">ecalMap_</a>.AddBin(num_vertices, actual_x, actual_y);</div>
<div class="line"><span class="lineno">  366</span>    </div>
<div class="line"><span class="lineno">  367</span>    </div>
<div class="line"><span class="lineno">  368</span>    <span class="keywordtype">double</span> x = (polyBin-&gt;GetXMax() + polyBin-&gt;GetXMin()) / 2.;</div>
<div class="line"><span class="lineno">  369</span>    <span class="keywordtype">double</span> y = (polyBin-&gt;GetYMax() + polyBin-&gt;GetYMin()) / 2.;</div>
<div class="line"><span class="lineno">  370</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 1) {</div>
<div class="line"><span class="lineno">  371</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;[buildCellMap] Copying poly with ID &quot;</span></div>
<div class="line"><span class="lineno">  372</span>            &lt;&lt; polyBin-&gt;GetBinNumber() &lt;&lt; <span class="stringliteral">&quot; and (x,y) (&quot;</span></div>
<div class="line"><span class="lineno">  373</span>            &lt;&lt; std::setprecision(2) &lt;&lt; x &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; y &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  374</span>    }</div>
<div class="line"><span class="lineno">  375</span>    <span class="comment">// save cell location as center of ENTIRE hexagon</span></div>
<div class="line"><span class="lineno">  376</span>    <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aca8458c4b257c3191e09ebd750034d2a">cellPositionMap_</a>[ecalMapID] = std::pair&lt;double, double&gt;(x, y);</div>
<div class="line"><span class="lineno">  377</span>    ecalMapID++;  <span class="comment">// incrememnt cell ID</span></div>
<div class="line"><span class="lineno">  378</span>      }               <span class="comment">// if num vertices inside is &gt; 1</span></div>
<div class="line"><span class="lineno">  379</span>    }                 <span class="comment">// loop over larger grid spanning module hexagon</span></div>
<div class="line"><span class="lineno">  380</span>  }</div>
<div class="line"><span class="lineno">  381</span>  </div>
<div class="line"><span class="lineno">  382</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 0) std::cout &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  383</span>  <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  384</span>}</div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a9d22369c3704814a3c52667b1373bbe8"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a9d22369c3704814a3c52667b1373bbe8">ldmx::EcalHexReadout::isInside</a></div><div class="ttdeci">bool isInside(double normX, double normY) const</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8cxx_source.html#l00499">EcalHexReadout.cxx:499</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_aca8458c4b257c3191e09ebd750034d2a"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#aca8458c4b257c3191e09ebd750034d2a">ldmx::EcalHexReadout::cellPositionMap_</a></div><div class="ttdeci">std::map&lt; int, std::pair&lt; double, double &gt; &gt; cellPositionMap_</div><div class="ttdoc">Position of cell centers relative to module (uses cell ID as key)</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00550">EcalHexReadout.h:550</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_af15a164a554997823d0a6ac5479dfab6"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#af15a164a554997823d0a6ac5479dfab6">ldmx::EcalHexReadout::ecalMap_</a></div><div class="ttdeci">TH2Poly ecalMap_</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00572">EcalHexReadout.h:572</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00550">cellPositionMap_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00516">cellr_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00522">cellR_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00528">cornersSideUp_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00572">ecalMap_</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00499">isInside()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00519">moduler_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00525">moduleR_</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00510">verbose_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00015">EcalHexReadout()</a>.</p>

</div>
</div>
<a id="a201ec824d6806ff70bdb716cc42cc70e" name="a201ec824d6806ff70bdb716cc42cc70e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a201ec824d6806ff70bdb716cc42cc70e">&#9670;&nbsp;</a></span>buildCellModuleMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ldmx::EcalHexReadout::buildCellModuleMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Constructs the positions of all the cells in a layer relative to the ecal center.</p>
<p >This uses the modulePostionMap_ and cellPositionMap_ to calculate the center of all cells relative to the ecal center.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">modulePositionMap_</td><td>map of module IDs to module centers relative to ecal </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cellPositionMap_</td><td>map of cell IDs to cell centers relative to module </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8cxx_source.html#l00386">386</a> of file <a class="el" href="EcalHexReadout_8cxx_source.html">EcalHexReadout.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  386</span>                                        {</div>
<div class="line"><span class="lineno">  387</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 0)</div>
<div class="line"><span class="lineno">  388</span>    std::cout &lt;&lt; std::endl</div>
<div class="line"><span class="lineno">  389</span>              &lt;&lt; <span class="stringliteral">&quot;[buildCellModuleMap] Building cellModule position map&quot;</span></div>
<div class="line"><span class="lineno">  390</span>              &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  391</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; module : <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a0d2ee17d6362bf3e84e08773e431c835">modulePositionMap_</a>) {</div>
<div class="line"><span class="lineno">  392</span>    <span class="keywordtype">int</span> moduleID = module.first;</div>
<div class="line"><span class="lineno">  393</span>    <span class="keywordtype">double</span> moduleX = module.second.first;</div>
<div class="line"><span class="lineno">  394</span>    <span class="keywordtype">double</span> moduleY = module.second.second;</div>
<div class="line"><span class="lineno">  395</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; cell : <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aca8458c4b257c3191e09ebd750034d2a">cellPositionMap_</a>) {</div>
<div class="line"><span class="lineno">  396</span>      <span class="keywordtype">int</span> cellID = cell.first;</div>
<div class="line"><span class="lineno">  397</span>      <span class="keywordtype">double</span> cellX = cell.second.first;</div>
<div class="line"><span class="lineno">  398</span>      <span class="keywordtype">double</span> cellY = cell.second.second;</div>
<div class="line"><span class="lineno">  399</span>      <span class="keywordtype">double</span> x = cellX + moduleX;</div>
<div class="line"><span class="lineno">  400</span>      <span class="keywordtype">double</span> y = cellY + moduleY;</div>
<div class="line"><span class="lineno">  401</span>      <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a55a984f644e63a53738a65695ed3234b">cellModulePositionMap_</a>[EcalID(0, moduleID, cellID)] =</div>
<div class="line"><span class="lineno">  402</span>          std::pair&lt;double, double&gt;(x, y);</div>
<div class="line"><span class="lineno">  403</span>    }</div>
<div class="line"><span class="lineno">  404</span>  }</div>
<div class="line"><span class="lineno">  405</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 0)</div>
<div class="line"><span class="lineno">  406</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;  contained &quot;</span> &lt;&lt; <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a55a984f644e63a53738a65695ed3234b">cellModulePositionMap_</a>.size() &lt;&lt; <span class="stringliteral">&quot; entries. &quot;</span></div>
<div class="line"><span class="lineno">  407</span>              &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  408</span>}</div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a0d2ee17d6362bf3e84e08773e431c835"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a0d2ee17d6362bf3e84e08773e431c835">ldmx::EcalHexReadout::modulePositionMap_</a></div><div class="ttdeci">std::map&lt; int, std::pair&lt; double, double &gt; &gt; modulePositionMap_</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00547">EcalHexReadout.h:547</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a55a984f644e63a53738a65695ed3234b"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a55a984f644e63a53738a65695ed3234b">ldmx::EcalHexReadout::cellModulePositionMap_</a></div><div class="ttdeci">std::map&lt; EcalID, std::pair&lt; double, double &gt; &gt; cellModulePositionMap_</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00554">EcalHexReadout.h:554</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00554">cellModulePositionMap_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00550">cellPositionMap_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00547">modulePositionMap_</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00510">verbose_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00015">EcalHexReadout()</a>.</p>

</div>
</div>
<a id="a05e3dc7a3e36411474327cc877cb0079" name="a05e3dc7a3e36411474327cc877cb0079"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05e3dc7a3e36411474327cc877cb0079">&#9670;&nbsp;</a></span>buildModuleMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ldmx::EcalHexReadout::buildModuleMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Constructs the positions of the seven modules (moduleID) relative to the ecal center</p>
<p >Sets modulePositionMap_ using the module IDs for keys and the centers of the module hexagons for values.</p>
<p >The module IDs are set in the ecal.gdml file and are replicated here.</p><ul>
<li>0 for center module</li>
<li>1 on top (12 o'clock)</li>
<li>clockwise till 6 at 11 o'clock</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">gap_</td><td>separation between module flat-sides </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">moduler_</td><td>center-to-flat module radius </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">modulePositionMap_</td><td>map of module IDs to module centers relative to ecal </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8cxx_source.html#l00050">50</a> of file <a class="el" href="EcalHexReadout_8cxx_source.html">EcalHexReadout.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   50</span>                                    {</div>
<div class="line"><span class="lineno">   51</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 0) {</div>
<div class="line"><span class="lineno">   52</span>    std::cout</div>
<div class="line"><span class="lineno">   53</span>        &lt;&lt; std::endl</div>
<div class="line"><span class="lineno">   54</span>        &lt;&lt; <span class="stringliteral">&quot;[buildModuleMap] Building module position map for module min r of &quot;</span></div>
<div class="line"><span class="lineno">   55</span>        &lt;&lt; <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a> &lt;&lt; <span class="stringliteral">&quot;    and gap of &quot;</span> &lt;&lt; <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa8283a781129c83d72b4b05b411b4906">gap_</a> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">   56</span>  }</div>
<div class="line"><span class="lineno">   57</span> </div>
<div class="line"><span class="lineno">   58</span>  <span class="keywordtype">double</span> C_PI = 3.14159265358979323846;  <span class="comment">// or TMath::Pi(), #define, atan(), ...</span></div>
<div class="line"><span class="lineno">   59</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a7879f9a66c5bf6b76a93b36a36619511">cornersSideUp_</a>) {</div>
<div class="line"><span class="lineno">   60</span>  <span class="comment">// module IDs are 0 for ecal center, 1 at right, and clockwise till 6</span></div>
<div class="line"><span class="lineno">   61</span>    <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a0d2ee17d6362bf3e84e08773e431c835">modulePositionMap_</a>[0] = std::pair&lt;double, double&gt;(0., 0.);</div>
<div class="line"><span class="lineno">   62</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">id</span> = 1; <span class="keywordtype">id</span> &lt; 7; <span class="keywordtype">id</span>++) {</div>
<div class="line"><span class="lineno">   63</span>      <span class="keywordtype">double</span> x = (2. * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a> + <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa8283a781129c83d72b4b05b411b4906">gap_</a>) * cos((<span class="keywordtype">id</span>-1) * (C_PI / 3.));</div>
<div class="line"><span class="lineno">   64</span>      <span class="keywordtype">double</span> y = - (2. * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a> + <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa8283a781129c83d72b4b05b411b4906">gap_</a>) * sin((<span class="keywordtype">id</span>-1) * (C_PI / 3.));</div>
<div class="line"><span class="lineno">   65</span>      <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a0d2ee17d6362bf3e84e08773e431c835">modulePositionMap_</a>[id] = std::pair&lt;double, double&gt;(x, y);</div>
<div class="line"><span class="lineno">   66</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 2)</div>
<div class="line"><span class="lineno">   67</span>    std::cout &lt;&lt; TString::Format(<span class="stringliteral">&quot;   id %d is at (%.2f, %.2f)&quot;</span>, <span class="keywordtype">id</span>, x, y)</div>
<div class="line"><span class="lineno">   68</span>          &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">   69</span>    }</div>
<div class="line"><span class="lineno">   70</span>  }</div>
<div class="line"><span class="lineno">   71</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   72</span>    <span class="comment">// module IDs are 0 for ecal center, 1 at right, and counterclockwise till 6 at 11 o&#39;clock</span></div>
<div class="line"><span class="lineno">   73</span>    <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a0d2ee17d6362bf3e84e08773e431c835">modulePositionMap_</a>[0] = std::pair&lt;double, double&gt;(0., 0.);</div>
<div class="line"><span class="lineno">   74</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">id</span> = 1; <span class="keywordtype">id</span> &lt; 7; <span class="keywordtype">id</span>++) {</div>
<div class="line"><span class="lineno">   75</span>      <span class="keywordtype">double</span> x = (2. * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a> + <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa8283a781129c83d72b4b05b411b4906">gap_</a>) * sin((<span class="keywordtype">id</span> - 1) * (C_PI / 3.));</div>
<div class="line"><span class="lineno">   76</span>      <span class="keywordtype">double</span> y = (2. * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a> + <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa8283a781129c83d72b4b05b411b4906">gap_</a>) * cos((<span class="keywordtype">id</span> - 1) * (C_PI / 3.));</div>
<div class="line"><span class="lineno">   77</span>      <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a0d2ee17d6362bf3e84e08773e431c835">modulePositionMap_</a>[id] = std::pair&lt;double, double&gt;(x, y);</div>
<div class="line"><span class="lineno">   78</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 2)</div>
<div class="line"><span class="lineno">   79</span>    std::cout &lt;&lt; TString::Format(<span class="stringliteral">&quot;   id %d is at (%.2f, %.2f)&quot;</span>, <span class="keywordtype">id</span>, x, y)</div>
<div class="line"><span class="lineno">   80</span>          &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">   81</span>    }</div>
<div class="line"><span class="lineno">   82</span>  }</div>
<div class="line"><span class="lineno">   83</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 0) std::cout &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">   84</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00528">cornersSideUp_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00513">gap_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00547">modulePositionMap_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00519">moduler_</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00510">verbose_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00015">EcalHexReadout()</a>.</p>

</div>
</div>
<a id="ac4aeb2b9831ad98110e4984f2c6f766b" name="ac4aeb2b9831ad98110e4984f2c6f766b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4aeb2b9831ad98110e4984f2c6f766b">&#9670;&nbsp;</a></span>buildNeighborMaps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ldmx::EcalHexReadout::buildNeighborMaps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Construts NNMap and NNNMap</p>
<p >Since this only occurs once during processing, we can be wasteful. We do a nested loop over the entire cellular position map and calculate neighbors by seeing which cells are within multiples of the cellular radius of each other.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cellModulePostionMap_</td><td>map of cells to cell centers relative to ecal </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">NNMap_</td><td>map of cell IDs to list of cell IDs that are its nearest neighbors </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">NNNMap_</td><td>map of cell IDs to list of cell IDs that are its next-to-nearest neighbors </td></tr>
  </table>
  </dd>
</dl>
<p >STRATEGY Neighbors may include from other modules. All this is precomputed. So we can be wasteful here. Gaps may be nonzero, so we simply apply an anulus requirement (r &lt; point &lt;= r+dr) using total x,y positions relative to the ecal center (cell+module positions). This makes the routine portable to future cell layouts. Note that the module centers already take into account a nonzero gap. The number of neighbors is not simple because: edges, and that module edges have cutoff cells. (NN) Center within [1*cellr_, 3*cellr_] (NNN) Center within [3*cellr_, 4.5*cellr_] Chosen b/c in ideal case, centers are at 2*cell_ (NN), and at 3*cellR_=3.46*cellr_ and 4*cellr_ (NNN).</p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8cxx_source.html#l00410">410</a> of file <a class="el" href="EcalHexReadout_8cxx_source.html">EcalHexReadout.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  410</span>                                       {</div>
<div class="line"><span class="lineno">  424</span>  <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a910aa8077878771e6b264ce5c804409c">NNMap_</a>.clear();</div>
<div class="line"><span class="lineno">  425</span>  <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a769854d7fb0c67df7e56f7a73c9bf207">NNNMap_</a>.clear();</div>
<div class="line"><span class="lineno">  426</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; centerChannel : <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a55a984f644e63a53738a65695ed3234b">cellModulePositionMap_</a>) {</div>
<div class="line"><span class="lineno">  427</span>    EcalID centerID = centerChannel.first;</div>
<div class="line"><span class="lineno">  428</span>    <span class="keywordtype">double</span> centerX = centerChannel.second.first;</div>
<div class="line"><span class="lineno">  429</span>    <span class="keywordtype">double</span> centerY = centerChannel.second.second;</div>
<div class="line"><span class="lineno">  430</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; probeChannel : <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a55a984f644e63a53738a65695ed3234b">cellModulePositionMap_</a>) {</div>
<div class="line"><span class="lineno">  431</span>      EcalID probeID = probeChannel.first;</div>
<div class="line"><span class="lineno">  432</span>      <span class="keywordtype">double</span> probeX = probeChannel.second.first;</div>
<div class="line"><span class="lineno">  433</span>      <span class="keywordtype">double</span> probeY = probeChannel.second.second;</div>
<div class="line"><span class="lineno">  434</span>      <span class="keywordtype">double</span> dist = sqrt((probeX - centerX) * (probeX - centerX) +</div>
<div class="line"><span class="lineno">  435</span>                         (probeY - centerY) * (probeY - centerY));</div>
<div class="line"><span class="lineno">  436</span>      <span class="keywordflow">if</span> (dist &gt; 1 * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa411a6f3c759da91bd9ddda4ba1decb9">cellr_</a> &amp;&amp; dist &lt;= 3. * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa411a6f3c759da91bd9ddda4ba1decb9">cellr_</a>) {</div>
<div class="line"><span class="lineno">  437</span>        <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a910aa8077878771e6b264ce5c804409c">NNMap_</a>[centerID].push_back(probeID);</div>
<div class="line"><span class="lineno">  438</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dist &gt; 3. * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa411a6f3c759da91bd9ddda4ba1decb9">cellr_</a> &amp;&amp; dist &lt;= 4.5 * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa411a6f3c759da91bd9ddda4ba1decb9">cellr_</a>) {</div>
<div class="line"><span class="lineno">  439</span>        <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a769854d7fb0c67df7e56f7a73c9bf207">NNNMap_</a>[centerID].push_back(probeID);</div>
<div class="line"><span class="lineno">  440</span>      }</div>
<div class="line"><span class="lineno">  441</span>    }</div>
<div class="line"><span class="lineno">  442</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 1)</div>
<div class="line"><span class="lineno">  443</span>      std::cout &lt;&lt; TString::Format(<span class="stringliteral">&quot;Found %d NN and %d NNN for cellModuleID &quot;</span>,</div>
<div class="line"><span class="lineno">  444</span>                                   <span class="keywordtype">int</span>(<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a910aa8077878771e6b264ce5c804409c">NNMap_</a>[centerID].size()),</div>
<div class="line"><span class="lineno">  445</span>                                   <span class="keywordtype">int</span>(<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a769854d7fb0c67df7e56f7a73c9bf207">NNNMap_</a>[centerID].size()))</div>
<div class="line"><span class="lineno">  446</span>                &lt;&lt; centerID</div>
<div class="line"><span class="lineno">  447</span>                &lt;&lt; TString::Format(<span class="stringliteral">&quot; with x,y (%.2f,%.2f)&quot;</span>, centerX, centerY)</div>
<div class="line"><span class="lineno">  448</span>                &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  449</span>  }</div>
<div class="line"><span class="lineno">  450</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 2) {</div>
<div class="line"><span class="lineno">  451</span>    <span class="keywordtype">double</span> specialX =</div>
<div class="line"><span class="lineno">  452</span>        0.5 * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a> - 0.5 * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa411a6f3c759da91bd9ddda4ba1decb9">cellr_</a>;  <span class="comment">// center of cell which is upper-right</span></div>
<div class="line"><span class="lineno">  453</span>                                        <span class="comment">// corner of center module</span></div>
<div class="line"><span class="lineno">  454</span>    <span class="keywordtype">double</span> specialY = <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a> - 0.5 * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a1481095039b9283d620827b825ca06b1">cellR_</a>;</div>
<div class="line"><span class="lineno">  455</span>    EcalID specialCellModuleID = <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#a5293b7b33e0eea806b797069a7ca1ffb">getCellModuleID</a>(specialX, specialY);</div>
<div class="line"><span class="lineno">  456</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;The neighbors of the bin in the upper-right corner of the &quot;</span></div>
<div class="line"><span class="lineno">  457</span>                 <span class="stringliteral">&quot;center module, with cellModuleID &quot;</span></div>
<div class="line"><span class="lineno">  458</span>              &lt;&lt; specialCellModuleID &lt;&lt; <span class="stringliteral">&quot; include &quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  459</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> centerNN : <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a910aa8077878771e6b264ce5c804409c">NNMap_</a>.at(specialCellModuleID)) {</div>
<div class="line"><span class="lineno">  460</span>      std::cout &lt;&lt; <span class="stringliteral">&quot; NN &quot;</span> &lt;&lt; centerNN</div>
<div class="line"><span class="lineno">  461</span>                &lt;&lt; TString::Format(<span class="stringliteral">&quot; (x,y) (%.2f, %.2f)&quot;</span>,</div>
<div class="line"><span class="lineno">  462</span>                                   <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#adccb623906b33ba70b3803f1bc33c3eb">getCellCenterAbsolute</a>(centerNN).first,</div>
<div class="line"><span class="lineno">  463</span>                                   <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#adccb623906b33ba70b3803f1bc33c3eb">getCellCenterAbsolute</a>(centerNN).second)</div>
<div class="line"><span class="lineno">  464</span>                &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  465</span>    }</div>
<div class="line"><span class="lineno">  466</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> centerNNN : <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a769854d7fb0c67df7e56f7a73c9bf207">NNNMap_</a>.at(specialCellModuleID)) {</div>
<div class="line"><span class="lineno">  467</span>      std::cout &lt;&lt; <span class="stringliteral">&quot; NNN &quot;</span> &lt;&lt; centerNNN</div>
<div class="line"><span class="lineno">  468</span>                &lt;&lt; TString::Format(<span class="stringliteral">&quot; (x,y) (%.2f, %.2f)&quot;</span>,</div>
<div class="line"><span class="lineno">  469</span>                                   <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#adccb623906b33ba70b3803f1bc33c3eb">getCellCenterAbsolute</a>(centerNNN).first,</div>
<div class="line"><span class="lineno">  470</span>                                   <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#adccb623906b33ba70b3803f1bc33c3eb">getCellCenterAbsolute</a>(centerNNN).second)</div>
<div class="line"><span class="lineno">  471</span>                &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  472</span>    }</div>
<div class="line"><span class="lineno">  473</span>    std::cout &lt;&lt; TString::Format(</div>
<div class="line"><span class="lineno">  474</span>                     <span class="stringliteral">&quot;This bin is a distance of %.2f away from a module edge. &quot;</span></div>
<div class="line"><span class="lineno">  475</span>                     <span class="stringliteral">&quot;Decision isEdge %d.&quot;</span>,</div>
<div class="line"><span class="lineno">  476</span>                     <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#aba0999d9c878a1ac5746d1b1f8cd7856">distanceToEdge</a>(specialCellModuleID),</div>
<div class="line"><span class="lineno">  477</span>                     <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#a7ae3be71cc7980920b64eccf59b0c27d">isEdgeCell</a>(specialCellModuleID))</div>
<div class="line"><span class="lineno">  478</span>              &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  479</span>  }</div>
<div class="line"><span class="lineno">  480</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 0) std::cout &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  481</span>  <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  482</span>}</div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a5293b7b33e0eea806b797069a7ca1ffb"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a5293b7b33e0eea806b797069a7ca1ffb">ldmx::EcalHexReadout::getCellModuleID</a></div><div class="ttdeci">EcalID getCellModuleID(double x, double y) const</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00232">EcalHexReadout.h:232</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a769854d7fb0c67df7e56f7a73c9bf207"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a769854d7fb0c67df7e56f7a73c9bf207">ldmx::EcalHexReadout::NNNMap_</a></div><div class="ttdeci">std::map&lt; EcalID, std::vector&lt; EcalID &gt; &gt; NNNMap_</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00562">EcalHexReadout.h:562</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a7ae3be71cc7980920b64eccf59b0c27d"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a7ae3be71cc7980920b64eccf59b0c27d">ldmx::EcalHexReadout::isEdgeCell</a></div><div class="ttdeci">bool isEdgeCell(EcalID cellModuleID) const</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00273">EcalHexReadout.h:273</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a910aa8077878771e6b264ce5c804409c"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a910aa8077878771e6b264ce5c804409c">ldmx::EcalHexReadout::NNMap_</a></div><div class="ttdeci">std::map&lt; EcalID, std::vector&lt; EcalID &gt; &gt; NNMap_</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00558">EcalHexReadout.h:558</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_aba0999d9c878a1ac5746d1b1f8cd7856"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#aba0999d9c878a1ac5746d1b1f8cd7856">ldmx::EcalHexReadout::distanceToEdge</a></div><div class="ttdeci">double distanceToEdge(EcalID cellModuleID) const</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8cxx_source.html#l00484">EcalHexReadout.cxx:484</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_adccb623906b33ba70b3803f1bc33c3eb"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#adccb623906b33ba70b3803f1bc33c3eb">ldmx::EcalHexReadout::getCellCenterAbsolute</a></div><div class="ttdeci">std::pair&lt; double, double &gt; getCellCenterAbsolute(EcalID cellModuleID) const</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00250">EcalHexReadout.h:250</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00554">cellModulePositionMap_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00516">cellr_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00522">cellR_</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00484">distanceToEdge()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00250">getCellCenterAbsolute()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00232">getCellModuleID()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00273">isEdgeCell()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00519">moduler_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00525">moduleR_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00558">NNMap_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00562">NNNMap_</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00510">verbose_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00015">EcalHexReadout()</a>.</p>

</div>
</div>
<a id="a7f0f75f6681b73e09cee4268710c55a5" name="a7f0f75f6681b73e09cee4268710c55a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f0f75f6681b73e09cee4268710c55a5">&#9670;&nbsp;</a></span>buildTriggerGroup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ldmx::EcalHexReadout::buildTriggerGroup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Constructs list of trigger groups.</p>
<p >The list of trigger groups uses the index as the cell ID and the value as the ID of the trigger group.</p>
<p >For the ECal, cells are grouped into 3x3 "squares" and integrated over for the trigger. This function builds a list for finding which trigger group a cell is in. </p>

</div>
</div>
<a id="a40554b3fa32d5527e0f7f6b59a02d6e7" name="a40554b3fa32d5527e0f7f6b59a02d6e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40554b3fa32d5527e0f7f6b59a02d6e7">&#9670;&nbsp;</a></span>debugMake()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classldmx_1_1EcalHexReadout.html">EcalHexReadout</a> * ldmx::EcalHexReadout::debugMake </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00398">398</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  398</span>                                                                       {</div>
<div class="line"><span class="lineno">  399</span>    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#a3a824ba5e30c2c4d07f088a5c562076d">EcalHexReadout</a>(p);</div>
<div class="line"><span class="lineno">  400</span>  }</div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a3a824ba5e30c2c4d07f088a5c562076d"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a3a824ba5e30c2c4d07f088a5c562076d">ldmx::EcalHexReadout::EcalHexReadout</a></div><div class="ttdeci">EcalHexReadout(const framework::config::Parameters &amp;ps)</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8cxx_source.html#l00015">EcalHexReadout.cxx:15</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aba0999d9c878a1ac5746d1b1f8cd7856" name="aba0999d9c878a1ac5746d1b1f8cd7856"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba0999d9c878a1ac5746d1b1f8cd7856">&#9670;&nbsp;</a></span>distanceToEdge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double ldmx::EcalHexReadout::distanceToEdge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classldmx_1_1EcalID.html">EcalID</a>&#160;</td>
          <td class="paramname"><em>cellModuleID</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Distance to module edge, and whether cell is on edge of module.</p>
<p >@TODO Use <a class="el" href="classldmx_1_1EcalHexReadout.html#aa7068dc315aed6511dd1446cea7ba1c2">getNN()</a>/getNNN() + <a class="el" href="classldmx_1_1EcalHexReadout.html#a7ae3be71cc7980920b64eccf59b0c27d">isEdgeCell()</a> to expand functionality.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cellModuleID</td><td>EcalId where all we care about is module and cell </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>distance to edge of the module </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8cxx_source.html#l00484">484</a> of file <a class="el" href="EcalHexReadout_8cxx_source.html">EcalHexReadout.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  484</span>                                                               {</div>
<div class="line"><span class="lineno">  485</span>  <span class="comment">// https://math.stackexchange.com/questions/1210572/find-the-distance-to-the-edge-of-a-hexagon</span></div>
<div class="line"><span class="lineno">  486</span>  <span class="keywordtype">int</span> cellID = cellModuleID.cell();</div>
<div class="line"><span class="lineno">  487</span>  std::pair&lt;double, double&gt; cellLocation = <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#a75975c787f7af86f8a4f112f27dd09da">getCellCenterRelative</a>(cellID);</div>
<div class="line"><span class="lineno">  488</span>  <span class="keywordtype">double</span> x = fabs(cellLocation.first);  <span class="comment">// bring to first quadrant</span></div>
<div class="line"><span class="lineno">  489</span>  <span class="keywordtype">double</span> y = fabs(cellLocation.second);</div>
<div class="line"><span class="lineno">  490</span>  <span class="keywordtype">double</span> r = sqrt(x * x + y * y);</div>
<div class="line"><span class="lineno">  491</span>  <span class="keywordtype">double</span> theta = (r &gt; 1E-3) ? fabs(std::atan(y / x)) : 0;</div>
<div class="line"><span class="lineno">  492</span>  <span class="keywordflow">if</span> (x &lt; <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a> / 2.)</div>
<div class="line"><span class="lineno">  493</span>    <span class="keywordflow">return</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a> - y);  <span class="comment">// closest line is straight vertical to top edge</span></div>
<div class="line"><span class="lineno">  494</span>  <span class="keywordtype">double</span> dist =</div>
<div class="line"><span class="lineno">  495</span>      sqrt(3.) * <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a> / (std::sin(theta) + sqrt(3.) * std::cos(theta));</div>
<div class="line"><span class="lineno">  496</span>  <span class="keywordflow">return</span> dist;</div>
<div class="line"><span class="lineno">  497</span>}</div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a75975c787f7af86f8a4f112f27dd09da"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a75975c787f7af86f8a4f112f27dd09da">ldmx::EcalHexReadout::getCellCenterRelative</a></div><div class="ttdeci">std::pair&lt; double, double &gt; getCellCenterRelative(int cellID) const</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00209">EcalHexReadout.h:209</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalID_8h_source.html#l00111">ldmx::EcalID::cell()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00209">getCellCenterRelative()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00519">moduler_</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00525">moduleR_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00410">buildNeighborMaps()</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00273">isEdgeCell()</a>.</p>

</div>
</div>
<a id="a9e179626757c116ccc8dc85e825fbf66" name="a9e179626757c116ccc8dc85e825fbf66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e179626757c116ccc8dc85e825fbf66">&#9670;&nbsp;</a></span>getCellAbsolutePosition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ldmx::EcalHexReadout::getCellAbsolutePosition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classldmx_1_1EcalID.html">EcalID</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>z</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get entire real space position for the cell with the input raw ID</p>
<p >Inputs x,y,z will be set to the calculated position</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classldmx_1_1EcalHexReadout.html#adccb623906b33ba70b3803f1bc33c3eb">getCellCenterAbsolute</a> and <a class="el" href="classldmx_1_1EcalHexReadout.html#a53eb62b5d96ad24072aff1a1752e0bad">getZPosition</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td><a class="el" href="classldmx_1_1EcalID.html" title="Extension of DetectorID providing access to ECal layers and cell numbers in a hex grid.">EcalID</a> for the cell we want the position of </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">x</td><td>set to x-coordinate of cell center </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">y</td><td>set to y-coordinate of cell center </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">z</td><td>set to z-coordinate of cell center </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00090">90</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   91</span>                                                {</div>
<div class="line"><span class="lineno">   92</span>    std::pair&lt;double, double&gt; xy =</div>
<div class="line"><span class="lineno">   93</span>        this-&gt;<a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#adccb623906b33ba70b3803f1bc33c3eb">getCellCenterAbsolute</a>(EcalID(0, <span class="keywordtype">id</span>.module(), <span class="keywordtype">id</span>.cell()));</div>
<div class="line"><span class="lineno">   94</span>    x = xy.first;</div>
<div class="line"><span class="lineno">   95</span>    y = xy.second;</div>
<div class="line"><span class="lineno">   96</span>    z = <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#a53eb62b5d96ad24072aff1a1752e0bad">getZPosition</a>(<span class="keywordtype">id</span>.layer());</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   99</span>  }</div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a53eb62b5d96ad24072aff1a1752e0bad"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a53eb62b5d96ad24072aff1a1752e0bad">ldmx::EcalHexReadout::getZPosition</a></div><div class="ttdeci">double getZPosition(int layer) const</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00107">EcalHexReadout.h:107</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00250">getCellCenterAbsolute()</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00107">getZPosition()</a>.</p>

<p class="reference">Referenced by <a class="el" href="DNNEcalVetoProcessor_8cxx_source.html#l00075">ecal::DNNEcalVetoProcessor::make_inputs()</a>, and <a class="el" href="EcalRecProducer_8cxx_source.html#l00036">ecal::EcalRecProducer::produce()</a>.</p>

</div>
</div>
<a id="adccb623906b33ba70b3803f1bc33c3eb" name="adccb623906b33ba70b3803f1bc33c3eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adccb623906b33ba70b3803f1bc33c3eb">&#9670;&nbsp;</a></span>getCellCenterAbsolute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; double, double &gt; ldmx::EcalHexReadout::getCellCenterAbsolute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classldmx_1_1EcalID.html">EcalID</a>&#160;</td>
          <td class="paramname"><em>cellModuleID</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get a cell center XY position relative to ecal center from a combined cellModuleID.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::out_of_range</td><td>if <a class="el" href="classldmx_1_1EcalID.html" title="Extension of DetectorID providing access to ECal layers and cell numbers in a hex grid.">EcalID</a> isn't created with valid cell or module IDs.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cellModuleID</td><td><a class="el" href="classldmx_1_1EcalID.html" title="Extension of DetectorID providing access to ECal layers and cell numbers in a hex grid.">EcalID</a> where all we care about is module and cell </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The XY position of the center of the cell. </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00250">250</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  250</span>                                                                           {</div>
<div class="line"><span class="lineno">  251</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a55a984f644e63a53738a65695ed3234b">cellModulePositionMap_</a>.at(</div>
<div class="line"><span class="lineno">  252</span>        EcalID(0, cellModuleID.module(), cellModuleID.cell()));</div>
<div class="line"><span class="lineno">  253</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalID_8h_source.html#l00111">ldmx::EcalID::cell()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00554">cellModulePositionMap_</a>, and <a class="el" href="EcalID_8h_source.html#l00087">ldmx::EcalID::module()</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00410">buildNeighborMaps()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00090">getCellAbsolutePosition()</a>, and <a class="el" href="EcalTriggerGeometry_8cxx_source.html#l00133">ecal::EcalTriggerGeometry::globalPosition()</a>.</p>

</div>
</div>
<a id="a75975c787f7af86f8a4f112f27dd09da" name="a75975c787f7af86f8a4f112f27dd09da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75975c787f7af86f8a4f112f27dd09da">&#9670;&nbsp;</a></span>getCellCenterRelative()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; double, double &gt; ldmx::EcalHexReadout::getCellCenterRelative </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cellID</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get a cell center XY position relative to module center from a cell ID.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>if invalid cell ID is input.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cellID</td><td>The cell ID. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The (x,y) position of the center of the cell. </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00209">209</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  209</span>                                                                  {</div>
<div class="line"><span class="lineno">  210</span>    <span class="comment">// this map search is probably just as fine as the TList search for the cell</span></div>
<div class="line"><span class="lineno">  211</span>    <span class="comment">// in ecalMap.</span></div>
<div class="line"><span class="lineno">  212</span>    <span class="comment">//   wonder why TH2Poly-&gt;GetBin(ID) doesn&#39;t exist. plus the map is useful by</span></div>
<div class="line"><span class="lineno">  213</span>    <span class="comment">//   itself.</span></div>
<div class="line"><span class="lineno">  214</span>    <span class="keyword">auto</span> search = <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aca8458c4b257c3191e09ebd750034d2a">cellPositionMap_</a>.find(cellID);</div>
<div class="line"><span class="lineno">  215</span>    <span class="keywordflow">if</span> (search == <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aca8458c4b257c3191e09ebd750034d2a">cellPositionMap_</a>.end()) {</div>
<div class="line"><span class="lineno">  216</span>      EXCEPTION_RAISE(<span class="stringliteral">&quot;InvalidCellID&quot;</span>,</div>
<div class="line"><span class="lineno">  217</span>                      <span class="stringliteral">&quot;Cell &quot;</span> + std::to_string(cellID) + <span class="stringliteral">&quot; is not valid.&quot;</span>);</div>
<div class="line"><span class="lineno">  218</span>    }</div>
<div class="line"><span class="lineno">  219</span>    <span class="keywordflow">return</span> search-&gt;second;</div>
<div class="line"><span class="lineno">  220</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00550">cellPositionMap_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00484">distanceToEdge()</a>, and <a class="el" href="EcalTriggerGeometry_8cxx_source.html#l00140">ecal::EcalTriggerGeometry::localPosition()</a>.</p>

</div>
</div>
<a id="a1b24c37eeb6ad660963022e4758b92c5" name="a1b24c37eeb6ad660963022e4758b92c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b24c37eeb6ad660963022e4758b92c5">&#9670;&nbsp;</a></span>getCellIDRelative()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ldmx::EcalHexReadout::getCellIDRelative </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get a cell ID from an XY position relative to module center.</p>
<p >This is where invalid (x,y) from external calls will end up failing and need error handling.</p>
<dl class="section note"><dt>Note</dt><dd>One option for assigning dead material is to do it here. If the input (x,y) relative to the module is close enough to the edge (for example), we could return a special cell ID (-1 for example) that signals that this hit is in a dead region.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Any X position [mm] </td></tr>
    <tr><td class="paramname">y</td><td>Any Y position [mm] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>local cell ID to the module </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00174">174</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  174</span>                                                  {</div>
<div class="line"><span class="lineno">  175</span>    <span class="keywordtype">int</span> bin = <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#af15a164a554997823d0a6ac5479dfab6">ecalMap_</a>.FindBin(x, y) -</div>
<div class="line"><span class="lineno">  176</span>              1;  <span class="comment">// NB FindBin indices starts from 1, our maps start from 0</span></div>
<div class="line"><span class="lineno">  177</span>    <span class="keywordflow">if</span> (bin &lt; 0) {</div>
<div class="line"><span class="lineno">  178</span>      TString error_msg = TString(</div>
<div class="line"><span class="lineno">  179</span>                              <span class="stringliteral">&quot;[EcalHexReadout::getCellIDRelative] Relative &quot;</span></div>
<div class="line"><span class="lineno">  180</span>                              <span class="stringliteral">&quot;coordinates are outside module hexagon!&quot;</span>) +</div>
<div class="line"><span class="lineno">  181</span>                          TString::Format(</div>
<div class="line"><span class="lineno">  182</span>                              <span class="stringliteral">&quot; Is the gap used by EcalHexReadout (%.2f mm) &quot;</span></div>
<div class="line"><span class="lineno">  183</span>                              <span class="stringliteral">&quot;and the minimum module radius (%.2f mm)&quot;</span>,</div>
<div class="line"><span class="lineno">  184</span>                              <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa8283a781129c83d72b4b05b411b4906">gap_</a>, <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a>) +</div>
<div class="line"><span class="lineno">  185</span>                          TString::Format(</div>
<div class="line"><span class="lineno">  186</span>                              <span class="stringliteral">&quot; the same as hexagon_gap and Hex_radius in &quot;</span></div>
<div class="line"><span class="lineno">  187</span>                              <span class="stringliteral">&quot;ecal.gdml? Received (x,y) = (%.2f,%.2f).&quot;</span>,</div>
<div class="line"><span class="lineno">  188</span>                              x, y);</div>
<div class="line"><span class="lineno">  189</span>      EXCEPTION_RAISE(<span class="stringliteral">&quot;InvalidArg&quot;</span>, error_msg.Data());</div>
<div class="line"><span class="lineno">  190</span>    }</div>
<div class="line"><span class="lineno">  191</span>    <span class="keywordflow">return</span> bin;</div>
<div class="line"><span class="lineno">  192</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00572">ecalMap_</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00513">gap_</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00519">moduler_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8h_source.html#l00232">getCellModuleID()</a>.</p>

</div>
</div>
<a id="aa2fdc7bf74be4dcaf22c2b9a38743889" name="aa2fdc7bf74be4dcaf22c2b9a38743889"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2fdc7bf74be4dcaf22c2b9a38743889">&#9670;&nbsp;</a></span>getCellMaxR()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ldmx::EcalHexReadout::getCellMaxR </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get the center-to-corner radius of the cell hexagons</p>
<dl class="section return"><dt>Returns</dt><dd>cell max radius [mm] </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00370">370</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  370</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a1481095039b9283d620827b825ca06b1">cellR_</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00522">cellR_</a>.</p>

</div>
</div>
<a id="a8dafb9299318aa1deb12c35d2b83d4e7" name="a8dafb9299318aa1deb12c35d2b83d4e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dafb9299318aa1deb12c35d2b83d4e7">&#9670;&nbsp;</a></span>getCellMinR()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ldmx::EcalHexReadout::getCellMinR </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get the center-to-flat radius of the cell hexagons</p>
<dl class="section return"><dt>Returns</dt><dd>cell min radius [mm] </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00363">363</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  363</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aa411a6f3c759da91bd9ddda4ba1decb9">cellr_</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00516">cellr_</a>.</p>

</div>
</div>
<a id="a5293b7b33e0eea806b797069a7ca1ffb" name="a5293b7b33e0eea806b797069a7ca1ffb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5293b7b33e0eea806b797069a7ca1ffb">&#9670;&nbsp;</a></span>getCellModuleID()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classldmx_1_1EcalID.html">EcalID</a> ldmx::EcalHexReadout::getCellModuleID </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get a combined cellModule ID from an XY position relative to ecal center.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classldmx_1_1EcalHexReadout.html#a1b24c37eeb6ad660963022e4758b92c5">getCellIDRelative</a> and <a class="el" href="classldmx_1_1EcalHexReadout.html#ab5b455834faccba33f2a2235b9888c81">getModuleID</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Any X position [mm] </td></tr>
    <tr><td class="paramname">y</td><td>Any Y position [mm] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an <a class="el" href="classldmx_1_1EcalID.html" title="Extension of DetectorID providing access to ECal layers and cell numbers in a hex grid.">EcalID</a> that has the correct module and cell information while layer is set to zero </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00232">232</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  232</span>                                                   {</div>
<div class="line"><span class="lineno">  233</span>    <span class="keywordtype">int</span> moduleID = <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#ab5b455834faccba33f2a2235b9888c81">getModuleID</a>(x, y);</div>
<div class="line"><span class="lineno">  234</span>    <span class="keywordtype">double</span> relX = x - <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a0d2ee17d6362bf3e84e08773e431c835">modulePositionMap_</a>.at(moduleID).first;</div>
<div class="line"><span class="lineno">  235</span>    <span class="keywordtype">double</span> relY = y - <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a0d2ee17d6362bf3e84e08773e431c835">modulePositionMap_</a>.at(moduleID).second;</div>
<div class="line"><span class="lineno">  236</span>    <span class="keywordtype">int</span> cellID = <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#a1b24c37eeb6ad660963022e4758b92c5">getCellIDRelative</a>(relX, relY);</div>
<div class="line"><span class="lineno">  237</span>    <span class="keywordflow">return</span> EcalID(0, moduleID, cellID);</div>
<div class="line"><span class="lineno">  238</span>  }</div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_a1b24c37eeb6ad660963022e4758b92c5"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#a1b24c37eeb6ad660963022e4758b92c5">ldmx::EcalHexReadout::getCellIDRelative</a></div><div class="ttdeci">int getCellIDRelative(double x, double y) const</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00174">EcalHexReadout.h:174</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_ab5b455834faccba33f2a2235b9888c81"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#ab5b455834faccba33f2a2235b9888c81">ldmx::EcalHexReadout::getModuleID</a></div><div class="ttdeci">int getModuleID(double x, double y) const</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00142">EcalHexReadout.h:142</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00174">getCellIDRelative()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00142">getModuleID()</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00547">modulePositionMap_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00410">buildNeighborMaps()</a>.</p>

</div>
</div>
<a id="af8f1143364f5204712cecc7a177f268c" name="af8f1143364f5204712cecc7a177f268c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8f1143364f5204712cecc7a177f268c">&#9670;&nbsp;</a></span>getCellModulePositionMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::map&lt; <a class="el" href="classldmx_1_1EcalID.html">EcalID</a>, std::pair&lt; double, double &gt; &gt; &amp; ldmx::EcalHexReadout::getCellModulePositionMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get a const reference to the full cell-module position map. </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00382">382</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  383</span>            {</div>
<div class="line"><span class="lineno">  384</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a55a984f644e63a53738a65695ed3234b">cellModulePositionMap_</a>;</div>
<div class="line"><span class="lineno">  385</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00554">cellModulePositionMap_</a>.</p>

</div>
</div>
<a id="a79b1285bdac4c5ccd141bb82bd5fc574" name="a79b1285bdac4c5ccd141bb82bd5fc574"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79b1285bdac4c5ccd141bb82bd5fc574">&#9670;&nbsp;</a></span>getCellPolyMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TH2Poly * ldmx::EcalHexReadout::getCellPolyMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get a reference to the TH2Poly used for Cell IDs.</p>
<dl class="section note"><dt>Note</dt><dd>This is only helpful in the use case where you want to print the cell ID &lt;-&gt; cell position map. DO NOT USE THIS OTHERWISE.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to member variable ecalMap_ </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00396">396</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  396</span>{ <span class="keywordflow">return</span> &amp;<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#af15a164a554997823d0a6ac5479dfab6">ecalMap_</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00572">ecalMap_</a>.</p>

</div>
</div>
<a id="a5b2c02174680827cf81180e8cc119367" name="a5b2c02174680827cf81180e8cc119367"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b2c02174680827cf81180e8cc119367">&#9670;&nbsp;</a></span>getCellPositionMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::map&lt; int, std::pair&lt; double, double &gt; &gt; &amp; ldmx::EcalHexReadout::getCellPositionMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get a const reference to the cell center position map. </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00375">375</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  375</span>                                                                         {</div>
<div class="line"><span class="lineno">  376</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aca8458c4b257c3191e09ebd750034d2a">cellPositionMap_</a>;</div>
<div class="line"><span class="lineno">  377</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00550">cellPositionMap_</a>.</p>

</div>
</div>
<a id="a49da1b34dc302998328380ddb7b6f12f" name="a49da1b34dc302998328380ddb7b6f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49da1b34dc302998328380ddb7b6f12f">&#9670;&nbsp;</a></span>getModuleCenter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; double, double &gt; ldmx::EcalHexReadout::getModuleCenter </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>moduleID</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get a module center position relative to the ecal center [mm]</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">moduleID</td><td>id of the module </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>(x,y) coordinate pair for center of module </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00124">124</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  124</span>                                                              {</div>
<div class="line"><span class="lineno">  125</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a0d2ee17d6362bf3e84e08773e431c835">modulePositionMap_</a>.at(moduleID);</div>
<div class="line"><span class="lineno">  126</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00547">modulePositionMap_</a>.</p>

</div>
</div>
<a id="ab5b455834faccba33f2a2235b9888c81" name="ab5b455834faccba33f2a2235b9888c81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5b455834faccba33f2a2235b9888c81">&#9670;&nbsp;</a></span>getModuleID()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ldmx::EcalHexReadout::getModuleID </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get a module ID from an XY position relative to the ecal center [mm]</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">x</td><td>x-coordinate for test position </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">y</td><td>y-coordinate for test position </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>module ID that coordinate (x,y) is in </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00142">142</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  142</span>                                            {</div>
<div class="line"><span class="lineno">  143</span>    <span class="keywordtype">int</span> bestID = -1;</div>
<div class="line"><span class="lineno">  144</span>    <span class="keywordtype">double</span> bestDist = 1E6;</div>
<div class="line"><span class="lineno">  145</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; module : <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a0d2ee17d6362bf3e84e08773e431c835">modulePositionMap_</a>) {</div>
<div class="line"><span class="lineno">  146</span>      <span class="keywordtype">int</span> mID = module.first;</div>
<div class="line"><span class="lineno">  147</span>      <span class="keywordtype">double</span> mX = module.second.first;</div>
<div class="line"><span class="lineno">  148</span>      <span class="keywordtype">double</span> mY = module.second.second;</div>
<div class="line"><span class="lineno">  149</span>      <span class="keywordtype">double</span> dist = sqrt((x - mX) * (x - mX) + (y - mY) * (y - mY));</div>
<div class="line"><span class="lineno">  150</span>      <span class="keywordflow">if</span> (dist &lt; <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a>) <span class="keywordflow">return</span> mID;</div>
<div class="line"><span class="lineno">  151</span>      <span class="keywordflow">if</span> (dist &lt; bestDist) {</div>
<div class="line"><span class="lineno">  152</span>        bestID = mID;</div>
<div class="line"><span class="lineno">  153</span>        bestDist = dist;</div>
<div class="line"><span class="lineno">  154</span>      }</div>
<div class="line"><span class="lineno">  155</span>    }</div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">return</span> bestID;</div>
<div class="line"><span class="lineno">  157</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00547">modulePositionMap_</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00519">moduler_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8h_source.html#l00232">getCellModuleID()</a>.</p>

</div>
</div>
<a id="a0ab7f40c71a70b5a0be206cf5f915075" name="a0ab7f40c71a70b5a0be206cf5f915075"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ab7f40c71a70b5a0be206cf5f915075">&#9670;&nbsp;</a></span>getModuleMaxR()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ldmx::EcalHexReadout::getModuleMaxR </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get the center-to-corner radius of the module hexagons</p>
<dl class="section return"><dt>Returns</dt><dd>module max radius [mm] </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00356">356</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  356</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#acbf95653cded8772299056d5ea557105">moduleR_</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00525">moduleR_</a>.</p>

</div>
</div>
<a id="a289142dae34069b42b7ffa372cf3f53d" name="a289142dae34069b42b7ffa372cf3f53d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a289142dae34069b42b7ffa372cf3f53d">&#9670;&nbsp;</a></span>getModuleMinR()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ldmx::EcalHexReadout::getModuleMinR </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get the center-to-flat radius of the module hexagons</p>
<dl class="section return"><dt>Returns</dt><dd>module min radius [mm] </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00349">349</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  349</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#abe8818450ac613540a84aca91c808fe8">moduler_</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00519">moduler_</a>.</p>

</div>
</div>
<a id="aa7068dc315aed6511dd1446cea7ba1c2" name="aa7068dc315aed6511dd1446cea7ba1c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7068dc315aed6511dd1446cea7ba1c2">&#9670;&nbsp;</a></span>getNN()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="classldmx_1_1EcalID.html">EcalID</a> &gt; ldmx::EcalHexReadout::getNN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classldmx_1_1EcalID.html">EcalID</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get the Nearest Neighbors of the input ID</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>id to get </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>list of <a class="el" href="classldmx_1_1EcalID.html" title="Extension of DetectorID providing access to ECal layers and cell numbers in a hex grid.">EcalID</a> that are the inputs nearest neighbors </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00297">297</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  297</span>                                           {</div>
<div class="line"><span class="lineno">  298</span>    <span class="keyword">auto</span> list = <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a910aa8077878771e6b264ce5c804409c">NNMap_</a>.at(EcalID(0, <span class="keywordtype">id</span>.module(), <span class="keywordtype">id</span>.cell()));</div>
<div class="line"><span class="lineno">  299</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; flat : list) <span class="keywordtype">id</span> = EcalID(<span class="keywordtype">id</span>.layer(), flat.module(), flat.cell());</div>
<div class="line"><span class="lineno">  300</span>    <span class="keywordflow">return</span> list;</div>
<div class="line"><span class="lineno">  301</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00558">NNMap_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8h_source.html#l00310">isNN()</a>.</p>

</div>
</div>
<a id="ae9141af468bdb73cc7031a980a30852b" name="ae9141af468bdb73cc7031a980a30852b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9141af468bdb73cc7031a980a30852b">&#9670;&nbsp;</a></span>getNNN()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="classldmx_1_1EcalID.html">EcalID</a> &gt; ldmx::EcalHexReadout::getNNN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classldmx_1_1EcalID.html">EcalID</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get the Next-to-Nearest Neighbors of the input ID</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>id to get </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>list of <a class="el" href="classldmx_1_1EcalID.html" title="Extension of DetectorID providing access to ECal layers and cell numbers in a hex grid.">EcalID</a> that are the inputs next-to-nearest neighbors </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00323">323</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  323</span>                                            {</div>
<div class="line"><span class="lineno">  324</span>    <span class="keyword">auto</span> list = <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a769854d7fb0c67df7e56f7a73c9bf207">NNNMap_</a>.at(EcalID(0, <span class="keywordtype">id</span>.module(), <span class="keywordtype">id</span>.cell()));</div>
<div class="line"><span class="lineno">  325</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; flat : list) <span class="keywordtype">id</span> = EcalID(<span class="keywordtype">id</span>.layer(), flat.module(), flat.cell());</div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordflow">return</span> list;</div>
<div class="line"><span class="lineno">  327</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00562">NNNMap_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8h_source.html#l00337">isNNN()</a>.</p>

</div>
</div>
<a id="ad91c22322de8e789fe3da50531c6e6b2" name="ad91c22322de8e789fe3da50531c6e6b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad91c22322de8e789fe3da50531c6e6b2">&#9670;&nbsp;</a></span>getNumCellsPerModule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ldmx::EcalHexReadout::getNumCellsPerModule </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get the number of cells in an ecal module</p>
<dl class="section return"><dt>Returns</dt><dd>number of cells in the ecal module </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00199">199</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  199</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#af15a164a554997823d0a6ac5479dfab6">ecalMap_</a>.GetNumberOfBins(); }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00572">ecalMap_</a>.</p>

</div>
</div>
<a id="ab99906ecb21a277c8a4e2d2120fcfd41" name="ab99906ecb21a277c8a4e2d2120fcfd41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab99906ecb21a277c8a4e2d2120fcfd41">&#9670;&nbsp;</a></span>getNumLayers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ldmx::EcalHexReadout::getNumLayers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get the number of layers in the Ecal Geometry</p>
<dl class="section return"><dt>Returns</dt><dd>number fo layers in geometry </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00116">116</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  116</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aabdd321c511fa6728a4d22a376eeae14">layerZPositions_</a>.size(); }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00543">layerZPositions_</a>.</p>

</div>
</div>
<a id="ac96616bb78ad72d92149cd438a2fb37c" name="ac96616bb78ad72d92149cd438a2fb37c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac96616bb78ad72d92149cd438a2fb37c">&#9670;&nbsp;</a></span>getNumModulesPerLayer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ldmx::EcalHexReadout::getNumModulesPerLayer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get the number of modules in the Ecal flower</p>
<dl class="section return"><dt>Returns</dt><dd>number of modules </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00133">133</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  133</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a0d2ee17d6362bf3e84e08773e431c835">modulePositionMap_</a>.size(); }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00547">modulePositionMap_</a>.</p>

</div>
</div>
<a id="a53eb62b5d96ad24072aff1a1752e0bad" name="a53eb62b5d96ad24072aff1a1752e0bad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53eb62b5d96ad24072aff1a1752e0bad">&#9670;&nbsp;</a></span>getZPosition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ldmx::EcalHexReadout::getZPosition </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>layer</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get the z-coordinate given the layer id</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">layer</td><td>int layer id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>z-coordinate of the input sensitive layer </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00107">107</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  107</span>                                       {</div>
<div class="line"><span class="lineno">  108</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a3d6cf2d6aa9ed38913936445e031fa0a">ecalFrontZ_</a> + <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aabdd321c511fa6728a4d22a376eeae14">layerZPositions_</a>.at(layer);</div>
<div class="line"><span class="lineno">  109</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00540">ecalFrontZ_</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00543">layerZPositions_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8h_source.html#l00090">getCellAbsolutePosition()</a>, and <a class="el" href="EcalVetoProcessor_8cxx_source.html#l00194">ecal::EcalVetoProcessor::produce()</a>.</p>

</div>
</div>
<a id="a7ae3be71cc7980920b64eccf59b0c27d" name="a7ae3be71cc7980920b64eccf59b0c27d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ae3be71cc7980920b64eccf59b0c27d">&#9670;&nbsp;</a></span>isEdgeCell()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ldmx::EcalHexReadout::isEdgeCell </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classldmx_1_1EcalID.html">EcalID</a>&#160;</td>
          <td class="paramname"><em>cellModuleID</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Check if input cell is on the edge of a module.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classldmx_1_1EcalHexReadout.html#aba0999d9c878a1ac5746d1b1f8cd7856">distanceToEdge</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cellModuleID</td><td>EcalId where all we care about is module and cell return true if distance to edge is less than max cell radius </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00273">273</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  273</span>                                             {</div>
<div class="line"><span class="lineno">  274</span>    <span class="keywordflow">return</span> (<a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#aba0999d9c878a1ac5746d1b1f8cd7856">distanceToEdge</a>(cellModuleID) &lt; <a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#a1481095039b9283d620827b825ca06b1">cellR_</a>);</div>
<div class="line"><span class="lineno">  275</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00522">cellR_</a>, and <a class="el" href="EcalHexReadout_8cxx_source.html#l00484">distanceToEdge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00410">buildNeighborMaps()</a>.</p>

</div>
</div>
<a id="a9d22369c3704814a3c52667b1373bbe8" name="a9d22369c3704814a3c52667b1373bbe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d22369c3704814a3c52667b1373bbe8">&#9670;&nbsp;</a></span>isInside()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ldmx::EcalHexReadout::isInside </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>normX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>normY</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Determines if point (x,y), already normed to max hexagon radius, lies within a hexagon. Corners are (1,0) and (0.5,sqrt(3)/2). Uses "&lt;", not "&lt;=".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">normX</td><td>X-coordinate relative to module hexagon divided by maximum hexagon radius </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">normY</td><td>Y-coordinate relative to module hexagon divided by maximum hexagon radius </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if (normX,normY) is within the hexagon centered at the origin with maximum radius 1. </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8cxx_source.html#l00499">499</a> of file <a class="el" href="EcalHexReadout_8cxx_source.html">EcalHexReadout.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  499</span>                                                              {</div>
<div class="line"><span class="lineno">  500</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 2)</div>
<div class="line"><span class="lineno">  501</span>    std::cout &lt;&lt; TString::Format(</div>
<div class="line"><span class="lineno">  502</span>                     <span class="stringliteral">&quot;[isInside] Checking if normXY=(%.2f,%.2f) is inside.&quot;</span>,</div>
<div class="line"><span class="lineno">  503</span>                     normX, normY)</div>
<div class="line"><span class="lineno">  504</span>              &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  505</span>  normX = fabs(normX), normY = fabs(normY);</div>
<div class="line"><span class="lineno">  506</span>  <span class="keywordtype">double</span> xvec = -1, yvec = -1. / sqrt(3);</div>
<div class="line"><span class="lineno">  507</span>  <span class="keywordtype">double</span> xref = 0.5, yref = sqrt(3) / 2.;</div>
<div class="line"><span class="lineno">  508</span>  <span class="keywordflow">if</span> ((normX &gt; 1.) || (normY &gt; yref)) {</div>
<div class="line"><span class="lineno">  509</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 2)</div>
<div class="line"><span class="lineno">  510</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;[isInside]   they are outside quadrant.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  511</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  512</span>  }</div>
<div class="line"><span class="lineno">  513</span>  <span class="keywordtype">double</span> dotProd = (xvec * (normX - xref) + yvec * (normY - yref));</div>
<div class="line"><span class="lineno">  514</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classldmx_1_1EcalHexReadout.html#aeac683d8c4aa534f55488f2dbff4d511">verbose_</a> &gt; 2)</div>
<div class="line"><span class="lineno">  515</span>    std::cout &lt;&lt; TString::Format(</div>
<div class="line"><span class="lineno">  516</span>                     <span class="stringliteral">&quot;[isInside] they are inside quadrant. Dot product (&gt;0 is &quot;</span></div>
<div class="line"><span class="lineno">  517</span>                     <span class="stringliteral">&quot;inside): %.2f &quot;</span>,</div>
<div class="line"><span class="lineno">  518</span>                     dotProd)</div>
<div class="line"><span class="lineno">  519</span>              &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  520</span>  <span class="keywordflow">return</span> (dotProd &gt; 0.);</div>
<div class="line"><span class="lineno">  521</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00510">verbose_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00086">buildCellMap()</a>.</p>

</div>
</div>
<a id="a1d10081ac0818753db568097c765a4d8" name="a1d10081ac0818753db568097c765a4d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d10081ac0818753db568097c765a4d8">&#9670;&nbsp;</a></span>isNN()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ldmx::EcalHexReadout::isNN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classldmx_1_1EcalID.html">EcalID</a>&#160;</td>
          <td class="paramname"><em>centroid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classldmx_1_1EcalID.html">EcalID</a>&#160;</td>
          <td class="paramname"><em>probe</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Check if the probe id is one of the nearest neightbors of the centroid id</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">probe</td><td>id to check if it is nearest neighbor </td></tr>
    <tr><td class="paramname">centroid</td><td>id that is center of neighbors </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if probe ID is a nearest neighbor of the centroid </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00310">310</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  310</span>                                                 {</div>
<div class="line"><span class="lineno">  311</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; <span class="keywordtype">id</span> : <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#aa7068dc315aed6511dd1446cea7ba1c2">getNN</a>(centroid)) {</div>
<div class="line"><span class="lineno">  312</span>      <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == probe) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  313</span>    }</div>
<div class="line"><span class="lineno">  314</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  315</span>  }</div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_aa7068dc315aed6511dd1446cea7ba1c2"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#aa7068dc315aed6511dd1446cea7ba1c2">ldmx::EcalHexReadout::getNN</a></div><div class="ttdeci">std::vector&lt; EcalID &gt; getNN(EcalID id) const</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00297">EcalHexReadout.h:297</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00297">getNN()</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalVetoProcessor_8h_source.html#l00064">ecal::EcalVetoProcessor::isInShowerInnerRing()</a>.</p>

</div>
</div>
<a id="a21bde7564d75c3b1b2fb83ffdf5ac1cd" name="a21bde7564d75c3b1b2fb83ffdf5ac1cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21bde7564d75c3b1b2fb83ffdf5ac1cd">&#9670;&nbsp;</a></span>isNNN()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ldmx::EcalHexReadout::isNNN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classldmx_1_1EcalID.html">EcalID</a>&#160;</td>
          <td class="paramname"><em>centroid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classldmx_1_1EcalID.html">EcalID</a>&#160;</td>
          <td class="paramname"><em>probe</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Check if the probe id is one of the next-to-nearest neightbors of the centroid id</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">probe</td><td>id to check if it is a next-to-nearest neighbor </td></tr>
    <tr><td class="paramname">centroid</td><td>id that is center of neighbors </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if probe ID is a next-to-nearest neighbor of the centroid </dd></dl>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00337">337</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  337</span>                                                  {</div>
<div class="line"><span class="lineno">  338</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; <span class="keywordtype">id</span> : <a class="code hl_function" href="classldmx_1_1EcalHexReadout.html#ae9141af468bdb73cc7031a980a30852b">getNNN</a>(centroid)) {</div>
<div class="line"><span class="lineno">  339</span>      <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == probe) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  340</span>    }</div>
<div class="line"><span class="lineno">  341</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  342</span>  }</div>
<div class="ttc" id="aclassldmx_1_1EcalHexReadout_html_ae9141af468bdb73cc7031a980a30852b"><div class="ttname"><a href="classldmx_1_1EcalHexReadout.html#ae9141af468bdb73cc7031a980a30852b">ldmx::EcalHexReadout::getNNN</a></div><div class="ttdeci">std::vector&lt; EcalID &gt; getNNN(EcalID id) const</div><div class="ttdef"><b>Definition:</b> <a href="EcalHexReadout_8h_source.html#l00323">EcalHexReadout.h:323</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalHexReadout_8h_source.html#l00323">getNNN()</a>.</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a3fd818642a78fd5349c18c901426f594" name="a3fd818642a78fd5349c18c901426f594"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fd818642a78fd5349c18c901426f594">&#9670;&nbsp;</a></span>ecal::EcalGeometryProvider</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classecal_1_1EcalGeometryProvider.html">ecal::EcalGeometryProvider</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00409">409</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a55a984f644e63a53738a65695ed3234b" name="a55a984f644e63a53738a65695ed3234b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55a984f644e63a53738a65695ed3234b">&#9670;&nbsp;</a></span>cellModulePositionMap_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classldmx_1_1EcalID.html">EcalID</a>, std::pair&lt;double, double&gt; &gt; ldmx::EcalHexReadout::cellModulePositionMap_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Position of cell centers relative to world geometry (uses ID with real cell and module and layer as zero for key) </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00554">554</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00386">buildCellModuleMap()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00410">buildNeighborMaps()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00250">getCellCenterAbsolute()</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00382">getCellModulePositionMap()</a>.</p>

</div>
</div>
<a id="aca8458c4b257c3191e09ebd750034d2a" name="aca8458c4b257c3191e09ebd750034d2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca8458c4b257c3191e09ebd750034d2a">&#9670;&nbsp;</a></span>cellPositionMap_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int, std::pair&lt;double, double&gt; &gt; ldmx::EcalHexReadout::cellPositionMap_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Position of cell centers relative to module (uses cell ID as key) </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00550">550</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00086">buildCellMap()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00386">buildCellModuleMap()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00209">getCellCenterRelative()</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00375">getCellPositionMap()</a>.</p>

</div>
</div>
<a id="aa411a6f3c759da91bd9ddda4ba1decb9" name="aa411a6f3c759da91bd9ddda4ba1decb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa411a6f3c759da91bd9ddda4ba1decb9">&#9670;&nbsp;</a></span>cellr_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ldmx::EcalHexReadout::cellr_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Center-to-Flat Radius of cell hexagon [mm]. </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00516">516</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00086">buildCellMap()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00410">buildNeighborMaps()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00015">EcalHexReadout()</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00363">getCellMinR()</a>.</p>

</div>
</div>
<a id="a1481095039b9283d620827b825ca06b1" name="a1481095039b9283d620827b825ca06b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1481095039b9283d620827b825ca06b1">&#9670;&nbsp;</a></span>cellR_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ldmx::EcalHexReadout::cellR_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Center-to-Corner Radius of cell hexagon [mm]. </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00522">522</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00086">buildCellMap()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00410">buildNeighborMaps()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00015">EcalHexReadout()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00370">getCellMaxR()</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00273">isEdgeCell()</a>.</p>

</div>
</div>
<a id="a35f253930e8da972d8e1df09edb1e34c" name="a35f253930e8da972d8e1df09edb1e34c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35f253930e8da972d8e1df09edb1e34c">&#9670;&nbsp;</a></span>CONDITIONS_OBJECT_NAME</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr const char* ldmx::EcalHexReadout::CONDITIONS_OBJECT_NAME {&quot;EcalHexReadout&quot;}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00069">69</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

</div>
</div>
<a id="a7879f9a66c5bf6b76a93b36a36619511" name="a7879f9a66c5bf6b76a93b36a36619511"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7879f9a66c5bf6b76a93b36a36619511">&#9670;&nbsp;</a></span>cornersSideUp_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ldmx::EcalHexReadout::cornersSideUp_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>indicator of geometry orientation &ndash; if true, flower shape's corners side (ie: side with two modules) is at the top </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00528">528</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00086">buildCellMap()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00050">buildModuleMap()</a>, and <a class="el" href="EcalHexReadout_8cxx_source.html#l00015">EcalHexReadout()</a>.</p>

</div>
</div>
<a id="a3d6cf2d6aa9ed38913936445e031fa0a" name="a3d6cf2d6aa9ed38913936445e031fa0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d6cf2d6aa9ed38913936445e031fa0a">&#9670;&nbsp;</a></span>ecalFrontZ_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ldmx::EcalHexReadout::ecalFrontZ_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Front of ECal relative to world geometry [mm]. </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00540">540</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00015">EcalHexReadout()</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00107">getZPosition()</a>.</p>

</div>
</div>
<a id="af15a164a554997823d0a6ac5479dfab6" name="af15a164a554997823d0a6ac5479dfab6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af15a164a554997823d0a6ac5479dfab6">&#9670;&nbsp;</a></span>ecalMap_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TH2Poly ldmx::EcalHexReadout::ecalMap_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Honeycomb Binning from ROOT</p>
<p >Needs to be mutable because ROOT doesn't have good const handling </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00572">572</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00086">buildCellMap()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00174">getCellIDRelative()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00396">getCellPolyMap()</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00199">getNumCellsPerModule()</a>.</p>

</div>
</div>
<a id="aa8283a781129c83d72b4b05b411b4906" name="aa8283a781129c83d72b4b05b411b4906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8283a781129c83d72b4b05b411b4906">&#9670;&nbsp;</a></span>gap_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ldmx::EcalHexReadout::gap_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gap between module flat sides [mm]. </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00513">513</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00050">buildModuleMap()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00015">EcalHexReadout()</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00174">getCellIDRelative()</a>.</p>

</div>
</div>
<a id="aabdd321c511fa6728a4d22a376eeae14" name="aabdd321c511fa6728a4d22a376eeae14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabdd321c511fa6728a4d22a376eeae14">&#9670;&nbsp;</a></span>layerZPositions_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;double&gt; ldmx::EcalHexReadout::layerZPositions_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The layer Z postions are with respect to the front of the ECal [mm]. </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00543">543</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00015">EcalHexReadout()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00116">getNumLayers()</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00107">getZPosition()</a>.</p>

</div>
</div>
<a id="a0d2ee17d6362bf3e84e08773e431c835" name="a0d2ee17d6362bf3e84e08773e431c835"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d2ee17d6362bf3e84e08773e431c835">&#9670;&nbsp;</a></span>modulePositionMap_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int, std::pair&lt;double, double&gt; &gt; ldmx::EcalHexReadout::modulePositionMap_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Postion of module centers relative to world geometry (uses module ID as key) </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00547">547</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00386">buildCellModuleMap()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00050">buildModuleMap()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00232">getCellModuleID()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00124">getModuleCenter()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00142">getModuleID()</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00133">getNumModulesPerLayer()</a>.</p>

</div>
</div>
<a id="abe8818450ac613540a84aca91c808fe8" name="abe8818450ac613540a84aca91c808fe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe8818450ac613540a84aca91c808fe8">&#9670;&nbsp;</a></span>moduler_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ldmx::EcalHexReadout::moduler_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Center-to-Flat Radius of module hexagon [mm]. </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00519">519</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00086">buildCellMap()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00050">buildModuleMap()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00410">buildNeighborMaps()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00484">distanceToEdge()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00015">EcalHexReadout()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00174">getCellIDRelative()</a>, <a class="el" href="EcalHexReadout_8h_source.html#l00142">getModuleID()</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00349">getModuleMinR()</a>.</p>

</div>
</div>
<a id="acbf95653cded8772299056d5ea557105" name="acbf95653cded8772299056d5ea557105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbf95653cded8772299056d5ea557105">&#9670;&nbsp;</a></span>moduleR_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ldmx::EcalHexReadout::moduleR_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Center-to-Corner Radius of module hexagon [mm]. </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00525">525</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00086">buildCellMap()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00410">buildNeighborMaps()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00484">distanceToEdge()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00015">EcalHexReadout()</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00356">getModuleMaxR()</a>.</p>

</div>
</div>
<a id="a1bbd845808c2836b6c1530c12b4e0fa4" name="a1bbd845808c2836b6c1530c12b4e0fa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bbd845808c2836b6c1530c12b4e0fa4">&#9670;&nbsp;</a></span>nCellRHeight_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ldmx::EcalHexReadout::nCellRHeight_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Number of cell center-to-corner radii (one side of the cell) from the bottom to the top of the module</p>
<p >Could be fractional depending on how many fractions of a radii are spanning between the center of the top/bottom cell row and the edge of the module </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00537">537</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00015">EcalHexReadout()</a>.</p>

</div>
</div>
<a id="a910aa8077878771e6b264ce5c804409c" name="a910aa8077878771e6b264ce5c804409c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a910aa8077878771e6b264ce5c804409c">&#9670;&nbsp;</a></span>NNMap_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classldmx_1_1EcalID.html">EcalID</a>, std::vector&lt;<a class="el" href="classldmx_1_1EcalID.html">EcalID</a>&gt; &gt; ldmx::EcalHexReadout::NNMap_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Map of cell ID to neighboring cells (uses ID with real cell and module and layer as zero for key) </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00558">558</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00410">buildNeighborMaps()</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00297">getNN()</a>.</p>

</div>
</div>
<a id="a769854d7fb0c67df7e56f7a73c9bf207" name="a769854d7fb0c67df7e56f7a73c9bf207"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a769854d7fb0c67df7e56f7a73c9bf207">&#9670;&nbsp;</a></span>NNNMap_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classldmx_1_1EcalID.html">EcalID</a>, std::vector&lt;<a class="el" href="classldmx_1_1EcalID.html">EcalID</a>&gt; &gt; ldmx::EcalHexReadout::NNNMap_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Map of cell ID to neighbors of neighbor cells (uses ID with real cell and module and layer as zero for key) </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00562">562</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00410">buildNeighborMaps()</a>, and <a class="el" href="EcalHexReadout_8h_source.html#l00323">getNNN()</a>.</p>

</div>
</div>
<a id="aefa08ab9e0e15d4ff4283b0ff4d416ca" name="aefa08ab9e0e15d4ff4283b0ff4d416ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefa08ab9e0e15d4ff4283b0ff4d416ca">&#9670;&nbsp;</a></span>triggerGroups_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; ldmx::EcalHexReadout::triggerGroups_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>List of Trigger Group IDs (index is cell ID) </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00565">565</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

</div>
</div>
<a id="aeac683d8c4aa534f55488f2dbff4d511" name="aeac683d8c4aa534f55488f2dbff4d511"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeac683d8c4aa534f55488f2dbff4d511">&#9670;&nbsp;</a></span>verbose_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ldmx::EcalHexReadout::verbose_ {2}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>verbosity, not configurable but helpful if developing </p>

<p class="definition">Definition at line <a class="el" href="EcalHexReadout_8h_source.html#l00510">510</a> of file <a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalHexReadout_8cxx_source.html#l00086">buildCellMap()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00386">buildCellModuleMap()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00050">buildModuleMap()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00410">buildNeighborMaps()</a>, <a class="el" href="EcalHexReadout_8cxx_source.html#l00015">EcalHexReadout()</a>, and <a class="el" href="EcalHexReadout_8cxx_source.html#l00499">isInside()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>DetDescr/include/DetDescr/<a class="el" href="EcalHexReadout_8h_source.html">EcalHexReadout.h</a></li>
<li>DetDescr/src/DetDescr/<a class="el" href="EcalHexReadout_8cxx_source.html">EcalHexReadout.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
		<script src="custom.js"></script>
	</body>
</html>