<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.8.20"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>LDMX Software: ldmx::EventFile Class Reference</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">LDMX Software
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part --><!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceldmx.html">ldmx</a></li><li class="navelem"><a class="el" href="classldmx_1_1EventFile.html">EventFile</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classldmx_1_1EventFile-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ldmx::EventFile Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Manages a file of events.  
 <a href="classldmx_1_1EventFile.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="EventFile_8h_source.html">EventFile.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad298cfe9ed3d660099e0699e530a737f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#ad298cfe9ed3d660099e0699e530a737f">EventFile</a> (const std::string &amp;filename, <a class="el" href="classldmx_1_1EventFile.html">EventFile</a> *parent, bool isOutputFile, bool isSingleOutput, int compressionSetting)</td></tr>
<tr class="separator:ad298cfe9ed3d660099e0699e530a737f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81df8d054e056b8340a20b9b4305cea2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#a81df8d054e056b8340a20b9b4305cea2">EventFile</a> (const std::string &amp;fileName)</td></tr>
<tr class="separator:a81df8d054e056b8340a20b9b4305cea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a925f7593c7b66a60e68dfbb447b56ece"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#a925f7593c7b66a60e68dfbb447b56ece">EventFile</a> (const std::string &amp;fileName, int compressionSetting)</td></tr>
<tr class="separator:a925f7593c7b66a60e68dfbb447b56ece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade104d100018f651272699f3847e62b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#ade104d100018f651272699f3847e62b2">EventFile</a> (const std::string &amp;fileName, <a class="el" href="classldmx_1_1EventFile.html">EventFile</a> *parent, bool isSingleOutput=false, int compressionSetting=9)</td></tr>
<tr class="separator:ade104d100018f651272699f3847e62b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37a46f5daa4608e9525afd49871c92e1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#a37a46f5daa4608e9525afd49871c92e1">~EventFile</a> ()=default</td></tr>
<tr class="separator:a37a46f5daa4608e9525afd49871c92e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9999632efb2af6d0e720c8070bd9e384"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#a9999632efb2af6d0e720c8070bd9e384">addDrop</a> (const std::string &amp;rule)</td></tr>
<tr class="separator:a9999632efb2af6d0e720c8070bd9e384"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00f574b6f84af0822aae1e14b595a7d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#a00f574b6f84af0822aae1e14b595a7d9">setupEvent</a> (<a class="el" href="classldmx_1_1Event.html">Event</a> *evt)</td></tr>
<tr class="separator:a00f574b6f84af0822aae1e14b595a7d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb30b4cd94a2bb6fd464b234446e2399"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#acb30b4cd94a2bb6fd464b234446e2399">updateParent</a> (<a class="el" href="classldmx_1_1EventFile.html">EventFile</a> *parent)</td></tr>
<tr class="separator:acb30b4cd94a2bb6fd464b234446e2399"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd9653f814baa7bb2e07ba5398e9396e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classldmx_1_1Event.html">Event</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#afd9653f814baa7bb2e07ba5398e9396e">getEvent</a> ()</td></tr>
<tr class="separator:afd9653f814baa7bb2e07ba5398e9396e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a700fc26f0395c03733f7dab36f4b1918"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#a700fc26f0395c03733f7dab36f4b1918">nextEvent</a> (bool storeCurrentEvent=true)</td></tr>
<tr class="separator:a700fc26f0395c03733f7dab36f4b1918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4e66ac6abe569321caea270475abbde"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#af4e66ac6abe569321caea270475abbde">close</a> ()</td></tr>
<tr class="separator:af4e66ac6abe569321caea270475abbde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28e41b06c7bac00ed0c4d1fbd471f2e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#a28e41b06c7bac00ed0c4d1fbd471f2e3">writeRunHeader</a> (<a class="el" href="classldmx_1_1RunHeader.html">RunHeader</a> &amp;runHeader)</td></tr>
<tr class="separator:a28e41b06c7bac00ed0c4d1fbd471f2e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bfa6abec781a2895d6a91192d8f7111"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classldmx_1_1RunHeader.html">RunHeader</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#a6bfa6abec781a2895d6a91192d8f7111">getRunHeader</a> (int runNumber)</td></tr>
<tr class="separator:a6bfa6abec781a2895d6a91192d8f7111"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08a243e26d66e0373ac6f07d4bd4f30b"><td class="memItemLeft" align="right" valign="top"><a id="a08a243e26d66e0373ac6f07d4bd4f30b"></a>
const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>getFileName</b> ()</td></tr>
<tr class="separator:a08a243e26d66e0373ac6f07d4bd4f30b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:af51d6f18ff3c77fc6865c777b7518ab9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#af51d6f18ff3c77fc6865c777b7518ab9">importRunHeaders</a> ()</td></tr>
<tr class="separator:af51d6f18ff3c77fc6865c777b7518ab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae61043439a9f1bce8686ad1013a19e27"><td class="memItemLeft" align="right" valign="top">Long64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#ae61043439a9f1bce8686ad1013a19e27">entries_</a> {-1}</td></tr>
<tr class="separator:ae61043439a9f1bce8686ad1013a19e27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87573585ee6c5f11b54f8adb087513be"><td class="memItemLeft" align="right" valign="top">Long64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#a87573585ee6c5f11b54f8adb087513be">ientry_</a> {-1}</td></tr>
<tr class="separator:a87573585ee6c5f11b54f8adb087513be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5d511f6982e89b1bc7607e71c2113ff"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#ab5d511f6982e89b1bc7607e71c2113ff">fileName_</a></td></tr>
<tr class="separator:ab5d511f6982e89b1bc7607e71c2113ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5887074742b6823dbe40ea79423971ce"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#a5887074742b6823dbe40ea79423971ce">isOutputFile_</a></td></tr>
<tr class="separator:a5887074742b6823dbe40ea79423971ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7977c046b7bcaa5b2fff72b7868ba4ba"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#a7977c046b7bcaa5b2fff72b7868ba4ba">isSingleOutput_</a></td></tr>
<tr class="separator:a7977c046b7bcaa5b2fff72b7868ba4ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6c9fc572f508882bcf83c9b5391b2d6"><td class="memItemLeft" align="right" valign="top">TFile *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">file_</a> {nullptr}</td></tr>
<tr class="separator:aa6c9fc572f508882bcf83c9b5391b2d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c904f467c6038efd83e3499e916c71c"><td class="memItemLeft" align="right" valign="top">TTree *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a> {nullptr}</td></tr>
<tr class="separator:a3c904f467c6038efd83e3499e916c71c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b439eecffc66ce6a13b2b0ea7dd1ceb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classldmx_1_1EventFile.html">EventFile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a> {nullptr}</td></tr>
<tr class="separator:a1b439eecffc66ce6a13b2b0ea7dd1ceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83d98087abc2c22dd10ca176775a7a75"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classldmx_1_1Event.html">Event</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">event_</a> {nullptr}</td></tr>
<tr class="separator:a83d98087abc2c22dd10ca176775a7a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7e55d71653ac39fb05dc194be45302b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::pair&lt; std::string, bool &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#ab7e55d71653ac39fb05dc194be45302b">preCloneRules_</a></td></tr>
<tr class="separator:ab7e55d71653ac39fb05dc194be45302b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9d89264a5d512fa79e2630909afc3d6"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#ab9d89264a5d512fa79e2630909afc3d6">reactivateRules_</a></td></tr>
<tr class="separator:ab9d89264a5d512fa79e2630909afc3d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f2945ea9ec1a90548a5375d355c0e9b"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::pair&lt; bool, <a class="el" href="classldmx_1_1RunHeader.html">RunHeader</a> * &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1EventFile.html#a3f2945ea9ec1a90548a5375d355c0e9b">runMap_</a></td></tr>
<tr class="separator:a3f2945ea9ec1a90548a5375d355c0e9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manages a file of events. </p>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00030">30</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad298cfe9ed3d660099e0699e530a737f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad298cfe9ed3d660099e0699e530a737f">&#9670;&nbsp;</a></span>EventFile() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ldmx::EventFile::EventFile </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classldmx_1_1EventFile.html">EventFile</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isOutputFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isSingleOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>compressionSetting</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor to make a general file.</p>
<p>This is not used directly, but it is called in the more specialised constructors. This method is mainly focused on reducing code copying.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>the name of the file to read/write </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">parent</td><td>a pointer to the parent file to copy </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">isOutputFile</td><td>true if this file is written out </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">isSingleOutput</td><td>true if only one output file is being written to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">compressionSetting</td><td>the compression setting for the TFile (100*algo+level) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00014">14</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;                                                                                                                                     : </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#ab5d511f6982e89b1bc7607e71c2113ff">fileName_</a>(filename), <a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>(parent), <a class="code" href="classldmx_1_1EventFile.html#a5887074742b6823dbe40ea79423971ce">isOutputFile_</a>(isOutputFile), <a class="code" href="classldmx_1_1EventFile.html#a7977c046b7bcaa5b2fff72b7868ba4ba">isSingleOutput_</a>(isSingleOutput) {</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classldmx_1_1EventFile.html#a5887074742b6823dbe40ea79423971ce">isOutputFile_</a>) {</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;            <span class="comment">//we are writting out so open the file and make sure it is writable</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">file_</a> = <span class="keyword">new</span> TFile(<a class="code" href="classldmx_1_1EventFile.html#ab5d511f6982e89b1bc7607e71c2113ff">fileName_</a>.c_str(), <span class="stringliteral">&quot;RECREATE&quot;</span>);</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">file_</a>-&gt;IsOpen() or !<a class="code" href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">file_</a>-&gt;IsWritable()) {</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;                EXCEPTION_RAISE(<span class="stringliteral">&quot;FileError&quot;</span>, <span class="stringliteral">&quot;Output file &#39;&quot;</span> + <a class="code" href="classldmx_1_1EventFile.html#ab5d511f6982e89b1bc7607e71c2113ff">fileName_</a> + <span class="stringliteral">&quot;&#39; is not writable.&quot;</span>);</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;            }</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;            <span class="comment">//set compression settings</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;            <span class="comment">//  Check out the TFile constructor for explanation of how this integer is built</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;            <span class="comment">//  Short Reference: setting = 100*algorithem + level</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;            <span class="comment">//  algorithm = 0 ==&gt; use global default</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">file_</a>-&gt;SetCompressionSettings(compressionSetting);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a> ) {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                <span class="comment">//output file when there are input files</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                <span class="comment">//  might be drop/keep rules, so we should have these rules to make sure it works</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                <span class="comment">//turn everything on</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                <span class="comment">//  hypothetically could turn everything off? Doesn&#39;t work for some reason?</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#ab7e55d71653ac39fb05dc194be45302b">preCloneRules_</a>.emplace_back( <span class="stringliteral">&quot;*&quot;</span> , <span class="keyword">true</span> );</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                <span class="comment">//except EventHeader (copies over to output)</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#ab7e55d71653ac39fb05dc194be45302b">preCloneRules_</a>.emplace_back( <span class="stringliteral">&quot;EventHeader*&quot;</span> , <span class="keyword">true</span> );</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                <span class="comment">//reactivate all branches so default behavior is drop</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#ab9d89264a5d512fa79e2630909afc3d6">reactivateRules_</a>.push_back( <span class="stringliteral">&quot;*&quot;</span> );</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            }</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            <span class="comment">//open file with only reading enabled</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">file_</a> = <span class="keyword">new</span> TFile(<a class="code" href="classldmx_1_1EventFile.html#ab5d511f6982e89b1bc7607e71c2113ff">fileName_</a>.c_str());</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            <span class="comment">//double check that file is open</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">file_</a>-&gt;IsOpen()) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                EXCEPTION_RAISE(<span class="stringliteral">&quot;FileError&quot;</span>, <span class="stringliteral">&quot;Input file &#39;&quot;</span> + <a class="code" href="classldmx_1_1EventFile.html#ab5d511f6982e89b1bc7607e71c2113ff">fileName_</a> + <span class="stringliteral">&quot;&#39; is not readable or does not exist.&quot;</span>);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            }</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a> = (TTree*) (<a class="code" href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">file_</a>-&gt;Get( <a class="code" href="classldmx_1_1EventConstants.html#adef82b0410adf3e5908baf4554949726">EventConstants::EVENT_TREE_NAME</a>.c_str() ));</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a>) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                EXCEPTION_RAISE(<span class="stringliteral">&quot;FileError&quot;</span> ,</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                        <span class="stringliteral">&quot;File &#39;&quot;</span> + <a class="code" href="classldmx_1_1EventFile.html#ab5d511f6982e89b1bc7607e71c2113ff">fileName_</a> + <span class="stringliteral">&quot;&#39; does not have a TTree named &#39;&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                        + <a class="code" href="classldmx_1_1EventConstants.html#adef82b0410adf3e5908baf4554949726">EventConstants::EVENT_TREE_NAME</a> + <span class="stringliteral">&quot;&#39; in it.&quot;</span> );</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#ae61043439a9f1bce8686ad1013a19e27">entries_</a> = <a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a>-&gt;GetEntriesFast();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <a class="code" href="classldmx_1_1EventFile.html#af51d6f18ff3c77fc6865c777b7518ab9">importRunHeaders</a>();</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EventFile_8h_source.html#l00207">entries_</a>, <a class="el" href="EventConstants_8h_source.html#l00025">ldmx::EventConstants::EVENT_TREE_NAME</a>, <a class="el" href="EventFile_8h_source.html#l00222">file_</a>, <a class="el" href="EventFile_8h_source.html#l00213">fileName_</a>, <a class="el" href="EventFile_8cxx_source.html#l00325">importRunHeaders()</a>, <a class="el" href="EventFile_8h_source.html#l00216">isOutputFile_</a>, <a class="el" href="EventFile_8h_source.html#l00228">parent_</a>, <a class="el" href="EventFile_8h_source.html#l00239">preCloneRules_</a>, <a class="el" href="EventFile_8h_source.html#l00248">reactivateRules_</a>, and <a class="el" href="EventFile_8h_source.html#l00225">tree_</a>.</p>

</div>
</div>
<a id="a81df8d054e056b8340a20b9b4305cea2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81df8d054e056b8340a20b9b4305cea2">&#9670;&nbsp;</a></span>EventFile() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ldmx::EventFile::EventFile </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>fileName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Class constructor to make a file to read in an event root file.</p>
<p>This is used for all input files.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileName</td><td>The file name. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00065">65</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                                  :</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <a class="code" href="classldmx_1_1EventFile.html#ad298cfe9ed3d660099e0699e530a737f">EventFile</a>(filename,<span class="keyword">nullptr</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,-1) { }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a925f7593c7b66a60e68dfbb447b56ece"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a925f7593c7b66a60e68dfbb447b56ece">&#9670;&nbsp;</a></span>EventFile() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ldmx::EventFile::EventFile </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>compressionSetting</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor to make an output file that has no parent input file.</p>
<p>This is for an output file in Production Mode.</p>
<p>isSingleOutput is set to true. This may or may not be necessary, but it is the single output in Production Mode, so it is a good default.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileName</td><td>The file name. </td></tr>
    <tr><td class="paramname">compressionSetting</td><td>the compression setting for the TFile (100*algo+level) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00068">68</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                                                                          :</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <a class="code" href="classldmx_1_1EventFile.html#ad298cfe9ed3d660099e0699e530a737f">EventFile</a>(filename,<span class="keyword">nullptr</span>,<span class="keyword">true</span>,<span class="keyword">true</span>,compressionSetting) { }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ade104d100018f651272699f3847e62b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade104d100018f651272699f3847e62b2">&#9670;&nbsp;</a></span>EventFile() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ldmx::EventFile::EventFile </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classldmx_1_1EventFile.html">EventFile</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isSingleOutput</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>compressionSetting</em> = <code>9</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Class constructor for cloning data from a "parent" file.</p>
<p>This is used for output files when there is an input file. (OR for files with a parent <a class="el" href="classldmx_1_1EventFile.html" title="Manages a file of events.">EventFile</a> to clone)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileName</td><td>The file name. </td></tr>
    <tr><td class="paramname">parent</td><td>Parent file for cloning data tree. </td></tr>
    <tr><td class="paramname">isSingleOutput</td><td>boolean check if only one output file is being written to </td></tr>
    <tr><td class="paramname">compressionSetting</td><td>the compression setting for the TFile (100*algo+level) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00071">71</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                                                                                                                  :</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <a class="code" href="classldmx_1_1EventFile.html#ad298cfe9ed3d660099e0699e530a737f">EventFile</a>(filename,parent,<span class="keyword">true</span>,isSingleOutput,compressionSetting) { }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a37a46f5daa4608e9525afd49871c92e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37a46f5daa4608e9525afd49871c92e1">&#9670;&nbsp;</a></span>~EventFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ldmx::EventFile::~EventFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Class destructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9999632efb2af6d0e720c8070bd9e384"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9999632efb2af6d0e720c8070bd9e384">&#9670;&nbsp;</a></span>addDrop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldmx::EventFile::addDrop </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>rule</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a rule for dropping collections from the output.</p>
<p>This needs to be called <em>after</em> setupEvent. This method uses the event to help drop collections.</p>
<p>The rules should be of the following form: &lt;drop,keep, or ignore&gt; exp where exp is an expression that matches the collectionName. ignore ==&gt; any branch with name matching exp is not even read in from the input file (if it exists) keep ==&gt; any branch with name matching exp is read in from the input (if exists) and written to output (if exists) drop ==&gt; any branch with name matching exp is read in from the input (if exists) and NOT written to output</p>
<p>The default behavior for all branches is keep.</p>
<p>ROOT uses the internal TRegexp to match branch names to the passed expression and set the status of the branch (whether it will be read or not). This internal object has different rules than real regular expressions, so it is best to keep it safe and only use asterisks or full names. Additionally, the rules you pass are analyzed in succession, so you can go from something more general to something more specific.</p>
<p>For example to drop all EcalSimHits.* drop EcalSimHits.*</p>
<p>or drop scoring plane collections drop .*ScoringPlane.*</p>
<p>or drop scoring plane collections but keep EcalScoringPlane collection drop .*ScoringPlane.* keep EcalScoringPlane.*</p>
<dl class="section note"><dt>Note</dt><dd>The <a class="el" href="classldmx_1_1Event.html#a32e7d9cba064ac7f81add81aa37a8c2f">Event::getImpl</a> overrides any ignore rules for the input file in order to avoid any seg faults. The items accessed will still be dropped.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rule</td><td>The rule for dropping collections. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00074">74</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                                                 {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keywordtype">int</span> offset;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordtype">bool</span> isKeep=<span class="keyword">false</span>,isDrop=<span class="keyword">false</span>,isIgnore=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keywordtype">size_t</span> i = rule.find(<span class="stringliteral">&quot;keep&quot;</span>);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">if</span>( i != std::string::npos ){</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            offset = i+4 ;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            isKeep = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        i = rule.find(<span class="stringliteral">&quot;drop&quot;</span>);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">if</span>( i != std::string::npos ){</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            offset = i+4 ;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            isDrop = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        i = rule.find(<span class="stringliteral">&quot;ignore&quot;</span>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">if</span>( i != std::string::npos ){</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            offset = i+6 ;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            isIgnore = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="comment">//more than one of (keep,drop,ignore) was provided =&gt; not valid rule</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">if</span>( <span class="keywordtype">int</span>(isKeep) + <span class="keywordtype">int</span>(isDrop) + <span class="keywordtype">int</span>(isIgnore) != 1 ) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        std::string srule = rule.substr(offset);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">for</span> (i = srule.find_first_of(<span class="stringliteral">&quot; \t\n\r&quot;</span>); i != std::string::npos; i = srule.find_first_of(<span class="stringliteral">&quot; \t\n\r&quot;</span>))</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            srule.erase(i, 1);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="comment">//name of branch is not given</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">if</span> (srule.length() == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="comment">//add wild card at end for matching purposes</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">if</span> (srule.back() != <span class="charliteral">&#39;*&#39;</span>) srule += <span class="stringliteral">&quot;.*&quot;</span>; <span class="comment">//add wildcard to back</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">if</span>( isKeep ) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            <span class="comment">//turn both the input and output tree&#39;s on</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <span class="comment">//root needs . removed otherwise it gets cranky</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            srule.erase( std::remove( srule.begin(), srule.end(), <span class="charliteral">&#39;.&#39;</span> ) , srule.end() );</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#ab7e55d71653ac39fb05dc194be45302b">preCloneRules_</a>.emplace_back( srule , <span class="keyword">true</span> );</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <span class="comment">//this branch will then be copied over into output tree and be active</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( isIgnore ) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="comment">//don&#39;t even read it from the input file</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="comment">//root needs . removed otherwise it gets cranky</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            srule.erase( std::remove( srule.begin(), srule.end(), <span class="charliteral">&#39;.&#39;</span> ) , srule.end() );</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#ab7e55d71653ac39fb05dc194be45302b">preCloneRules_</a>.emplace_back( srule , <span class="keyword">false</span> );</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="comment">//these branches won&#39;t be copied over into output tree</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( isDrop ) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="comment">//drop means allowing it on reading but not writing</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="comment">// pass these regex to event bus so Event::add knows</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">event_</a>-&gt;<a class="code" href="classldmx_1_1Event.html#af832a9aad3b964b9c966b2422c777c52">addDrop</a>( srule ); <span class="comment">//requires event_ to be set</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <span class="comment">//root needs . removed otherwise it gets cranky</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            srule.erase( std::remove( srule.begin(), srule.end(), <span class="charliteral">&#39;.&#39;</span> ) , srule.end() );</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#ab7e55d71653ac39fb05dc194be45302b">preCloneRules_</a>.emplace_back( srule , <span class="keyword">false</span> );</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="comment">//these branches won&#39;t be copied over into output tree</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="comment">//reactivate input branch after clone</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#ab9d89264a5d512fa79e2630909afc3d6">reactivateRules_</a>.push_back( srule );</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Event_8cxx_source.html#l00020">ldmx::Event::addDrop()</a>, <a class="el" href="EventFile_8h_source.html#l00231">event_</a>, <a class="el" href="EventFile_8h_source.html#l00239">preCloneRules_</a>, and <a class="el" href="EventFile_8h_source.html#l00248">reactivateRules_</a>.</p>

<p class="reference">Referenced by <a class="el" href="Process_8cxx_source.html#l00100">ldmx::Process::run()</a>.</p>

</div>
</div>
<a id="af4e66ac6abe569321caea270475abbde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4e66ac6abe569321caea270475abbde">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldmx::EventFile::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the file, writing the tree to disk if creating an output file.</p>
<p>Deletes any RunHeaders that this instance of <a class="el" href="classldmx_1_1EventFile.html" title="Manages a file of events.">EventFile</a> owns.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classldmx_1_1Exception.html" title="Standard base exception class with some useful output information.">Exception</a></td><td>if run tree already exists in output file. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00259">259</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                          {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="comment">//MEMORY &#39;Conditional jump or move depends on uninitialised values&#39; when closing TFile and/or writing TTree</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="comment">//  TFile::Close --&gt; TDirectoryFile::Close --&gt; ~TTree</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="comment">//MEMORY &#39;Syscall param write(buf) points to uninitialised byte(s)&#39;</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="comment">//  when writing TTree below</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="comment">//  From filling TTree in nextEvent</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="comment">// Before an output file, the Event tree needs to be written. </span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classldmx_1_1EventFile.html#a5887074742b6823dbe40ea79423971ce">isOutputFile_</a>) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a>-&gt;Write();</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="comment">//store the run map into the output tree</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="comment">// Check for the existence of the run tree in the file. </span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="comment">// If it already exists, throw an exception.</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="comment">// TODO: Tree name shouldn&#39;t be hardcoded. Is this check really necessary?</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <span class="keyword">auto</span> runTree{<span class="keyword">static_cast&lt;</span>TTree*<span class="keyword">&gt;</span>(<a class="code" href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">file_</a>-&gt;Get(<span class="stringliteral">&quot;LDMX_Run&quot;</span>))};</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">if</span> (runTree) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                EXCEPTION_RAISE(</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                        <span class="stringliteral">&quot;RunTree&quot;</span>,</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                        <span class="stringliteral">&quot;RunTree &#39;LDMX_Run&#39; already exists in output file &#39;&quot;</span> + <a class="code" href="classldmx_1_1EventFile.html#ab5d511f6982e89b1bc7607e71c2113ff">fileName_</a> + <span class="stringliteral">&quot;&#39;.&quot;</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                        );</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            runTree = <span class="keyword">new</span> TTree(<span class="stringliteral">&quot;LDMX_Run&quot;</span>, <span class="stringliteral">&quot;LDMX run header&quot;</span>);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="comment">//create the branch on this tree</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            RunHeader *theHandle = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            runTree-&gt;Branch(<span class="stringliteral">&quot;RunHeader&quot;</span>, EventConstants::RUN_HEADER.c_str(), &amp;theHandle, 32000, 3);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="comment">//copy over the run headers into the tree</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">auto</span>&amp; [ num , header_pair ] : <a class="code" href="classldmx_1_1EventFile.html#a3f2945ea9ec1a90548a5375d355c0e9b">runMap_</a> ) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                theHandle = header_pair.second;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                runTree-&gt;Fill();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                <span class="keywordflow">if</span> (header_pair.first) <span class="keyword">delete</span> header_pair.second; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            runTree-&gt;Write();</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="comment">// Close the file</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <a class="code" href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">file_</a>-&gt;Close();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EventFile_8h_source.html#l00222">file_</a>, <a class="el" href="EventFile_8h_source.html#l00213">fileName_</a>, <a class="el" href="EventFile_8h_source.html#l00216">isOutputFile_</a>, <a class="el" href="EventFile_8h_source.html#l00259">runMap_</a>, and <a class="el" href="EventFile_8h_source.html#l00225">tree_</a>.</p>

<p class="reference">Referenced by <a class="el" href="Process_8cxx_source.html#l00100">ldmx::Process::run()</a>.</p>

</div>
</div>
<a id="afd9653f814baa7bb2e07ba5398e9396e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd9653f814baa7bb2e07ba5398e9396e">&#9670;&nbsp;</a></span>getEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classldmx_1_1Event.html">Event</a>* ldmx::EventFile::getEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the <a class="el" href="classldmx_1_1Event.html" title="Implements an event buffer system for storing event data.">Event</a> object containing the event data. </p><dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="classldmx_1_1Event.html" title="Implements an event buffer system for storing event data.">Event</a> object containing event data. </dd></dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00145">145</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">event_</a>; };</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EventFile_8h_source.html#l00231">event_</a>.</p>

</div>
</div>
<a id="a6bfa6abec781a2895d6a91192d8f7111"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bfa6abec781a2895d6a91192d8f7111">&#9670;&nbsp;</a></span>getRunHeader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classldmx_1_1RunHeader.html">RunHeader</a> &amp; ldmx::EventFile::getRunHeader </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>runNumber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the <a class="el" href="classldmx_1_1RunHeader.html">RunHeader</a> for a given run, if it exists in the input file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">runNumber</td><td>The run number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="classldmx_1_1RunHeader.html">RunHeader</a> from the input file. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classldmx_1_1Exception.html" title="Standard base exception class with some useful output information.">Exception</a></td><td>if there is no <a class="el" href="classldmx_1_1RunHeader.html">RunHeader</a> in the map with the given run number. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00317">317</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                                                    {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classldmx_1_1EventFile.html#a3f2945ea9ec1a90548a5375d355c0e9b">runMap_</a>.find(runNumber) != <a class="code" href="classldmx_1_1EventFile.html#a3f2945ea9ec1a90548a5375d355c0e9b">runMap_</a>.end()) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">return</span> *(<a class="code" href="classldmx_1_1EventFile.html#a3f2945ea9ec1a90548a5375d355c0e9b">runMap_</a>.at(runNumber).second);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            EXCEPTION_RAISE(<span class="stringliteral">&quot;DataError&quot;</span>, <span class="stringliteral">&quot;No run header exists for &quot;</span> + std::to_string(runNumber) + <span class="stringliteral">&quot; in the run map.&quot;</span>);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EventFile_8h_source.html#l00259">runMap_</a>.</p>

<p class="reference">Referenced by <a class="el" href="Process_8cxx_source.html#l00100">ldmx::Process::run()</a>, and <a class="el" href="RootPersistencyManager_8cxx_source.html#l00064">ldmx::RootPersistencyManager::Store()</a>.</p>

</div>
</div>
<a id="af51d6f18ff3c77fc6865c777b7518ab9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af51d6f18ff3c77fc6865c777b7518ab9">&#9670;&nbsp;</a></span>importRunHeaders()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ldmx::EventFile::importRunHeaders </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Fill the internal map of run numbers to <a class="el" href="classldmx_1_1RunHeader.html">RunHeader</a> objects from the input file.</p>
<p>If this file is an output file and parent_ and parent_-&gt;file_ are valid pointers, then the run headers are imported from parent_-&gt;file_.</p>
<p>Otherwise, we try to import run headers from file_.</p>
<p>Does not check if any run headers are getting overwritten!</p>
<p>Any RunHeaders read in from this function are owned by this instance of <a class="el" href="classldmx_1_1EventFile.html" title="Manages a file of events.">EventFile</a> and are deleted in <a class="el" href="classldmx_1_1EventFile.html#af4e66ac6abe569321caea270475abbde">close()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>This function does nothing if parent_-&gt;file_ and file_ are nullptrs. </dd></dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00325">325</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                                     {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="comment">//choose which file to import from</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keyword">auto</span> theImportFile{<a class="code" href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">file_</a>}; <span class="comment">//if this is an input file</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classldmx_1_1EventFile.html#a5887074742b6823dbe40ea79423971ce">isOutputFile_</a> and <a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a> and <a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>-&gt;<a class="code" href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">file_</a> ) </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            theImportFile = <a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>-&gt;<a class="code" href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">file_</a>; <span class="comment">//output file with input parent to read from</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classldmx_1_1EventFile.html#a5887074742b6823dbe40ea79423971ce">isOutputFile_</a> )</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="keywordflow">return</span>; <span class="comment">//output file, no input parent to read from</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">if</span> (theImportFile) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <span class="comment">//the file exist</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            TTreeReader oldRunTree( <span class="stringliteral">&quot;LDMX_Run&quot;</span> , theImportFile );</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            TTreeReaderValue&lt;RunHeader&gt; oldRunHeader( oldRunTree , <span class="stringliteral">&quot;RunHeader&quot;</span> );</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="comment">//TODO check that setup went correctly</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <span class="keywordflow">while</span>( oldRunTree.Next() ) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <span class="comment">//copy input run tree into run map</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#a3f2945ea9ec1a90548a5375d355c0e9b">runMap_</a>[ oldRunHeader-&gt;getRunNumber() ] = std::make_pair(<span class="keyword">true</span>,<span class="keyword">new</span> RunHeader(*oldRunHeader));</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EventFile_8h_source.html#l00222">file_</a>, <a class="el" href="EventFile_8h_source.html#l00216">isOutputFile_</a>, <a class="el" href="EventFile_8h_source.html#l00228">parent_</a>, and <a class="el" href="EventFile_8h_source.html#l00259">runMap_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00014">EventFile()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00228">updateParent()</a>.</p>

</div>
</div>
<a id="a700fc26f0395c03733f7dab36f4b1918"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a700fc26f0395c03733f7dab36f4b1918">&#9670;&nbsp;</a></span>nextEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ldmx::EventFile::nextEvent </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>storeCurrentEvent</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepare the next event. </p><dl class="section return"><dt>Returns</dt><dd>If event was prepared/read successfully. </dd></dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00133">133</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                                                    {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classldmx_1_1EventFile.html#a87573585ee6c5f11b54f8adb087513be">ientry_</a> &lt; 0 &amp;&amp; <a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>-&gt;<a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a>) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                EXCEPTION_RAISE(<span class="stringliteral">&quot;EventFile&quot;</span>, <span class="stringliteral">&quot;No event tree in the file&quot;</span>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <span class="comment">//Only clone parent tree if either</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="comment">//  1) There is no tree setup yet (first input file)</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="comment">//  2) This is not single output (new input file --&gt; new output file)</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="keywordflow">if</span> ( !<a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a> or !<a class="code" href="classldmx_1_1EventFile.html#a7977c046b7bcaa5b2fff72b7868ba4ba">isSingleOutput_</a> ) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                <span class="comment">//clones parent_-&gt;tree_ to our tree_ keeping drop/keep rules in mind</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                <span class="comment">//clone tree (only copies over branches that are active on input tree)</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">file_</a>-&gt;cd(); <span class="comment">//go into output file</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                <span class="keywordflow">for</span> ( <span class="keyword">auto</span> <span class="keyword">const</span>&amp; rulePair : <a class="code" href="classldmx_1_1EventFile.html#ab7e55d71653ac39fb05dc194be45302b">preCloneRules_</a> )</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                    <a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>-&gt;<a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a>-&gt;SetBranchStatus( rulePair.first.c_str() , rulePair.second );</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a> = <a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>-&gt;<a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a>-&gt;CloneTree(0);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                <span class="comment">//reactivate any drop branches (drop) on input tree</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                <span class="keywordflow">for</span> ( <span class="keyword">auto</span> <span class="keyword">const</span>&amp; rule : <a class="code" href="classldmx_1_1EventFile.html#ab9d89264a5d512fa79e2630909afc3d6">reactivateRules_</a> ) </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                    <a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>-&gt;<a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a>-&gt;SetBranchStatus( rule.c_str(), 1 );</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">event_</a>-&gt;<a class="code" href="classldmx_1_1Event.html#aeb6e77999eda07eb0fe982b26ae21bc0">setInputTree</a>( <a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>-&gt;<a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a> );</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">event_</a>-&gt;<a class="code" href="classldmx_1_1Event.html#aeb50beac0c46a2625be9a714792fd212">setOutputTree</a>( <a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a> );</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="comment">// close up the last event</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classldmx_1_1EventFile.html#a87573585ee6c5f11b54f8adb087513be">ientry_</a> &gt;= 0) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classldmx_1_1EventFile.html#a5887074742b6823dbe40ea79423971ce">isOutputFile_</a>) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">event_</a>-&gt;<a class="code" href="classldmx_1_1Event.html#a69b205d38550fa7cb86cd83f5ea3f03f">beforeFill</a>();</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                <span class="keywordflow">if</span> (storeCurrentEvent) <a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a>-&gt;Fill(); <span class="comment">// fill the clones...</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">event_</a>) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">event_</a>-&gt;<a class="code" href="classldmx_1_1Event.html#a957a3e7a16d18853ca2c4620c41079cc">Clear</a>();</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">event_</a>-&gt;<a class="code" href="classldmx_1_1Event.html#a4dbd978cf3b1f71ce348a5797c7137e7">onEndOfEvent</a>();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>-&gt;<a class="code" href="classldmx_1_1EventFile.html#a700fc26f0395c03733f7dab36f4b1918">nextEvent</a>()) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>-&gt;<a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a>-&gt;GetEntry(<a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>-&gt;<a class="code" href="classldmx_1_1EventFile.html#a87573585ee6c5f11b54f8adb087513be">ientry_</a>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#a87573585ee6c5f11b54f8adb087513be">ientry_</a> = <a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>-&gt;<a class="code" href="classldmx_1_1EventFile.html#a87573585ee6c5f11b54f8adb087513be">ientry_</a>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">event_</a>-&gt;<a class="code" href="classldmx_1_1Event.html#a027f7eaf41f469c005d8688f98debeea">nextEvent</a>();</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#ae61043439a9f1bce8686ad1013a19e27">entries_</a>++;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="comment">// if we are reading, move the pointer</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classldmx_1_1EventFile.html#a5887074742b6823dbe40ea79423971ce">isOutputFile_</a>) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classldmx_1_1EventFile.html#a87573585ee6c5f11b54f8adb087513be">ientry_</a> + 1 &gt;= <a class="code" href="classldmx_1_1EventFile.html#ae61043439a9f1bce8686ad1013a19e27">entries_</a>) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#a87573585ee6c5f11b54f8adb087513be">ientry_</a>++;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a>-&gt;LoadTree(<a class="code" href="classldmx_1_1EventFile.html#a87573585ee6c5f11b54f8adb087513be">ientry_</a>);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">event_</a>) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    <a class="code" href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">event_</a>-&gt;<a class="code" href="classldmx_1_1Event.html#a027f7eaf41f469c005d8688f98debeea">nextEvent</a>();</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#a87573585ee6c5f11b54f8adb087513be">ientry_</a>++;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#ae61043439a9f1bce8686ad1013a19e27">entries_</a>++;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Event_8cxx_source.html#l00128">ldmx::Event::beforeFill()</a>, <a class="el" href="Event_8cxx_source.html#l00135">ldmx::Event::Clear()</a>, <a class="el" href="EventFile_8h_source.html#l00207">entries_</a>, <a class="el" href="EventFile_8h_source.html#l00231">event_</a>, <a class="el" href="EventFile_8h_source.html#l00222">file_</a>, <a class="el" href="EventFile_8h_source.html#l00210">ientry_</a>, <a class="el" href="EventFile_8h_source.html#l00216">isOutputFile_</a>, <a class="el" href="EventFile_8h_source.html#l00219">isSingleOutput_</a>, <a class="el" href="Event_8cxx_source.html#l00122">ldmx::Event::nextEvent()</a>, <a class="el" href="EventFile_8cxx_source.html#l00133">nextEvent()</a>, <a class="el" href="Event_8cxx_source.html#l00143">ldmx::Event::onEndOfEvent()</a>, <a class="el" href="EventFile_8h_source.html#l00228">parent_</a>, <a class="el" href="EventFile_8h_source.html#l00239">preCloneRules_</a>, <a class="el" href="EventFile_8h_source.html#l00248">reactivateRules_</a>, <a class="el" href="Event_8cxx_source.html#l00092">ldmx::Event::setInputTree()</a>, <a class="el" href="Event_8cxx_source.html#l00088">ldmx::Event::setOutputTree()</a>, and <a class="el" href="EventFile_8h_source.html#l00225">tree_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00133">nextEvent()</a>, and <a class="el" href="Process_8cxx_source.html#l00100">ldmx::Process::run()</a>.</p>

</div>
</div>
<a id="a00f574b6f84af0822aae1e14b595a7d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00f574b6f84af0822aae1e14b595a7d9">&#9670;&nbsp;</a></span>setupEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldmx::EventFile::setupEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classldmx_1_1Event.html">Event</a> *&#160;</td>
          <td class="paramname"><em>evt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set an <a class="el" href="classldmx_1_1Event.html" title="Implements an event buffer system for storing event data.">Event</a> object containing the event data to work with this file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">evt</td><td>The <a class="el" href="classldmx_1_1Event.html" title="Implements an event buffer system for storing event data.">Event</a> object with event data. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00211">211</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                         {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <a class="code" href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">event_</a> = evt;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classldmx_1_1EventFile.html#a5887074742b6823dbe40ea79423971ce">isOutputFile_</a>) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a> &amp;&amp; !<a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a> = <a class="code" href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">event_</a>-&gt;<a class="code" href="classldmx_1_1Event.html#ab7966e9baab8b61f7fc60cc7504931df">createTree</a>();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#a87573585ee6c5f11b54f8adb087513be">ientry_</a> = 0;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#ae61043439a9f1bce8686ad1013a19e27">entries_</a> = 0;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">event_</a>-&gt;<a class="code" href="classldmx_1_1Event.html#aeb6e77999eda07eb0fe982b26ae21bc0">setInputTree</a>(<a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>-&gt;<a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a>);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">event_</a>-&gt;<a class="code" href="classldmx_1_1Event.html#aeb6e77999eda07eb0fe982b26ae21bc0">setInputTree</a>(<a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Event_8cxx_source.html#l00082">ldmx::Event::createTree()</a>, <a class="el" href="EventFile_8h_source.html#l00207">entries_</a>, <a class="el" href="EventFile_8h_source.html#l00231">event_</a>, <a class="el" href="EventFile_8h_source.html#l00210">ientry_</a>, <a class="el" href="EventFile_8h_source.html#l00216">isOutputFile_</a>, <a class="el" href="EventFile_8h_source.html#l00228">parent_</a>, <a class="el" href="Event_8cxx_source.html#l00092">ldmx::Event::setInputTree()</a>, and <a class="el" href="EventFile_8h_source.html#l00225">tree_</a>.</p>

<p class="reference">Referenced by <a class="el" href="Process_8cxx_source.html#l00100">ldmx::Process::run()</a>.</p>

</div>
</div>
<a id="acb30b4cd94a2bb6fd464b234446e2399"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb30b4cd94a2bb6fd464b234446e2399">&#9670;&nbsp;</a></span>updateParent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldmx::EventFile::updateParent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classldmx_1_1EventFile.html">EventFile</a> *&#160;</td>
          <td class="paramname"><em>parent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Change pointer to different parent file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parent</td><td>pointer to new parent file </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00228">228</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                                                  { </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a> = parent; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        TTree* parentTree = (TTree *)<a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>-&gt;<a class="code" href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">file_</a>-&gt;Get(<span class="stringliteral">&quot;LDMX_Events&quot;</span>);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">if</span> ( parentTree ) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="comment">//Enter output file</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">file_</a>-&gt;cd();</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="comment">//need to turn on/off the same branches as in the initial setup...</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <span class="keywordflow">for</span> ( <span class="keyword">auto</span> <span class="keyword">const</span>&amp; rulePair : <a class="code" href="classldmx_1_1EventFile.html#ab7e55d71653ac39fb05dc194be45302b">preCloneRules_</a> )</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>-&gt;<a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a>-&gt;SetBranchStatus( rulePair.first.c_str() , rulePair.second );</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <span class="comment">//Copy over addresses from the new parent</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            parentTree-&gt;CopyAddresses( <a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a> );</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="comment">//and reactivate any dropping rules</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="keywordflow">for</span> ( <span class="keyword">auto</span> <span class="keyword">const</span>&amp; rule : <a class="code" href="classldmx_1_1EventFile.html#ab9d89264a5d512fa79e2630909afc3d6">reactivateRules_</a> )</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                <a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>-&gt;<a class="code" href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">tree_</a>-&gt;SetBranchStatus( rule.c_str() , 1 );</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <span class="comment">//Reset the entry index with the new parent index</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <a class="code" href="classldmx_1_1EventFile.html#a87573585ee6c5f11b54f8adb087513be">ientry_</a> = <a class="code" href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">parent_</a>-&gt;<a class="code" href="classldmx_1_1EventFile.html#a87573585ee6c5f11b54f8adb087513be">ientry_</a>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="comment">//import run headers from new input file</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <a class="code" href="classldmx_1_1EventFile.html#af51d6f18ff3c77fc6865c777b7518ab9">importRunHeaders</a>();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EventFile_8h_source.html#l00222">file_</a>, <a class="el" href="EventFile_8h_source.html#l00210">ientry_</a>, <a class="el" href="EventFile_8cxx_source.html#l00325">importRunHeaders()</a>, <a class="el" href="EventFile_8h_source.html#l00228">parent_</a>, <a class="el" href="EventFile_8h_source.html#l00239">preCloneRules_</a>, <a class="el" href="EventFile_8h_source.html#l00248">reactivateRules_</a>, and <a class="el" href="EventFile_8h_source.html#l00225">tree_</a>.</p>

<p class="reference">Referenced by <a class="el" href="Process_8cxx_source.html#l00100">ldmx::Process::run()</a>.</p>

</div>
</div>
<a id="a28e41b06c7bac00ed0c4d1fbd471f2e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28e41b06c7bac00ed0c4d1fbd471f2e3">&#9670;&nbsp;</a></span>writeRunHeader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ldmx::EventFile::writeRunHeader </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classldmx_1_1RunHeader.html">RunHeader</a> &amp;&#160;</td>
          <td class="paramname"><em>runHeader</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write the run header into the run map</p>
<p>Any <a class="el" href="classldmx_1_1RunHeader.html">RunHeader</a> passed here is not owned or cleaned up by this <a class="el" href="classldmx_1_1EventFile.html" title="Manages a file of events.">EventFile</a> instance.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">runHeader</td><td>The run header to write into the map </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classldmx_1_1Exception.html" title="Standard base exception class with some useful output information.">Exception</a></td><td>if run number is already in run map </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00302">302</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                                       {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordtype">int</span> runNumber = runHeader.getRunNumber();</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classldmx_1_1EventFile.html#a3f2945ea9ec1a90548a5375d355c0e9b">runMap_</a>.find(runNumber) != <a class="code" href="classldmx_1_1EventFile.html#a3f2945ea9ec1a90548a5375d355c0e9b">runMap_</a>.end() ) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            EXCEPTION_RAISE( <span class="stringliteral">&quot;RunMap&quot;</span> , </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                    <span class="stringliteral">&quot;Run map already contains a run with number &#39;&quot;</span> + std::to_string(runNumber)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                    + <span class="stringliteral">&quot;&#39;.&quot;</span> );</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <a class="code" href="classldmx_1_1EventFile.html#a3f2945ea9ec1a90548a5375d355c0e9b">runMap_</a>[runNumber] = std::make_pair(<span class="keyword">false</span>,&amp;runHeader);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="RunHeader_8h_source.html#l00050">ldmx::RunHeader::getRunNumber()</a>, and <a class="el" href="EventFile_8h_source.html#l00259">runMap_</a>.</p>

<p class="reference">Referenced by <a class="el" href="Process_8cxx_source.html#l00100">ldmx::Process::run()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ae61043439a9f1bce8686ad1013a19e27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae61043439a9f1bce8686ad1013a19e27">&#9670;&nbsp;</a></span>entries_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Long64_t ldmx::EventFile::entries_ {-1}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The number of entries in the tree. </p>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00207">207</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00014">EventFile()</a>, <a class="el" href="EventFile_8cxx_source.html#l00133">nextEvent()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00211">setupEvent()</a>.</p>

</div>
</div>
<a id="a83d98087abc2c22dd10ca176775a7a75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83d98087abc2c22dd10ca176775a7a75">&#9670;&nbsp;</a></span>event_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classldmx_1_1Event.html">Event</a>* ldmx::EventFile::event_ {nullptr}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The object containing the actual event data (trees and branches). </p>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00231">231</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00074">addDrop()</a>, <a class="el" href="EventFile_8h_source.html#l00145">getEvent()</a>, <a class="el" href="EventFile_8cxx_source.html#l00133">nextEvent()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00211">setupEvent()</a>.</p>

</div>
</div>
<a id="aa6c9fc572f508882bcf83c9b5391b2d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6c9fc572f508882bcf83c9b5391b2d6">&#9670;&nbsp;</a></span>file_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TFile* ldmx::EventFile::file_ {nullptr}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The backing TFile for this <a class="el" href="classldmx_1_1EventFile.html" title="Manages a file of events.">EventFile</a>. </p>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00222">222</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00259">close()</a>, <a class="el" href="EventFile_8cxx_source.html#l00014">EventFile()</a>, <a class="el" href="EventFile_8cxx_source.html#l00325">importRunHeaders()</a>, <a class="el" href="EventFile_8cxx_source.html#l00133">nextEvent()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00228">updateParent()</a>.</p>

</div>
</div>
<a id="ab5d511f6982e89b1bc7607e71c2113ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5d511f6982e89b1bc7607e71c2113ff">&#9670;&nbsp;</a></span>fileName_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string ldmx::EventFile::fileName_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The file name. </p>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00213">213</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00259">close()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00014">EventFile()</a>.</p>

</div>
</div>
<a id="a87573585ee6c5f11b54f8adb087513be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87573585ee6c5f11b54f8adb087513be">&#9670;&nbsp;</a></span>ientry_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Long64_t ldmx::EventFile::ientry_ {-1}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The current entry in the tree. </p>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00210">210</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00133">nextEvent()</a>, <a class="el" href="EventFile_8cxx_source.html#l00211">setupEvent()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00228">updateParent()</a>.</p>

</div>
</div>
<a id="a5887074742b6823dbe40ea79423971ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5887074742b6823dbe40ea79423971ce">&#9670;&nbsp;</a></span>isOutputFile_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ldmx::EventFile::isOutputFile_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>True if file is an output file being written to disk. </p>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00216">216</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00259">close()</a>, <a class="el" href="EventFile_8cxx_source.html#l00014">EventFile()</a>, <a class="el" href="EventFile_8cxx_source.html#l00325">importRunHeaders()</a>, <a class="el" href="EventFile_8cxx_source.html#l00133">nextEvent()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00211">setupEvent()</a>.</p>

</div>
</div>
<a id="a7977c046b7bcaa5b2fff72b7868ba4ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7977c046b7bcaa5b2fff72b7868ba4ba">&#9670;&nbsp;</a></span>isSingleOutput_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ldmx::EventFile::isSingleOutput_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>True if there is only one output file </p>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00219">219</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00133">nextEvent()</a>.</p>

</div>
</div>
<a id="a1b439eecffc66ce6a13b2b0ea7dd1ceb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b439eecffc66ce6a13b2b0ea7dd1ceb">&#9670;&nbsp;</a></span>parent_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classldmx_1_1EventFile.html">EventFile</a>* ldmx::EventFile::parent_ {nullptr}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A parent file containing event data. </p>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00228">228</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00014">EventFile()</a>, <a class="el" href="EventFile_8cxx_source.html#l00325">importRunHeaders()</a>, <a class="el" href="EventFile_8cxx_source.html#l00133">nextEvent()</a>, <a class="el" href="EventFile_8cxx_source.html#l00211">setupEvent()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00228">updateParent()</a>.</p>

</div>
</div>
<a id="ab7e55d71653ac39fb05dc194be45302b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7e55d71653ac39fb05dc194be45302b">&#9670;&nbsp;</a></span>preCloneRules_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::pair&lt; std::string , bool &gt; &gt; ldmx::EventFile::preCloneRules_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pre-clone rules.</p>
<p>The series of rules to call before cloning/copying the parent tree. </p>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00239">239</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00074">addDrop()</a>, <a class="el" href="EventFile_8cxx_source.html#l00014">EventFile()</a>, <a class="el" href="EventFile_8cxx_source.html#l00133">nextEvent()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00228">updateParent()</a>.</p>

</div>
</div>
<a id="ab9d89264a5d512fa79e2630909afc3d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9d89264a5d512fa79e2630909afc3d6">&#9670;&nbsp;</a></span>reactivateRules_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::string &gt; ldmx::EventFile::reactivateRules_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Vector of drop rules that have been parsed and need to be used to reactivate these branches on the input tree</p>
<p>The branches were initial deactivated so they don't get cloned to output tree. </p>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00248">248</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00074">addDrop()</a>, <a class="el" href="EventFile_8cxx_source.html#l00014">EventFile()</a>, <a class="el" href="EventFile_8cxx_source.html#l00133">nextEvent()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00228">updateParent()</a>.</p>

</div>
</div>
<a id="a3f2945ea9ec1a90548a5375d355c0e9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f2945ea9ec1a90548a5375d355c0e9b">&#9670;&nbsp;</a></span>runMap_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int, std::pair&lt;bool,<a class="el" href="classldmx_1_1RunHeader.html">RunHeader</a>*&gt; &gt; ldmx::EventFile::runMap_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Map of run numbers to <a class="el" href="classldmx_1_1RunHeader.html">RunHeader</a> objects</p>
<p>The value object is a pair that should remain internal.</p><ol type="1">
<li>True if <a class="el" href="classldmx_1_1EventFile.html" title="Manages a file of events.">EventFile</a> owns the <a class="el" href="classldmx_1_1RunHeader.html">RunHeader</a> (and needs to clean it up)<ul>
<li>This happens when RunHeaders are imported from an input file</li>
</ul>
</li>
<li>False if <a class="el" href="classldmx_1_1EventFile.html" title="Manages a file of events.">EventFile</a> does not own the <a class="el" href="classldmx_1_1RunHeader.html">RunHeader</a><ul>
<li>This happens when the <a class="el" href="classldmx_1_1RunHeader.html">RunHeader</a> is created by <a class="el" href="classldmx_1_1Process.html#add34e96ca05e260359837419eacac0b5">Process::run</a> during production </li>
</ul>
</li>
</ol>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00259">259</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00259">close()</a>, <a class="el" href="EventFile_8cxx_source.html#l00317">getRunHeader()</a>, <a class="el" href="EventFile_8cxx_source.html#l00325">importRunHeaders()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00302">writeRunHeader()</a>.</p>

</div>
</div>
<a id="a3c904f467c6038efd83e3499e916c71c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c904f467c6038efd83e3499e916c71c">&#9670;&nbsp;</a></span>tree_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TTree* ldmx::EventFile::tree_ {nullptr}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The tree with event data. </p>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00225">225</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00259">close()</a>, <a class="el" href="EventFile_8cxx_source.html#l00014">EventFile()</a>, <a class="el" href="EventFile_8cxx_source.html#l00133">nextEvent()</a>, <a class="el" href="EventFile_8cxx_source.html#l00211">setupEvent()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00228">updateParent()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Framework/include/Framework/<a class="el" href="EventFile_8h_source.html">EventFile.h</a></li>
<li>Framework/src/<a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a></li>
</ul>
</div><!-- contents -->
<div class="ttc" id="aclassldmx_1_1EventFile_html_ad298cfe9ed3d660099e0699e530a737f"><div class="ttname"><a href="classldmx_1_1EventFile.html#ad298cfe9ed3d660099e0699e530a737f">ldmx::EventFile::EventFile</a></div><div class="ttdeci">EventFile(const std::string &amp;filename, EventFile *parent, bool isOutputFile, bool isSingleOutput, int compressionSetting)</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8cxx_source.html#l00014">EventFile.cxx:14</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventFile_html_a700fc26f0395c03733f7dab36f4b1918"><div class="ttname"><a href="classldmx_1_1EventFile.html#a700fc26f0395c03733f7dab36f4b1918">ldmx::EventFile::nextEvent</a></div><div class="ttdeci">bool nextEvent(bool storeCurrentEvent=true)</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8cxx_source.html#l00133">EventFile.cxx:133</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventFile_html_a5887074742b6823dbe40ea79423971ce"><div class="ttname"><a href="classldmx_1_1EventFile.html#a5887074742b6823dbe40ea79423971ce">ldmx::EventFile::isOutputFile_</a></div><div class="ttdeci">bool isOutputFile_</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00216">EventFile.h:216</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventFile_html_a7977c046b7bcaa5b2fff72b7868ba4ba"><div class="ttname"><a href="classldmx_1_1EventFile.html#a7977c046b7bcaa5b2fff72b7868ba4ba">ldmx::EventFile::isSingleOutput_</a></div><div class="ttdeci">bool isSingleOutput_</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00219">EventFile.h:219</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventFile_html_a1b439eecffc66ce6a13b2b0ea7dd1ceb"><div class="ttname"><a href="classldmx_1_1EventFile.html#a1b439eecffc66ce6a13b2b0ea7dd1ceb">ldmx::EventFile::parent_</a></div><div class="ttdeci">EventFile * parent_</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00228">EventFile.h:228</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventFile_html_a3c904f467c6038efd83e3499e916c71c"><div class="ttname"><a href="classldmx_1_1EventFile.html#a3c904f467c6038efd83e3499e916c71c">ldmx::EventFile::tree_</a></div><div class="ttdeci">TTree * tree_</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00225">EventFile.h:225</a></div></div>
<div class="ttc" id="aclassldmx_1_1Event_html_a027f7eaf41f469c005d8688f98debeea"><div class="ttname"><a href="classldmx_1_1Event.html#a027f7eaf41f469c005d8688f98debeea">ldmx::Event::nextEvent</a></div><div class="ttdeci">bool nextEvent()</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00122">Event.cxx:122</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventFile_html_ab7e55d71653ac39fb05dc194be45302b"><div class="ttname"><a href="classldmx_1_1EventFile.html#ab7e55d71653ac39fb05dc194be45302b">ldmx::EventFile::preCloneRules_</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; std::string, bool &gt; &gt; preCloneRules_</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00239">EventFile.h:239</a></div></div>
<div class="ttc" id="aclassldmx_1_1Event_html_a957a3e7a16d18853ca2c4620c41079cc"><div class="ttname"><a href="classldmx_1_1Event.html#a957a3e7a16d18853ca2c4620c41079cc">ldmx::Event::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00135">Event.cxx:135</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventFile_html_a83d98087abc2c22dd10ca176775a7a75"><div class="ttname"><a href="classldmx_1_1EventFile.html#a83d98087abc2c22dd10ca176775a7a75">ldmx::EventFile::event_</a></div><div class="ttdeci">Event * event_</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00231">EventFile.h:231</a></div></div>
<div class="ttc" id="aclassldmx_1_1Event_html_a69b205d38550fa7cb86cd83f5ea3f03f"><div class="ttname"><a href="classldmx_1_1Event.html#a69b205d38550fa7cb86cd83f5ea3f03f">ldmx::Event::beforeFill</a></div><div class="ttdeci">void beforeFill()</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00128">Event.cxx:128</a></div></div>
<div class="ttc" id="aclassldmx_1_1Event_html_ab7966e9baab8b61f7fc60cc7504931df"><div class="ttname"><a href="classldmx_1_1Event.html#ab7966e9baab8b61f7fc60cc7504931df">ldmx::Event::createTree</a></div><div class="ttdeci">TTree * createTree()</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00082">Event.cxx:82</a></div></div>
<div class="ttc" id="aclassldmx_1_1Event_html_aeb50beac0c46a2625be9a714792fd212"><div class="ttname"><a href="classldmx_1_1Event.html#aeb50beac0c46a2625be9a714792fd212">ldmx::Event::setOutputTree</a></div><div class="ttdeci">void setOutputTree(TTree *tree)</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00088">Event.cxx:88</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventFile_html_ab5d511f6982e89b1bc7607e71c2113ff"><div class="ttname"><a href="classldmx_1_1EventFile.html#ab5d511f6982e89b1bc7607e71c2113ff">ldmx::EventFile::fileName_</a></div><div class="ttdeci">std::string fileName_</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00213">EventFile.h:213</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventFile_html_af51d6f18ff3c77fc6865c777b7518ab9"><div class="ttname"><a href="classldmx_1_1EventFile.html#af51d6f18ff3c77fc6865c777b7518ab9">ldmx::EventFile::importRunHeaders</a></div><div class="ttdeci">void importRunHeaders()</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8cxx_source.html#l00325">EventFile.cxx:325</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventFile_html_ae61043439a9f1bce8686ad1013a19e27"><div class="ttname"><a href="classldmx_1_1EventFile.html#ae61043439a9f1bce8686ad1013a19e27">ldmx::EventFile::entries_</a></div><div class="ttdeci">Long64_t entries_</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00207">EventFile.h:207</a></div></div>
<div class="ttc" id="aclassldmx_1_1Event_html_a4dbd978cf3b1f71ce348a5797c7137e7"><div class="ttname"><a href="classldmx_1_1Event.html#a4dbd978cf3b1f71ce348a5797c7137e7">ldmx::Event::onEndOfEvent</a></div><div class="ttdeci">void onEndOfEvent()</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00143">Event.cxx:143</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventFile_html_ab9d89264a5d512fa79e2630909afc3d6"><div class="ttname"><a href="classldmx_1_1EventFile.html#ab9d89264a5d512fa79e2630909afc3d6">ldmx::EventFile::reactivateRules_</a></div><div class="ttdeci">std::vector&lt; std::string &gt; reactivateRules_</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00248">EventFile.h:248</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventFile_html_a3f2945ea9ec1a90548a5375d355c0e9b"><div class="ttname"><a href="classldmx_1_1EventFile.html#a3f2945ea9ec1a90548a5375d355c0e9b">ldmx::EventFile::runMap_</a></div><div class="ttdeci">std::map&lt; int, std::pair&lt; bool, RunHeader * &gt; &gt; runMap_</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00259">EventFile.h:259</a></div></div>
<div class="ttc" id="aclassldmx_1_1Event_html_aeb6e77999eda07eb0fe982b26ae21bc0"><div class="ttname"><a href="classldmx_1_1Event.html#aeb6e77999eda07eb0fe982b26ae21bc0">ldmx::Event::setInputTree</a></div><div class="ttdeci">void setInputTree(TTree *tree)</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00092">Event.cxx:92</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventFile_html_aa6c9fc572f508882bcf83c9b5391b2d6"><div class="ttname"><a href="classldmx_1_1EventFile.html#aa6c9fc572f508882bcf83c9b5391b2d6">ldmx::EventFile::file_</a></div><div class="ttdeci">TFile * file_</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00222">EventFile.h:222</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventFile_html_a87573585ee6c5f11b54f8adb087513be"><div class="ttname"><a href="classldmx_1_1EventFile.html#a87573585ee6c5f11b54f8adb087513be">ldmx::EventFile::ientry_</a></div><div class="ttdeci">Long64_t ientry_</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00210">EventFile.h:210</a></div></div>
<div class="ttc" id="aclassldmx_1_1Event_html_af832a9aad3b964b9c966b2422c777c52"><div class="ttname"><a href="classldmx_1_1Event.html#af832a9aad3b964b9c966b2422c777c52">ldmx::Event::addDrop</a></div><div class="ttdeci">void addDrop(const std::string &amp;exp)</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00020">Event.cxx:20</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventConstants_html_adef82b0410adf3e5908baf4554949726"><div class="ttname"><a href="classldmx_1_1EventConstants.html#adef82b0410adf3e5908baf4554949726">ldmx::EventConstants::EVENT_TREE_NAME</a></div><div class="ttdeci">static const std::string EVENT_TREE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="EventConstants_8h_source.html#l00025">EventConstants.h:25</a></div></div>
<!-- start footer part -->
		<script src="custom.js"></script>
	</body>
</html>