<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.9.5"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>LDMX Software: framework::NtupleManager Class Reference</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">LDMX Software
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part --><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceframework.html">framework</a></li><li class="navelem"><a class="el" href="classframework_1_1NtupleManager.html">NtupleManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classframework_1_1NtupleManager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">framework::NtupleManager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Singleton class used to manage the creation and pooling of ntuples.  
 <a href="classframework_1_1NtupleManager.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="NtupleManager_8h_source.html">NtupleManager.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a62a1bbf0768545af6d47d109a68d5e7c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1NtupleManager.html#a62a1bbf0768545af6d47d109a68d5e7c">create</a> (const std::string &amp;tname)</td></tr>
<tr class="separator:a62a1bbf0768545af6d47d109a68d5e7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0012876b5449a38c6cfecf531fb741f8"><td class="memTemplParams" colspan="2">template&lt;typename VarType &gt; </td></tr>
<tr class="memitem:a0012876b5449a38c6cfecf531fb741f8"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classframework_1_1NtupleManager.html#a0012876b5449a38c6cfecf531fb741f8">addVar</a> (const std::string &amp;tname, const std::string &amp;vname)</td></tr>
<tr class="separator:a0012876b5449a38c6cfecf531fb741f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae23835c308ab79d41be1bab099dde960"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:ae23835c308ab79d41be1bab099dde960"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classframework_1_1NtupleManager.html#ae23835c308ab79d41be1bab099dde960">setVar</a> (const std::string &amp;vname, const T &amp;value)</td></tr>
<tr class="separator:ae23835c308ab79d41be1bab099dde960"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cd75f1bf8ef585431918c9e75c086d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1NtupleManager.html#a6cd75f1bf8ef585431918c9e75c086d3">fill</a> ()</td></tr>
<tr class="separator:a6cd75f1bf8ef585431918c9e75c086d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d525a94630556f46b47670128a32564"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1NtupleManager.html#a8d525a94630556f46b47670128a32564">clear</a> ()</td></tr>
<tr class="memdesc:a8d525a94630556f46b47670128a32564"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset all of the variables to their limits.  <a href="classframework_1_1NtupleManager.html#a8d525a94630556f46b47670128a32564">More...</a><br /></td></tr>
<tr class="separator:a8d525a94630556f46b47670128a32564"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e93961116a9ad0e823d4faf9bb5243a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1NtupleManager.html#a9e93961116a9ad0e823d4faf9bb5243a">reset</a> ()</td></tr>
<tr class="separator:a9e93961116a9ad0e823d4faf9bb5243a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae27e119b5d4db18dafea92c664e9734e"><td class="memItemLeft" align="right" valign="top"><a id="ae27e119b5d4db18dafea92c664e9734e" name="ae27e119b5d4db18dafea92c664e9734e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>NtupleManager</b> (const <a class="el" href="classframework_1_1NtupleManager.html">NtupleManager</a> &amp;)=delete</td></tr>
<tr class="memdesc:ae27e119b5d4db18dafea92c664e9734e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hide Copy Constructor. <br /></td></tr>
<tr class="separator:ae27e119b5d4db18dafea92c664e9734e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa80b4558bd376c71b46ea530355cdebf"><td class="memItemLeft" align="right" valign="top"><a id="aa80b4558bd376c71b46ea530355cdebf" name="aa80b4558bd376c71b46ea530355cdebf"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classframework_1_1NtupleManager.html">NtupleManager</a> &amp;)=delete</td></tr>
<tr class="memdesc:aa80b4558bd376c71b46ea530355cdebf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hide Assignment Operator. <br /></td></tr>
<tr class="separator:aa80b4558bd376c71b46ea530355cdebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a95b2bb3823b5a35568c5facb85d441d1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classframework_1_1NtupleManager.html">NtupleManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1NtupleManager.html#a95b2bb3823b5a35568c5facb85d441d1">getInstance</a> ()</td></tr>
<tr class="separator:a95b2bb3823b5a35568c5facb85d441d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a4485951054d36684d0418ce6e77ef4e7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1NtupleManager.html#a4485951054d36684d0418ce6e77ef4e7">NtupleManager</a> ()</td></tr>
<tr class="memdesc:a4485951054d36684d0418ce6e77ef4e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private constructor to prevent instantiation.  <a href="classframework_1_1NtupleManager.html#a4485951054d36684d0418ce6e77ef4e7">More...</a><br /></td></tr>
<tr class="separator:a4485951054d36684d0418ce6e77ef4e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:abccf9864550c3ae23ab305b8b2091c6b"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; std::string, TTree * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1NtupleManager.html#abccf9864550c3ae23ab305b8b2091c6b">trees_</a></td></tr>
<tr class="memdesc:abccf9864550c3ae23ab305b8b2091c6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Container for output ROOT trees.  <a href="classframework_1_1NtupleManager.html#abccf9864550c3ae23ab305b8b2091c6b">More...</a><br /></td></tr>
<tr class="separator:abccf9864550c3ae23ab305b8b2091c6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a883badfbafd9a12ff6ee898b2117e7e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classframework_1_1Bus.html">framework::Bus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1NtupleManager.html#a883badfbafd9a12ff6ee898b2117e7e5">bus_</a></td></tr>
<tr class="memdesc:a883badfbafd9a12ff6ee898b2117e7e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Container for buffering variables.  <a href="classframework_1_1NtupleManager.html#a883badfbafd9a12ff6ee898b2117e7e5">More...</a><br /></td></tr>
<tr class="separator:a883badfbafd9a12ff6ee898b2117e7e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Singleton class used to manage the creation and pooling of ntuples. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classframework_1_1Bus.html">framework::Bus</a> Similar to the <a class="el" href="classframework_1_1Event.html" title="Implements an event buffer system for storing event data.">Event</a> bus itself, we use the <a class="el" href="classframework_1_1Bus.html">Bus</a> to buffer the variable values and attach them to their output TTrees. Unlike the event bus, we don't implement retrieval mechanisms for reading these values. </dd></dl>

<p class="definition">Definition at line <a class="el" href="NtupleManager_8h_source.html#l00036">36</a> of file <a class="el" href="NtupleManager_8h_source.html">NtupleManager.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4485951054d36684d0418ce6e77ef4e7" name="a4485951054d36684d0418ce6e77ef4e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4485951054d36684d0418ce6e77ef4e7">&#9670;&#160;</a></span>NtupleManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">framework::NtupleManager::NtupleManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Private constructor to prevent instantiation. </p>

<p class="definition">Definition at line <a class="el" href="NtupleManager_8cxx_source.html#l00006">6</a> of file <a class="el" href="NtupleManager_8cxx_source.html">NtupleManager.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    6</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a0012876b5449a38c6cfecf531fb741f8" name="a0012876b5449a38c6cfecf531fb741f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0012876b5449a38c6cfecf531fb741f8">&#9670;&#160;</a></span>addVar()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename VarType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void framework::NtupleManager::addVar </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>tname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>vname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Add a variable of type VarType to the ROOT tree with name 'tname'. If the variable already exists in any tree or the requested tree does not exists, an exception is thrown.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>
<p>in] VarType type of variable to add to the tree </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tname</td><td>Name of the tree to add the variable to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vname</td><td>Name of the variable to add to the tree </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>if tree doesn't exist or variable already does </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="NtupleManager_8h_source.html#l00058">58</a> of file <a class="el" href="NtupleManager_8h_source.html">NtupleManager.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   58</span>                                                              {</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>    <span class="comment">// Check if a tree named &#39;tname&#39; has already been created.  If</span></div>
<div class="line"><span class="lineno">   61</span>    <span class="comment">// not, throw an exception.</span></div>
<div class="line"><span class="lineno">   62</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classframework_1_1NtupleManager.html#abccf9864550c3ae23ab305b8b2091c6b">trees_</a>.count(tname) == 0)</div>
<div class="line"><span class="lineno">   63</span>      EXCEPTION_RAISE(<span class="stringliteral">&quot;NtupleManager&quot;</span>, <span class="stringliteral">&quot;A tree with name &quot;</span> + tname +</div>
<div class="line"><span class="lineno">   64</span>                                           <span class="stringliteral">&quot; has not been been created.&quot;</span>);</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>    <span class="comment">// Check if the variable exists in the map. If it does, throw</span></div>
<div class="line"><span class="lineno">   67</span>    <span class="comment">// an exception.</span></div>
<div class="line"><span class="lineno">   68</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classframework_1_1NtupleManager.html#a883badfbafd9a12ff6ee898b2117e7e5">bus_</a>.<a class="code hl_function" href="classframework_1_1Bus.html#a3a22a1e5763abc500f9bb1febd8fd575">isOnBoard</a>(vname)) {</div>
<div class="line"><span class="lineno">   69</span>      EXCEPTION_RAISE(<span class="stringliteral">&quot;NtupleManager&quot;</span>, <span class="stringliteral">&quot;A variable with name &quot;</span> + vname +</div>
<div class="line"><span class="lineno">   70</span>                                           <span class="stringliteral">&quot; has already been defined.&quot;</span>);</div>
<div class="line"><span class="lineno">   71</span>    }</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>    <span class="comment">// Board the bus</span></div>
<div class="line"><span class="lineno">   74</span>    <a class="code hl_variable" href="classframework_1_1NtupleManager.html#a883badfbafd9a12ff6ee898b2117e7e5">bus_</a>.<a class="code hl_function" href="classframework_1_1Bus.html#aa2884abb2688704c2623475f1017ccb5">board</a>&lt;VarType&gt;(vname);</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>    <span class="comment">// Attach the tree to the bus</span></div>
<div class="line"><span class="lineno">   77</span>    <a class="code hl_variable" href="classframework_1_1NtupleManager.html#a883badfbafd9a12ff6ee898b2117e7e5">bus_</a>.<a class="code hl_function" href="classframework_1_1Bus.html#a40b62daac37f24a9158f46b9077afe11">attach</a>(<a class="code hl_variable" href="classframework_1_1NtupleManager.html#abccf9864550c3ae23ab305b8b2091c6b">trees_</a>[tname], vname, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">   78</span>  }</div>
<div class="ttc" id="aclassframework_1_1Bus_html_a3a22a1e5763abc500f9bb1febd8fd575"><div class="ttname"><a href="classframework_1_1Bus.html#a3a22a1e5763abc500f9bb1febd8fd575">framework::Bus::isOnBoard</a></div><div class="ttdeci">bool isOnBoard(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="Bus_8h_source.html#l00116">Bus.h:116</a></div></div>
<div class="ttc" id="aclassframework_1_1Bus_html_a40b62daac37f24a9158f46b9077afe11"><div class="ttname"><a href="classframework_1_1Bus.html#a40b62daac37f24a9158f46b9077afe11">framework::Bus::attach</a></div><div class="ttdeci">TBranch * attach(TTree *tree, const std::string &amp;name, bool can_create)</div><div class="ttdef"><b>Definition:</b> <a href="Bus_8h_source.html#l00106">Bus.h:106</a></div></div>
<div class="ttc" id="aclassframework_1_1Bus_html_aa2884abb2688704c2623475f1017ccb5"><div class="ttname"><a href="classframework_1_1Bus.html#aa2884abb2688704c2623475f1017ccb5">framework::Bus::board</a></div><div class="ttdeci">void board(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="Bus_8h_source.html#l00064">Bus.h:64</a></div></div>
<div class="ttc" id="aclassframework_1_1NtupleManager_html_a883badfbafd9a12ff6ee898b2117e7e5"><div class="ttname"><a href="classframework_1_1NtupleManager.html#a883badfbafd9a12ff6ee898b2117e7e5">framework::NtupleManager::bus_</a></div><div class="ttdeci">framework::Bus bus_</div><div class="ttdoc">Container for buffering variables.</div><div class="ttdef"><b>Definition:</b> <a href="NtupleManager_8h_source.html#l00138">NtupleManager.h:138</a></div></div>
<div class="ttc" id="aclassframework_1_1NtupleManager_html_abccf9864550c3ae23ab305b8b2091c6b"><div class="ttname"><a href="classframework_1_1NtupleManager.html#abccf9864550c3ae23ab305b8b2091c6b">framework::NtupleManager::trees_</a></div><div class="ttdeci">std::unordered_map&lt; std::string, TTree * &gt; trees_</div><div class="ttdoc">Container for output ROOT trees.</div><div class="ttdef"><b>Definition:</b> <a href="NtupleManager_8h_source.html#l00135">NtupleManager.h:135</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Bus_8h_source.html#l00106">framework::Bus::attach()</a>, <a class="el" href="Bus_8h_source.html#l00064">framework::Bus::board()</a>, <a class="el" href="NtupleManager_8h_source.html#l00138">bus_</a>, <a class="el" href="Bus_8h_source.html#l00116">framework::Bus::isOnBoard()</a>, and <a class="el" href="NtupleManager_8h_source.html#l00135">trees_</a>.</p>

<p class="reference">Referenced by <a class="el" href="NtuplizeDarkBremInteraction_8cxx_source.html#l00013">dqm::NtuplizeDarkBremInteraction::onProcessStart()</a>, <a class="el" href="EcalDigiPipelineTest_8cxx_source.html#l00242">ecal::test::EcalCheckEnergyReconstruction::onProcessStart()</a>, and <a class="el" href="HcalDigiPipelineTest_8cxx_source.html#l00214">hcal::test::HcalCheckReconstruction::onProcessStart()</a>.</p>

</div>
</div>
<a id="a8d525a94630556f46b47670128a32564" name="a8d525a94630556f46b47670128a32564"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d525a94630556f46b47670128a32564">&#9670;&#160;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void framework::NtupleManager::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset all of the variables to their limits. </p>

<p class="definition">Definition at line <a class="el" href="NtupleManager_8cxx_source.html#l00030">30</a> of file <a class="el" href="NtupleManager_8cxx_source.html">NtupleManager.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   30</span>{ <a class="code hl_variable" href="classframework_1_1NtupleManager.html#a883badfbafd9a12ff6ee898b2117e7e5">bus_</a>.<a class="code hl_function" href="classframework_1_1Bus.html#a161931705bc55def70294d48ef72b4e7">clear</a>(); }</div>
<div class="ttc" id="aclassframework_1_1Bus_html_a161931705bc55def70294d48ef72b4e7"><div class="ttname"><a href="classframework_1_1Bus.html#a161931705bc55def70294d48ef72b4e7">framework::Bus::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="Bus_8h_source.html#l00125">Bus.h:125</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="NtupleManager_8h_source.html#l00138">bus_</a>, and <a class="el" href="Bus_8h_source.html#l00125">framework::Bus::clear()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Process_8cxx_source.html#l00116">framework::Process::run()</a>.</p>

</div>
</div>
<a id="a62a1bbf0768545af6d47d109a68d5e7c" name="a62a1bbf0768545af6d47d109a68d5e7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62a1bbf0768545af6d47d109a68d5e7c">&#9670;&#160;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void framework::NtupleManager::create </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>tname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create a ROOT tree to hold the ntuple variables (ROOT leaves). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Name of the tree. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="NtupleManager_8cxx_source.html#l00014">14</a> of file <a class="el" href="NtupleManager_8cxx_source.html">NtupleManager.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   14</span>                                                {</div>
<div class="line"><span class="lineno">   15</span>  <span class="comment">// Check if a tree named &#39;name&#39; has already been created.  If so</span></div>
<div class="line"><span class="lineno">   16</span>  <span class="comment">// throw an exception.</span></div>
<div class="line"><span class="lineno">   17</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classframework_1_1NtupleManager.html#abccf9864550c3ae23ab305b8b2091c6b">trees_</a>.count(name) != 0)</div>
<div class="line"><span class="lineno">   18</span>    EXCEPTION_RAISE(<span class="stringliteral">&quot;NtupleManager&quot;</span>,</div>
<div class="line"><span class="lineno">   19</span>                    <span class="stringliteral">&quot;A tree with name &quot;</span> + name + <span class="stringliteral">&quot; has already been created.&quot;</span>);</div>
<div class="line"><span class="lineno">   20</span> </div>
<div class="line"><span class="lineno">   21</span>  <span class="comment">// Create a tree with the given name and add it to the list of trees.</span></div>
<div class="line"><span class="lineno">   22</span>  <a class="code hl_variable" href="classframework_1_1NtupleManager.html#abccf9864550c3ae23ab305b8b2091c6b">trees_</a>[name] = <span class="keyword">new</span> TTree{name.c_str(), name.c_str()};</div>
<div class="line"><span class="lineno">   23</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="NtupleManager_8h_source.html#l00135">trees_</a>.</p>

<p class="reference">Referenced by <a class="el" href="NtuplizeDarkBremInteraction_8cxx_source.html#l00013">dqm::NtuplizeDarkBremInteraction::onProcessStart()</a>, <a class="el" href="EcalDigiPipelineTest_8cxx_source.html#l00242">ecal::test::EcalCheckEnergyReconstruction::onProcessStart()</a>, and <a class="el" href="HcalDigiPipelineTest_8cxx_source.html#l00214">hcal::test::HcalCheckReconstruction::onProcessStart()</a>.</p>

</div>
</div>
<a id="a6cd75f1bf8ef585431918c9e75c086d3" name="a6cd75f1bf8ef585431918c9e75c086d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cd75f1bf8ef585431918c9e75c086d3">&#9670;&#160;</a></span>fill()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void framework::NtupleManager::fill </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="NtupleManager_8cxx_source.html#l00025">25</a> of file <a class="el" href="NtupleManager_8cxx_source.html">NtupleManager.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   25</span>                         {</div>
<div class="line"><span class="lineno">   26</span>  <span class="comment">// Loop over all the trees and fill them</span></div>
<div class="line"><span class="lineno">   27</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [name, tree]: <a class="code hl_variable" href="classframework_1_1NtupleManager.html#abccf9864550c3ae23ab305b8b2091c6b">trees_</a>) tree-&gt;Fill();</div>
<div class="line"><span class="lineno">   28</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a95b2bb3823b5a35568c5facb85d441d1" name="a95b2bb3823b5a35568c5facb85d441d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95b2bb3823b5a35568c5facb85d441d1">&#9670;&#160;</a></span>getInstance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classframework_1_1NtupleManager.html">NtupleManager</a> &amp; framework::NtupleManager::getInstance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="classframework_1_1NtupleManager.html" title="Singleton class used to manage the creation and pooling of ntuples.">NtupleManager</a> instance </dd></dl>

<p class="definition">Definition at line <a class="el" href="NtupleManager_8cxx_source.html#l00008">8</a> of file <a class="el" href="NtupleManager_8cxx_source.html">NtupleManager.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    8</span>                                          {</div>
<div class="line"><span class="lineno">    9</span>  <span class="comment">// Create an instance of the NtupleManager if needed</span></div>
<div class="line"><span class="lineno">   10</span>  <span class="keyword">static</span> <a class="code hl_function" href="classframework_1_1NtupleManager.html#a4485951054d36684d0418ce6e77ef4e7">NtupleManager</a> instance;</div>
<div class="line"><span class="lineno">   11</span>  <span class="keywordflow">return</span> instance;</div>
<div class="line"><span class="lineno">   12</span>}</div>
<div class="ttc" id="aclassframework_1_1NtupleManager_html_a4485951054d36684d0418ce6e77ef4e7"><div class="ttname"><a href="classframework_1_1NtupleManager.html#a4485951054d36684d0418ce6e77ef4e7">framework::NtupleManager::NtupleManager</a></div><div class="ttdeci">NtupleManager()</div><div class="ttdoc">Private constructor to prevent instantiation.</div><div class="ttdef"><b>Definition:</b> <a href="NtupleManager_8cxx_source.html#l00006">NtupleManager.cxx:6</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="Process_8cxx_source.html#l00116">framework::Process::run()</a>.</p>

</div>
</div>
<a id="a9e93961116a9ad0e823d4faf9bb5243a" name="a9e93961116a9ad0e823d4faf9bb5243a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e93961116a9ad0e823d4faf9bb5243a">&#9670;&#160;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void framework::NtupleManager::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Reset <a class="el" href="classframework_1_1NtupleManager.html" title="Singleton class used to manage the creation and pooling of ntuples.">NtupleManager</a> to blank state</p>
<p >We assume that ROOT handles cleanup of TTrees when writing them to a blank state. </p>

<p class="definition">Definition at line <a class="el" href="NtupleManager_8cxx_source.html#l00032">32</a> of file <a class="el" href="NtupleManager_8cxx_source.html">NtupleManager.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   32</span>                          { </div>
<div class="line"><span class="lineno">   33</span>  <span class="comment">// we assume that ROOT handles clean-up</span></div>
<div class="line"><span class="lineno">   34</span>  <span class="comment">//  of the TTrees when they are written to the output histogram file</span></div>
<div class="line"><span class="lineno">   35</span>  <a class="code hl_variable" href="classframework_1_1NtupleManager.html#abccf9864550c3ae23ab305b8b2091c6b">trees_</a>.clear();</div>
<div class="line"><span class="lineno">   36</span>  <a class="code hl_variable" href="classframework_1_1NtupleManager.html#a883badfbafd9a12ff6ee898b2117e7e5">bus_</a>.<a class="code hl_function" href="classframework_1_1Bus.html#aa3da7e2895be3b208676fc75b9a001a3">everybodyOff</a>();</div>
<div class="line"><span class="lineno">   37</span>}</div>
<div class="ttc" id="aclassframework_1_1Bus_html_aa3da7e2895be3b208676fc75b9a001a3"><div class="ttname"><a href="classframework_1_1Bus.html#aa3da7e2895be3b208676fc75b9a001a3">framework::Bus::everybodyOff</a></div><div class="ttdeci">void everybodyOff()</div><div class="ttdef"><b>Definition:</b> <a href="Bus_8h_source.html#l00139">Bus.h:139</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="NtupleManager_8h_source.html#l00138">bus_</a>, <a class="el" href="Bus_8h_source.html#l00139">framework::Bus::everybodyOff()</a>, and <a class="el" href="NtupleManager_8h_source.html#l00135">trees_</a>.</p>

<p class="reference">Referenced by <a class="el" href="Process_8cxx_source.html#l00116">framework::Process::run()</a>.</p>

</div>
</div>
<a id="ae23835c308ab79d41be1bab099dde960" name="ae23835c308ab79d41be1bab099dde960"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae23835c308ab79d41be1bab099dde960">&#9670;&#160;</a></span>setVar()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void framework::NtupleManager::setVar </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>vname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const T &amp;&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Set the value of the variable named 'vname'. If the variable value is not set, the default value will be used when filling the tree. If the requested variable has not been created, a warning will be printed. This allows a user to choose to make a subset of an ntuple by simply not adding the variable to the tree.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>
<p>in] T type of variable </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">vname</td><td>Name of the variable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>The value of the variable </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="NtupleManager_8h_source.html#l00093">93</a> of file <a class="el" href="NtupleManager_8h_source.html">NtupleManager.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   93</span>                                                      {</div>
<div class="line"><span class="lineno">   94</span>    <span class="comment">// Check if the variable already exists in the map.  If it</span></div>
<div class="line"><span class="lineno">   95</span>    <span class="comment">// doesn&#39;t, warn the user and don&#39;t try to set the variable</span></div>
<div class="line"><span class="lineno">   96</span>    <span class="comment">// value.</span></div>
<div class="line"><span class="lineno">   97</span>    <span class="keywordflow">if</span> (not <a class="code hl_variable" href="classframework_1_1NtupleManager.html#a883badfbafd9a12ff6ee898b2117e7e5">bus_</a>.<a class="code hl_function" href="classframework_1_1Bus.html#a3a22a1e5763abc500f9bb1febd8fd575">isOnBoard</a>(vname)) {</div>
<div class="line"><span class="lineno">   98</span>      ldmx_log(warn) &lt;&lt; <span class="stringliteral">&quot;The variable &quot;</span> &lt;&lt; vname</div>
<div class="line"><span class="lineno">   99</span>                     &lt;&lt; <span class="stringliteral">&quot; does not exist in the tree. Skipping.&quot;</span>;</div>
<div class="line"><span class="lineno">  100</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  101</span>    }</div>
<div class="line"><span class="lineno">  102</span> </div>
<div class="line"><span class="lineno">  103</span>    <span class="comment">// Set the value of the variable</span></div>
<div class="line"><span class="lineno">  104</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  105</span>      <a class="code hl_variable" href="classframework_1_1NtupleManager.html#a883badfbafd9a12ff6ee898b2117e7e5">bus_</a>.<a class="code hl_function" href="classframework_1_1Bus.html#a0abb1c941fcf336d08715d9c334cbb60">update</a>(vname,value);</div>
<div class="line"><span class="lineno">  106</span>    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::bad_cast&amp;) {</div>
<div class="line"><span class="lineno">  107</span>      EXCEPTION_RAISE(<span class="stringliteral">&quot;TypeMismatch&quot;</span>, <span class="stringliteral">&quot;Ntuple variable &#39;&quot;</span> + vname +</div>
<div class="line"><span class="lineno">  108</span>                                          <span class="stringliteral">&quot;&#39; is being set by the wrong type &#39;&quot;</span> +</div>
<div class="line"><span class="lineno">  109</span>                                          <span class="keyword">typeid</span>(value).name() + <span class="stringliteral">&quot;&#39;.&quot;</span>);</div>
<div class="line"><span class="lineno">  110</span>    }</div>
<div class="line"><span class="lineno">  111</span>  }</div>
<div class="ttc" id="aclassframework_1_1Bus_html_a0abb1c941fcf336d08715d9c334cbb60"><div class="ttname"><a href="classframework_1_1Bus.html#a0abb1c941fcf336d08715d9c334cbb60">framework::Bus::update</a></div><div class="ttdeci">void update(const std::string &amp;name, const BaggageType &amp;obj)</div><div class="ttdef"><b>Definition:</b> <a href="Bus_8h_source.html#l00082">Bus.h:82</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="NtupleManager_8h_source.html#l00138">bus_</a>, <a class="el" href="Bus_8h_source.html#l00116">framework::Bus::isOnBoard()</a>, and <a class="el" href="Bus_8h_source.html#l00082">framework::Bus::update()</a>.</p>

<p class="reference">Referenced by <a class="el" href="NtuplizeDarkBremInteraction_8cxx_source.html#l00062">dqm::NtuplizeDarkBremInteraction::analyze()</a>, <a class="el" href="EcalDigiPipelineTest_8cxx_source.html#l00257">ecal::test::EcalCheckEnergyReconstruction::analyze()</a>, and <a class="el" href="HcalDigiPipelineTest_8cxx_source.html#l00235">hcal::test::HcalCheckReconstruction::analyze()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a883badfbafd9a12ff6ee898b2117e7e5" name="a883badfbafd9a12ff6ee898b2117e7e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a883badfbafd9a12ff6ee898b2117e7e5">&#9670;&#160;</a></span>bus_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classframework_1_1Bus.html">framework::Bus</a> framework::NtupleManager::bus_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Container for buffering variables. </p>

<p class="definition">Definition at line <a class="el" href="NtupleManager_8h_source.html#l00138">138</a> of file <a class="el" href="NtupleManager_8h_source.html">NtupleManager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="NtupleManager_8h_source.html#l00058">addVar()</a>, <a class="el" href="NtupleManager_8cxx_source.html#l00030">clear()</a>, <a class="el" href="NtupleManager_8cxx_source.html#l00032">reset()</a>, and <a class="el" href="NtupleManager_8h_source.html#l00093">setVar()</a>.</p>

</div>
</div>
<a id="abccf9864550c3ae23ab305b8b2091c6b" name="abccf9864550c3ae23ab305b8b2091c6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abccf9864550c3ae23ab305b8b2091c6b">&#9670;&#160;</a></span>trees_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;std::string, TTree*&gt; framework::NtupleManager::trees_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Container for output ROOT trees. </p>

<p class="definition">Definition at line <a class="el" href="NtupleManager_8h_source.html#l00135">135</a> of file <a class="el" href="NtupleManager_8h_source.html">NtupleManager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="NtupleManager_8h_source.html#l00058">addVar()</a>, <a class="el" href="NtupleManager_8cxx_source.html#l00014">create()</a>, and <a class="el" href="NtupleManager_8cxx_source.html#l00032">reset()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Framework/include/Framework/<a class="el" href="NtupleManager_8h_source.html">NtupleManager.h</a></li>
<li>Framework/src/Framework/<a class="el" href="NtupleManager_8cxx_source.html">NtupleManager.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
		<script src="custom.js"></script>
	</body>
</html>