<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.9.5"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>LDMX Software: simcore::darkbrem::DarkBremVertexLibraryModel Class Reference</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">LDMX Software
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part --><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>simcore</b></li><li class="navelem"><b>darkbrem</b></li><li class="navelem"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html">DarkBremVertexLibraryModel</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">simcore::darkbrem::DarkBremVertexLibraryModel Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="DarkBremVertexLibraryModel_8h_source.html">DarkBremVertexLibraryModel.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_1_1Chi.html">Chi</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_1_1DiffCross.html">DiffCross</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_1_1OutgoingKinematics.html">OutgoingKinematics</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a08be500d55c87ae8e76d5e262f255d7c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a08be500d55c87ae8e76d5e262f255d7c">DarkBremVertexLibraryModel</a> (<a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;params)</td></tr>
<tr class="separator:a08be500d55c87ae8e76d5e262f255d7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a913d54b1b07e80257a1eb93ee12f7fbf"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a913d54b1b07e80257a1eb93ee12f7fbf">~DarkBremVertexLibraryModel</a> ()</td></tr>
<tr class="separator:a913d54b1b07e80257a1eb93ee12f7fbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3304c5f0c8ad98888ace4f0edee1fc47"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a3304c5f0c8ad98888ace4f0edee1fc47">PrintInfo</a> () const</td></tr>
<tr class="separator:a3304c5f0c8ad98888ace4f0edee1fc47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a971d9bf21e31ffd5224fa8706a441a71"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a971d9bf21e31ffd5224fa8706a441a71">RecordConfig</a> (<a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> &amp;h) const</td></tr>
<tr class="separator:a971d9bf21e31ffd5224fa8706a441a71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd90bd2f58d1aebb5265b29b93bf1f67"><td class="memItemLeft" align="right" valign="top">virtual G4double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#acd90bd2f58d1aebb5265b29b93bf1f67">ComputeCrossSectionPerAtom</a> (G4double electronKE, G4double atomicA, G4double atomicZ)</td></tr>
<tr class="separator:acd90bd2f58d1aebb5265b29b93bf1f67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5673e694bc4e22386fc7fb35c12c74a8"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a5673e694bc4e22386fc7fb35c12c74a8">GenerateChange</a> (G4ParticleChange &amp;particleChange, const G4Track &amp;track, const G4Step &amp;step)</td></tr>
<tr class="separator:a5673e694bc4e22386fc7fb35c12c74a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel.html">simcore::darkbrem::G4eDarkBremsstrahlungModel</a></td></tr>
<tr class="memitem:aa08335d8f62bbd4fdec136aef9c53ab7 inherit pub_methods_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel.html#aa08335d8f62bbd4fdec136aef9c53ab7">G4eDarkBremsstrahlungModel</a> (const <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;p)</td></tr>
<tr class="separator:aa08335d8f62bbd4fdec136aef9c53ab7 inherit pub_methods_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7131efa7cd7b9c76390322c36ae85e3e inherit pub_methods_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td class="memItemLeft" align="right" valign="top"><a id="a7131efa7cd7b9c76390322c36ae85e3e" name="a7131efa7cd7b9c76390322c36ae85e3e"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><b>~G4eDarkBremsstrahlungModel</b> ()=default</td></tr>
<tr class="memdesc:a7131efa7cd7b9c76390322c36ae85e3e inherit pub_methods_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor, nothing on purpose. <br /></td></tr>
<tr class="separator:a7131efa7cd7b9c76390322c36ae85e3e inherit pub_methods_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e2fb1195644744a948930798d0507d4 inherit pub_methods_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel.html#a5e2fb1195644744a948930798d0507d4">PrintInfo</a> () const =0</td></tr>
<tr class="separator:a5e2fb1195644744a948930798d0507d4 inherit pub_methods_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb5e869238d2eec3064fca00e5bcc4a0 inherit pub_methods_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel.html#aeb5e869238d2eec3064fca00e5bcc4a0">RecordConfig</a> (<a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> &amp;h) const =0</td></tr>
<tr class="separator:aeb5e869238d2eec3064fca00e5bcc4a0 inherit pub_methods_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb67fc22e8dab2ed0598e8e0f1a35704 inherit pub_methods_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td class="memItemLeft" align="right" valign="top">virtual G4double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel.html#afb67fc22e8dab2ed0598e8e0f1a35704">ComputeCrossSectionPerAtom</a> (G4double electronKE, G4double atomicA, G4double atomicZ)=0</td></tr>
<tr class="separator:afb67fc22e8dab2ed0598e8e0f1a35704 inherit pub_methods_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6d899bdc36e66c065ea9a5bde32753f inherit pub_methods_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel.html#ad6d899bdc36e66c065ea9a5bde32753f">GenerateChange</a> (G4ParticleChange &amp;particleChange, const G4Track &amp;track, const G4Step &amp;step)=0</td></tr>
<tr class="separator:ad6d899bdc36e66c065ea9a5bde32753f inherit pub_methods_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-types" name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a85cb4affd3f658e98cfd04a404a91c9d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9d">DarkBremMethod</a> { <a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9dac5b1a1cefb1547ebed283c2ce1a3f55d">ForwardOnly</a> = 1
, <a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9daeb553fbf5a31cf9c130577439f64c554">CMScaling</a> = 2
, <a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9da6ce4a356668edf02a0319b2e1469fd49">Undefined</a> = 3
 }</td></tr>
<tr class="separator:a85cb4affd3f658e98cfd04a404a91c9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97797106c7859b0b4e339201a67ffad7"><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a97797106c7859b0b4e339201a67ffad7">StateType</a></td></tr>
<tr class="separator:a97797106c7859b0b4e339201a67ffad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ab9ec0e42de963bb1d81603f504af73ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#ab9ec0e42de963bb1d81603f504af73ff">SetMadGraphDataLibrary</a> (std::string path)</td></tr>
<tr class="separator:ab9ec0e42de963bb1d81603f504af73ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57f5b3511c14e408913b163dd0d18282"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a57f5b3511c14e408913b163dd0d18282">ParseLHE</a> (std::string fname)</td></tr>
<tr class="separator:a57f5b3511c14e408913b163dd0d18282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c3d1ae7e87b3d1a8ef8ae2a5faa8d20"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a5c3d1ae7e87b3d1a8ef8ae2a5faa8d20">MakePlaceholders</a> ()</td></tr>
<tr class="separator:a5c3d1ae7e87b3d1a8ef8ae2a5faa8d20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cb035e7f31c9e4a699a89ea0d1ab518"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_1_1OutgoingKinematics.html">OutgoingKinematics</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a2cb035e7f31c9e4a699a89ea0d1ab518">GetMadgraphData</a> (double E0)</td></tr>
<tr class="separator:a2cb035e7f31c9e4a699a89ea0d1ab518"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a6cf69b226c2266e8ed554b27ac71c09f"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a6cf69b226c2266e8ed554b27ac71c09f">maxIterations_</a> {10000}</td></tr>
<tr class="separator:a6cf69b226c2266e8ed554b27ac71c09f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ccee76de16f49325aaedf0749202c97"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a1ccee76de16f49325aaedf0749202c97">threshold_</a></td></tr>
<tr class="separator:a1ccee76de16f49325aaedf0749202c97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1524f0540fa212c52cc37f64c5d3bdd9"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a1524f0540fa212c52cc37f64c5d3bdd9">epsilon_</a></td></tr>
<tr class="separator:a1524f0540fa212c52cc37f64c5d3bdd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af376fdaf4fb080ef6520274dae4ae746"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9d">DarkBremMethod</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#af376fdaf4fb080ef6520274dae4ae746">method_</a> {<a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9da6ce4a356668edf02a0319b2e1469fd49">DarkBremMethod::Undefined</a>}</td></tr>
<tr class="separator:af376fdaf4fb080ef6520274dae4ae746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ee9dc30b97d61ad4836e0204bde1f16"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a8ee9dc30b97d61ad4836e0204bde1f16">method_name_</a></td></tr>
<tr class="separator:a8ee9dc30b97d61ad4836e0204bde1f16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30d0abe713ee9c188306def95568fb4d"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a30d0abe713ee9c188306def95568fb4d">library_path_</a></td></tr>
<tr class="separator:a30d0abe713ee9c188306def95568fb4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a439de00da15efd8b5d054e7c78ba55f9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a439de00da15efd8b5d054e7c78ba55f9">alwaysCreateNewElectron_</a> {true}</td></tr>
<tr class="separator:a439de00da15efd8b5d054e7c78ba55f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7837240f133ccd4070ce6d9253501ff"><td class="memItemLeft" align="right" valign="top">std::map&lt; double, std::vector&lt; <a class="el" href="structsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_1_1OutgoingKinematics.html">OutgoingKinematics</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#ab7837240f133ccd4070ce6d9253501ff">madGraphData_</a></td></tr>
<tr class="separator:ab7837240f133ccd4070ce6d9253501ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04824abf04b0a3c03732c3ace3a21f69"><td class="memItemLeft" align="right" valign="top">std::map&lt; double, unsigned int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a04824abf04b0a3c03732c3ace3a21f69">currentDataPoints_</a></td></tr>
<tr class="separator:a04824abf04b0a3c03732c3ace3a21f69"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel.html">simcore::darkbrem::G4eDarkBremsstrahlungModel</a></td></tr>
<tr class="memitem:a2697f318c42a25e76b8924cb1b6c08c0 inherit pro_attribs_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td class="memItemLeft" align="right" valign="top">framework::logging::logger&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel.html#a2697f318c42a25e76b8924cb1b6c08c0">theLog_</a></td></tr>
<tr class="memdesc:a2697f318c42a25e76b8924cb1b6c08c0 inherit pro_attribs_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">The logging apparatus for this model.  <a href="classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel.html#a2697f318c42a25e76b8924cb1b6c08c0">More...</a><br /></td></tr>
<tr class="separator:a2697f318c42a25e76b8924cb1b6c08c0 inherit pro_attribs_classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Geant4 implementation of the model for a particle undergoing a dark brem where we use an imported vertex library to decide the outgoing kinematics.</p>
<p >This is where all the heavy lifting in terms of calculating cross sections and actually having an electron do a dark brem occurs. This model depends on severl configurable parameters.</p>
<ul>
<li>library_path : the full path to the directory containing the LHE dark brem vertices that will be read in to make the vertex library</li>
<li>epsilon : strength of the dark photon - photon mixing</li>
<li>threshold : minimum energy in GeV for the electron to have a non-zero cross section for going dark brem</li>
<li>method : scaling method to use to scale the dark brem vertices from the library to the actual electron energy when a dark brem occurs</li>
</ul>
<p >The required parameter is a vertex library generated in MadGraph (library_path). The other parameters have helpful defaults set in the python configuration class DarkBrem and are there for you to be able to tune this model's behavior. An example library for each of the major mass points is installed with SimCore and is compressed as stored in the data directory. </p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00037">37</a> of file <a class="el" href="DarkBremVertexLibraryModel_8h_source.html">DarkBremVertexLibraryModel.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a97797106c7859b0b4e339201a67ffad7" name="a97797106c7859b0b4e339201a67ffad7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97797106c7859b0b4e339201a67ffad7">&#9670;&#160;</a></span>StateType</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;double&gt; <a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a97797106c7859b0b4e339201a67ffad7">simcore::darkbrem::DarkBremVertexLibraryModel::StateType</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Helpful typedef for boost integration. </p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00131">131</a> of file <a class="el" href="DarkBremVertexLibraryModel_8h_source.html">DarkBremVertexLibraryModel.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a85cb4affd3f658e98cfd04a404a91c9d" name="a85cb4affd3f658e98cfd04a404a91c9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85cb4affd3f658e98cfd04a404a91c9d">&#9670;&#160;</a></span>DarkBremMethod</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9d">simcore::darkbrem::DarkBremVertexLibraryModel::DarkBremMethod</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Possible methods to use the dark brem vertices from the imported library inside of this model. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a85cb4affd3f658e98cfd04a404a91c9dac5b1a1cefb1547ebed283c2ce1a3f55d" name="a85cb4affd3f658e98cfd04a404a91c9dac5b1a1cefb1547ebed283c2ce1a3f55d"></a>ForwardOnly&#160;</td><td class="fielddoc"><p >Use actual electron energy and get pT from LHE (such that pT^2+me^2 &lt; Eacc^2) </p>
</td></tr>
<tr><td class="fieldname"><a id="a85cb4affd3f658e98cfd04a404a91c9daeb553fbf5a31cf9c130577439f64c554" name="a85cb4affd3f658e98cfd04a404a91c9daeb553fbf5a31cf9c130577439f64c554"></a>CMScaling&#160;</td><td class="fielddoc"><p >Boost LHE vertex momenta to the actual electron energy. </p>
</td></tr>
<tr><td class="fieldname"><a id="a85cb4affd3f658e98cfd04a404a91c9da6ce4a356668edf02a0319b2e1469fd49" name="a85cb4affd3f658e98cfd04a404a91c9da6ce4a356668edf02a0319b2e1469fd49"></a>Undefined&#160;</td><td class="fielddoc"><p >Use LHE vertex as is. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00288">288</a> of file <a class="el" href="DarkBremVertexLibraryModel_8h_source.html">DarkBremVertexLibraryModel.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  288</span>                      {</div>
<div class="line"><span class="lineno">  291</span>    <a class="code hl_enumvalue" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9dac5b1a1cefb1547ebed283c2ce1a3f55d">ForwardOnly</a> = 1,</div>
<div class="line"><span class="lineno">  293</span>    <a class="code hl_enumvalue" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9daeb553fbf5a31cf9c130577439f64c554">CMScaling</a> = 2,</div>
<div class="line"><span class="lineno">  295</span>    <a class="code hl_enumvalue" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9da6ce4a356668edf02a0319b2e1469fd49">Undefined</a> = 3</div>
<div class="line"><span class="lineno">  296</span>  };</div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_html_a85cb4affd3f658e98cfd04a404a91c9da6ce4a356668edf02a0319b2e1469fd49"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9da6ce4a356668edf02a0319b2e1469fd49">simcore::darkbrem::DarkBremVertexLibraryModel::Undefined</a></div><div class="ttdeci">@ Undefined</div><div class="ttdoc">Use LHE vertex as is.</div><div class="ttdef"><b>Definition:</b> <a href="DarkBremVertexLibraryModel_8h_source.html#l00296">DarkBremVertexLibraryModel.h:295</a></div></div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_html_a85cb4affd3f658e98cfd04a404a91c9dac5b1a1cefb1547ebed283c2ce1a3f55d"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9dac5b1a1cefb1547ebed283c2ce1a3f55d">simcore::darkbrem::DarkBremVertexLibraryModel::ForwardOnly</a></div><div class="ttdeci">@ ForwardOnly</div><div class="ttdef"><b>Definition:</b> <a href="DarkBremVertexLibraryModel_8h_source.html#l00291">DarkBremVertexLibraryModel.h:291</a></div></div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_html_a85cb4affd3f658e98cfd04a404a91c9daeb553fbf5a31cf9c130577439f64c554"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9daeb553fbf5a31cf9c130577439f64c554">simcore::darkbrem::DarkBremVertexLibraryModel::CMScaling</a></div><div class="ttdeci">@ CMScaling</div><div class="ttdoc">Boost LHE vertex momenta to the actual electron energy.</div><div class="ttdef"><b>Definition:</b> <a href="DarkBremVertexLibraryModel_8h_source.html#l00293">DarkBremVertexLibraryModel.h:293</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a08be500d55c87ae8e76d5e262f255d7c" name="a08be500d55c87ae8e76d5e262f255d7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08be500d55c87ae8e76d5e262f255d7c">&#9670;&#160;</a></span>DarkBremVertexLibraryModel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simcore::darkbrem::DarkBremVertexLibraryModel::DarkBremVertexLibraryModel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Constructor Set the parameters for this model.</p>
<p >The method name is converted to an enum through a hard-coded switch statement.</p>
<p >The threshold is set to the maximum of the passed value or twice the A' mass (so that it kinematically makes sense).</p>
<p >The library path is immediately passed to SetMadGraphDataLibrary. </p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00027">27</a> of file <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html">DarkBremVertexLibraryModel.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   29</span>    : <a class="code hl_function" href="classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel.html#aa08335d8f62bbd4fdec136aef9c53ab7">G4eDarkBremsstrahlungModel</a>(params), <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#af376fdaf4fb080ef6520274dae4ae746">method_</a>(<a class="code hl_enumvalue" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9da6ce4a356668edf02a0319b2e1469fd49">DarkBremMethod::Undefined</a>) {</div>
<div class="line"><span class="lineno">   30</span>  <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a8ee9dc30b97d61ad4836e0204bde1f16">method_name_</a> = params.<a class="code hl_function" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;std::string&gt;(<span class="stringliteral">&quot;method&quot;</span>);</div>
<div class="line"><span class="lineno">   31</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a8ee9dc30b97d61ad4836e0204bde1f16">method_name_</a> == <span class="stringliteral">&quot;forward_only&quot;</span>) {</div>
<div class="line"><span class="lineno">   32</span>    <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#af376fdaf4fb080ef6520274dae4ae746">method_</a> = <a class="code hl_enumvalue" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9dac5b1a1cefb1547ebed283c2ce1a3f55d">DarkBremMethod::ForwardOnly</a>;</div>
<div class="line"><span class="lineno">   33</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a8ee9dc30b97d61ad4836e0204bde1f16">method_name_</a> == <span class="stringliteral">&quot;cm_scaling&quot;</span>) {</div>
<div class="line"><span class="lineno">   34</span>    <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#af376fdaf4fb080ef6520274dae4ae746">method_</a> = <a class="code hl_enumvalue" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9daeb553fbf5a31cf9c130577439f64c554">DarkBremMethod::CMScaling</a>;</div>
<div class="line"><span class="lineno">   35</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a8ee9dc30b97d61ad4836e0204bde1f16">method_name_</a> == <span class="stringliteral">&quot;undefined&quot;</span>) {</div>
<div class="line"><span class="lineno">   36</span>    <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#af376fdaf4fb080ef6520274dae4ae746">method_</a> = <a class="code hl_enumvalue" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9da6ce4a356668edf02a0319b2e1469fd49">DarkBremMethod::Undefined</a>;</div>
<div class="line"><span class="lineno">   37</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   38</span>    EXCEPTION_RAISE(<span class="stringliteral">&quot;InvalidMethod&quot;</span>, <span class="stringliteral">&quot;Invalid dark brem simulation method &#39;&quot;</span> +</div>
<div class="line"><span class="lineno">   39</span>                                         <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a8ee9dc30b97d61ad4836e0204bde1f16">method_name_</a> + <span class="stringliteral">&quot;&#39;.&quot;</span>);</div>
<div class="line"><span class="lineno">   40</span>  }</div>
<div class="line"><span class="lineno">   41</span> </div>
<div class="line"><span class="lineno">   42</span>  <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a1ccee76de16f49325aaedf0749202c97">threshold_</a> = std::max(</div>
<div class="line"><span class="lineno">   43</span>      params.<a class="code hl_function" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;threshold&quot;</span>),</div>
<div class="line"><span class="lineno">   44</span>      2. * <a class="code hl_function" href="classsimcore_1_1darkbrem_1_1G4APrime.html#a0384b294f059bfee2736db887a13d307">G4APrime::APrime</a>()-&gt;GetPDGMass() / CLHEP::GeV  <span class="comment">// mass A&#39; in GeV</span></div>
<div class="line"><span class="lineno">   45</span>  );</div>
<div class="line"><span class="lineno">   46</span> </div>
<div class="line"><span class="lineno">   47</span>  <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a1524f0540fa212c52cc37f64c5d3bdd9">epsilon_</a> = params.<a class="code hl_function" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;epsilon&quot;</span>);</div>
<div class="line"><span class="lineno">   48</span> </div>
<div class="line"><span class="lineno">   49</span>  <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a30d0abe713ee9c188306def95568fb4d">library_path_</a> = params.<a class="code hl_function" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;std::string&gt;(<span class="stringliteral">&quot;library_path&quot;</span>);</div>
<div class="line"><span class="lineno">   50</span>  <a class="code hl_function" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#ab9ec0e42de963bb1d81603f504af73ff">SetMadGraphDataLibrary</a>(<a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a30d0abe713ee9c188306def95568fb4d">library_path_</a>);</div>
<div class="line"><span class="lineno">   51</span>}</div>
<div class="ttc" id="aclassframework_1_1config_1_1Parameters_html_a18206b7c01007dd706abce7e5505eae1"><div class="ttname"><a href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">framework::config::Parameters::getParameter</a></div><div class="ttdeci">T getParameter(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="Parameters_8h_source.html#l00089">Parameters.h:89</a></div></div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_html_a1524f0540fa212c52cc37f64c5d3bdd9"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a1524f0540fa212c52cc37f64c5d3bdd9">simcore::darkbrem::DarkBremVertexLibraryModel::epsilon_</a></div><div class="ttdeci">double epsilon_</div><div class="ttdef"><b>Definition:</b> <a href="DarkBremVertexLibraryModel_8h_source.html#l00280">DarkBremVertexLibraryModel.h:280</a></div></div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_html_a1ccee76de16f49325aaedf0749202c97"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a1ccee76de16f49325aaedf0749202c97">simcore::darkbrem::DarkBremVertexLibraryModel::threshold_</a></div><div class="ttdeci">double threshold_</div><div class="ttdef"><b>Definition:</b> <a href="DarkBremVertexLibraryModel_8h_source.html#l00272">DarkBremVertexLibraryModel.h:272</a></div></div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_html_a30d0abe713ee9c188306def95568fb4d"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a30d0abe713ee9c188306def95568fb4d">simcore::darkbrem::DarkBremVertexLibraryModel::library_path_</a></div><div class="ttdeci">std::string library_path_</div><div class="ttdef"><b>Definition:</b> <a href="DarkBremVertexLibraryModel_8h_source.html#l00312">DarkBremVertexLibraryModel.h:312</a></div></div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_html_a8ee9dc30b97d61ad4836e0204bde1f16"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a8ee9dc30b97d61ad4836e0204bde1f16">simcore::darkbrem::DarkBremVertexLibraryModel::method_name_</a></div><div class="ttdeci">std::string method_name_</div><div class="ttdef"><b>Definition:</b> <a href="DarkBremVertexLibraryModel_8h_source.html#l00307">DarkBremVertexLibraryModel.h:307</a></div></div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_html_ab9ec0e42de963bb1d81603f504af73ff"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#ab9ec0e42de963bb1d81603f504af73ff">simcore::darkbrem::DarkBremVertexLibraryModel::SetMadGraphDataLibrary</a></div><div class="ttdeci">void SetMadGraphDataLibrary(std::string path)</div><div class="ttdef"><b>Definition:</b> <a href="DarkBremVertexLibraryModel_8cxx_source.html#l00269">DarkBremVertexLibraryModel.cxx:269</a></div></div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_html_af376fdaf4fb080ef6520274dae4ae746"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#af376fdaf4fb080ef6520274dae4ae746">simcore::darkbrem::DarkBremVertexLibraryModel::method_</a></div><div class="ttdeci">DarkBremMethod method_</div><div class="ttdef"><b>Definition:</b> <a href="DarkBremVertexLibraryModel_8h_source.html#l00302">DarkBremVertexLibraryModel.h:302</a></div></div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1G4APrime_html_a0384b294f059bfee2736db887a13d307"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1G4APrime.html#a0384b294f059bfee2736db887a13d307">simcore::darkbrem::G4APrime::APrime</a></div><div class="ttdeci">static G4APrime * APrime(G4double theMass=-1 *MeV)</div><div class="ttdef"><b>Definition:</b> <a href="G4APrime_8cxx_source.html#l00019">G4APrime.cxx:19</a></div></div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel_html_aa08335d8f62bbd4fdec136aef9c53ab7"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel.html#aa08335d8f62bbd4fdec136aef9c53ab7">simcore::darkbrem::G4eDarkBremsstrahlungModel::G4eDarkBremsstrahlungModel</a></div><div class="ttdeci">G4eDarkBremsstrahlungModel(const framework::config::Parameters &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="G4eDarkBremsstrahlung_8h_source.html#l00044">G4eDarkBremsstrahlung.h:44</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="G4APrime_8cxx_source.html#l00019">simcore::darkbrem::G4APrime::APrime()</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00293">CMScaling</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00280">epsilon_</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00291">ForwardOnly</a>, <a class="el" href="Parameters_8h_source.html#l00089">framework::config::Parameters::getParameter()</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00312">library_path_</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00302">method_</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00307">method_name_</a>, <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00269">SetMadGraphDataLibrary()</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00272">threshold_</a>, and <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00295">Undefined</a>.</p>

</div>
</div>
<a id="a913d54b1b07e80257a1eb93ee12f7fbf" name="a913d54b1b07e80257a1eb93ee12f7fbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a913d54b1b07e80257a1eb93ee12f7fbf">&#9670;&#160;</a></span>~DarkBremVertexLibraryModel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual simcore::darkbrem::DarkBremVertexLibraryModel::~DarkBremVertexLibraryModel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Destructor </p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00056">56</a> of file <a class="el" href="DarkBremVertexLibraryModel_8h_source.html">DarkBremVertexLibraryModel.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   56</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acd90bd2f58d1aebb5265b29b93bf1f67" name="acd90bd2f58d1aebb5265b29b93bf1f67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd90bd2f58d1aebb5265b29b93bf1f67">&#9670;&#160;</a></span>ComputeCrossSectionPerAtom()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">G4double simcore::darkbrem::DarkBremVertexLibraryModel::ComputeCrossSectionPerAtom </td>
          <td>(</td>
          <td class="paramtype">G4double&#160;</td>
          <td class="paramname"><em>electronKE</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&#160;</td>
          <td class="paramname"><em>atomicA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&#160;</td>
          <td class="paramname"><em>atomicZ</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Calculates the cross section per atom in GEANT4 internal units. Uses WW approximation to find the total cross section, performing numerical integrals over x and theta.</p>
<p >Numerical integrals are done using boost::numeric::odeint.</p>
<p >Integrate <a class="el" href="structsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_1_1Chi.html">Chi</a> from <picture><source srcset="form_0_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$m_A^4/(4E_0^2)$" src="form_0.png"/></picture> to <picture><source srcset="form_1_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$m_A^2$" src="form_1.png"/></picture></p>
<p >Integrate <a class="el" href="structsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_1_1DiffCross.html">DiffCross</a> from 0 to <picture><source srcset="form_2_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$min(1-m_e/E_0,1-m_A/E_0)$" src="form_2.png"/></picture></p>
<p >Total cross section is given by  </p><p class="formulaDsp">
<picture><source srcset="form_3_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\[ \sigma = 4 \frac{pb}{GeV} \epsilon^2 \alpha_{EW}^3 \int \chi(t)dt \int
\frac{d\sigma}{dx}(x)dx \]" src="form_3.png"/></picture>
</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">E0</td><td>energy of beam (incoming particle) </td></tr>
    <tr><td class="paramname">Z</td><td>atomic number of atom </td></tr>
    <tr><td class="paramname">A</td><td>atomic mass of atom </td></tr>
    <tr><td class="paramname">cut</td><td>minimum energy cut to calculate cross section </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>cross section (0. if outside energy cuts) </dd></dl>

<p>Implements <a class="el" href="classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel.html#afb67fc22e8dab2ed0598e8e0f1a35704">simcore::darkbrem::G4eDarkBremsstrahlungModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00068">68</a> of file <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html">DarkBremVertexLibraryModel.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   69</span>                                                 {</div>
<div class="line"><span class="lineno">   70</span>  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> MA =</div>
<div class="line"><span class="lineno">   71</span>      <a class="code hl_function" href="classsimcore_1_1darkbrem_1_1G4APrime.html#a0384b294f059bfee2736db887a13d307">G4APrime::APrime</a>()-&gt;GetPDGMass() / CLHEP::GeV;  <span class="comment">// mass A&#39; in GeV</span></div>
<div class="line"><span class="lineno">   72</span>  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> Mel = G4Electron::Electron()-&gt;GetPDGMass() /</div>
<div class="line"><span class="lineno">   73</span>                            CLHEP::GeV;  <span class="comment">// mass electron in GeV</span></div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>  <span class="keywordflow">if</span> (electronKE &lt; keV) <span class="keywordflow">return</span> 0.;  <span class="comment">// outside viable region for model</span></div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>  electronKE = electronKE / CLHEP::GeV;  <span class="comment">// Change energy to GeV.</span></div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>  <span class="comment">// TODO move to first cut above</span></div>
<div class="line"><span class="lineno">   80</span>  <span class="keywordflow">if</span> (electronKE &lt; <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a1ccee76de16f49325aaedf0749202c97">threshold_</a>) <span class="keywordflow">return</span> 0.;  <span class="comment">// can&#39;t produce a prime</span></div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>  <span class="comment">// begin: chi-formfactor calculation</span></div>
<div class="line"><span class="lineno">   83</span>  Chi chiformfactor;</div>
<div class="line"><span class="lineno">   84</span>  <span class="comment">//  set parameters</span></div>
<div class="line"><span class="lineno">   85</span>  chiformfactor.A = A;</div>
<div class="line"><span class="lineno">   86</span>  chiformfactor.Z = Z;</div>
<div class="line"><span class="lineno">   87</span>  chiformfactor.E0 = electronKE;</div>
<div class="line"><span class="lineno">   88</span>  chiformfactor.MA = MA;</div>
<div class="line"><span class="lineno">   89</span>  chiformfactor.Mel = Mel;</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>  <span class="keywordtype">double</span> tmin = MA * MA * MA * MA / (4. * electronKE * electronKE);</div>
<div class="line"><span class="lineno">   92</span>  <span class="keywordtype">double</span> tmax = MA * MA;</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>  <span class="comment">// Integrate over chi.</span></div>
<div class="line"><span class="lineno">   95</span>  <a class="code hl_typedef" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a97797106c7859b0b4e339201a67ffad7">StateType</a> integral(1);</div>
<div class="line"><span class="lineno">   96</span>  integral[0] = 0.;  <span class="comment">// start integral value at zero</span></div>
<div class="line"><span class="lineno">   97</span>  boost::numeric::odeint::integrate(</div>
<div class="line"><span class="lineno">   98</span>      chiformfactor  <span class="comment">// how to calculate integrand</span></div>
<div class="line"><span class="lineno">   99</span>      ,</div>
<div class="line"><span class="lineno">  100</span>      integral  <span class="comment">// integral result</span></div>
<div class="line"><span class="lineno">  101</span>      ,</div>
<div class="line"><span class="lineno">  102</span>      tmin  <span class="comment">// integral lower limit</span></div>
<div class="line"><span class="lineno">  103</span>      ,</div>
<div class="line"><span class="lineno">  104</span>      tmax  <span class="comment">// integral upper limit</span></div>
<div class="line"><span class="lineno">  105</span>      ,</div>
<div class="line"><span class="lineno">  106</span>      (tmax - tmin) / 1000  <span class="comment">// dt - initial, adapts based off error</span></div>
<div class="line"><span class="lineno">  107</span>  );</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>  G4double ChiRes = integral[0];</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>  <span class="comment">// Integrate over x. Can use log approximation instead, which falls off at</span></div>
<div class="line"><span class="lineno">  112</span>  <span class="comment">// high A&#39; mass.</span></div>
<div class="line"><span class="lineno">  113</span>  DiffCross diffcross;</div>
<div class="line"><span class="lineno">  114</span>  diffcross.E0 = electronKE;</div>
<div class="line"><span class="lineno">  115</span>  diffcross.MA = MA;</div>
<div class="line"><span class="lineno">  116</span>  diffcross.Mel = Mel;</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>  <span class="keywordtype">double</span> xmin = 0;</div>
<div class="line"><span class="lineno">  119</span>  <span class="keywordtype">double</span> xmax = 1;</div>
<div class="line"><span class="lineno">  120</span>  <span class="keywordflow">if</span> ((Mel / electronKE) &gt; (MA / electronKE))</div>
<div class="line"><span class="lineno">  121</span>    xmax = 1 - Mel / electronKE;</div>
<div class="line"><span class="lineno">  122</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  123</span>    xmax = 1 - MA / electronKE;</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>  <span class="comment">// Integrate over differential cross section.</span></div>
<div class="line"><span class="lineno">  126</span>  integral[0] = 0.;  <span class="comment">// start integral value at zero</span></div>
<div class="line"><span class="lineno">  127</span>  boost::numeric::odeint::integrate(</div>
<div class="line"><span class="lineno">  128</span>      diffcross  <span class="comment">// how to calculate integrand</span></div>
<div class="line"><span class="lineno">  129</span>      ,</div>
<div class="line"><span class="lineno">  130</span>      integral  <span class="comment">// integral result</span></div>
<div class="line"><span class="lineno">  131</span>      ,</div>
<div class="line"><span class="lineno">  132</span>      xmin  <span class="comment">// integral lower limit</span></div>
<div class="line"><span class="lineno">  133</span>      ,</div>
<div class="line"><span class="lineno">  134</span>      xmax  <span class="comment">// integral upper limit</span></div>
<div class="line"><span class="lineno">  135</span>      ,</div>
<div class="line"><span class="lineno">  136</span>      (xmax - xmin) / 1000  <span class="comment">// dx - initial, adapts based off error</span></div>
<div class="line"><span class="lineno">  137</span>  );</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>  G4double DsDx = integral[0];</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>  G4double GeVtoPb = 3.894E08;</div>
<div class="line"><span class="lineno">  142</span>  G4double alphaEW = 1.0 / 137.0;</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>  G4double cross = GeVtoPb * 4. * alphaEW * alphaEW * alphaEW * <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a1524f0540fa212c52cc37f64c5d3bdd9">epsilon_</a> *</div>
<div class="line"><span class="lineno">  145</span>                   <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a1524f0540fa212c52cc37f64c5d3bdd9">epsilon_</a> * ChiRes * DsDx * CLHEP::picobarn;</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>  <span class="keywordflow">if</span> (cross &lt; 0.) <span class="keywordflow">return</span> 0.;  <span class="comment">// safety check all the math</span></div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>  <span class="keywordflow">return</span> cross;</div>
<div class="line"><span class="lineno">  150</span>}</div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_html_a97797106c7859b0b4e339201a67ffad7"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a97797106c7859b0b4e339201a67ffad7">simcore::darkbrem::DarkBremVertexLibraryModel::StateType</a></div><div class="ttdeci">std::vector&lt; double &gt; StateType</div><div class="ttdef"><b>Definition:</b> <a href="DarkBremVertexLibraryModel_8h_source.html#l00131">DarkBremVertexLibraryModel.h:131</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00158">simcore::darkbrem::DarkBremVertexLibraryModel::Chi::A</a>, <a class="el" href="G4APrime_8cxx_source.html#l00019">simcore::darkbrem::G4APrime::APrime()</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00162">simcore::darkbrem::DarkBremVertexLibraryModel::Chi::E0</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00195">simcore::darkbrem::DarkBremVertexLibraryModel::DiffCross::E0</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00280">epsilon_</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00164">simcore::darkbrem::DarkBremVertexLibraryModel::Chi::MA</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00197">simcore::darkbrem::DarkBremVertexLibraryModel::DiffCross::MA</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00166">simcore::darkbrem::DarkBremVertexLibraryModel::Chi::Mel</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00199">simcore::darkbrem::DarkBremVertexLibraryModel::DiffCross::Mel</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00272">threshold_</a>, and <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00160">simcore::darkbrem::DarkBremVertexLibraryModel::Chi::Z</a>.</p>

</div>
</div>
<a id="a5673e694bc4e22386fc7fb35c12c74a8" name="a5673e694bc4e22386fc7fb35c12c74a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5673e694bc4e22386fc7fb35c12c74a8">&#9670;&#160;</a></span>GenerateChange()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simcore::darkbrem::DarkBremVertexLibraryModel::GenerateChange </td>
          <td>(</td>
          <td class="paramtype">G4ParticleChange &amp;&#160;</td>
          <td class="paramname"><em>particleChange</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const G4Track &amp;&#160;</td>
          <td class="paramname"><em>track</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const G4Step &amp;&#160;</td>
          <td class="paramname"><em>step</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Simulates the emission of a dark photon + electron.</p>
<p >Gets an energy fraction and Pt from madgraph files. The scaling of this energy fraction and Pt to the actual electron energy depends on the input method.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Forward Only</h2>
<p >Scales the energy so that the fraction of kinectic energy is constant, keeps the Pt constant. If the Pt is larger than the new energy, that event is skipped, and a new one is taken from the file. Choses the Pz of the recoil electron to always be positive.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
CM Scaling</h2>
<p >Scale MadGraph vertex to actual energy of electron using Lorentz boosts, and then extract the momentum from that.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
Undefined</h2>
<p >Don't scale the MadGraph vertex to the actual energy of the electron.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">particleChange</td><td>structure holding changes to make to particle track </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">track</td><td>current track being processesed </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">step</td><td>current step of the track </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel.html#ad6d899bdc36e66c065ea9a5bde32753f">simcore::darkbrem::G4eDarkBremsstrahlungModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00152">152</a> of file <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html">DarkBremVertexLibraryModel.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  154</span>                        {</div>
<div class="line"><span class="lineno">  155</span>  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> MA =</div>
<div class="line"><span class="lineno">  156</span>      <a class="code hl_function" href="classsimcore_1_1darkbrem_1_1G4APrime.html#a0384b294f059bfee2736db887a13d307">G4APrime::APrime</a>()-&gt;GetPDGMass() / CLHEP::GeV;  <span class="comment">// mass A&#39; in GeV</span></div>
<div class="line"><span class="lineno">  157</span>  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> Mel = G4Electron::Electron()-&gt;GetPDGMass() /</div>
<div class="line"><span class="lineno">  158</span>                            CLHEP::GeV;  <span class="comment">// mass electron in GeV</span></div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>  G4double incidentEnergy = step.GetPostStepPoint()-&gt;GetTotalEnergy();</div>
<div class="line"><span class="lineno">  161</span>  incidentEnergy =</div>
<div class="line"><span class="lineno">  162</span>      incidentEnergy / CLHEP::GeV;  <span class="comment">// Convert the energy to GeV, the units used</span></div>
<div class="line"><span class="lineno">  163</span>                                    <span class="comment">// in the LHE files.</span></div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span>  OutgoingKinematics data = <a class="code hl_function" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a2cb035e7f31c9e4a699a89ea0d1ab518">GetMadgraphData</a>(incidentEnergy);</div>
<div class="line"><span class="lineno">  166</span>  <span class="keywordtype">double</span> EAcc = (data.electron.E() - Mel) *</div>
<div class="line"><span class="lineno">  167</span>                    ((incidentEnergy - Mel - MA) / (data.E - Mel - MA)) +</div>
<div class="line"><span class="lineno">  168</span>                Mel;</div>
<div class="line"><span class="lineno">  169</span>  <span class="keywordtype">double</span> Pt = data.electron.Pt();</div>
<div class="line"><span class="lineno">  170</span>  <span class="keywordtype">double</span> P = sqrt(EAcc * EAcc - Mel * Mel);</div>
<div class="line"><span class="lineno">  171</span>  <span class="keywordtype">double</span> PhiAcc = data.electron.Phi();</div>
<div class="line"><span class="lineno">  172</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#af376fdaf4fb080ef6520274dae4ae746">method_</a> == <a class="code hl_enumvalue" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9dac5b1a1cefb1547ebed283c2ce1a3f55d">DarkBremMethod::ForwardOnly</a>) {</div>
<div class="line"><span class="lineno">  173</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><span class="lineno">  174</span>    <span class="keywordflow">while</span> (Pt * Pt + Mel * Mel &gt; EAcc * EAcc) {</div>
<div class="line"><span class="lineno">  175</span>      <span class="comment">// Skip events until the transverse energy is less than the total energy.</span></div>
<div class="line"><span class="lineno">  176</span>      i++;</div>
<div class="line"><span class="lineno">  177</span>      data = <a class="code hl_function" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a2cb035e7f31c9e4a699a89ea0d1ab518">GetMadgraphData</a>(incidentEnergy);</div>
<div class="line"><span class="lineno">  178</span>      EAcc = (data.electron.E() - Mel) *</div>
<div class="line"><span class="lineno">  179</span>                 ((incidentEnergy - Mel - MA) / (data.E - Mel - MA)) +</div>
<div class="line"><span class="lineno">  180</span>             Mel;</div>
<div class="line"><span class="lineno">  181</span>      Pt = data.electron.Pt();</div>
<div class="line"><span class="lineno">  182</span>      P = sqrt(EAcc * EAcc - Mel * Mel);</div>
<div class="line"><span class="lineno">  183</span>      PhiAcc = data.electron.Phi();</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>      <span class="keywordflow">if</span> (i &gt; <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a6cf69b226c2266e8ed554b27ac71c09f">maxIterations_</a>) {</div>
<div class="line"><span class="lineno">  186</span>        ldmx_log(warn)</div>
<div class="line"><span class="lineno">  187</span>            &lt;&lt; <span class="stringliteral">&quot;Could not produce a realistic vertex with library energy &quot;</span></div>
<div class="line"><span class="lineno">  188</span>            &lt;&lt; data.electron.E() &lt;&lt; <span class="stringliteral">&quot; MeV.\n&quot;</span></div>
<div class="line"><span class="lineno">  189</span>            &lt;&lt; <span class="stringliteral">&quot;Consider expanding your libary of A&#39; vertices to include a &quot;</span></div>
<div class="line"><span class="lineno">  190</span>               <span class="stringliteral">&quot;beam energy closer to &quot;</span></div>
<div class="line"><span class="lineno">  191</span>            &lt;&lt; incidentEnergy &lt;&lt; <span class="stringliteral">&quot; MeV.&quot;</span>;</div>
<div class="line"><span class="lineno">  192</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  193</span>      }</div>
<div class="line"><span class="lineno">  194</span>    }</div>
<div class="line"><span class="lineno">  195</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#af376fdaf4fb080ef6520274dae4ae746">method_</a> == <a class="code hl_enumvalue" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9daeb553fbf5a31cf9c130577439f64c554">DarkBremMethod::CMScaling</a>) {</div>
<div class="line"><span class="lineno">  196</span>    TLorentzVector el(data.electron.X(), data.electron.Y(), data.electron.Z(),</div>
<div class="line"><span class="lineno">  197</span>                      data.electron.E());</div>
<div class="line"><span class="lineno">  198</span>    <span class="keywordtype">double</span> ediff = data.E - incidentEnergy;</div>
<div class="line"><span class="lineno">  199</span>    TLorentzVector newcm(data.centerMomentum.X(), data.centerMomentum.Y(),</div>
<div class="line"><span class="lineno">  200</span>                         data.centerMomentum.Z() - ediff,</div>
<div class="line"><span class="lineno">  201</span>                         data.centerMomentum.E() - ediff);</div>
<div class="line"><span class="lineno">  202</span>    el.Boost(-1. * data.centerMomentum.BoostVector());</div>
<div class="line"><span class="lineno">  203</span>    el.Boost(newcm.BoostVector());</div>
<div class="line"><span class="lineno">  204</span>    <span class="keywordtype">double</span> newE = (data.electron.E() - Mel) *</div>
<div class="line"><span class="lineno">  205</span>                      ((incidentEnergy - Mel - MA) / (data.E - Mel - MA)) +</div>
<div class="line"><span class="lineno">  206</span>                  Mel;</div>
<div class="line"><span class="lineno">  207</span>    el.SetE(newE);</div>
<div class="line"><span class="lineno">  208</span>    EAcc = el.E();</div>
<div class="line"><span class="lineno">  209</span>    Pt = el.Pt();</div>
<div class="line"><span class="lineno">  210</span>    P = el.P();</div>
<div class="line"><span class="lineno">  211</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#af376fdaf4fb080ef6520274dae4ae746">method_</a> == <a class="code hl_enumvalue" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9da6ce4a356668edf02a0319b2e1469fd49">DarkBremMethod::Undefined</a>) {</div>
<div class="line"><span class="lineno">  212</span>    EAcc = data.electron.E();</div>
<div class="line"><span class="lineno">  213</span>    P = sqrt(EAcc * EAcc - Mel * Mel);</div>
<div class="line"><span class="lineno">  214</span>    Pt = data.electron.Pt();</div>
<div class="line"><span class="lineno">  215</span>  }</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>  <span class="comment">// What we need:</span></div>
<div class="line"><span class="lineno">  218</span>  <span class="comment">//  - EAcc</span></div>
<div class="line"><span class="lineno">  219</span>  <span class="comment">//  - P and Pt for ThetaAcc</span></div>
<div class="line"><span class="lineno">  220</span>  <span class="comment">//  - PhiAcc</span></div>
<div class="line"><span class="lineno">  221</span>  <span class="comment">// Basically we need the 3-momentum of the recoil electron</span></div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>  EAcc = EAcc *</div>
<div class="line"><span class="lineno">  224</span>         CLHEP::GeV;  <span class="comment">// Change the energy back to MeV, the internal GEANT unit.</span></div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>  G4double recoilElectronMomentumMag =</div>
<div class="line"><span class="lineno">  227</span>      sqrt(EAcc * EAcc -</div>
<div class="line"><span class="lineno">  228</span>           electron_mass_c2 * electron_mass_c2);  <span class="comment">// Electron momentum in MeV.</span></div>
<div class="line"><span class="lineno">  229</span>  G4ThreeVector recoilElectronMomentum;</div>
<div class="line"><span class="lineno">  230</span>  <span class="keywordtype">double</span> ThetaAcc = std::asin(Pt / P);</div>
<div class="line"><span class="lineno">  231</span>  recoilElectronMomentum.set(std::sin(ThetaAcc) * std::cos(PhiAcc),</div>
<div class="line"><span class="lineno">  232</span>                             std::sin(ThetaAcc) * std::sin(PhiAcc),</div>
<div class="line"><span class="lineno">  233</span>                             std::cos(ThetaAcc));</div>
<div class="line"><span class="lineno">  234</span>  recoilElectronMomentum.rotateUz(track.GetMomentumDirection());</div>
<div class="line"><span class="lineno">  235</span>  recoilElectronMomentum.setMag(recoilElectronMomentumMag);</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>  <span class="comment">// create g4dynamicparticle object for the dark photon.</span></div>
<div class="line"><span class="lineno">  238</span>  <span class="comment">// define its 3-momentum so we conserve 3-momentum with primary and recoil</span></div>
<div class="line"><span class="lineno">  239</span>  <span class="comment">// electron NOTE: does _not_ take nucleus recoil into account</span></div>
<div class="line"><span class="lineno">  240</span>  G4ThreeVector darkPhotonMomentum =</div>
<div class="line"><span class="lineno">  241</span>      track.GetMomentum() - recoilElectronMomentum;</div>
<div class="line"><span class="lineno">  242</span>  G4DynamicParticle *dphoton =</div>
<div class="line"><span class="lineno">  243</span>      <span class="keyword">new</span> G4DynamicParticle(<a class="code hl_function" href="classsimcore_1_1darkbrem_1_1G4APrime.html#a0384b294f059bfee2736db887a13d307">G4APrime::APrime</a>(), darkPhotonMomentum);</div>
<div class="line"><span class="lineno">  244</span>  <span class="comment">// energy of primary</span></div>
<div class="line"><span class="lineno">  245</span>  G4double finalKE = EAcc - electron_mass_c2;</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>  <span class="comment">// stop tracking and create new secondary instead of primary</span></div>
<div class="line"><span class="lineno">  248</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a439de00da15efd8b5d054e7c78ba55f9">alwaysCreateNewElectron_</a>) {</div>
<div class="line"><span class="lineno">  249</span>    <span class="comment">// TODO copy over all other particle information from track I am killing</span></div>
<div class="line"><span class="lineno">  250</span>    G4DynamicParticle *el = <span class="keyword">new</span> G4DynamicParticle(</div>
<div class="line"><span class="lineno">  251</span>        track.GetDefinition(),  <span class="comment">// should be all electrons right now, but leaves</span></div>
<div class="line"><span class="lineno">  252</span>                                <span class="comment">// positrons open</span></div>
<div class="line"><span class="lineno">  253</span>        recoilElectronMomentum);</div>
<div class="line"><span class="lineno">  254</span>    particleChange.SetNumberOfSecondaries(2);</div>
<div class="line"><span class="lineno">  255</span>    particleChange.AddSecondary(dphoton);</div>
<div class="line"><span class="lineno">  256</span>    particleChange.AddSecondary(el);</div>
<div class="line"><span class="lineno">  257</span>    particleChange.ProposeTrackStatus(fStopAndKill);</div>
<div class="line"><span class="lineno">  258</span>    <span class="comment">// continue tracking</span></div>
<div class="line"><span class="lineno">  259</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  260</span>    <span class="comment">// just have primary lose energy (don&#39;t rename to different track ID)</span></div>
<div class="line"><span class="lineno">  261</span>    <span class="comment">// TODO untested this branch, not sure if it works as expected</span></div>
<div class="line"><span class="lineno">  262</span>    particleChange.SetNumberOfSecondaries(1);</div>
<div class="line"><span class="lineno">  263</span>    particleChange.AddSecondary(dphoton);</div>
<div class="line"><span class="lineno">  264</span>    particleChange.ProposeMomentumDirection(recoilElectronMomentum.unit());</div>
<div class="line"><span class="lineno">  265</span>    particleChange.ProposeEnergy(finalKE);</div>
<div class="line"><span class="lineno">  266</span>  }</div>
<div class="line"><span class="lineno">  267</span>}</div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_html_a2cb035e7f31c9e4a699a89ea0d1ab518"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a2cb035e7f31c9e4a699a89ea0d1ab518">simcore::darkbrem::DarkBremVertexLibraryModel::GetMadgraphData</a></div><div class="ttdeci">OutgoingKinematics GetMadgraphData(double E0)</div><div class="ttdef"><b>Definition:</b> <a href="DarkBremVertexLibraryModel_8cxx_source.html#l00418">DarkBremVertexLibraryModel.cxx:418</a></div></div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_html_a439de00da15efd8b5d054e7c78ba55f9"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a439de00da15efd8b5d054e7c78ba55f9">simcore::darkbrem::DarkBremVertexLibraryModel::alwaysCreateNewElectron_</a></div><div class="ttdeci">bool alwaysCreateNewElectron_</div><div class="ttdef"><b>Definition:</b> <a href="DarkBremVertexLibraryModel_8h_source.html#l00322">DarkBremVertexLibraryModel.h:322</a></div></div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_html_a6cf69b226c2266e8ed554b27ac71c09f"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a6cf69b226c2266e8ed554b27ac71c09f">simcore::darkbrem::DarkBremVertexLibraryModel::maxIterations_</a></div><div class="ttdeci">unsigned int maxIterations_</div><div class="ttdef"><b>Definition:</b> <a href="DarkBremVertexLibraryModel_8h_source.html#l00266">DarkBremVertexLibraryModel.h:266</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00322">alwaysCreateNewElectron_</a>, <a class="el" href="G4APrime_8cxx_source.html#l00019">simcore::darkbrem::G4APrime::APrime()</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00219">simcore::darkbrem::DarkBremVertexLibraryModel::OutgoingKinematics::centerMomentum</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00293">CMScaling</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00221">simcore::darkbrem::DarkBremVertexLibraryModel::OutgoingKinematics::E</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00217">simcore::darkbrem::DarkBremVertexLibraryModel::OutgoingKinematics::electron</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00291">ForwardOnly</a>, <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00418">GetMadgraphData()</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00266">maxIterations_</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00302">method_</a>, and <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00295">Undefined</a>.</p>

</div>
</div>
<a id="a2cb035e7f31c9e4a699a89ea0d1ab518" name="a2cb035e7f31c9e4a699a89ea0d1ab518"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cb035e7f31c9e4a699a89ea0d1ab518">&#9670;&#160;</a></span>GetMadgraphData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_1_1OutgoingKinematics.html">DarkBremVertexLibraryModel::OutgoingKinematics</a> simcore::darkbrem::DarkBremVertexLibraryModel::GetMadgraphData </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>E0</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Returns mad graph data given an energy [GeV].</p>
<p >Gets the energy fraction and Pt from the imported LHE data. E0 should be in GeV, returns the total energy and Pt in GeV. Scales from the closest imported beam energy above the given value (scales down to avoid biasing issues).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">E0</td><td>energy of particle undergoing dark brem [GeV] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>total energy and transverse momentum of particle [GeV] </dd></dl>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00418">418</a> of file <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html">DarkBremVertexLibraryModel.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  418</span>                                                     {</div>
<div class="line"><span class="lineno">  419</span>  OutgoingKinematics cmdata;  <span class="comment">// data frame to return</span></div>
<div class="line"><span class="lineno">  420</span> </div>
<div class="line"><span class="lineno">  421</span>  <span class="comment">// Cycle through imported beam energies until the closest one above is found,</span></div>
<div class="line"><span class="lineno">  422</span>  <span class="comment">// or the max is reached.</span></div>
<div class="line"><span class="lineno">  423</span>  <span class="keywordtype">double</span> samplingE = 0.;</div>
<div class="line"><span class="lineno">  424</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;keyVal : <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a04824abf04b0a3c03732c3ace3a21f69">currentDataPoints_</a>) {</div>
<div class="line"><span class="lineno">  425</span>    samplingE = keyVal.first;  <span class="comment">// move samplingE up</span></div>
<div class="line"><span class="lineno">  426</span>    <span class="comment">// check if went under the sampling energy</span></div>
<div class="line"><span class="lineno">  427</span>    <span class="comment">//  the map is sorted by key, so we can be done right after E0 goes under</span></div>
<div class="line"><span class="lineno">  428</span>    <span class="comment">//  samplingE</span></div>
<div class="line"><span class="lineno">  429</span>    <span class="keywordflow">if</span> (E0 &lt; samplingE) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  430</span>  }</div>
<div class="line"><span class="lineno">  431</span>  <span class="comment">// now samplingE is the closest energy above E0 or the maximum energy imported</span></div>
<div class="line"><span class="lineno">  432</span>  <span class="comment">// from mad graph</span></div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>  <span class="comment">// Need to loop around if we hit the end, when the size of</span></div>
<div class="line"><span class="lineno">  435</span>  <span class="comment">// madGraphData_[samplingE] is smaller than</span></div>
<div class="line"><span class="lineno">  436</span>  <span class="comment">//  the number of events we want</span></div>
<div class="line"><span class="lineno">  437</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a04824abf04b0a3c03732c3ace3a21f69">currentDataPoints_</a>.at(samplingE) &gt;= <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#ab7837240f133ccd4070ce6d9253501ff">madGraphData_</a>.at(samplingE).size()) {</div>
<div class="line"><span class="lineno">  438</span>    <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a04824abf04b0a3c03732c3ace3a21f69">currentDataPoints_</a>[samplingE] = 0;</div>
<div class="line"><span class="lineno">  439</span>  }</div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span>  <span class="comment">// Get the lorentz vectors from the index given by the placeholder.</span></div>
<div class="line"><span class="lineno">  442</span>  cmdata = <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#ab7837240f133ccd4070ce6d9253501ff">madGraphData_</a>.at(samplingE).at(<a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a04824abf04b0a3c03732c3ace3a21f69">currentDataPoints_</a>.at(samplingE));</div>
<div class="line"><span class="lineno">  443</span> </div>
<div class="line"><span class="lineno">  444</span>  <span class="comment">// Increment the current index</span></div>
<div class="line"><span class="lineno">  445</span>  <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a04824abf04b0a3c03732c3ace3a21f69">currentDataPoints_</a>[samplingE]++;</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span>  <span class="keywordflow">return</span> cmdata;</div>
<div class="line"><span class="lineno">  448</span>}</div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_html_a04824abf04b0a3c03732c3ace3a21f69"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a04824abf04b0a3c03732c3ace3a21f69">simcore::darkbrem::DarkBremVertexLibraryModel::currentDataPoints_</a></div><div class="ttdeci">std::map&lt; double, unsigned int &gt; currentDataPoints_</div><div class="ttdef"><b>Definition:</b> <a href="DarkBremVertexLibraryModel_8h_source.html#l00344">DarkBremVertexLibraryModel.h:344</a></div></div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_html_ab7837240f133ccd4070ce6d9253501ff"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#ab7837240f133ccd4070ce6d9253501ff">simcore::darkbrem::DarkBremVertexLibraryModel::madGraphData_</a></div><div class="ttdeci">std::map&lt; double, std::vector&lt; OutgoingKinematics &gt; &gt; madGraphData_</div><div class="ttdef"><b>Definition:</b> <a href="DarkBremVertexLibraryModel_8h_source.html#l00333">DarkBremVertexLibraryModel.h:333</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00344">currentDataPoints_</a>, and <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00333">madGraphData_</a>.</p>

<p class="reference">Referenced by <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00152">GenerateChange()</a>.</p>

</div>
</div>
<a id="a5c3d1ae7e87b3d1a8ef8ae2a5faa8d20" name="a5c3d1ae7e87b3d1a8ef8ae2a5faa8d20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c3d1ae7e87b3d1a8ef8ae2a5faa8d20">&#9670;&#160;</a></span>MakePlaceholders()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simcore::darkbrem::DarkBremVertexLibraryModel::MakePlaceholders </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Fill vector of currentDataPoints_ with the same number of items as the madgraph data.</p>
<p >Randomly choose a starting point so that the simulation run isn't dependent on the order of LHE vertices in the library. </p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00407">407</a> of file <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html">DarkBremVertexLibraryModel.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  407</span>                                                  {</div>
<div class="line"><span class="lineno">  408</span>  <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a04824abf04b0a3c03732c3ace3a21f69">currentDataPoints_</a>.clear();</div>
<div class="line"><span class="lineno">  409</span>  <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a6cf69b226c2266e8ed554b27ac71c09f">maxIterations_</a> = 10000;</div>
<div class="line"><span class="lineno">  410</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;iter : <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#ab7837240f133ccd4070ce6d9253501ff">madGraphData_</a>) {</div>
<div class="line"><span class="lineno">  411</span>    <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a04824abf04b0a3c03732c3ace3a21f69">currentDataPoints_</a>[iter.first] = int(G4UniformRand() * iter.second.size());</div>
<div class="line"><span class="lineno">  412</span>    <span class="keywordflow">if</span> (iter.second.size() &lt; <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a6cf69b226c2266e8ed554b27ac71c09f">maxIterations_</a>)</div>
<div class="line"><span class="lineno">  413</span>      <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a6cf69b226c2266e8ed554b27ac71c09f">maxIterations_</a> = iter.second.size();</div>
<div class="line"><span class="lineno">  414</span>  }</div>
<div class="line"><span class="lineno">  415</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00344">currentDataPoints_</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00333">madGraphData_</a>, and <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00266">maxIterations_</a>.</p>

<p class="reference">Referenced by <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00269">SetMadGraphDataLibrary()</a>.</p>

</div>
</div>
<a id="a57f5b3511c14e408913b163dd0d18282" name="a57f5b3511c14e408913b163dd0d18282"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57f5b3511c14e408913b163dd0d18282">&#9670;&#160;</a></span>ParseLHE()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simcore::darkbrem::DarkBremVertexLibraryModel::ParseLHE </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>fname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00343">343</a> of file <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html">DarkBremVertexLibraryModel.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  343</span>                                                         {</div>
<div class="line"><span class="lineno">  344</span>  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> MA =</div>
<div class="line"><span class="lineno">  345</span>      <a class="code hl_function" href="classsimcore_1_1darkbrem_1_1G4APrime.html#a0384b294f059bfee2736db887a13d307">G4APrime::APrime</a>()-&gt;GetPDGMass() / CLHEP::GeV;  <span class="comment">// mass A&#39; in GeV</span></div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>  <span class="comment">// TODO: use already written LHE parser?</span></div>
<div class="line"><span class="lineno">  348</span>  ldmx_log(info) &lt;&lt; <span class="stringliteral">&quot;Parsing LHE file &#39;&quot;</span> &lt;&lt; fname &lt;&lt; <span class="stringliteral">&quot;&#39;... &quot;</span>;</div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>  std::ifstream ifile;</div>
<div class="line"><span class="lineno">  351</span>  ifile.open(fname.c_str());</div>
<div class="line"><span class="lineno">  352</span>  <span class="keywordflow">if</span> (!ifile) {</div>
<div class="line"><span class="lineno">  353</span>    EXCEPTION_RAISE(<span class="stringliteral">&quot;LHEFile&quot;</span>, <span class="stringliteral">&quot;Unable to open LHE file &#39;&quot;</span> + fname + <span class="stringliteral">&quot;&#39;.&quot;</span>);</div>
<div class="line"><span class="lineno">  354</span>  }</div>
<div class="line"><span class="lineno">  355</span> </div>
<div class="line"><span class="lineno">  356</span>  std::string line;</div>
<div class="line"><span class="lineno">  357</span>  <span class="keywordflow">while</span> (std::getline(ifile, line)) {</div>
<div class="line"><span class="lineno">  358</span>    std::istringstream iss(line);</div>
<div class="line"><span class="lineno">  359</span>    <span class="keywordtype">int</span> ptype, state;</div>
<div class="line"><span class="lineno">  360</span>    <span class="keywordtype">double</span> skip, px, py, pz, E, M;</div>
<div class="line"><span class="lineno">  361</span>    <span class="keywordflow">if</span> (iss &gt;&gt; ptype &gt;&gt; state &gt;&gt; skip &gt;&gt; skip &gt;&gt; skip &gt;&gt; skip &gt;&gt; px &gt;&gt; py &gt;&gt;</div>
<div class="line"><span class="lineno">  362</span>        pz &gt;&gt; E &gt;&gt; M) {</div>
<div class="line"><span class="lineno">  363</span>      <span class="keywordflow">if</span> ((ptype == 11) &amp;&amp; (state == -1)) {</div>
<div class="line"><span class="lineno">  364</span>        <span class="keywordtype">double</span> ebeam = E;</div>
<div class="line"><span class="lineno">  365</span>        <span class="keywordtype">double</span> e_px, e_py, e_pz, a_px, a_py, a_pz, e_E, a_E, e_M, a_M;</div>
<div class="line"><span class="lineno">  366</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; i++) {</div>
<div class="line"><span class="lineno">  367</span>          std::getline(ifile, line);</div>
<div class="line"><span class="lineno">  368</span>        }</div>
<div class="line"><span class="lineno">  369</span>        std::istringstream jss(line);</div>
<div class="line"><span class="lineno">  370</span>        jss &gt;&gt; ptype &gt;&gt; state &gt;&gt; skip &gt;&gt; skip &gt;&gt; skip &gt;&gt; skip &gt;&gt; e_px &gt;&gt; e_py &gt;&gt;</div>
<div class="line"><span class="lineno">  371</span>            e_pz &gt;&gt; e_E &gt;&gt; e_M;</div>
<div class="line"><span class="lineno">  372</span>        <span class="keywordflow">if</span> ((ptype == 11) &amp;&amp; (state == 1)) {  <span class="comment">// Find a final state electron.</span></div>
<div class="line"><span class="lineno">  373</span>          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; i++) {</div>
<div class="line"><span class="lineno">  374</span>            std::getline(ifile, line);</div>
<div class="line"><span class="lineno">  375</span>          }</div>
<div class="line"><span class="lineno">  376</span>          std::istringstream kss(line);</div>
<div class="line"><span class="lineno">  377</span>          kss &gt;&gt; ptype &gt;&gt; state &gt;&gt; skip &gt;&gt; skip &gt;&gt; skip &gt;&gt; skip &gt;&gt; a_px &gt;&gt;</div>
<div class="line"><span class="lineno">  378</span>              a_py &gt;&gt; a_pz &gt;&gt; a_E &gt;&gt; a_M;</div>
<div class="line"><span class="lineno">  379</span>          <span class="keywordflow">if</span> (ptype == 622 and state == 1) {</div>
<div class="line"><span class="lineno">  380</span>            <span class="keywordflow">if</span> (abs(1. - a_M / MA) &gt; 1e-3) {</div>
<div class="line"><span class="lineno">  381</span>              EXCEPTION_RAISE(<span class="stringliteral">&quot;BadMGEvnt&quot;</span>,</div>
<div class="line"><span class="lineno">  382</span>                              <span class="stringliteral">&quot;A MadGraph imported event has a different &quot;</span></div>
<div class="line"><span class="lineno">  383</span>                              <span class="stringliteral">&quot;APrime mass than the model has (MadGraph = &quot;</span> +</div>
<div class="line"><span class="lineno">  384</span>                                  std::to_string(a_M) + <span class="stringliteral">&quot;GeV; Model = &quot;</span> +</div>
<div class="line"><span class="lineno">  385</span>                                  std::to_string(MA) + <span class="stringliteral">&quot;GeV).&quot;</span>);</div>
<div class="line"><span class="lineno">  386</span>            }</div>
<div class="line"><span class="lineno">  387</span>            OutgoingKinematics evnt;</div>
<div class="line"><span class="lineno">  388</span>            <span class="keywordtype">double</span> cmpx = a_px + e_px;</div>
<div class="line"><span class="lineno">  389</span>            <span class="keywordtype">double</span> cmpy = a_py + e_py;</div>
<div class="line"><span class="lineno">  390</span>            <span class="keywordtype">double</span> cmpz = a_pz + e_pz;</div>
<div class="line"><span class="lineno">  391</span>            <span class="keywordtype">double</span> cmE = a_E + e_E;</div>
<div class="line"><span class="lineno">  392</span>            evnt.electron = TLorentzVector(e_px, e_py, e_pz, e_E);</div>
<div class="line"><span class="lineno">  393</span>            evnt.centerMomentum = TLorentzVector(cmpx, cmpy, cmpz, cmE);</div>
<div class="line"><span class="lineno">  394</span>            evnt.E = ebeam;</div>
<div class="line"><span class="lineno">  395</span>            <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#ab7837240f133ccd4070ce6d9253501ff">madGraphData_</a>[ebeam].push_back(evnt);</div>
<div class="line"><span class="lineno">  396</span>          }  <span class="comment">// get a prime kinematics</span></div>
<div class="line"><span class="lineno">  397</span>        }    <span class="comment">// check for final state</span></div>
<div class="line"><span class="lineno">  398</span>      }      <span class="comment">// check for particle type and state</span></div>
<div class="line"><span class="lineno">  399</span>    }        <span class="comment">// able to get momentum/energy numbers</span></div>
<div class="line"><span class="lineno">  400</span>  }          <span class="comment">// while getting lines</span></div>
<div class="line"><span class="lineno">  401</span>  <span class="comment">// Add the energy to the list, with a random offset between 0 and the total</span></div>
<div class="line"><span class="lineno">  402</span>  <span class="comment">// number of entries.</span></div>
<div class="line"><span class="lineno">  403</span>  ifile.close();</div>
<div class="line"><span class="lineno">  404</span>  ldmx_log(info) &lt;&lt; <span class="stringliteral">&quot;done parsing.&quot;</span>;</div>
<div class="line"><span class="lineno">  405</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3304c5f0c8ad98888ace4f0edee1fc47" name="a3304c5f0c8ad98888ace4f0edee1fc47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3304c5f0c8ad98888ace4f0edee1fc47">&#9670;&#160;</a></span>PrintInfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simcore::darkbrem::DarkBremVertexLibraryModel::PrintInfo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Print the configuration of this model </p>

<p>Implements <a class="el" href="classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel.html#a5e2fb1195644744a948930798d0507d4">simcore::darkbrem::G4eDarkBremsstrahlungModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00053">53</a> of file <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html">DarkBremVertexLibraryModel.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   53</span>                                                 {</div>
<div class="line"><span class="lineno">   54</span>  G4cout &lt;&lt; <span class="stringliteral">&quot; Dark Brem Vertex Library Model&quot;</span> &lt;&lt; G4endl;</div>
<div class="line"><span class="lineno">   55</span>  G4cout &lt;&lt; <span class="stringliteral">&quot;   Threshold [GeV]: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a1ccee76de16f49325aaedf0749202c97">threshold_</a> &lt;&lt; G4endl;</div>
<div class="line"><span class="lineno">   56</span>  G4cout &lt;&lt; <span class="stringliteral">&quot;   Epsilon:         &quot;</span> &lt;&lt; <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a1524f0540fa212c52cc37f64c5d3bdd9">epsilon_</a> &lt;&lt; G4endl;</div>
<div class="line"><span class="lineno">   57</span>  G4cout &lt;&lt; <span class="stringliteral">&quot;   Scaling Method:  &quot;</span> &lt;&lt; <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a8ee9dc30b97d61ad4836e0204bde1f16">method_name_</a> &lt;&lt; G4endl;</div>
<div class="line"><span class="lineno">   58</span>  G4cout &lt;&lt; <span class="stringliteral">&quot;   Vertex Library:  &quot;</span> &lt;&lt; <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a30d0abe713ee9c188306def95568fb4d">library_path_</a> &lt;&lt; G4endl;</div>
<div class="line"><span class="lineno">   59</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00280">epsilon_</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00312">library_path_</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00307">method_name_</a>, and <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00272">threshold_</a>.</p>

</div>
</div>
<a id="a971d9bf21e31ffd5224fa8706a441a71" name="a971d9bf21e31ffd5224fa8706a441a71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a971d9bf21e31ffd5224fa8706a441a71">&#9670;&#160;</a></span>RecordConfig()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simcore::darkbrem::DarkBremVertexLibraryModel::RecordConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> &amp;&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Record the configuration of this model into the RunHeader </p>

<p>Implements <a class="el" href="classsimcore_1_1darkbrem_1_1G4eDarkBremsstrahlungModel.html#aeb5e869238d2eec3064fca00e5bcc4a0">simcore::darkbrem::G4eDarkBremsstrahlungModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00061">61</a> of file <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html">DarkBremVertexLibraryModel.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   61</span>                                                                    {</div>
<div class="line"><span class="lineno">   62</span>  h.<a class="code hl_function" href="classldmx_1_1RunHeader.html#a24662eaa1e2aa9e59ae9fa753f521b20">setFloatParameter</a>(<span class="stringliteral">&quot;Minimum Threshold to DB [GeV]&quot;</span>, <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a1ccee76de16f49325aaedf0749202c97">threshold_</a>);</div>
<div class="line"><span class="lineno">   63</span>  h.<a class="code hl_function" href="classldmx_1_1RunHeader.html#a24662eaa1e2aa9e59ae9fa753f521b20">setFloatParameter</a>(<span class="stringliteral">&quot;DB Xsec Epsilon&quot;</span>, <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a1524f0540fa212c52cc37f64c5d3bdd9">epsilon_</a>);</div>
<div class="line"><span class="lineno">   64</span>  h.<a class="code hl_function" href="classldmx_1_1RunHeader.html#a566440ba2c8c3a9efad7ef0fd19181c8">setStringParameter</a>(<span class="stringliteral">&quot;Vertex Scaling Method&quot;</span>, <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a8ee9dc30b97d61ad4836e0204bde1f16">method_name_</a>);</div>
<div class="line"><span class="lineno">   65</span>  h.<a class="code hl_function" href="classldmx_1_1RunHeader.html#a566440ba2c8c3a9efad7ef0fd19181c8">setStringParameter</a>(<span class="stringliteral">&quot;Vertex Library&quot;</span>, <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a30d0abe713ee9c188306def95568fb4d">library_path_</a>);</div>
<div class="line"><span class="lineno">   66</span>}</div>
<div class="ttc" id="aclassldmx_1_1RunHeader_html_a24662eaa1e2aa9e59ae9fa753f521b20"><div class="ttname"><a href="classldmx_1_1RunHeader.html#a24662eaa1e2aa9e59ae9fa753f521b20">ldmx::RunHeader::setFloatParameter</a></div><div class="ttdeci">void setFloatParameter(const std::string &amp;name, float value)</div><div class="ttdef"><b>Definition:</b> <a href="RunHeader_8h_source.html#l00137">RunHeader.h:137</a></div></div>
<div class="ttc" id="aclassldmx_1_1RunHeader_html_a566440ba2c8c3a9efad7ef0fd19181c8"><div class="ttname"><a href="classldmx_1_1RunHeader.html#a566440ba2c8c3a9efad7ef0fd19181c8">ldmx::RunHeader::setStringParameter</a></div><div class="ttdeci">void setStringParameter(const std::string &amp;name, std::string value)</div><div class="ttdef"><b>Definition:</b> <a href="RunHeader_8h_source.html#l00162">RunHeader.h:162</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00280">epsilon_</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00312">library_path_</a>, <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00307">method_name_</a>, <a class="el" href="RunHeader_8h_source.html#l00137">ldmx::RunHeader::setFloatParameter()</a>, <a class="el" href="RunHeader_8h_source.html#l00162">ldmx::RunHeader::setStringParameter()</a>, and <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00272">threshold_</a>.</p>

</div>
</div>
<a id="ab9ec0e42de963bb1d81603f504af73ff" name="ab9ec0e42de963bb1d81603f504af73ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9ec0e42de963bb1d81603f504af73ff">&#9670;&#160;</a></span>SetMadGraphDataLibrary()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simcore::darkbrem::DarkBremVertexLibraryModel::SetMadGraphDataLibrary </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Set the library of dark brem events to be scaled. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>path to directory of LHE files </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00269">269</a> of file <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html">DarkBremVertexLibraryModel.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  269</span>                                                                      {</div>
<div class="line"><span class="lineno">  270</span>  <span class="comment">// Assumptions:</span></div>
<div class="line"><span class="lineno">  271</span>  <span class="comment">//  - Directory passed is a flat directory (no sub directories) containing LHE</span></div>
<div class="line"><span class="lineno">  272</span>  <span class="comment">//  files</span></div>
<div class="line"><span class="lineno">  273</span>  <span class="comment">//  - LHE files are events generated with the correct mass point</span></div>
<div class="line"><span class="lineno">  274</span>  <span class="comment">// TODO automatically select LHE files of the correct mass point?</span></div>
<div class="line"><span class="lineno">  275</span> </div>
<div class="line"><span class="lineno">  276</span>  <span class="keywordtype">bool</span> foundOneFile = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  277</span>  DIR *dir;            <span class="comment">// handle to opened directory</span></div>
<div class="line"><span class="lineno">  278</span>  <span class="keyword">struct </span>dirent *ent;  <span class="comment">// handle to entry inside directory</span></div>
<div class="line"><span class="lineno">  279</span>  <span class="keywordflow">if</span> ((dir = opendir(path.c_str())) != NULL) {</div>
<div class="line"><span class="lineno">  280</span>    <span class="comment">// directory can be opened</span></div>
<div class="line"><span class="lineno">  281</span>    <span class="keywordflow">while</span> ((ent = readdir(dir)) != NULL) {</div>
<div class="line"><span class="lineno">  282</span>      std::string fp = path + <span class="charliteral">&#39;/&#39;</span> + std::string(ent-&gt;d_name);</div>
<div class="line"><span class="lineno">  283</span>      <span class="keywordflow">if</span> (fp.substr(fp.find_last_of(<span class="charliteral">&#39;.&#39;</span>) + 1) == <span class="stringliteral">&quot;lhe&quot;</span>) {</div>
<div class="line"><span class="lineno">  284</span>        <span class="comment">// file ends in &#39;.lhe&#39;</span></div>
<div class="line"><span class="lineno">  285</span>        ParseLHE(fp);</div>
<div class="line"><span class="lineno">  286</span>        foundOneFile = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  287</span>      }</div>
<div class="line"><span class="lineno">  288</span>    }</div>
<div class="line"><span class="lineno">  289</span>    closedir(dir);</div>
<div class="line"><span class="lineno">  290</span>  }</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span>  <span class="keywordflow">if</span> (not foundOneFile) {</div>
<div class="line"><span class="lineno">  293</span>    EXCEPTION_RAISE(<span class="stringliteral">&quot;DirDNE&quot;</span>, <span class="stringliteral">&quot;Directory &#39;&quot;</span> + path +</div>
<div class="line"><span class="lineno">  294</span>                                  <span class="stringliteral">&quot;&#39; was unable to be opened or no &#39;.lhe&#39; &quot;</span></div>
<div class="line"><span class="lineno">  295</span>                                  <span class="stringliteral">&quot;files were found inside of it.&quot;</span>);</div>
<div class="line"><span class="lineno">  296</span>  }</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>  <a class="code hl_function" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a5c3d1ae7e87b3d1a8ef8ae2a5faa8d20">MakePlaceholders</a>();  <span class="comment">// Setup the placeholder offsets for getting data.</span></div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>  ldmx_log(info) &lt;&lt; <span class="stringliteral">&quot;MadGraph Library of Dark Brem Vertices:\n&quot;</span>;</div>
<div class="line"><span class="lineno">  301</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;kV : <a class="code hl_variable" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#ab7837240f133ccd4070ce6d9253501ff">madGraphData_</a>) {</div>
<div class="line"><span class="lineno">  302</span>    ldmx_log(info) &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; std::setw(8) &lt;&lt; kV.first &lt;&lt; <span class="stringliteral">&quot; GeV Beam -&gt; &quot;</span></div>
<div class="line"><span class="lineno">  303</span>                   &lt;&lt; std::setw(6) &lt;&lt; kV.second.size() &lt;&lt; <span class="stringliteral">&quot; Events&quot;</span>;</div>
<div class="line"><span class="lineno">  304</span>  }</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>  <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  307</span>}</div>
<div class="ttc" id="aclasssimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_html_a5c3d1ae7e87b3d1a8ef8ae2a5faa8d20"><div class="ttname"><a href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a5c3d1ae7e87b3d1a8ef8ae2a5faa8d20">simcore::darkbrem::DarkBremVertexLibraryModel::MakePlaceholders</a></div><div class="ttdeci">void MakePlaceholders()</div><div class="ttdef"><b>Definition:</b> <a href="DarkBremVertexLibraryModel_8cxx_source.html#l00407">DarkBremVertexLibraryModel.cxx:407</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00333">madGraphData_</a>, and <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00407">MakePlaceholders()</a>.</p>

<p class="reference">Referenced by <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00027">DarkBremVertexLibraryModel()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a439de00da15efd8b5d054e7c78ba55f9" name="a439de00da15efd8b5d054e7c78ba55f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a439de00da15efd8b5d054e7c78ba55f9">&#9670;&#160;</a></span>alwaysCreateNewElectron_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool simcore::darkbrem::DarkBremVertexLibraryModel::alwaysCreateNewElectron_ {true}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >should we always create a totally new electron when we dark brem?</p>
<p >@TODO make this configurable? I (Tom E) can't think of a reason NOT to have it... The alternative is to allow Geant4 to decide when to make a new particle by checking if the resulting kinetic energy is below some threshold. </p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00322">322</a> of file <a class="el" href="DarkBremVertexLibraryModel_8h_source.html">DarkBremVertexLibraryModel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00152">GenerateChange()</a>.</p>

</div>
</div>
<a id="a04824abf04b0a3c03732c3ace3a21f69" name="a04824abf04b0a3c03732c3ace3a21f69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04824abf04b0a3c03732c3ace3a21f69">&#9670;&#160;</a></span>currentDataPoints_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;double, unsigned int&gt; simcore::darkbrem::DarkBremVertexLibraryModel::currentDataPoints_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Stores a map of current access points to mad graph data.</p>
<p >Maps incoming electron energy to the index of the data vector that we will get the data from.</p>
<p >Also sorts the incoming electron energy so that we can find the sampling energy that is closest above the actual incoming energy. </p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00344">344</a> of file <a class="el" href="DarkBremVertexLibraryModel_8h_source.html">DarkBremVertexLibraryModel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00418">GetMadgraphData()</a>, and <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00407">MakePlaceholders()</a>.</p>

</div>
</div>
<a id="a1524f0540fa212c52cc37f64c5d3bdd9" name="a1524f0540fa212c52cc37f64c5d3bdd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1524f0540fa212c52cc37f64c5d3bdd9">&#9670;&#160;</a></span>epsilon_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double simcore::darkbrem::DarkBremVertexLibraryModel::epsilon_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Epsilon value to plug into xsec calculation</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#acd90bd2f58d1aebb5265b29b93bf1f67">ComputeCrossSectionPerAtom</a> for how this is used</dd></dl>
<p>Configurable with 'epsilon' </p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00280">280</a> of file <a class="el" href="DarkBremVertexLibraryModel_8h_source.html">DarkBremVertexLibraryModel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00068">ComputeCrossSectionPerAtom()</a>, <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00027">DarkBremVertexLibraryModel()</a>, <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00053">PrintInfo()</a>, and <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00061">RecordConfig()</a>.</p>

</div>
</div>
<a id="a30d0abe713ee9c188306def95568fb4d" name="a30d0abe713ee9c188306def95568fb4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30d0abe713ee9c188306def95568fb4d">&#9670;&#160;</a></span>library_path_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string simcore::darkbrem::DarkBremVertexLibraryModel::library_path_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Full path to the vertex library used for persisting into the RunHeader </p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00312">312</a> of file <a class="el" href="DarkBremVertexLibraryModel_8h_source.html">DarkBremVertexLibraryModel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00027">DarkBremVertexLibraryModel()</a>, <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00053">PrintInfo()</a>, and <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00061">RecordConfig()</a>.</p>

</div>
</div>
<a id="ab7837240f133ccd4070ce6d9253501ff" name="ab7837240f133ccd4070ce6d9253501ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7837240f133ccd4070ce6d9253501ff">&#9670;&#160;</a></span>madGraphData_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;double, std::vector&lt;<a class="el" href="structsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel_1_1OutgoingKinematics.html">OutgoingKinematics</a>&gt; &gt; simcore::darkbrem::DarkBremVertexLibraryModel::madGraphData_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Storage of data from mad graph</p>
<p >Maps incoming electron energy to various options for outgoing kinematics. This is a hefty map and is what stores <b>all</b> of the vertices imported from the LHE library of dark brem vertices.</p>
<p >Library is read in from configuration parameter 'darkbrem.madgraphlibrary' </p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00333">333</a> of file <a class="el" href="DarkBremVertexLibraryModel_8h_source.html">DarkBremVertexLibraryModel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00418">GetMadgraphData()</a>, <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00407">MakePlaceholders()</a>, and <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00269">SetMadGraphDataLibrary()</a>.</p>

</div>
</div>
<a id="a6cf69b226c2266e8ed554b27ac71c09f" name="a6cf69b226c2266e8ed554b27ac71c09f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cf69b226c2266e8ed554b27ac71c09f">&#9670;&#160;</a></span>maxIterations_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int simcore::darkbrem::DarkBremVertexLibraryModel::maxIterations_ {10000}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >maximum number of iterations to check before giving up on an event</p>
<p >@TODO make configurable and/or optimize somehow </p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00266">266</a> of file <a class="el" href="DarkBremVertexLibraryModel_8h_source.html">DarkBremVertexLibraryModel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00152">GenerateChange()</a>, and <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00407">MakePlaceholders()</a>.</p>

</div>
</div>
<a id="af376fdaf4fb080ef6520274dae4ae746" name="af376fdaf4fb080ef6520274dae4ae746"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af376fdaf4fb080ef6520274dae4ae746">&#9670;&#160;</a></span>method_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9d">DarkBremMethod</a> simcore::darkbrem::DarkBremVertexLibraryModel::method_ {<a class="el" href="classsimcore_1_1darkbrem_1_1DarkBremVertexLibraryModel.html#a85cb4affd3f658e98cfd04a404a91c9da6ce4a356668edf02a0319b2e1469fd49">DarkBremMethod::Undefined</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >method for this model</p>
<p >Configurable with 'method' </p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00302">302</a> of file <a class="el" href="DarkBremVertexLibraryModel_8h_source.html">DarkBremVertexLibraryModel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00027">DarkBremVertexLibraryModel()</a>, and <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00152">GenerateChange()</a>.</p>

</div>
</div>
<a id="a8ee9dc30b97d61ad4836e0204bde1f16" name="a8ee9dc30b97d61ad4836e0204bde1f16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ee9dc30b97d61ad4836e0204bde1f16">&#9670;&#160;</a></span>method_name_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string simcore::darkbrem::DarkBremVertexLibraryModel::method_name_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Name of method for persisting into the RunHeader </p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00307">307</a> of file <a class="el" href="DarkBremVertexLibraryModel_8h_source.html">DarkBremVertexLibraryModel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00027">DarkBremVertexLibraryModel()</a>, <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00053">PrintInfo()</a>, and <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00061">RecordConfig()</a>.</p>

</div>
</div>
<a id="a1ccee76de16f49325aaedf0749202c97" name="a1ccee76de16f49325aaedf0749202c97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ccee76de16f49325aaedf0749202c97">&#9670;&#160;</a></span>threshold_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double simcore::darkbrem::DarkBremVertexLibraryModel::threshold_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Threshold for non-zero xsec [GeV]</p>
<p >Configurable with 'threshold' </p>

<p class="definition">Definition at line <a class="el" href="DarkBremVertexLibraryModel_8h_source.html#l00272">272</a> of file <a class="el" href="DarkBremVertexLibraryModel_8h_source.html">DarkBremVertexLibraryModel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00068">ComputeCrossSectionPerAtom()</a>, <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00027">DarkBremVertexLibraryModel()</a>, <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00053">PrintInfo()</a>, and <a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html#l00061">RecordConfig()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>SimCore/include/SimCore/DarkBrem/<a class="el" href="DarkBremVertexLibraryModel_8h_source.html">DarkBremVertexLibraryModel.h</a></li>
<li>SimCore/src/SimCore/DarkBrem/<a class="el" href="DarkBremVertexLibraryModel_8cxx_source.html">DarkBremVertexLibraryModel.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
		<script src="custom.js"></script>
	</body>
</html>