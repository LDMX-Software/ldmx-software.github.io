<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.9.1"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>LDMX Software: ecal::EcalDigiProducer Class Reference</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">LDMX Software
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part --><!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ecal</b></li><li class="navelem"><a class="el" href="classecal_1_1EcalDigiProducer.html">EcalDigiProducer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classecal_1_1EcalDigiProducer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ecal::EcalDigiProducer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Performs basic ECal digitization.  
 <a href="classecal_1_1EcalDigiProducer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="EcalDigiProducer_8h_source.html">EcalDigiProducer.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a887772d895d02ad438062517674be308"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#a887772d895d02ad438062517674be308">EcalDigiProducer</a> (const std::string &amp;name, <a class="el" href="classframework_1_1Process.html">framework::Process</a> &amp;process)</td></tr>
<tr class="separator:a887772d895d02ad438062517674be308"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7820c51efad723c4524584a7af37f9d"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#ac7820c51efad723c4524584a7af37f9d">~EcalDigiProducer</a> ()</td></tr>
<tr class="separator:ac7820c51efad723c4524584a7af37f9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f2ff3074a2c40c906b8bfebd1376a8c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#a2f2ff3074a2c40c906b8bfebd1376a8c">configure</a> (<a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;)</td></tr>
<tr class="separator:a2f2ff3074a2c40c906b8bfebd1376a8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbe114bef3e7e1fca1187c4c557e319c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#abbe114bef3e7e1fca1187c4c557e319c">produce</a> (<a class="el" href="classframework_1_1Event.html">framework::Event</a> &amp;event)</td></tr>
<tr class="separator:abbe114bef3e7e1fca1187c4c557e319c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classframework_1_1Producer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classframework_1_1Producer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classframework_1_1Producer.html">framework::Producer</a></td></tr>
<tr class="memitem:a27ea7492352028e450f24f4750c62e1b inherit pub_methods_classframework_1_1Producer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1Producer.html#a27ea7492352028e450f24f4750c62e1b">Producer</a> (const std::string &amp;name, <a class="el" href="classframework_1_1Process.html">Process</a> &amp;process)</td></tr>
<tr class="separator:a27ea7492352028e450f24f4750c62e1b inherit pub_methods_classframework_1_1Producer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b68d090cd4e50c3c572825bc57bebff inherit pub_methods_classframework_1_1Producer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1Producer.html#a8b68d090cd4e50c3c572825bc57bebff">beforeNewRun</a> (<a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> &amp;header)</td></tr>
<tr class="separator:a8b68d090cd4e50c3c572825bc57bebff inherit pub_methods_classframework_1_1Producer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classframework_1_1EventProcessor"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classframework_1_1EventProcessor')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classframework_1_1EventProcessor.html">framework::EventProcessor</a></td></tr>
<tr class="memitem:a7b079c9d4c0ac12bd9d1342073a6ae19 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a7b079c9d4c0ac12bd9d1342073a6ae19">EventProcessor</a> (const std::string &amp;name, <a class="el" href="classframework_1_1Process.html">Process</a> &amp;process)</td></tr>
<tr class="separator:a7b079c9d4c0ac12bd9d1342073a6ae19 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa9cc0358f4d501e403263b19ddc613c inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#aaa9cc0358f4d501e403263b19ddc613c">~EventProcessor</a> ()</td></tr>
<tr class="separator:aaa9cc0358f4d501e403263b19ddc613c inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93e19454e18fd62bc2081d40b3f41c62 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a93e19454e18fd62bc2081d40b3f41c62">onNewRun</a> (const <a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> &amp;runHeader)</td></tr>
<tr class="separator:a93e19454e18fd62bc2081d40b3f41c62 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab717fa73bbfb14424eb856e87b760e2c inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#ab717fa73bbfb14424eb856e87b760e2c">onFileOpen</a> (<a class="el" href="classframework_1_1EventFile.html">EventFile</a> &amp;eventFile)</td></tr>
<tr class="separator:ab717fa73bbfb14424eb856e87b760e2c inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6692c259d89b5ad39ceb2a302cd7e0e5 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a6692c259d89b5ad39ceb2a302cd7e0e5">onFileClose</a> (<a class="el" href="classframework_1_1EventFile.html">EventFile</a> &amp;eventFile)</td></tr>
<tr class="separator:a6692c259d89b5ad39ceb2a302cd7e0e5 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab54bb3abaafcb4f4b4b42d0a2ff616a9 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#ab54bb3abaafcb4f4b4b42d0a2ff616a9">onProcessStart</a> ()</td></tr>
<tr class="separator:ab54bb3abaafcb4f4b4b42d0a2ff616a9 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a527ebdf1fe665011964d9ce42a5521ad inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a527ebdf1fe665011964d9ce42a5521ad">onProcessEnd</a> ()</td></tr>
<tr class="separator:a527ebdf1fe665011964d9ce42a5521ad inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac22d6f61690abaab55a53b8814fb9dd0 inherit pub_methods_classframework_1_1EventProcessor"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:ac22d6f61690abaab55a53b8814fb9dd0 inherit pub_methods_classframework_1_1EventProcessor"><td class="memTemplItemLeft" align="right" valign="top">const T &amp;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#ac22d6f61690abaab55a53b8814fb9dd0">getCondition</a> (const std::string &amp;condition_name)</td></tr>
<tr class="separator:ac22d6f61690abaab55a53b8814fb9dd0 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae243bb073918259e747a8f8f144b0053 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">TDirectory *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#ae243bb073918259e747a8f8f144b0053">getHistoDirectory</a> ()</td></tr>
<tr class="separator:ae243bb073918259e747a8f8f144b0053 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f93ec80a4207c3847d629482e81989d inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a2f93ec80a4207c3847d629482e81989d">setStorageHint</a> (framework::StorageControlHint hint)</td></tr>
<tr class="separator:a2f93ec80a4207c3847d629482e81989d inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacc5699b669ced944eac4eeea2ade915 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#aacc5699b669ced944eac4eeea2ade915">setStorageHint</a> (framework::StorageControlHint hint, const std::string &amp;purposeString)</td></tr>
<tr class="separator:aacc5699b669ced944eac4eeea2ade915 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af212ff21b3ebec223facbfb02502ecdf inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#af212ff21b3ebec223facbfb02502ecdf">getLogFrequency</a> () const</td></tr>
<tr class="separator:af212ff21b3ebec223facbfb02502ecdf inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adde4ce813307a7d232eb5f4eda859b42 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#adde4ce813307a7d232eb5f4eda859b42">getRunNumber</a> () const</td></tr>
<tr class="separator:adde4ce813307a7d232eb5f4eda859b42 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9467d0d35043af7ed66a6b46cbca85ca inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a9467d0d35043af7ed66a6b46cbca85ca">getName</a> () const</td></tr>
<tr class="separator:a9467d0d35043af7ed66a6b46cbca85ca inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ed5966370da67ee0c89f7d6f9c8436d inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a5ed5966370da67ee0c89f7d6f9c8436d">createHistograms</a> (const std::vector&lt; <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &gt; &amp;histos)</td></tr>
<tr class="separator:a5ed5966370da67ee0c89f7d6f9c8436d inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a351c846c163c054161e0acc3c9c20d33"><td class="memItemLeft" align="right" valign="top"><a id="a351c846c163c054161e0acc3c9c20d33"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#a351c846c163c054161e0acc3c9c20d33">inputCollName_</a></td></tr>
<tr class="memdesc:a351c846c163c054161e0acc3c9c20d33"><td class="mdescLeft">&#160;</td><td class="mdescRight">input hit collection name <br /></td></tr>
<tr class="separator:a351c846c163c054161e0acc3c9c20d33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8b906805942474d37bd3124b7896e09"><td class="memItemLeft" align="right" valign="top"><a id="ae8b906805942474d37bd3124b7896e09"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#ae8b906805942474d37bd3124b7896e09">inputPassName_</a></td></tr>
<tr class="memdesc:ae8b906805942474d37bd3124b7896e09"><td class="mdescLeft">&#160;</td><td class="mdescRight">input pass name <br /></td></tr>
<tr class="separator:ae8b906805942474d37bd3124b7896e09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d001429b290ce2060c81b2a88bb7c4"><td class="memItemLeft" align="right" valign="top"><a id="ad1d001429b290ce2060c81b2a88bb7c4"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#ad1d001429b290ce2060c81b2a88bb7c4">digiCollName_</a></td></tr>
<tr class="memdesc:ad1d001429b290ce2060c81b2a88bb7c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">output hit collection name <br /></td></tr>
<tr class="separator:ad1d001429b290ce2060c81b2a88bb7c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4197ff170a5000086456bb10d64df98b"><td class="memItemLeft" align="right" valign="top"><a id="a4197ff170a5000086456bb10d64df98b"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#a4197ff170a5000086456bb10d64df98b">clockCycle_</a></td></tr>
<tr class="memdesc:a4197ff170a5000086456bb10d64df98b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time interval for chip clock in ns. <br /></td></tr>
<tr class="separator:a4197ff170a5000086456bb10d64df98b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a459efb87574f8b386e532be97229aa8b"><td class="memItemLeft" align="right" valign="top"><a id="a459efb87574f8b386e532be97229aa8b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#a459efb87574f8b386e532be97229aa8b">nADCs_</a></td></tr>
<tr class="memdesc:a459efb87574f8b386e532be97229aa8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Depth of ADC buffer. <br /></td></tr>
<tr class="separator:a459efb87574f8b386e532be97229aa8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a9b6dc31b5d694aa085895f7b3463ff"><td class="memItemLeft" align="right" valign="top"><a id="a0a9b6dc31b5d694aa085895f7b3463ff"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#a0a9b6dc31b5d694aa085895f7b3463ff">iSOI_</a></td></tr>
<tr class="memdesc:a0a9b6dc31b5d694aa085895f7b3463ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index for the Sample Of Interest in the list of digi samples. <br /></td></tr>
<tr class="separator:a0a9b6dc31b5d694aa085895f7b3463ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9b7241198f7d6baa9d4bf8bc4984a1d"><td class="memItemLeft" align="right" valign="top"><a id="ad9b7241198f7d6baa9d4bf8bc4984a1d"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#ad9b7241198f7d6baa9d4bf8bc4984a1d">MeV_</a></td></tr>
<tr class="memdesc:ad9b7241198f7d6baa9d4bf8bc4984a1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Conversion from energy in MeV to voltage in mV. <br /></td></tr>
<tr class="separator:ad9b7241198f7d6baa9d4bf8bc4984a1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8de18d27fbd96805131177fbbff25b8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#af8de18d27fbd96805131177fbbff25b8">zero_suppression_</a></td></tr>
<tr class="separator:af8de18d27fbd96805131177fbbff25b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a472acd573d6597925c11734a9d7a9c97"><td class="memItemLeft" align="right" valign="top"><a id="a472acd573d6597925c11734a9d7a9c97"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#a472acd573d6597925c11734a9d7a9c97">avgNoiseRMS_</a></td></tr>
<tr class="memdesc:a472acd573d6597925c11734a9d7a9c97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store Average Noise RMS for no-zero-suppresion noise emulation mode. <br /></td></tr>
<tr class="separator:a472acd573d6597925c11734a9d7a9c97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a263b26551ea51b020f1ae114ca23282b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#a263b26551ea51b020f1ae114ca23282b">noise_</a> {true}</td></tr>
<tr class="separator:a263b26551ea51b020f1ae114ca23282b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af571ddf35164ef5f5fe397bf1d7cd4d0"><td class="memItemLeft" align="right" valign="top"><a id="af571ddf35164ef5f5fe397bf1d7cd4d0"></a>
std::unique_ptr&lt; <a class="el" href="classldmx_1_1HgcrocEmulator.html">ldmx::HgcrocEmulator</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#af571ddf35164ef5f5fe397bf1d7cd4d0">hgcroc_</a></td></tr>
<tr class="memdesc:af571ddf35164ef5f5fe397bf1d7cd4d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hgcroc Emulator to digitize analog voltage signals. <br /></td></tr>
<tr class="separator:af571ddf35164ef5f5fe397bf1d7cd4d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1e838bd01dc007ae0dfda4acfeb13a3"><td class="memItemLeft" align="right" valign="top"><a id="ab1e838bd01dc007ae0dfda4acfeb13a3"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#ab1e838bd01dc007ae0dfda4acfeb13a3">nTotalChannels_</a></td></tr>
<tr class="memdesc:ab1e838bd01dc007ae0dfda4acfeb13a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total number of channels in the ECal. <br /></td></tr>
<tr class="separator:ab1e838bd01dc007ae0dfda4acfeb13a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaf9ea8af47e66d6c870edba553e08e4"><td class="memItemLeft" align="right" valign="top"><a id="acaf9ea8af47e66d6c870edba553e08e4"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#acaf9ea8af47e66d6c870edba553e08e4">ns_</a></td></tr>
<tr class="memdesc:acaf9ea8af47e66d6c870edba553e08e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Conversion from time in ns to ticks of the internal clock. <br /></td></tr>
<tr class="separator:acaf9ea8af47e66d6c870edba553e08e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a623349e95bd5f8a51abcb52dc7220188"><td class="memItemLeft" align="right" valign="top"><a id="a623349e95bd5f8a51abcb52dc7220188"></a>
std::unique_ptr&lt; <a class="el" href="classldmx_1_1NoiseGenerator.html">ldmx::NoiseGenerator</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#a623349e95bd5f8a51abcb52dc7220188">noiseGenerator_</a></td></tr>
<tr class="memdesc:a623349e95bd5f8a51abcb52dc7220188"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates noise hits based off of number of cells that are not hit. <br /></td></tr>
<tr class="separator:a623349e95bd5f8a51abcb52dc7220188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba2a44a592cef6be619fbcf13983fbd7"><td class="memItemLeft" align="right" valign="top"><a id="aba2a44a592cef6be619fbcf13983fbd7"></a>
std::unique_ptr&lt; TRandom3 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecal_1_1EcalDigiProducer.html#aba2a44a592cef6be619fbcf13983fbd7">noiseInjector_</a></td></tr>
<tr class="memdesc:aba2a44a592cef6be619fbcf13983fbd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates Gaussian noise on top of real hits. <br /></td></tr>
<tr class="separator:aba2a44a592cef6be619fbcf13983fbd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classframework_1_1EventProcessor"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classframework_1_1EventProcessor')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classframework_1_1EventProcessor.html">framework::EventProcessor</a></td></tr>
<tr class="memitem:a055eb62b2fdde542be4225dfe3a7f9c9 inherit pub_static_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a055eb62b2fdde542be4225dfe3a7f9c9">declare</a> (const std::string &amp;classname, int classtype, <a class="el" href="namespaceframework.html#a60a0153b9002bf2a85c7c4017e21e568">EventProcessorMaker</a> *)</td></tr>
<tr class="separator:a055eb62b2fdde542be4225dfe3a7f9c9 inherit pub_static_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_attribs_classframework_1_1Producer"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_classframework_1_1Producer')"><img src="closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="classframework_1_1Producer.html">framework::Producer</a></td></tr>
<tr class="memitem:a6433d7808e67a79fc83d4c6f7e57224a inherit pub_static_attribs_classframework_1_1Producer"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1Producer.html#a6433d7808e67a79fc83d4c6f7e57224a">CLASSTYPE</a> {1}</td></tr>
<tr class="separator:a6433d7808e67a79fc83d4c6f7e57224a inherit pub_static_attribs_classframework_1_1Producer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classframework_1_1EventProcessor"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classframework_1_1EventProcessor')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classframework_1_1EventProcessor.html">framework::EventProcessor</a></td></tr>
<tr class="memitem:a8d42387da8fbb2d1f01f5ecebb64dd7d inherit pro_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a8d42387da8fbb2d1f01f5ecebb64dd7d">abortEvent</a> ()</td></tr>
<tr class="separator:a8d42387da8fbb2d1f01f5ecebb64dd7d inherit pro_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classframework_1_1EventProcessor"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classframework_1_1EventProcessor')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classframework_1_1EventProcessor.html">framework::EventProcessor</a></td></tr>
<tr class="memitem:ae8a2bfe0849be1531e195438c1eaba4c inherit pro_attribs_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top"><a id="ae8a2bfe0849be1531e195438c1eaba4c"></a>
<a class="el" href="classframework_1_1HistogramHelper.html">HistogramHelper</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#ae8a2bfe0849be1531e195438c1eaba4c">histograms_</a></td></tr>
<tr class="memdesc:ae8a2bfe0849be1531e195438c1eaba4c inherit pro_attribs_classframework_1_1EventProcessor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface class for making and filling histograms. <br /></td></tr>
<tr class="separator:ae8a2bfe0849be1531e195438c1eaba4c inherit pro_attribs_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a410e35c73c9b196961e5c35127321814 inherit pro_attribs_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top"><a id="a410e35c73c9b196961e5c35127321814"></a>
<a class="el" href="classframework_1_1NtupleManager.html">NtupleManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a410e35c73c9b196961e5c35127321814">ntuple_</a> {<a class="el" href="classframework_1_1NtupleManager.html#a95b2bb3823b5a35568c5facb85d441d1">NtupleManager::getInstance</a>()}</td></tr>
<tr class="memdesc:a410e35c73c9b196961e5c35127321814 inherit pro_attribs_classframework_1_1EventProcessor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manager for any ntuples. <br /></td></tr>
<tr class="separator:a410e35c73c9b196961e5c35127321814 inherit pro_attribs_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae350c3e5c91a69b8910bf1229ed21430 inherit pro_attribs_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top"><a id="ae350c3e5c91a69b8910bf1229ed21430"></a>
logging::logger&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#ae350c3e5c91a69b8910bf1229ed21430">theLog_</a></td></tr>
<tr class="memdesc:ae350c3e5c91a69b8910bf1229ed21430 inherit pro_attribs_classframework_1_1EventProcessor"><td class="mdescLeft">&#160;</td><td class="mdescRight">The logger for this <a class="el" href="classframework_1_1EventProcessor.html" title="Base class for all event processing components.">EventProcessor</a>. <br /></td></tr>
<tr class="separator:ae350c3e5c91a69b8910bf1229ed21430 inherit pro_attribs_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Performs basic ECal digitization. </p>

<p class="definition">Definition at line <a class="el" href="EcalDigiProducer_8h_source.html#l00037">37</a> of file <a class="el" href="EcalDigiProducer_8h_source.html">EcalDigiProducer.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a887772d895d02ad438062517674be308"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a887772d895d02ad438062517674be308">&#9670;&nbsp;</a></span>EcalDigiProducer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ecal::EcalDigiProducer::EcalDigiProducer </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classframework_1_1Process.html">framework::Process</a> &amp;&#160;</td>
          <td class="paramname"><em>process</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor Makes unique noise generator and injector for this class </p>

<p class="definition">Definition at line <a class="el" href="EcalDigiProducer_8cxx_source.html#l00013">13</a> of file <a class="el" href="EcalDigiProducer_8cxx_source.html">EcalDigiProducer.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    : <a class="code" href="classframework_1_1Producer.html#a27ea7492352028e450f24f4750c62e1b">Producer</a>(name, process) {</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  <span class="comment">// noise generator by default uses a Gausian model for noise</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;  <span class="comment">//  i.e. It assumes the noise is distributed around a mean (setPedestal)</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  <span class="comment">//  with a certain RMS (setNoise) and then calculates</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  <span class="comment">//  how many hits should be generated for a given number of empty</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  <span class="comment">//  channels and a minimum readout value (setNoiseThreshold)</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#a623349e95bd5f8a51abcb52dc7220188">noiseGenerator_</a> = std::make_unique&lt;ldmx::NoiseGenerator&gt;();</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;}</div>
<div class="ttc" id="aclassecal_1_1EcalDigiProducer_html_a623349e95bd5f8a51abcb52dc7220188"><div class="ttname"><a href="classecal_1_1EcalDigiProducer.html#a623349e95bd5f8a51abcb52dc7220188">ecal::EcalDigiProducer::noiseGenerator_</a></div><div class="ttdeci">std::unique_ptr&lt; ldmx::NoiseGenerator &gt; noiseGenerator_</div><div class="ttdoc">Generates noise hits based off of number of cells that are not hit.</div><div class="ttdef"><b>Definition:</b> <a href="EcalDigiProducer_8h_source.html#l00122">EcalDigiProducer.h:122</a></div></div>
<div class="ttc" id="aclassframework_1_1Producer_html_a27ea7492352028e450f24f4750c62e1b"><div class="ttname"><a href="classframework_1_1Producer.html#a27ea7492352028e450f24f4750c62e1b">framework::Producer::Producer</a></div><div class="ttdeci">Producer(const std::string &amp;name, Process &amp;process)</div><div class="ttdef"><b>Definition:</b> <a href="EventProcessor_8cxx_source.html#l00068">EventProcessor.cxx:68</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalDigiProducer_8h_source.html#l00122">noiseGenerator_</a>.</p>

</div>
</div>
<a id="ac7820c51efad723c4524584a7af37f9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7820c51efad723c4524584a7af37f9d">&#9670;&nbsp;</a></span>~EcalDigiProducer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ecal::EcalDigiProducer::~EcalDigiProducer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Destructor Deletes digi collection if it has been created </p>

<p class="definition">Definition at line <a class="el" href="EcalDigiProducer_8cxx_source.html#l00024">24</a> of file <a class="el" href="EcalDigiProducer_8cxx_source.html">EcalDigiProducer.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2f2ff3074a2c40c906b8bfebd1376a8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f2ff3074a2c40c906b8bfebd1376a8c">&#9670;&nbsp;</a></span>configure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ecal::EcalDigiProducer::configure </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;&#160;</td>
          <td class="paramname"><em>ps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Configure this producer from the python configuration. Sets event constants and configures the noise generator, noise injector, and pulse function. Creates digi collection </p>

<p>Reimplemented from <a class="el" href="classframework_1_1EventProcessor.html#a21156f6f3954394925e9a265de9d702a">framework::EventProcessor</a>.</p>

<p class="definition">Definition at line <a class="el" href="EcalDigiProducer_8cxx_source.html#l00026">26</a> of file <a class="el" href="EcalDigiProducer_8cxx_source.html">EcalDigiProducer.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;                                                              {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <span class="comment">// settings of readout chip</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="comment">//  used  in actual digitization</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="keyword">auto</span> hgcrocParams = ps.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<a class="code" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a>&gt;(<span class="stringliteral">&quot;hgcroc&quot;</span>);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#af571ddf35164ef5f5fe397bf1d7cd4d0">hgcroc_</a> = std::make_unique&lt;ldmx::HgcrocEmulator&gt;(hgcrocParams);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#a4197ff170a5000086456bb10d64df98b">clockCycle_</a> = hgcrocParams.getParameter&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;clockCycle&quot;</span>);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#a459efb87574f8b386e532be97229aa8b">nADCs_</a> = hgcrocParams.getParameter&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;nADCs&quot;</span>);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#a0a9b6dc31b5d694aa085895f7b3463ff">iSOI_</a> = hgcrocParams.getParameter&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;iSOI&quot;</span>);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#a263b26551ea51b020f1ae114ca23282b">noise_</a> = hgcrocParams.getParameter&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;noise&quot;</span>);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="comment">// collection names</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#a351c846c163c054161e0acc3c9c20d33">inputCollName_</a> = ps.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;std::string&gt;(<span class="stringliteral">&quot;inputCollName&quot;</span>);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#ae8b906805942474d37bd3124b7896e09">inputPassName_</a> = ps.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;std::string&gt;(<span class="stringliteral">&quot;inputPassName&quot;</span>);</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#ad1d001429b290ce2060c81b2a88bb7c4">digiCollName_</a> = ps.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;std::string&gt;(<span class="stringliteral">&quot;digiCollName&quot;</span>);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#af8de18d27fbd96805131177fbbff25b8">zero_suppression_</a> = ps.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;zero_suppression&quot;</span>);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="comment">// physical constants</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="comment">//  used to calculate unit conversions</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#ad9b7241198f7d6baa9d4bf8bc4984a1d">MeV_</a> = ps.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;MeV&quot;</span>);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="comment">// Time -&gt; clock counts conversion</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="comment">//  time [ns] * ( 2^10 / max time in ns ) = clock counts</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#acaf9ea8af47e66d6c870edba553e08e4">ns_</a> = 1024. / <a class="code" href="classecal_1_1EcalDigiProducer.html#a4197ff170a5000086456bb10d64df98b">clockCycle_</a>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="comment">// Configure generator that will produce noise hits in empty channels</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordtype">double</span> readoutThreshold = ps.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;avgReadoutThreshold&quot;</span>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordtype">double</span> pedestal = ps.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;avgPedestal&quot;</span>);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">// saved because it might be used later</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#a472acd573d6597925c11734a9d7a9c97">avgNoiseRMS_</a> = hgcrocParams.getParameter&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;noiseRMS&quot;</span>);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// rms noise in mV</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#a623349e95bd5f8a51abcb52dc7220188">noiseGenerator_</a>-&gt;setNoise(<a class="code" href="classecal_1_1EcalDigiProducer.html#a472acd573d6597925c11734a9d7a9c97">avgNoiseRMS_</a>);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="comment">// mean noise amplitude (if using Gaussian Model for the noise) in mV</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#a623349e95bd5f8a51abcb52dc7220188">noiseGenerator_</a>-&gt;setPedestal(pedestal);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="comment">// threshold for readout in mV</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#a623349e95bd5f8a51abcb52dc7220188">noiseGenerator_</a>-&gt;setNoiseThreshold(readoutThreshold);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div>
<div class="ttc" id="aclassecal_1_1EcalDigiProducer_html_a0a9b6dc31b5d694aa085895f7b3463ff"><div class="ttname"><a href="classecal_1_1EcalDigiProducer.html#a0a9b6dc31b5d694aa085895f7b3463ff">ecal::EcalDigiProducer::iSOI_</a></div><div class="ttdeci">int iSOI_</div><div class="ttdoc">Index for the Sample Of Interest in the list of digi samples.</div><div class="ttdef"><b>Definition:</b> <a href="EcalDigiProducer_8h_source.html#l00083">EcalDigiProducer.h:83</a></div></div>
<div class="ttc" id="aclassecal_1_1EcalDigiProducer_html_a263b26551ea51b020f1ae114ca23282b"><div class="ttname"><a href="classecal_1_1EcalDigiProducer.html#a263b26551ea51b020f1ae114ca23282b">ecal::EcalDigiProducer::noise_</a></div><div class="ttdeci">bool noise_</div><div class="ttdef"><b>Definition:</b> <a href="EcalDigiProducer_8h_source.html#l00110">EcalDigiProducer.h:110</a></div></div>
<div class="ttc" id="aclassecal_1_1EcalDigiProducer_html_a351c846c163c054161e0acc3c9c20d33"><div class="ttname"><a href="classecal_1_1EcalDigiProducer.html#a351c846c163c054161e0acc3c9c20d33">ecal::EcalDigiProducer::inputCollName_</a></div><div class="ttdeci">std::string inputCollName_</div><div class="ttdoc">input hit collection name</div><div class="ttdef"><b>Definition:</b> <a href="EcalDigiProducer_8h_source.html#l00068">EcalDigiProducer.h:68</a></div></div>
<div class="ttc" id="aclassecal_1_1EcalDigiProducer_html_a4197ff170a5000086456bb10d64df98b"><div class="ttname"><a href="classecal_1_1EcalDigiProducer.html#a4197ff170a5000086456bb10d64df98b">ecal::EcalDigiProducer::clockCycle_</a></div><div class="ttdeci">double clockCycle_</div><div class="ttdoc">Time interval for chip clock in ns.</div><div class="ttdef"><b>Definition:</b> <a href="EcalDigiProducer_8h_source.html#l00077">EcalDigiProducer.h:77</a></div></div>
<div class="ttc" id="aclassecal_1_1EcalDigiProducer_html_a459efb87574f8b386e532be97229aa8b"><div class="ttname"><a href="classecal_1_1EcalDigiProducer.html#a459efb87574f8b386e532be97229aa8b">ecal::EcalDigiProducer::nADCs_</a></div><div class="ttdeci">int nADCs_</div><div class="ttdoc">Depth of ADC buffer.</div><div class="ttdef"><b>Definition:</b> <a href="EcalDigiProducer_8h_source.html#l00080">EcalDigiProducer.h:80</a></div></div>
<div class="ttc" id="aclassecal_1_1EcalDigiProducer_html_a472acd573d6597925c11734a9d7a9c97"><div class="ttname"><a href="classecal_1_1EcalDigiProducer.html#a472acd573d6597925c11734a9d7a9c97">ecal::EcalDigiProducer::avgNoiseRMS_</a></div><div class="ttdeci">double avgNoiseRMS_</div><div class="ttdoc">Store Average Noise RMS for no-zero-suppresion noise emulation mode.</div><div class="ttdef"><b>Definition:</b> <a href="EcalDigiProducer_8h_source.html#l00103">EcalDigiProducer.h:103</a></div></div>
<div class="ttc" id="aclassecal_1_1EcalDigiProducer_html_acaf9ea8af47e66d6c870edba553e08e4"><div class="ttname"><a href="classecal_1_1EcalDigiProducer.html#acaf9ea8af47e66d6c870edba553e08e4">ecal::EcalDigiProducer::ns_</a></div><div class="ttdeci">double ns_</div><div class="ttdoc">Conversion from time in ns to ticks of the internal clock.</div><div class="ttdef"><b>Definition:</b> <a href="EcalDigiProducer_8h_source.html#l00119">EcalDigiProducer.h:119</a></div></div>
<div class="ttc" id="aclassecal_1_1EcalDigiProducer_html_ad1d001429b290ce2060c81b2a88bb7c4"><div class="ttname"><a href="classecal_1_1EcalDigiProducer.html#ad1d001429b290ce2060c81b2a88bb7c4">ecal::EcalDigiProducer::digiCollName_</a></div><div class="ttdeci">std::string digiCollName_</div><div class="ttdoc">output hit collection name</div><div class="ttdef"><b>Definition:</b> <a href="EcalDigiProducer_8h_source.html#l00074">EcalDigiProducer.h:74</a></div></div>
<div class="ttc" id="aclassecal_1_1EcalDigiProducer_html_ad9b7241198f7d6baa9d4bf8bc4984a1d"><div class="ttname"><a href="classecal_1_1EcalDigiProducer.html#ad9b7241198f7d6baa9d4bf8bc4984a1d">ecal::EcalDigiProducer::MeV_</a></div><div class="ttdeci">double MeV_</div><div class="ttdoc">Conversion from energy in MeV to voltage in mV.</div><div class="ttdef"><b>Definition:</b> <a href="EcalDigiProducer_8h_source.html#l00086">EcalDigiProducer.h:86</a></div></div>
<div class="ttc" id="aclassecal_1_1EcalDigiProducer_html_ae8b906805942474d37bd3124b7896e09"><div class="ttname"><a href="classecal_1_1EcalDigiProducer.html#ae8b906805942474d37bd3124b7896e09">ecal::EcalDigiProducer::inputPassName_</a></div><div class="ttdeci">std::string inputPassName_</div><div class="ttdoc">input pass name</div><div class="ttdef"><b>Definition:</b> <a href="EcalDigiProducer_8h_source.html#l00071">EcalDigiProducer.h:71</a></div></div>
<div class="ttc" id="aclassecal_1_1EcalDigiProducer_html_af571ddf35164ef5f5fe397bf1d7cd4d0"><div class="ttname"><a href="classecal_1_1EcalDigiProducer.html#af571ddf35164ef5f5fe397bf1d7cd4d0">ecal::EcalDigiProducer::hgcroc_</a></div><div class="ttdeci">std::unique_ptr&lt; ldmx::HgcrocEmulator &gt; hgcroc_</div><div class="ttdoc">Hgcroc Emulator to digitize analog voltage signals.</div><div class="ttdef"><b>Definition:</b> <a href="EcalDigiProducer_8h_source.html#l00113">EcalDigiProducer.h:113</a></div></div>
<div class="ttc" id="aclassecal_1_1EcalDigiProducer_html_af8de18d27fbd96805131177fbbff25b8"><div class="ttname"><a href="classecal_1_1EcalDigiProducer.html#af8de18d27fbd96805131177fbbff25b8">ecal::EcalDigiProducer::zero_suppression_</a></div><div class="ttdeci">bool zero_suppression_</div><div class="ttdef"><b>Definition:</b> <a href="EcalDigiProducer_8h_source.html#l00100">EcalDigiProducer.h:100</a></div></div>
<div class="ttc" id="aclassframework_1_1config_1_1Parameters_html"><div class="ttname"><a href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a></div><div class="ttdef"><b>Definition:</b> <a href="Parameters_8h_source.html#l00027">Parameters.h:27</a></div></div>
<div class="ttc" id="aclassframework_1_1config_1_1Parameters_html_a18206b7c01007dd706abce7e5505eae1"><div class="ttname"><a href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">framework::config::Parameters::getParameter</a></div><div class="ttdeci">T getParameter(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="Parameters_8h_source.html#l00089">Parameters.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EcalDigiProducer_8h_source.html#l00103">avgNoiseRMS_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00077">clockCycle_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00074">digiCollName_</a>, <a class="el" href="Parameters_8h_source.html#l00089">framework::config::Parameters::getParameter()</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00113">hgcroc_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00068">inputCollName_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00071">inputPassName_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00083">iSOI_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00086">MeV_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00080">nADCs_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00110">noise_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00122">noiseGenerator_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00119">ns_</a>, and <a class="el" href="EcalDigiProducer_8h_source.html#l00100">zero_suppression_</a>.</p>

</div>
</div>
<a id="abbe114bef3e7e1fca1187c4c557e319c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbe114bef3e7e1fca1187c4c557e319c">&#9670;&nbsp;</a></span>produce()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ecal::EcalDigiProducer::produce </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classframework_1_1Event.html">framework::Event</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Simulates measurement of pulse and creates digi collection for input event. </p>
<p>HACK ALERT The shifting of the time should <em>not</em> be done this sloppily. In reality, each chip has a set time phase that it samples at (relative to target), so the time shifting should be at the emulator level.</p>

<p>Implements <a class="el" href="classframework_1_1Producer.html#a8591fb1e12fd5d8b1f2a5838d030042e">framework::Producer</a>.</p>

<p class="definition">Definition at line <a class="el" href="EcalDigiProducer_8cxx_source.html#l00064">64</a> of file <a class="el" href="EcalDigiProducer_8cxx_source.html">EcalDigiProducer.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                                                    {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="comment">// Need to handle seeding on the first event</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classecal_1_1EcalDigiProducer.html#a623349e95bd5f8a51abcb52dc7220188">noiseGenerator_</a>-&gt;hasSeed()) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; rseed = getCondition&lt;framework::RandomNumberSeedService&gt;(</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <a class="code" href="classframework_1_1RandomNumberSeedService.html#a48e87463ea63d1862064cad26d5b9bb4">framework::RandomNumberSeedService::CONDITIONS_OBJECT_NAME</a>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="classecal_1_1EcalDigiProducer.html#a623349e95bd5f8a51abcb52dc7220188">noiseGenerator_</a>-&gt;seedGenerator(</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        rseed.getSeed(<span class="stringliteral">&quot;EcalDigiProducer::NoiseGenerator&quot;</span>));</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classecal_1_1EcalDigiProducer.html#aba2a44a592cef6be619fbcf13983fbd7">noiseInjector_</a>.get() == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; rseed = getCondition&lt;framework::RandomNumberSeedService&gt;(</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <a class="code" href="classframework_1_1RandomNumberSeedService.html#a48e87463ea63d1862064cad26d5b9bb4">framework::RandomNumberSeedService::CONDITIONS_OBJECT_NAME</a>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="classecal_1_1EcalDigiProducer.html#aba2a44a592cef6be619fbcf13983fbd7">noiseInjector_</a> = std::make_unique&lt;TRandom3&gt;(</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        rseed.getSeed(<span class="stringliteral">&quot;EcalDigiProducer::NoiseInjector&quot;</span>));</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classecal_1_1EcalDigiProducer.html#af571ddf35164ef5f5fe397bf1d7cd4d0">hgcroc_</a>-&gt;hasSeed()) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; rseed = getCondition&lt;framework::RandomNumberSeedService&gt;(</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <a class="code" href="classframework_1_1RandomNumberSeedService.html#a48e87463ea63d1862064cad26d5b9bb4">framework::RandomNumberSeedService::CONDITIONS_OBJECT_NAME</a>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="classecal_1_1EcalDigiProducer.html#af571ddf35164ef5f5fe397bf1d7cd4d0">hgcroc_</a>-&gt;seedGenerator(rseed.getSeed(<span class="stringliteral">&quot;EcalDigiProducer::HgcrocEmulator&quot;</span>));</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="classecal_1_1EcalDigiProducer.html#af571ddf35164ef5f5fe397bf1d7cd4d0">hgcroc_</a>-&gt;condition(getCondition&lt;conditions::DoubleTableCondition&gt;(<span class="stringliteral">&quot;EcalHgcrocConditions&quot;</span>));</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="comment">// Empty collection to be filled</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <a class="code" href="classldmx_1_1HgcrocDigiCollection.html">ldmx::HgcrocDigiCollection</a> ecalDigis;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  ecalDigis.<a class="code" href="classldmx_1_1HgcrocDigiCollection.html#a710b705f129831a7029b9b42c3dcdf23">setNumSamplesPerDigi</a>(<a class="code" href="classecal_1_1EcalDigiProducer.html#a459efb87574f8b386e532be97229aa8b">nADCs_</a>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  ecalDigis.<a class="code" href="classldmx_1_1HgcrocDigiCollection.html#aa7400fd63b92e03d22f94898630f1f77">setSampleOfInterestIndex</a>(<a class="code" href="classecal_1_1EcalDigiProducer.html#a0a9b6dc31b5d694aa085895f7b3463ff">iSOI_</a>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  std::set&lt;unsigned int&gt;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      filledDetIDs;  <span class="comment">// detector IDs that already have a hit in them</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">  /******************************************************************************************</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">   * HGCROC Emulation on Simulated Hits</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">   *****************************************************************************************/</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">// std::cout &lt;&lt; &quot;Sim Hits&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// get simulated ecal hits from Geant4</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">//  the class EcalHitIO in the SimApplication module handles the translation</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="comment">//  from G4CalorimeterHits to SimCalorimeterHits this class ensures that only</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">//  one SimCalorimeterHit is generated per cell, but multiple &quot;contributions&quot;</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">//  are still handled within SimCalorimeterHit</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keyword">auto</span> ecalSimHits{<span class="keyword">event</span>.getCollection&lt;<a class="code" href="classldmx_1_1SimCalorimeterHit.html">ldmx::SimCalorimeterHit</a>&gt;(</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <a class="code" href="classecal_1_1EcalDigiProducer.html#a351c846c163c054161e0acc3c9c20d33">inputCollName_</a>, <a class="code" href="classecal_1_1EcalDigiProducer.html#ae8b906805942474d37bd3124b7896e09">inputPassName_</a>)};</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">/* debug printout</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">  std::cout &lt;&lt; &quot;Energy to Voltage Conversion: &quot; &lt;&lt; MeV_ &lt;&lt; &quot; mV/MeV&quot; &lt;&lt;</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">  std::endl;</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; simHit : ecalSimHits) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    std::vector&lt;std::pair&lt;double,double&gt;&gt; pulses_at_chip;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iContrib = 0; iContrib &lt; simHit.getNumberOfContribs();</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;         iContrib++) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <span class="comment">/* debug printout</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">      std::cout &lt;&lt; simHit.getContrib(iContrib).edep &lt;&lt; &quot; MeV&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">       */</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      pulses_at_chip.emplace_back(</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        simHit.getContrib(iContrib).edep * <a class="code" href="classecal_1_1EcalDigiProducer.html#ad9b7241198f7d6baa9d4bf8bc4984a1d">MeV_</a>,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        simHit.getContrib(iContrib).time  <span class="comment">// global time (t=0ns at target)</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;          - simHit.getPosition().at(2) /</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                299.702547  <span class="comment">// shift light-speed particle traveling along z</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      );</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> hitID = simHit.<a class="code" href="classldmx_1_1SimCalorimeterHit.html#aa253dffd148f4f5dc07288cfd7a0fa85">getID</a>();</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    filledDetIDs.insert(hitID);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">/* debug printout</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">    std::cout &lt;&lt; hitID &lt;&lt; &quot; &quot;</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">        &lt;&lt; simHit.getEdep() </span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">        &lt;&lt; &quot; MeV at &quot;</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">        &lt;&lt; simHit.getTime() - simHit.getPosition().at(2)/299.702547</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">        &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// container emulator uses to write out samples and</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">// transfer samples into the digi collection</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    std::vector&lt;ldmx::HgcrocDigiCollection::Sample&gt; digiToAdd;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classecal_1_1EcalDigiProducer.html#af571ddf35164ef5f5fe397bf1d7cd4d0">hgcroc_</a>-&gt;digitize(hitID, pulses_at_chip, digiToAdd)) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      ecalDigis.<a class="code" href="classldmx_1_1HgcrocDigiCollection.html#ad6607762651c38c82453a787dd2da582">addDigi</a>(hitID, digiToAdd);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">  /******************************************************************************************</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">   * Noise Simulation on Empty Channels</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">   *****************************************************************************************/</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classecal_1_1EcalDigiProducer.html#a263b26551ea51b020f1ae114ca23282b">noise_</a>) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">// std::cout &lt;&lt; &quot;Noise Hits&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// put noise into some empty channels</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// geometry constants</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">//  These are used in the noise generation so that we can randomly</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">//  distribute the noise uniformly throughout the ECal channels.</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; hexGeom = getCondition&lt;ldmx::EcalHexReadout&gt;(</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        ldmx::EcalHexReadout::CONDITIONS_OBJECT_NAME);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordtype">int</span> nEcalLayers = hexGeom.getNumLayers();</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordtype">int</span> nModulesPerLayer = hexGeom.getNumModulesPerLayer();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordtype">int</span> nCellsPerModule = hexGeom.getNumCellsPerModule();</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordtype">int</span> numEmptyChannels = nEcalLayers * nModulesPerLayer * nCellsPerModule -</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                           ecalDigis.<a class="code" href="classldmx_1_1HgcrocDigiCollection.html#ae3580a8a632b91b0ff4265346cc74715">getNumDigis</a>();</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classecal_1_1EcalDigiProducer.html#af8de18d27fbd96805131177fbbff25b8">zero_suppression_</a>) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="comment">// noise generator gives us a list of noise amplitudes [mV] that randomly</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="comment">// populate the empty channels and are above the readout threshold</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keyword">auto</span> noiseHitAmplitudes{</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;          <a class="code" href="classecal_1_1EcalDigiProducer.html#a623349e95bd5f8a51abcb52dc7220188">noiseGenerator_</a>-&gt;generateNoiseHits(numEmptyChannels)};</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      std::vector&lt;std::pair&lt;double,double&gt;&gt; fake_pulse(1,{0.,0.});</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">double</span> noiseHit : noiseHitAmplitudes) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="comment">// generate detector ID for noise hit</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="comment">// making sure that it is in an empty channel</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> noiseID;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;          <span class="keywordtype">int</span> layerID = <a class="code" href="classecal_1_1EcalDigiProducer.html#aba2a44a592cef6be619fbcf13983fbd7">noiseInjector_</a>-&gt;Integer(nEcalLayers);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;          <span class="keywordtype">int</span> moduleID = <a class="code" href="classecal_1_1EcalDigiProducer.html#aba2a44a592cef6be619fbcf13983fbd7">noiseInjector_</a>-&gt;Integer(nModulesPerLayer);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;          <span class="keywordtype">int</span> cellID = <a class="code" href="classecal_1_1EcalDigiProducer.html#aba2a44a592cef6be619fbcf13983fbd7">noiseInjector_</a>-&gt;Integer(nCellsPerModule);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;          <span class="keyword">auto</span> detID = <a class="code" href="classldmx_1_1EcalID.html">ldmx::EcalID</a>(layerID, moduleID, cellID);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;          noiseID = detID.raw();</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        } <span class="keywordflow">while</span> (filledDetIDs.find(noiseID) != filledDetIDs.end());</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        filledDetIDs.insert(noiseID);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="comment">// noise generator gives the amplitude above the readout threshold</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="comment">//  we need to convert it to the amplitude above the pedestal</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        noiseHit +=</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <a class="code" href="classecal_1_1EcalDigiProducer.html#af571ddf35164ef5f5fe397bf1d7cd4d0">hgcroc_</a>-&gt;gain(noiseID) *</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            (<a class="code" href="classecal_1_1EcalDigiProducer.html#af571ddf35164ef5f5fe397bf1d7cd4d0">hgcroc_</a>-&gt;readoutThreshold(noiseID) - <a class="code" href="classecal_1_1EcalDigiProducer.html#af571ddf35164ef5f5fe397bf1d7cd4d0">hgcroc_</a>-&gt;pedestal(noiseID));</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="comment">// create a digi as put it into the collection</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        ecalDigis.<a class="code" href="classldmx_1_1HgcrocDigiCollection.html#ad6607762651c38c82453a787dd2da582">addDigi</a>(noiseID, <a class="code" href="classecal_1_1EcalDigiProducer.html#af571ddf35164ef5f5fe397bf1d7cd4d0">hgcroc_</a>-&gt;noiseDigi(noiseID, noiseHit));</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      }  <span class="comment">// loop over noise amplitudes</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="comment">// no zero suppression, put some noise emulation in **all** empty channels</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="comment">// loop through all channels</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> layer{0}; layer &lt; nEcalLayers; layer++) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> module{0}; module &lt; nModulesPerLayer; module++) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> cell{0}; cell &lt; nCellsPerModule; cell++) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> channel{<a class="code" href="classldmx_1_1EcalID.html">ldmx::EcalID</a>(layer,module,cell).<a class="code" href="classldmx_1_1DetectorID.html#ac0abca97b23c9a83516479c8ab910138">raw</a>()};</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <span class="comment">// check if channel already has a (real) hit in it</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <span class="keywordflow">if</span> (filledDetIDs.find(channel) != filledDetIDs.end())</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;              <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <span class="comment">// create a digi as put it into the collection</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            ecalDigis.<a class="code" href="classldmx_1_1HgcrocDigiCollection.html#ad6607762651c38c82453a787dd2da582">addDigi</a>(channel, <a class="code" href="classecal_1_1EcalDigiProducer.html#af571ddf35164ef5f5fe397bf1d7cd4d0">hgcroc_</a>-&gt;noiseDigi(channel));</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;          }  <span class="comment">// cells in each module</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        }    <span class="comment">// modules in each layer</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      }      <span class="comment">// layers in ECal</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }        <span class="comment">// yes or no zero suppression</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  }          <span class="comment">// if we should do the noise</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keyword">event</span>.add(<a class="code" href="classecal_1_1EcalDigiProducer.html#ad1d001429b290ce2060c81b2a88bb7c4">digiCollName_</a>, ecalDigis);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;}  <span class="comment">// produce</span></div>
<div class="ttc" id="aclassecal_1_1EcalDigiProducer_html_aba2a44a592cef6be619fbcf13983fbd7"><div class="ttname"><a href="classecal_1_1EcalDigiProducer.html#aba2a44a592cef6be619fbcf13983fbd7">ecal::EcalDigiProducer::noiseInjector_</a></div><div class="ttdeci">std::unique_ptr&lt; TRandom3 &gt; noiseInjector_</div><div class="ttdoc">Generates Gaussian noise on top of real hits.</div><div class="ttdef"><b>Definition:</b> <a href="EcalDigiProducer_8h_source.html#l00125">EcalDigiProducer.h:125</a></div></div>
<div class="ttc" id="aclassframework_1_1RandomNumberSeedService_html_a48e87463ea63d1862064cad26d5b9bb4"><div class="ttname"><a href="classframework_1_1RandomNumberSeedService.html#a48e87463ea63d1862064cad26d5b9bb4">framework::RandomNumberSeedService::CONDITIONS_OBJECT_NAME</a></div><div class="ttdeci">static const std::string CONDITIONS_OBJECT_NAME</div><div class="ttdoc">Conditions object name.</div><div class="ttdef"><b>Definition:</b> <a href="RandomNumberSeedService_8h_source.html#l00037">RandomNumberSeedService.h:37</a></div></div>
<div class="ttc" id="aclassldmx_1_1DetectorID_html_ac0abca97b23c9a83516479c8ab910138"><div class="ttname"><a href="classldmx_1_1DetectorID.html#ac0abca97b23c9a83516479c8ab910138">ldmx::DetectorID::raw</a></div><div class="ttdeci">RawValue raw() const</div><div class="ttdef"><b>Definition:</b> <a href="DetectorID_8h_source.html#l00067">DetectorID.h:67</a></div></div>
<div class="ttc" id="aclassldmx_1_1EcalID_html"><div class="ttname"><a href="classldmx_1_1EcalID.html">ldmx::EcalID</a></div><div class="ttdoc">Extension of DetectorID providing access to ECal layers and cell numbers in a hex grid.</div><div class="ttdef"><b>Definition:</b> <a href="EcalID_8h_source.html#l00020">EcalID.h:20</a></div></div>
<div class="ttc" id="aclassldmx_1_1HgcrocDigiCollection_html"><div class="ttname"><a href="classldmx_1_1HgcrocDigiCollection.html">ldmx::HgcrocDigiCollection</a></div><div class="ttdoc">Represents a collection of the digi hits readout by an HGCROC.</div><div class="ttdef"><b>Definition:</b> <a href="HgcrocDigiCollection_8h_source.html#l00042">HgcrocDigiCollection.h:42</a></div></div>
<div class="ttc" id="aclassldmx_1_1HgcrocDigiCollection_html_a710b705f129831a7029b9b42c3dcdf23"><div class="ttname"><a href="classldmx_1_1HgcrocDigiCollection.html#a710b705f129831a7029b9b42c3dcdf23">ldmx::HgcrocDigiCollection::setNumSamplesPerDigi</a></div><div class="ttdeci">void setNumSamplesPerDigi(unsigned int n)</div><div class="ttdef"><b>Definition:</b> <a href="HgcrocDigiCollection_8h_source.html#l00339">HgcrocDigiCollection.h:339</a></div></div>
<div class="ttc" id="aclassldmx_1_1HgcrocDigiCollection_html_aa7400fd63b92e03d22f94898630f1f77"><div class="ttname"><a href="classldmx_1_1HgcrocDigiCollection.html#aa7400fd63b92e03d22f94898630f1f77">ldmx::HgcrocDigiCollection::setSampleOfInterestIndex</a></div><div class="ttdeci">void setSampleOfInterestIndex(unsigned int n)</div><div class="ttdef"><b>Definition:</b> <a href="HgcrocDigiCollection_8h_source.html#l00358">HgcrocDigiCollection.h:358</a></div></div>
<div class="ttc" id="aclassldmx_1_1HgcrocDigiCollection_html_ad6607762651c38c82453a787dd2da582"><div class="ttname"><a href="classldmx_1_1HgcrocDigiCollection.html#ad6607762651c38c82453a787dd2da582">ldmx::HgcrocDigiCollection::addDigi</a></div><div class="ttdeci">void addDigi(unsigned int id, const std::vector&lt; Sample &gt; &amp;digi)</div></div>
<div class="ttc" id="aclassldmx_1_1HgcrocDigiCollection_html_ae3580a8a632b91b0ff4265346cc74715"><div class="ttname"><a href="classldmx_1_1HgcrocDigiCollection.html#ae3580a8a632b91b0ff4265346cc74715">ldmx::HgcrocDigiCollection::getNumDigis</a></div><div class="ttdeci">unsigned int getNumDigis() const</div><div class="ttdef"><b>Definition:</b> <a href="HgcrocDigiCollection_8h_source.html#l00382">HgcrocDigiCollection.h:382</a></div></div>
<div class="ttc" id="aclassldmx_1_1SimCalorimeterHit_html"><div class="ttname"><a href="classldmx_1_1SimCalorimeterHit.html">ldmx::SimCalorimeterHit</a></div><div class="ttdoc">Stores simulated calorimeter hit information.</div><div class="ttdef"><b>Definition:</b> <a href="SimCalorimeterHit_8h_source.html#l00031">SimCalorimeterHit.h:31</a></div></div>
<div class="ttc" id="aclassldmx_1_1SimCalorimeterHit_html_aa253dffd148f4f5dc07288cfd7a0fa85"><div class="ttname"><a href="classldmx_1_1SimCalorimeterHit.html#aa253dffd148f4f5dc07288cfd7a0fa85">ldmx::SimCalorimeterHit::getID</a></div><div class="ttdeci">int getID() const</div><div class="ttdef"><b>Definition:</b> <a href="SimCalorimeterHit_8h_source.html#l00088">SimCalorimeterHit.h:88</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classldmx_1_1HgcrocDigiCollection.html#ad6607762651c38c82453a787dd2da582">ldmx::HgcrocDigiCollection::addDigi()</a>, <a class="el" href="RandomNumberSeedService_8h_source.html#l00037">framework::RandomNumberSeedService::CONDITIONS_OBJECT_NAME</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00074">digiCollName_</a>, <a class="el" href="SimCalorimeterHit_8h_source.html#l00088">ldmx::SimCalorimeterHit::getID()</a>, <a class="el" href="HgcrocDigiCollection_8h_source.html#l00382">ldmx::HgcrocDigiCollection::getNumDigis()</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00113">hgcroc_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00068">inputCollName_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00071">inputPassName_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00083">iSOI_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00086">MeV_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00080">nADCs_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00110">noise_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00122">noiseGenerator_</a>, <a class="el" href="EcalDigiProducer_8h_source.html#l00125">noiseInjector_</a>, <a class="el" href="DetectorID_8h_source.html#l00067">ldmx::DetectorID::raw()</a>, <a class="el" href="HgcrocDigiCollection_8h_source.html#l00339">ldmx::HgcrocDigiCollection::setNumSamplesPerDigi()</a>, <a class="el" href="HgcrocDigiCollection_8h_source.html#l00358">ldmx::HgcrocDigiCollection::setSampleOfInterestIndex()</a>, and <a class="el" href="EcalDigiProducer_8h_source.html#l00100">zero_suppression_</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a263b26551ea51b020f1ae114ca23282b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a263b26551ea51b020f1ae114ca23282b">&#9670;&nbsp;</a></span>noise_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ecal::EcalDigiProducer::noise_ {true}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Put noise into empty channels, not configurable, only helpful in development </p>

<p class="definition">Definition at line <a class="el" href="EcalDigiProducer_8h_source.html#l00110">110</a> of file <a class="el" href="EcalDigiProducer_8h_source.html">EcalDigiProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalDigiProducer_8cxx_source.html#l00026">configure()</a>, and <a class="el" href="EcalDigiProducer_8cxx_source.html#l00064">produce()</a>.</p>

</div>
</div>
<a id="af8de18d27fbd96805131177fbbff25b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8de18d27fbd96805131177fbbff25b8">&#9670;&nbsp;</a></span>zero_suppression_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ecal::EcalDigiProducer::zero_suppression_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>When emulating noise in empty channels, do we zero suppress?</p>
<p>There are two ways to emulate the noise in the chip: 1) (with zero suppression) Use the NoiseGenerator to get a list of amplitudes (about 3-5 on avg) and put those noise hits which are above the readout threshold in random empty channels. 2) (without zero suppresion) Go through all channels and put noise in each channel that doesn't have a real hit in it. This will mean many channels with have a DIGI below readout threshold. </p>

<p class="definition">Definition at line <a class="el" href="EcalDigiProducer_8h_source.html#l00100">100</a> of file <a class="el" href="EcalDigiProducer_8h_source.html">EcalDigiProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EcalDigiProducer_8cxx_source.html#l00026">configure()</a>, and <a class="el" href="EcalDigiProducer_8cxx_source.html#l00064">produce()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Ecal/include/Ecal/<a class="el" href="EcalDigiProducer_8h_source.html">EcalDigiProducer.h</a></li>
<li>Ecal/src/Ecal/<a class="el" href="EcalDigiProducer_8cxx_source.html">EcalDigiProducer.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
		<script src="custom.js"></script>
	</body>
</html>