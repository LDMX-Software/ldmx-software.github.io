<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.9.1"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>LDMX Software: recon::OverlayProducer Class Reference</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">LDMX Software
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part --><!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>recon</b></li><li class="navelem"><a class="el" href="classrecon_1_1OverlayProducer.html">OverlayProducer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classrecon_1_1OverlayProducer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">recon::OverlayProducer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aba580e77145141d1ab1d8531700e6db5"><td class="memItemLeft" align="right" valign="top"><a id="aba580e77145141d1ab1d8531700e6db5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>OverlayProducer</b> (const std::string &amp;name, <a class="el" href="classframework_1_1Process.html">framework::Process</a> &amp;process)</td></tr>
<tr class="separator:aba580e77145141d1ab1d8531700e6db5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d1229cd69f1de924f3755c533fa294a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a0d1229cd69f1de924f3755c533fa294a">configure</a> (<a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;parameters) final override</td></tr>
<tr class="separator:a0d1229cd69f1de924f3755c533fa294a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebab25834a300899cb9660d9a2d34d7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#aebab25834a300899cb9660d9a2d34d7e">onNewRun</a> (const <a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> &amp;)</td></tr>
<tr class="separator:aebab25834a300899cb9660d9a2d34d7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d08c8d43a0c2d37ab310d68b7ab2405"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a3d08c8d43a0c2d37ab310d68b7ab2405">produce</a> (<a class="el" href="classframework_1_1Event.html">framework::Event</a> &amp;event) final override</td></tr>
<tr class="separator:a3d08c8d43a0c2d37ab310d68b7ab2405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ea51add1162802766b2e1ecb6ad8843"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a0ea51add1162802766b2e1ecb6ad8843">onProcessStart</a> () final override</td></tr>
<tr class="separator:a0ea51add1162802766b2e1ecb6ad8843"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classframework_1_1Producer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classframework_1_1Producer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classframework_1_1Producer.html">framework::Producer</a></td></tr>
<tr class="memitem:a27ea7492352028e450f24f4750c62e1b inherit pub_methods_classframework_1_1Producer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1Producer.html#a27ea7492352028e450f24f4750c62e1b">Producer</a> (const std::string &amp;name, <a class="el" href="classframework_1_1Process.html">Process</a> &amp;process)</td></tr>
<tr class="separator:a27ea7492352028e450f24f4750c62e1b inherit pub_methods_classframework_1_1Producer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b68d090cd4e50c3c572825bc57bebff inherit pub_methods_classframework_1_1Producer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1Producer.html#a8b68d090cd4e50c3c572825bc57bebff">beforeNewRun</a> (<a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> &amp;header)</td></tr>
<tr class="separator:a8b68d090cd4e50c3c572825bc57bebff inherit pub_methods_classframework_1_1Producer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classframework_1_1EventProcessor"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classframework_1_1EventProcessor')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classframework_1_1EventProcessor.html">framework::EventProcessor</a></td></tr>
<tr class="memitem:a7b079c9d4c0ac12bd9d1342073a6ae19 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a7b079c9d4c0ac12bd9d1342073a6ae19">EventProcessor</a> (const std::string &amp;name, <a class="el" href="classframework_1_1Process.html">Process</a> &amp;process)</td></tr>
<tr class="separator:a7b079c9d4c0ac12bd9d1342073a6ae19 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa9cc0358f4d501e403263b19ddc613c inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#aaa9cc0358f4d501e403263b19ddc613c">~EventProcessor</a> ()</td></tr>
<tr class="separator:aaa9cc0358f4d501e403263b19ddc613c inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab717fa73bbfb14424eb856e87b760e2c inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#ab717fa73bbfb14424eb856e87b760e2c">onFileOpen</a> (<a class="el" href="classframework_1_1EventFile.html">EventFile</a> &amp;eventFile)</td></tr>
<tr class="separator:ab717fa73bbfb14424eb856e87b760e2c inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6692c259d89b5ad39ceb2a302cd7e0e5 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a6692c259d89b5ad39ceb2a302cd7e0e5">onFileClose</a> (<a class="el" href="classframework_1_1EventFile.html">EventFile</a> &amp;eventFile)</td></tr>
<tr class="separator:a6692c259d89b5ad39ceb2a302cd7e0e5 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a527ebdf1fe665011964d9ce42a5521ad inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a527ebdf1fe665011964d9ce42a5521ad">onProcessEnd</a> ()</td></tr>
<tr class="separator:a527ebdf1fe665011964d9ce42a5521ad inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac22d6f61690abaab55a53b8814fb9dd0 inherit pub_methods_classframework_1_1EventProcessor"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:ac22d6f61690abaab55a53b8814fb9dd0 inherit pub_methods_classframework_1_1EventProcessor"><td class="memTemplItemLeft" align="right" valign="top">const T &amp;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#ac22d6f61690abaab55a53b8814fb9dd0">getCondition</a> (const std::string &amp;condition_name)</td></tr>
<tr class="separator:ac22d6f61690abaab55a53b8814fb9dd0 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae243bb073918259e747a8f8f144b0053 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">TDirectory *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#ae243bb073918259e747a8f8f144b0053">getHistoDirectory</a> ()</td></tr>
<tr class="separator:ae243bb073918259e747a8f8f144b0053 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f93ec80a4207c3847d629482e81989d inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a2f93ec80a4207c3847d629482e81989d">setStorageHint</a> (framework::StorageControlHint hint)</td></tr>
<tr class="separator:a2f93ec80a4207c3847d629482e81989d inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacc5699b669ced944eac4eeea2ade915 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#aacc5699b669ced944eac4eeea2ade915">setStorageHint</a> (framework::StorageControlHint hint, const std::string &amp;purposeString)</td></tr>
<tr class="separator:aacc5699b669ced944eac4eeea2ade915 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af212ff21b3ebec223facbfb02502ecdf inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#af212ff21b3ebec223facbfb02502ecdf">getLogFrequency</a> () const</td></tr>
<tr class="separator:af212ff21b3ebec223facbfb02502ecdf inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adde4ce813307a7d232eb5f4eda859b42 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#adde4ce813307a7d232eb5f4eda859b42">getRunNumber</a> () const</td></tr>
<tr class="separator:adde4ce813307a7d232eb5f4eda859b42 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9467d0d35043af7ed66a6b46cbca85ca inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a9467d0d35043af7ed66a6b46cbca85ca">getName</a> () const</td></tr>
<tr class="separator:a9467d0d35043af7ed66a6b46cbca85ca inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ed5966370da67ee0c89f7d6f9c8436d inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a5ed5966370da67ee0c89f7d6f9c8436d">createHistograms</a> (const std::vector&lt; <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &gt; &amp;histos)</td></tr>
<tr class="separator:a5ed5966370da67ee0c89f7d6f9c8436d inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a81f15ab0396bac3bb26fdb9d0b30ff22"><td class="memItemLeft" align="right" valign="top"><a id="a81f15ab0396bac3bb26fdb9d0b30ff22"></a>
<a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a81f15ab0396bac3bb26fdb9d0b30ff22">params_</a></td></tr>
<tr class="memdesc:a81f15ab0396bac3bb26fdb9d0b30ff22"><td class="mdescLeft">&#160;</td><td class="mdescRight">The parameters used to configure this producer. <br /></td></tr>
<tr class="separator:a81f15ab0396bac3bb26fdb9d0b30ff22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dbd9669144ad1f76b142b15b76692bb"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a0dbd9669144ad1f76b142b15b76692bb">overlayFileName_</a></td></tr>
<tr class="separator:a0dbd9669144ad1f76b142b15b76692bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02c1155cfb0813096e053bd94c7ba0cc"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classframework_1_1EventFile.html">framework::EventFile</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a02c1155cfb0813096e053bd94c7ba0cc">overlayFile_</a></td></tr>
<tr class="separator:a02c1155cfb0813096e053bd94c7ba0cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96d8cd99504f5f0384ee99f83b0ddcad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classframework_1_1Event.html">framework::Event</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a96d8cd99504f5f0384ee99f83b0ddcad">overlayEvent_</a></td></tr>
<tr class="separator:a96d8cd99504f5f0384ee99f83b0ddcad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2205db8ef8271d145c2b19ffef396f52"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a2205db8ef8271d145c2b19ffef396f52">caloCollections_</a></td></tr>
<tr class="separator:a2205db8ef8271d145c2b19ffef396f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9ae0715ad48bba2b6911de7871b65e8"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#af9ae0715ad48bba2b6911de7871b65e8">trackerCollections_</a></td></tr>
<tr class="separator:af9ae0715ad48bba2b6911de7871b65e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0736bc5ae8a8a925e895fb3674aeb73b"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a0736bc5ae8a8a925e895fb3674aeb73b">overlayPassName_</a></td></tr>
<tr class="separator:a0736bc5ae8a8a925e895fb3674aeb73b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01f539b7a524d4e6e45d90b373305c4b"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a01f539b7a524d4e6e45d90b373305c4b">simPassName_</a></td></tr>
<tr class="separator:a01f539b7a524d4e6e45d90b373305c4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa43fe964b5ec5140db07d86e15e83759"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#aa43fe964b5ec5140db07d86e15e83759">doPoissonIT_</a> {false}</td></tr>
<tr class="separator:aa43fe964b5ec5140db07d86e15e83759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aceae956b6155bebc153ff5dd0eb0f623"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#aceae956b6155bebc153ff5dd0eb0f623">doPoissonOOT_</a> {false}</td></tr>
<tr class="separator:aceae956b6155bebc153ff5dd0eb0f623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a943f0fe1114b078eafa155704af6ef51"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a943f0fe1114b078eafa155704af6ef51">poissonMu_</a> {0.}</td></tr>
<tr class="separator:a943f0fe1114b078eafa155704af6ef51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6be7162431aa875af19a1283eb452bb"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; TRandom2 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#aa6be7162431aa875af19a1283eb452bb">rndm_</a></td></tr>
<tr class="separator:aa6be7162431aa875af19a1283eb452bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a0e8ff73303c03a99ba1dc33f83fb61"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; TRandom2 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a4a0e8ff73303c03a99ba1dc33f83fb61">rndmTime_</a></td></tr>
<tr class="separator:a4a0e8ff73303c03a99ba1dc33f83fb61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba18fc2354cede52dd928017347f7ba1"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#aba18fc2354cede52dd928017347f7ba1">timeSigma_</a> {0.}</td></tr>
<tr class="separator:aba18fc2354cede52dd928017347f7ba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d4c515ea528ee4efebece4b419f3871"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a7d4c515ea528ee4efebece4b419f3871">timeMean_</a> {0.}</td></tr>
<tr class="separator:a7d4c515ea528ee4efebece4b419f3871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7656fa545946f041b4cfc838842c9266"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a7656fa545946f041b4cfc838842c9266">bunchSpacing_</a> {0.}</td></tr>
<tr class="separator:a7656fa545946f041b4cfc838842c9266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a6dbb8775915483a6cb9ea4783cca00"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a5a6dbb8775915483a6cb9ea4783cca00">nEarlier_</a> {0}</td></tr>
<tr class="separator:a5a6dbb8775915483a6cb9ea4783cca00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9afe91252e3d51f23ed55a01ce261170"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a9afe91252e3d51f23ed55a01ce261170">nLater_</a> {0}</td></tr>
<tr class="separator:a9afe91252e3d51f23ed55a01ce261170"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cffa0b7248b6adc427461db12478319"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a></td></tr>
<tr class="separator:a2cffa0b7248b6adc427461db12478319"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45e054309e9d01d8f4e2689c5acd3d36"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrecon_1_1OverlayProducer.html#a45e054309e9d01d8f4e2689c5acd3d36">overlayIncidentID_</a> {-1000}</td></tr>
<tr class="separator:a45e054309e9d01d8f4e2689c5acd3d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd489ec3e8057ce64023e5511a777e6f"><td class="memItemLeft" align="right" valign="top"><a id="afd489ec3e8057ce64023e5511a777e6f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>overlayTrackID_</b> {-1000}</td></tr>
<tr class="separator:afd489ec3e8057ce64023e5511a777e6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b7804f5e15bd47b8efd801bf1f34d44"><td class="memItemLeft" align="right" valign="top"><a id="a9b7804f5e15bd47b8efd801bf1f34d44"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>overlayPdgCode_</b> {0}</td></tr>
<tr class="separator:a9b7804f5e15bd47b8efd801bf1f34d44"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classframework_1_1EventProcessor"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classframework_1_1EventProcessor')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classframework_1_1EventProcessor.html">framework::EventProcessor</a></td></tr>
<tr class="memitem:a055eb62b2fdde542be4225dfe3a7f9c9 inherit pub_static_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a055eb62b2fdde542be4225dfe3a7f9c9">declare</a> (const std::string &amp;classname, int classtype, <a class="el" href="namespaceframework.html#a60a0153b9002bf2a85c7c4017e21e568">EventProcessorMaker</a> *)</td></tr>
<tr class="separator:a055eb62b2fdde542be4225dfe3a7f9c9 inherit pub_static_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_attribs_classframework_1_1Producer"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_classframework_1_1Producer')"><img src="closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="classframework_1_1Producer.html">framework::Producer</a></td></tr>
<tr class="memitem:a6433d7808e67a79fc83d4c6f7e57224a inherit pub_static_attribs_classframework_1_1Producer"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1Producer.html#a6433d7808e67a79fc83d4c6f7e57224a">CLASSTYPE</a> {1}</td></tr>
<tr class="separator:a6433d7808e67a79fc83d4c6f7e57224a inherit pub_static_attribs_classframework_1_1Producer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classframework_1_1EventProcessor"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classframework_1_1EventProcessor')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classframework_1_1EventProcessor.html">framework::EventProcessor</a></td></tr>
<tr class="memitem:a8d42387da8fbb2d1f01f5ecebb64dd7d inherit pro_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a8d42387da8fbb2d1f01f5ecebb64dd7d">abortEvent</a> ()</td></tr>
<tr class="separator:a8d42387da8fbb2d1f01f5ecebb64dd7d inherit pro_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classframework_1_1EventProcessor"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classframework_1_1EventProcessor')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classframework_1_1EventProcessor.html">framework::EventProcessor</a></td></tr>
<tr class="memitem:ae8a2bfe0849be1531e195438c1eaba4c inherit pro_attribs_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top"><a id="ae8a2bfe0849be1531e195438c1eaba4c"></a>
<a class="el" href="classframework_1_1HistogramHelper.html">HistogramHelper</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#ae8a2bfe0849be1531e195438c1eaba4c">histograms_</a></td></tr>
<tr class="memdesc:ae8a2bfe0849be1531e195438c1eaba4c inherit pro_attribs_classframework_1_1EventProcessor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface class for making and filling histograms. <br /></td></tr>
<tr class="separator:ae8a2bfe0849be1531e195438c1eaba4c inherit pro_attribs_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a410e35c73c9b196961e5c35127321814 inherit pro_attribs_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top"><a id="a410e35c73c9b196961e5c35127321814"></a>
<a class="el" href="classframework_1_1NtupleManager.html">NtupleManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a410e35c73c9b196961e5c35127321814">ntuple_</a> {<a class="el" href="classframework_1_1NtupleManager.html#a95b2bb3823b5a35568c5facb85d441d1">NtupleManager::getInstance</a>()}</td></tr>
<tr class="memdesc:a410e35c73c9b196961e5c35127321814 inherit pro_attribs_classframework_1_1EventProcessor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manager for any ntuples. <br /></td></tr>
<tr class="separator:a410e35c73c9b196961e5c35127321814 inherit pro_attribs_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae350c3e5c91a69b8910bf1229ed21430 inherit pro_attribs_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top"><a id="ae350c3e5c91a69b8910bf1229ed21430"></a>
logging::logger&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#ae350c3e5c91a69b8910bf1229ed21430">theLog_</a></td></tr>
<tr class="memdesc:ae350c3e5c91a69b8910bf1229ed21430 inherit pro_attribs_classframework_1_1EventProcessor"><td class="mdescLeft">&#160;</td><td class="mdescRight">The logger for this <a class="el" href="classframework_1_1EventProcessor.html" title="Base class for all event processing components.">EventProcessor</a>. <br /></td></tr>
<tr class="separator:ae350c3e5c91a69b8910bf1229ed21430 inherit pro_attribs_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class to overlay in-time pile-up events from an overlay file </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00023">23</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a0d1229cd69f1de924f3755c533fa294a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d1229cd69f1de924f3755c533fa294a">&#9670;&nbsp;</a></span>configure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void recon::OverlayProducer::configure </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;&#160;</td>
          <td class="paramname"><em>parameters</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Configure the processor with input parameters from the python cofig </p>
<p>Print the parameters actually set. Helpful in case of typos.</p>

<p>Reimplemented from <a class="el" href="classframework_1_1EventProcessor.html#a21156f6f3954394925e9a265de9d702a">framework::EventProcessor</a>.</p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8cxx_source.html#l00009">9</a> of file <a class="el" href="OverlayProducer_8cxx_source.html">OverlayProducer.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;                                                                     {</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#a81f15ab0396bac3bb26fdb9d0b30ff22">params_</a> = parameters;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;Running configure() &quot;</span>;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  <span class="comment">// name of file containing events to be overlaid, and a list of collections to</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;  <span class="comment">// overlay</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#a0dbd9669144ad1f76b142b15b76692bb">overlayFileName_</a> = parameters.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;std::string&gt;(<span class="stringliteral">&quot;overlayFileName&quot;</span>);</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#a2205db8ef8271d145c2b19ffef396f52">caloCollections_</a> = parameters.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;std::vector&lt;std::string&gt;&gt;(</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;      <span class="stringliteral">&quot;overlayCaloHitCollections&quot;</span>);</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#af9ae0715ad48bba2b6911de7871b65e8">trackerCollections_</a> = parameters.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;std::vector&lt;std::string&gt;&gt;(</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;      <span class="stringliteral">&quot;overlayTrackerHitCollections&quot;</span>);</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#a01f539b7a524d4e6e45d90b373305c4b">simPassName_</a> = parameters.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;std::string&gt;(<span class="stringliteral">&quot;passName&quot;</span>);</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#a0736bc5ae8a8a925e895fb3674aeb73b">overlayPassName_</a> = parameters.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;std::string&gt;(<span class="stringliteral">&quot;overlayPassName&quot;</span>);</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  <span class="comment">// overlay specifics:</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#a943f0fe1114b078eafa155704af6ef51">poissonMu_</a> = parameters.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;totalNumberOfInteractions&quot;</span>);</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#aa43fe964b5ec5140db07d86e15e83759">doPoissonIT_</a> = parameters.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;doPoissonIntime&quot;</span>);</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#aceae956b6155bebc153ff5dd0eb0f623">doPoissonOOT_</a> = parameters.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;doPoissonOutoftime&quot;</span>);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#aba18fc2354cede52dd928017347f7ba1">timeSigma_</a> = parameters.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;timeSpread&quot;</span>);</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#a7d4c515ea528ee4efebece4b419f3871">timeMean_</a> = parameters.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;timeMean&quot;</span>);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#a5a6dbb8775915483a6cb9ea4783cca00">nEarlier_</a> = parameters.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;nEarlierBunchesToSample&quot;</span>);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#a9afe91252e3d51f23ed55a01ce261170">nLater_</a> = parameters.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;nLaterBunchesToSample&quot;</span>);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#a7656fa545946f041b4cfc838842c9266">bunchSpacing_</a> = parameters.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;bunchSpacing&quot;</span>);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> = parameters.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;verbosity&quot;</span>);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a>) {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    ldmx_log(info) &lt;&lt; <span class="stringliteral">&quot;Got parameters \n \t overlayFileName = &quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                   &lt;&lt; <a class="code" href="classrecon_1_1OverlayProducer.html#a0dbd9669144ad1f76b142b15b76692bb">overlayFileName_</a></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;\n\t sim pass name = &quot;</span> &lt;&lt; <a class="code" href="classrecon_1_1OverlayProducer.html#a01f539b7a524d4e6e45d90b373305c4b">simPassName_</a></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;\n\t overlay pass name = &quot;</span> &lt;&lt; <a class="code" href="classrecon_1_1OverlayProducer.html#a0736bc5ae8a8a925e895fb3674aeb73b">overlayPassName_</a></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;\n\t overlayCaloHitCollections = &quot;</span>;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;coll : <a class="code" href="classrecon_1_1OverlayProducer.html#a2205db8ef8271d145c2b19ffef396f52">caloCollections_</a>) ldmx_log(info) &lt;&lt; coll &lt;&lt; <span class="stringliteral">&quot;; &quot;</span>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    ldmx_log(info) &lt;&lt; <span class="stringliteral">&quot;\n\t overlayTrackerHitCollections = &quot;</span>;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string &amp;coll : <a class="code" href="classrecon_1_1OverlayProducer.html#af9ae0715ad48bba2b6911de7871b65e8">trackerCollections_</a>)</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;      ldmx_log(info) &lt;&lt; coll &lt;&lt; <span class="stringliteral">&quot;; &quot;</span>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    ldmx_log(info) &lt;&lt; <span class="stringliteral">&quot;\n\t numberOverlaidInteractions = &quot;</span> &lt;&lt; <a class="code" href="classrecon_1_1OverlayProducer.html#a943f0fe1114b078eafa155704af6ef51">poissonMu_</a></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;\n\t nEarlierBunchesToSample = &quot;</span> &lt;&lt; <a class="code" href="classrecon_1_1OverlayProducer.html#a5a6dbb8775915483a6cb9ea4783cca00">nEarlier_</a></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;\n\t nLaterBunchesToSample = &quot;</span> &lt;&lt; <a class="code" href="classrecon_1_1OverlayProducer.html#a9afe91252e3d51f23ed55a01ce261170">nLater_</a></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;\n\t bunchSpacing = &quot;</span> &lt;&lt; <a class="code" href="classrecon_1_1OverlayProducer.html#a7656fa545946f041b4cfc838842c9266">bunchSpacing_</a></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;\n\t doPoissonIntime = &quot;</span> &lt;&lt; <a class="code" href="classrecon_1_1OverlayProducer.html#aa43fe964b5ec5140db07d86e15e83759">doPoissonIT_</a></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;\n\t doPoissonOutoftime = &quot;</span> &lt;&lt; <a class="code" href="classrecon_1_1OverlayProducer.html#aceae956b6155bebc153ff5dd0eb0f623">doPoissonOOT_</a></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;\n\t timeSpread = &quot;</span> &lt;&lt; <a class="code" href="classrecon_1_1OverlayProducer.html#aba18fc2354cede52dd928017347f7ba1">timeSigma_</a></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;\n\t timeMean = &quot;</span> &lt;&lt; <a class="code" href="classrecon_1_1OverlayProducer.html#a7d4c515ea528ee4efebece4b419f3871">timeMean_</a></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;\n\t verbosity = &quot;</span> &lt;&lt; <a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  }</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;}</div>
<div class="ttc" id="aclassframework_1_1config_1_1Parameters_html_a18206b7c01007dd706abce7e5505eae1"><div class="ttname"><a href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">framework::config::Parameters::getParameter</a></div><div class="ttdeci">T getParameter(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="Parameters_8h_source.html#l00089">Parameters.h:89</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_a01f539b7a524d4e6e45d90b373305c4b"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#a01f539b7a524d4e6e45d90b373305c4b">recon::OverlayProducer::simPassName_</a></div><div class="ttdeci">std::string simPassName_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00105">OverlayProducer.h:105</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_a0736bc5ae8a8a925e895fb3674aeb73b"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#a0736bc5ae8a8a925e895fb3674aeb73b">recon::OverlayProducer::overlayPassName_</a></div><div class="ttdeci">std::string overlayPassName_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00100">OverlayProducer.h:100</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_a0dbd9669144ad1f76b142b15b76692bb"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#a0dbd9669144ad1f76b142b15b76692bb">recon::OverlayProducer::overlayFileName_</a></div><div class="ttdeci">std::string overlayFileName_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00073">OverlayProducer.h:73</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_a2205db8ef8271d145c2b19ffef396f52"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#a2205db8ef8271d145c2b19ffef396f52">recon::OverlayProducer::caloCollections_</a></div><div class="ttdeci">std::vector&lt; std::string &gt; caloCollections_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00089">OverlayProducer.h:89</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_a2cffa0b7248b6adc427461db12478319"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">recon::OverlayProducer::verbosity_</a></div><div class="ttdeci">int verbosity_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00173">OverlayProducer.h:173</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_a5a6dbb8775915483a6cb9ea4783cca00"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#a5a6dbb8775915483a6cb9ea4783cca00">recon::OverlayProducer::nEarlier_</a></div><div class="ttdeci">int nEarlier_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00161">OverlayProducer.h:161</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_a7656fa545946f041b4cfc838842c9266"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#a7656fa545946f041b4cfc838842c9266">recon::OverlayProducer::bunchSpacing_</a></div><div class="ttdeci">double bunchSpacing_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00154">OverlayProducer.h:154</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_a7d4c515ea528ee4efebece4b419f3871"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#a7d4c515ea528ee4efebece4b419f3871">recon::OverlayProducer::timeMean_</a></div><div class="ttdeci">double timeMean_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00149">OverlayProducer.h:149</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_a81f15ab0396bac3bb26fdb9d0b30ff22"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#a81f15ab0396bac3bb26fdb9d0b30ff22">recon::OverlayProducer::params_</a></div><div class="ttdeci">framework::config::Parameters params_</div><div class="ttdoc">The parameters used to configure this producer.</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00068">OverlayProducer.h:68</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_a943f0fe1114b078eafa155704af6ef51"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#a943f0fe1114b078eafa155704af6ef51">recon::OverlayProducer::poissonMu_</a></div><div class="ttdeci">double poissonMu_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00122">OverlayProducer.h:122</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_a9afe91252e3d51f23ed55a01ce261170"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#a9afe91252e3d51f23ed55a01ce261170">recon::OverlayProducer::nLater_</a></div><div class="ttdeci">int nLater_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00168">OverlayProducer.h:168</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_aa43fe964b5ec5140db07d86e15e83759"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#aa43fe964b5ec5140db07d86e15e83759">recon::OverlayProducer::doPoissonIT_</a></div><div class="ttdeci">bool doPoissonIT_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00111">OverlayProducer.h:111</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_aba18fc2354cede52dd928017347f7ba1"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#aba18fc2354cede52dd928017347f7ba1">recon::OverlayProducer::timeSigma_</a></div><div class="ttdeci">double timeSigma_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00142">OverlayProducer.h:142</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_aceae956b6155bebc153ff5dd0eb0f623"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#aceae956b6155bebc153ff5dd0eb0f623">recon::OverlayProducer::doPoissonOOT_</a></div><div class="ttdeci">bool doPoissonOOT_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00117">OverlayProducer.h:117</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_af9ae0715ad48bba2b6911de7871b65e8"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#af9ae0715ad48bba2b6911de7871b65e8">recon::OverlayProducer::trackerCollections_</a></div><div class="ttdeci">std::vector&lt; std::string &gt; trackerCollections_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00095">OverlayProducer.h:95</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="OverlayProducer_8h_source.html#l00154">bunchSpacing_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00089">caloCollections_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00111">doPoissonIT_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00117">doPoissonOOT_</a>, <a class="el" href="Parameters_8h_source.html#l00089">framework::config::Parameters::getParameter()</a>, <a class="el" href="OverlayProducer_8h_source.html#l00161">nEarlier_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00168">nLater_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00073">overlayFileName_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00100">overlayPassName_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00068">params_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00122">poissonMu_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00105">simPassName_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00149">timeMean_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00142">timeSigma_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00095">trackerCollections_</a>, and <a class="el" href="OverlayProducer_8h_source.html#l00173">verbosity_</a>.</p>

</div>
</div>
<a id="aebab25834a300899cb9660d9a2d34d7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebab25834a300899cb9660d9a2d34d7e">&#9670;&nbsp;</a></span>onNewRun()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void recon::OverlayProducer::onNewRun </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>At the start of the run, the pileup overlay file is set up, and the starting event number is chosen, using the RNSS. </p>
<p>set up random seeds</p>

<p>Reimplemented from <a class="el" href="classframework_1_1EventProcessor.html#a93e19454e18fd62bc2081d40b3f41c62">framework::EventProcessor</a>.</p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8cxx_source.html#l00060">60</a> of file <a class="el" href="OverlayProducer_8cxx_source.html">OverlayProducer.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                                                    {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#aa6be7162431aa875af19a1283eb452bb">rndm_</a>.get() == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">// not been seeded yet, get it from RNSS</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;rnss = getCondition&lt;framework::RandomNumberSeedService&gt;(</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <a class="code" href="classframework_1_1RandomNumberSeedService.html#a48e87463ea63d1862064cad26d5b9bb4">framework::RandomNumberSeedService::CONDITIONS_OBJECT_NAME</a>);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="classrecon_1_1OverlayProducer.html#aa6be7162431aa875af19a1283eb452bb">rndm_</a> = std::make_unique&lt;TRandom2&gt;(rnss.getSeed(<span class="stringliteral">&quot;OverlayProducer::rndm&quot;</span>));</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  }</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordtype">int</span> start_event = <a class="code" href="classrecon_1_1OverlayProducer.html#aa6be7162431aa875af19a1283eb452bb">rndm_</a>-&gt;Uniform(20., 1e4);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="comment">// EventFile::skipToEvent handles actual number of events in file</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordtype">int</span> evNb = <a class="code" href="classrecon_1_1OverlayProducer.html#a02c1155cfb0813096e053bd94c7ba0cc">overlayFile_</a>-&gt;skipToEvent(start_event);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">if</span> (evNb &lt; 0) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    EXCEPTION_RAISE(<span class="stringliteral">&quot;BadRead&quot;</span>, <span class="stringliteral">&quot;Couldn&#39;t read to starting offset.&quot;</span>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#a96d8cd99504f5f0384ee99f83b0ddcad">overlayEvent_</a>.<a class="code" href="classframework_1_1Event.html#ad8bfc57bcc950019d3244f17e84e4601">getEventHeader</a>().<a class="code" href="classldmx_1_1EventHeader.html#a543282b0c2d592d06d08db72ad4cc6f0">setEventNumber</a>(evNb);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  ldmx_log(info) &lt;&lt; <span class="stringliteral">&quot;Starting overlay process with pileup event number &quot;</span> &lt;&lt; evNb</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; (random event number picked was &quot;</span> &lt;&lt; start_event &lt;&lt; <span class="stringliteral">&quot;).&quot;</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
<div class="ttc" id="aclassframework_1_1Event_html_ad8bfc57bcc950019d3244f17e84e4601"><div class="ttname"><a href="classframework_1_1Event.html#ad8bfc57bcc950019d3244f17e84e4601">framework::Event::getEventHeader</a></div><div class="ttdeci">ldmx::EventHeader &amp; getEventHeader()</div><div class="ttdef"><b>Definition:</b> <a href="Event_8h_source.html#l00057">Event.h:57</a></div></div>
<div class="ttc" id="aclassframework_1_1RandomNumberSeedService_html_a48e87463ea63d1862064cad26d5b9bb4"><div class="ttname"><a href="classframework_1_1RandomNumberSeedService.html#a48e87463ea63d1862064cad26d5b9bb4">framework::RandomNumberSeedService::CONDITIONS_OBJECT_NAME</a></div><div class="ttdeci">static const std::string CONDITIONS_OBJECT_NAME</div><div class="ttdoc">Conditions object name.</div><div class="ttdef"><b>Definition:</b> <a href="RandomNumberSeedService_8h_source.html#l00037">RandomNumberSeedService.h:37</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventHeader_html_a543282b0c2d592d06d08db72ad4cc6f0"><div class="ttname"><a href="classldmx_1_1EventHeader.html#a543282b0c2d592d06d08db72ad4cc6f0">ldmx::EventHeader::setEventNumber</a></div><div class="ttdeci">void setEventNumber(int eventNumber)</div><div class="ttdef"><b>Definition:</b> <a href="EventHeader_8h_source.html#l00108">EventHeader.h:108</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_a02c1155cfb0813096e053bd94c7ba0cc"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#a02c1155cfb0813096e053bd94c7ba0cc">recon::OverlayProducer::overlayFile_</a></div><div class="ttdeci">std::unique_ptr&lt; framework::EventFile &gt; overlayFile_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00078">OverlayProducer.h:78</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_a96d8cd99504f5f0384ee99f83b0ddcad"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#a96d8cd99504f5f0384ee99f83b0ddcad">recon::OverlayProducer::overlayEvent_</a></div><div class="ttdeci">framework::Event overlayEvent_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00083">OverlayProducer.h:83</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_aa6be7162431aa875af19a1283eb452bb"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#aa6be7162431aa875af19a1283eb452bb">recon::OverlayProducer::rndm_</a></div><div class="ttdeci">std::unique_ptr&lt; TRandom2 &gt; rndm_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00129">OverlayProducer.h:129</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="RandomNumberSeedService_8h_source.html#l00037">framework::RandomNumberSeedService::CONDITIONS_OBJECT_NAME</a>, <a class="el" href="Event_8h_source.html#l00057">framework::Event::getEventHeader()</a>, <a class="el" href="OverlayProducer_8h_source.html#l00083">overlayEvent_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00078">overlayFile_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00129">rndm_</a>, and <a class="el" href="EventHeader_8h_source.html#l00108">ldmx::EventHeader::setEventNumber()</a>.</p>

</div>
</div>
<a id="a0ea51add1162802766b2e1ecb6ad8843"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ea51add1162802766b2e1ecb6ad8843">&#9670;&nbsp;</a></span>onProcessStart()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void recon::OverlayProducer::onProcessStart </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>At the start of processing, the pileup overlay file is set up. </p>

<p>Reimplemented from <a class="el" href="classframework_1_1EventProcessor.html#ab54bb3abaafcb4f4b4b42d0a2ff616a9">framework::EventProcessor</a>.</p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8cxx_source.html#l00391">391</a> of file <a class="el" href="OverlayProducer_8cxx_source.html">OverlayProducer.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                                     {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;onProcessStart() &quot;</span>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// replace by this line once the corresponding tweak to EventFile is ready:</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#a02c1155cfb0813096e053bd94c7ba0cc">overlayFile_</a> =</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      std::make_unique&lt;framework::EventFile&gt;(<a class="code" href="classrecon_1_1OverlayProducer.html#a81f15ab0396bac3bb26fdb9d0b30ff22">params_</a>, <a class="code" href="classrecon_1_1OverlayProducer.html#a0dbd9669144ad1f76b142b15b76692bb">overlayFileName_</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <a class="code" href="classrecon_1_1OverlayProducer.html#a02c1155cfb0813096e053bd94c7ba0cc">overlayFile_</a>-&gt;setupEvent(&amp;<a class="code" href="classrecon_1_1OverlayProducer.html#a96d8cd99504f5f0384ee99f83b0ddcad">overlayEvent_</a>);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="comment">// we update the iterator at the end of each event. so do this once here to</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// grab the first event in the processor</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;onProcessStart () successful. Used input file: &quot;</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                    &lt;&lt; <a class="code" href="classrecon_1_1OverlayProducer.html#a02c1155cfb0813096e053bd94c7ba0cc">overlayFile_</a>-&gt;getFileName();</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;onProcessStart () successful. Got event info: &quot;</span>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <a class="code" href="classrecon_1_1OverlayProducer.html#a02c1155cfb0813096e053bd94c7ba0cc">overlayFile_</a>-&gt;getEvent()-&gt;Print();</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="OverlayProducer_8h_source.html#l00083">overlayEvent_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00078">overlayFile_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00073">overlayFileName_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00068">params_</a>, and <a class="el" href="OverlayProducer_8h_source.html#l00173">verbosity_</a>.</p>

</div>
</div>
<a id="a3d08c8d43a0c2d37ab310d68b7ab2405"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d08c8d43a0c2d37ab310d68b7ab2405">&#9670;&nbsp;</a></span>produce()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void recon::OverlayProducer::produce </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classframework_1_1Event.html">framework::Event</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Based on the list of collections to overlay, and the desired number of events, loop through all relevant collections and copy the sim event (once), and then add the corresponding collection from the pileup overlay file. The event loop is the outer loop, and the inner loop is over the list of collections.</p>
<p>The collections have to be specified separately as a list of SimCalorimeterHit collections and a list of SimTrackerHit collections.</p>
<p>The collection name is parsed for "Ecal" to be flagged as a collection which needs overlay hits to be added as contribs. This is currently hardwired.</p>
<p>The resulting collections inherit the input collection name, with an appended string "Overlay". This name is also currently hardwired. </p>
<p>Go to next overlay event This overlay file has been configured to loop back to the beginning of the TTree when it reaches the end. This means nextEvent() will only return false if an error is occurred or if the overlay file is mis-configured.</p>

<p>Implements <a class="el" href="classframework_1_1Producer.html#a8591fb1e12fd5d8b1f2a5838d030042e">framework::Producer</a>.</p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8cxx_source.html#l00080">80</a> of file <a class="el" href="OverlayProducer_8cxx_source.html">OverlayProducer.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                                                   {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="comment">// event is the incoming, simulated event/&quot;hard&quot; process</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="comment">// overlayEvent_ is the overlay producer&#39;s own event.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 1) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    ldmx_log(info) &lt;&lt; <span class="stringliteral">&quot;produce() starts on simulation event &quot;</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                   &lt;&lt; <span class="keyword">event</span>.getEventHeader().getEventNumber();</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a4a0e8ff73303c03a99ba1dc33f83fb61">rndmTime_</a>.get() == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// not been seeded yet, get it from RNSS</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;rnss = getCondition&lt;framework::RandomNumberSeedService&gt;(</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <a class="code" href="classframework_1_1RandomNumberSeedService.html#a48e87463ea63d1862064cad26d5b9bb4">framework::RandomNumberSeedService::CONDITIONS_OBJECT_NAME</a>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="classrecon_1_1OverlayProducer.html#a4a0e8ff73303c03a99ba1dc33f83fb61">rndmTime_</a> =</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        std::make_unique&lt;TRandom2&gt;(rnss.getSeed(<span class="stringliteral">&quot;OverlayProducer::rndmTime&quot;</span>));</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="comment">// using nextEvent to loop, we need to loop over overlay events and in an</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">// inner loop, loop over collections, and store them. after all pileup events</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// have been added, the vector of collections is iterated over and added to</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// the event bus.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  std::map&lt;std::string, std::vector&lt;ldmx::SimCalorimeterHit&gt;&gt; caloCollectionMap;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  std::map&lt;std::string, std::vector&lt;ldmx::SimTrackerHit&gt;&gt; trackerCollectionMap;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  std::map&lt;int, ldmx::SimCalorimeterHit&gt; hitMap;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">// start by copying over all the collections from the sim event</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">/* ----------- first do the SimCalorimeterHits ----------- */</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="comment">// get the calo hits collections that we want to overlay, by looping over</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// the list of collections passed to the producer : caloCollections_</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;collName : <a class="code" href="classrecon_1_1OverlayProducer.html#a2205db8ef8271d145c2b19ffef396f52">caloCollections_</a>) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// for now, Ecal and only Ecal uses contribs instead of multiple</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// SimHitsCalo per channel, meaning, it requires special treatment</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keyword">auto</span> needsContribsAdded{collName.find(<span class="stringliteral">&quot;Ecal&quot;</span>) != std::string::npos ? true</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                                                       : <span class="keyword">false</span>};</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">// start out by just copying the sim hits, unaltered.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keyword">auto</span> simHitsCalo =</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keyword">event</span>.getCollection&lt;<a class="code" href="classldmx_1_1SimCalorimeterHit.html">ldmx::SimCalorimeterHit</a>&gt;(collName, <a class="code" href="classrecon_1_1OverlayProducer.html#a01f539b7a524d4e6e45d90b373305c4b">simPassName_</a>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// but don&#39;t copy ecal hits immediately: for them, wait until overlay</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// contribs have been added. then add everything through the hitmap</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">if</span> (!needsContribsAdded) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      caloCollectionMap[collName + <span class="stringliteral">&quot;Overlay&quot;</span>] = simHitsCalo;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;in loop: start of collection &quot;</span> &lt;&lt; collName</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;in loop: printing current sim event: &quot;</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;in loop: size of sim hits vector &quot;</span> &lt;&lt; collName &lt;&lt; <span class="stringliteral">&quot; is &quot;</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                    &lt;&lt; simHitsCalo.size();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">// we don&#39;t need to touch the hard process sim hits, really... but we</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// might need the simhits in the hit map.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">if</span> (needsContribsAdded || <a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classldmx_1_1SimCalorimeterHit.html">ldmx::SimCalorimeterHit</a> &amp;simHit : simHitsCalo) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2) simHit.<a class="code" href="classldmx_1_1SimCalorimeterHit.html#af20ad7848d15ee64334922fec873d8d1">Print</a>();</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">if</span> (needsContribsAdded) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;          <span class="comment">// this copies the hit, its ID and its coordinates directly</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;          hitMap[simHit.getID()] = simHit;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      }  <span class="comment">// over calo simhit collection</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }    <span class="comment">// if needContribs or very verbose</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  }  <span class="comment">// over calo collections for sim event</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment">/* ----------- now do the same with SimTrackerHits! ----------- */</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// get the SimTrackerHit collections that we want to overlay, by looping</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// over the list of collections passed to the producer : trackerCollections_</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;collName : <a class="code" href="classrecon_1_1OverlayProducer.html#af9ae0715ad48bba2b6911de7871b65e8">trackerCollections_</a>) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keyword">auto</span> simHitsTracker =</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keyword">event</span>.getCollection&lt;<a class="code" href="classldmx_1_1SimTrackerHit.html">ldmx::SimTrackerHit</a>&gt;(collName, <a class="code" href="classrecon_1_1OverlayProducer.html#a01f539b7a524d4e6e45d90b373305c4b">simPassName_</a>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    trackerCollectionMap[collName + <span class="stringliteral">&quot;Overlay&quot;</span>] = simHitsTracker;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// the rest is printouts for debugging</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;in loop: size of sim hits vector &quot;</span> &lt;&lt; collName &lt;&lt; <span class="stringliteral">&quot; is &quot;</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    &lt;&lt; simHitsTracker.size();</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;in loop: start of collection &quot;</span> &lt;&lt; collName</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;in loop: printing current sim event: &quot;</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classldmx_1_1SimTrackerHit.html">ldmx::SimTrackerHit</a> &amp;simHit : simHitsTracker) simHit.<a class="code" href="classldmx_1_1SimTrackerHit.html#aae4cc91adad2e546e882d5581f30e74e">Print</a>();</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }  <span class="comment">// if high verbosity</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  }    <span class="comment">// over tracker collections for sim event</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">/* ----------- now do the pileup overlay ----------- */</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// we could shift these by a random number, effectively placing the</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="comment">// sim event at random positions in the interval, preserving the</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// overall interval length</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// int simBunch= (int)rndmTime_-&gt;Uniform(</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="comment">//                   -(nEarlier_+1) , nLater_+1);  // +1 to get</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="comment">// inclusive interval</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keywordtype">int</span> startBunch = -<a class="code" href="classrecon_1_1OverlayProducer.html#a5a6dbb8775915483a6cb9ea4783cca00">nEarlier_</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordtype">int</span> endBunch = <a class="code" href="classrecon_1_1OverlayProducer.html#a9afe91252e3d51f23ed55a01ce261170">nLater_</a>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">// TODO -- figure out if we should also randomly shift the time of the sim</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="comment">// event (likely only needed if time bias gets picked up by BDT or ML by way</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">// of pulse behaviour)</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> bunchOffset{startBunch}; bunchOffset &lt;= endBunch; bunchOffset++) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">// sample a poisson distribution, or use mu as fixed number of overlay</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">// events</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordtype">int</span> nEvsOverlay =</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <a class="code" href="classrecon_1_1OverlayProducer.html#aceae956b6155bebc153ff5dd0eb0f623">doPoissonOOT_</a> ? (int)<a class="code" href="classrecon_1_1OverlayProducer.html#aa6be7162431aa875af19a1283eb452bb">rndm_</a>-&gt;Poisson(<a class="code" href="classrecon_1_1OverlayProducer.html#a943f0fe1114b078eafa155704af6ef51">poissonMu_</a>) : (int)<a class="code" href="classrecon_1_1OverlayProducer.html#a943f0fe1114b078eafa155704af6ef51">poissonMu_</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">// special case: in-time pileup at bunch 0</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (bunchOffset == 0) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classrecon_1_1OverlayProducer.html#aa43fe964b5ec5140db07d86e15e83759">doPoissonIT_</a>)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        nEvsOverlay = (int)<a class="code" href="classrecon_1_1OverlayProducer.html#a943f0fe1114b078eafa155704af6ef51">poissonMu_</a>;          <span class="comment">// fix it to the average</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#aa43fe964b5ec5140db07d86e15e83759">doPoissonIT_</a> &amp;&amp; !<a class="code" href="classrecon_1_1OverlayProducer.html#aceae956b6155bebc153ff5dd0eb0f623">doPoissonOOT_</a>)  <span class="comment">// then we haven&#39;t set this yet</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        nEvsOverlay = (int)<a class="code" href="classrecon_1_1OverlayProducer.html#aa6be7162431aa875af19a1283eb452bb">rndm_</a>-&gt;Poisson(<a class="code" href="classrecon_1_1OverlayProducer.html#a943f0fe1114b078eafa155704af6ef51">poissonMu_</a>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="comment">// paticularly useful in the poisson fluctuated case</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="keyword">event</span>.getEventHeader().setIntParameter(<span class="stringliteral">&quot;inTimePU&quot;</span>, nEvsOverlay);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="comment">// the total number of events is nPU + 1 (it includes the sim event)</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      nEvsOverlay -= 1;  <span class="comment">// in any case, subtract the sim event from nOverlay</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;will overlay &quot;</span> &lt;&lt; nEvsOverlay</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; events on the simulated one&quot;</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// get event wherever nextEvent()  left us</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> (!&amp;<a class="code" href="classrecon_1_1OverlayProducer.html#a96d8cd99504f5f0384ee99f83b0ddcad">overlayEvent_</a>) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      ldmx_log(error) &lt;&lt; <span class="stringliteral">&quot;No overlay event!&quot;</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordtype">float</span> bunchTimeOffset = <a class="code" href="classrecon_1_1OverlayProducer.html#a7656fa545946f041b4cfc838842c9266">bunchSpacing_</a> * bunchOffset;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iEv = 0; iEv &lt; nEvsOverlay; iEv++) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classrecon_1_1OverlayProducer.html#a02c1155cfb0813096e053bd94c7ba0cc">overlayFile_</a>-&gt;nextEvent()) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        ldmx_log(error) &lt;&lt; <span class="stringliteral">&quot;At sim event &quot;</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                        &lt;&lt; <span class="keyword">event</span>.getEventHeader().getEventNumber()</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;: couldn&#39;t read next overlay event!&quot;</span>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="comment">// a pileup event wide time offset to be applied to all its hits.</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="keywordtype">float</span> timeOffset = <a class="code" href="classrecon_1_1OverlayProducer.html#a4a0e8ff73303c03a99ba1dc33f83fb61">rndmTime_</a>-&gt;Gaus(<a class="code" href="classrecon_1_1OverlayProducer.html#a7d4c515ea528ee4efebece4b419f3871">timeMean_</a>, <a class="code" href="classrecon_1_1OverlayProducer.html#aba18fc2354cede52dd928017347f7ba1">timeSigma_</a>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      timeOffset += bunchTimeOffset;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;in overlay loop: overlaying event &quot;</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                        &lt;&lt; <a class="code" href="classrecon_1_1OverlayProducer.html#a96d8cd99504f5f0384ee99f83b0ddcad">overlayEvent_</a>.<a class="code" href="classframework_1_1Event.html#ad8bfc57bcc950019d3244f17e84e4601">getEventHeader</a>().<a class="code" href="classldmx_1_1EventHeader.html#a8152a5d36972d1c0671ee54a0bf1a794">getEventNumber</a>()</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;which is &quot;</span> &lt;&lt; iEv + 1 &lt;&lt; <span class="stringliteral">&quot; out of &quot;</span> &lt;&lt; nEvsOverlay</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;\n\thit time offset is &quot;</span> &lt;&lt; timeOffset &lt;&lt; <span class="stringliteral">&quot; ns&quot;</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;\n\tbunch position offset is &quot;</span> &lt;&lt; bunchOffset</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;, leading to a total time offset of &quot;</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                        &lt;&lt; bunchTimeOffset &lt;&lt; <span class="stringliteral">&quot; ns&quot;</span>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="comment">/* ----------- first do the SimCalorimeterHits overlay ----------- */</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="comment">// again get the calo hits collections that we want to overlay</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="keywordflow">for</span> (uint iColl = 0; iColl &lt; <a class="code" href="classrecon_1_1OverlayProducer.html#a2205db8ef8271d145c2b19ffef396f52">caloCollections_</a>.size(); iColl++) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="comment">// for now, Ecal and only Ecal uses contribs</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordtype">bool</span> needsContribsAdded = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">if</span> (strstr(<a class="code" href="classrecon_1_1OverlayProducer.html#a2205db8ef8271d145c2b19ffef396f52">caloCollections_</a>[iColl].c_str(), <span class="stringliteral">&quot;Ecal&quot;</span>))</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;          needsContribsAdded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        std::vector&lt;ldmx::SimCalorimeterHit&gt; overlayHits =</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <a class="code" href="classrecon_1_1OverlayProducer.html#a96d8cd99504f5f0384ee99f83b0ddcad">overlayEvent_</a>.<a class="code" href="classframework_1_1Event.html#a808b17741d072084528328fae224f00c">getCollection</a>&lt;<a class="code" href="classldmx_1_1SimCalorimeterHit.html">ldmx::SimCalorimeterHit</a>&gt;(</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                <a class="code" href="classrecon_1_1OverlayProducer.html#a2205db8ef8271d145c2b19ffef396f52">caloCollections_</a>[iColl], <a class="code" href="classrecon_1_1OverlayProducer.html#a0736bc5ae8a8a925e895fb3674aeb73b">overlayPassName_</a>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;in loop: size of overlay hits vector is &quot;</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                        &lt;&lt; overlayHits.size();</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        std::string outCollName = <a class="code" href="classrecon_1_1OverlayProducer.html#a2205db8ef8271d145c2b19ffef396f52">caloCollections_</a>[iColl] + <span class="stringliteral">&quot;Overlay&quot;</span>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;          ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;in loop: printing overlay event: &quot;</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classldmx_1_1SimCalorimeterHit.html">ldmx::SimCalorimeterHit</a> &amp;overlayHit : overlayHits) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2) overlayHit.Print();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">float</span> overlayTime = overlayHit.getTime() + timeOffset;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;          overlayHit.setTime(overlayTime);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;          <span class="keywordflow">if</span> (needsContribsAdded) {  <span class="comment">// special treatment for (for now only)</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                                     <span class="comment">// ecal</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="keywordtype">int</span> overlayHitID = overlayHit.getID();</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <span class="keywordflow">if</span> (hitMap.find(overlayHitID) ==</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                hitMap.end()) {  <span class="comment">// there wasn&#39;t already a simhit in this id</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;              hitMap[overlayHitID] = <a class="code" href="classldmx_1_1SimCalorimeterHit.html">ldmx::SimCalorimeterHit</a>();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;              hitMap[overlayHitID].setID(overlayHitID);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;              std::vector&lt;float&gt; hitPos = overlayHit.getPosition();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;              hitMap[overlayHitID].setPosition(hitPos[0], hitPos[1], hitPos[2]);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="comment">// add the overlay hit (as a) contrib</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="comment">// incidentID = -1000, trackID = -1000, pdgCode = 0  &lt;-- these are</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="comment">// set in the header for now but could be parameters</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            hitMap[overlayHitID].addContrib(<a class="code" href="classrecon_1_1OverlayProducer.html#a45e054309e9d01d8f4e2689c5acd3d36">overlayIncidentID_</a>, overlayTrackID_,</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                                            overlayPdgCode_,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                                            overlayHit.getEdep(), overlayTime);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;          }  <span class="comment">// if add overlay as contribs</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;          <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            caloCollectionMap[outCollName].push_back(overlayHit);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2)</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;              ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;Adding non-Ecal overlay hit to outhit vector &quot;</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                              &lt;&lt; outCollName;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;          }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        }  <span class="comment">// over overlay calo simhit collection</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">if</span> (!needsContribsAdded)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;          ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;Nhits in overlay collection &quot;</span> &lt;&lt; outCollName</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                          &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; caloCollectionMap[outCollName].size();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      }  <span class="comment">// over caloCollections</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="comment">/* ----------- now do simtracker hits overlay ----------- */</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="comment">// get the SimTrackerHit collections that we want to overlay</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;coll : <a class="code" href="classrecon_1_1OverlayProducer.html#af9ae0715ad48bba2b6911de7871b65e8">trackerCollections_</a>) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keyword">auto</span> overlayTrackerHits{</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <a class="code" href="classrecon_1_1OverlayProducer.html#a96d8cd99504f5f0384ee99f83b0ddcad">overlayEvent_</a>.<a class="code" href="classframework_1_1Event.html#a808b17741d072084528328fae224f00c">getCollection</a>&lt;<a class="code" href="classldmx_1_1SimTrackerHit.html">ldmx::SimTrackerHit</a>&gt;(coll,</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                                                             <a class="code" href="classrecon_1_1OverlayProducer.html#a0736bc5ae8a8a925e895fb3674aeb73b">overlayPassName_</a>)};</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;in loop: size of overlay hits vector is &quot;</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                        &lt;&lt; overlayTrackerHits.size();</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="keyword">auto</span> outCollName{coll + <span class="stringliteral">&quot;Overlay&quot;</span>};</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;          ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;in loop: printing overlay event: &quot;</span>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;overlayHit : overlayTrackerHits) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;          <span class="keyword">auto</span> overlayTime{overlayHit.getTime() + timeOffset};</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;          overlayHit.setTime(overlayTime);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;          trackerCollectionMap[outCollName].push_back(overlayHit);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            overlayHit.<a class="code" href="classldmx_1_1SimTrackerHit.html#aae4cc91adad2e546e882d5581f30e74e">Print</a>();</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;Adding tracker overlay hit to outhit vector &quot;</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                            &lt;&lt; outCollName;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;          }  <span class="comment">// verbose</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        }    <span class="comment">// over overlay tracker simhit collection</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;Nhits in overlay collection &quot;</span> &lt;&lt; outCollName &lt;&lt; <span class="stringliteral">&quot;: &quot;</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                        &lt;&lt; trackerCollectionMap[outCollName].size();</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      }  <span class="comment">// over trackerCollections</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }  <span class="comment">// over overlay events</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  }    <span class="comment">// over bunches</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="comment">// after all events are done, the ecal hitmap is final and can be written to</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="comment">// the event output</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">for</span> (uint iColl = 0; iColl &lt; <a class="code" href="classrecon_1_1OverlayProducer.html#a2205db8ef8271d145c2b19ffef396f52">caloCollections_</a>.size(); iColl++) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">// loop through collection names to find the right collection name</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment">// add overlaid ecal hits as contribs/from hitmap rather than as copied</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">// simhits</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">if</span> (strstr(<a class="code" href="classrecon_1_1OverlayProducer.html#a2205db8ef8271d145c2b19ffef396f52">caloCollections_</a>[iColl].c_str(), <span class="stringliteral">&quot;Ecal&quot;</span>)) {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;Hits in hitmap after overlay of &quot;</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                        &lt;&lt; <a class="code" href="classrecon_1_1OverlayProducer.html#a2205db8ef8271d145c2b19ffef396f52">caloCollections_</a>[iColl] &lt;&lt; <span class="stringliteral">&quot;Overlay :&quot;</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;mapHit : hitMap) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2) mapHit.second.Print();</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordflow">if</span> (caloCollectionMap.find(<a class="code" href="classrecon_1_1OverlayProducer.html#a2205db8ef8271d145c2b19ffef396f52">caloCollections_</a>[iColl] + <span class="stringliteral">&quot;Overlay&quot;</span>) ==</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            caloCollectionMap.end()) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;          ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;Adding first hit from hit map as first outhit &quot;</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                             <span class="stringliteral">&quot;vector to caloCollectionMap&quot;</span>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;          caloCollectionMap[<a class="code" href="classrecon_1_1OverlayProducer.html#a2205db8ef8271d145c2b19ffef396f52">caloCollections_</a>[iColl] + <span class="stringliteral">&quot;Overlay&quot;</span>] = {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;              mapHit.second};</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;          caloCollectionMap[<a class="code" href="classrecon_1_1OverlayProducer.html#a2205db8ef8271d145c2b19ffef396f52">caloCollections_</a>[iColl] + <span class="stringliteral">&quot;Overlay&quot;</span>].push_back(</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;              mapHit.second);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <span class="keywordflow">break</span>;  <span class="comment">// for now we only have one hitMap: for Ecal. so no need looking</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;              <span class="comment">// further after we got a match</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }         <span class="comment">// isEcal</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  }           <span class="comment">// second loop over collections, to collect hits from hitmap</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="comment">// done collecting hits.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">// this should be added to the sim file, so to &quot;event&quot;</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">// once for each hit type</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;[name, coll] : caloCollectionMap) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;Writing &quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot; to event bus.&quot;</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;List of hits added: &quot;</span>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;hit : coll) hit.Print();</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keyword">event</span>.add(name, coll);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;[name, coll] : trackerCollectionMap) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;Writing &quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot; to event bus.&quot;</span>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classrecon_1_1OverlayProducer.html#a2cffa0b7248b6adc427461db12478319">verbosity_</a> &gt; 2) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      ldmx_log(debug) &lt;&lt; <span class="stringliteral">&quot;List of hits added: &quot;</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;hit : coll) hit.Print();</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keyword">event</span>.add(name, coll);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;}</div>
<div class="ttc" id="aclassframework_1_1Event_html_a808b17741d072084528328fae224f00c"><div class="ttname"><a href="classframework_1_1Event.html#a808b17741d072084528328fae224f00c">framework::Event::getCollection</a></div><div class="ttdeci">const std::vector&lt; ContentType &gt; &amp; getCollection(const std::string &amp;collectionName, const std::string &amp;passName=&quot;&quot;) const</div><div class="ttdef"><b>Definition:</b> <a href="Event_8h_source.html#l00366">Event.h:366</a></div></div>
<div class="ttc" id="aclassldmx_1_1EventHeader_html_a8152a5d36972d1c0671ee54a0bf1a794"><div class="ttname"><a href="classldmx_1_1EventHeader.html#a8152a5d36972d1c0671ee54a0bf1a794">ldmx::EventHeader::getEventNumber</a></div><div class="ttdeci">int getEventNumber() const</div><div class="ttdef"><b>Definition:</b> <a href="EventHeader_8h_source.html#l00076">EventHeader.h:76</a></div></div>
<div class="ttc" id="aclassldmx_1_1SimCalorimeterHit_html"><div class="ttname"><a href="classldmx_1_1SimCalorimeterHit.html">ldmx::SimCalorimeterHit</a></div><div class="ttdoc">Stores simulated calorimeter hit information.</div><div class="ttdef"><b>Definition:</b> <a href="SimCalorimeterHit_8h_source.html#l00031">SimCalorimeterHit.h:31</a></div></div>
<div class="ttc" id="aclassldmx_1_1SimCalorimeterHit_html_af20ad7848d15ee64334922fec873d8d1"><div class="ttname"><a href="classldmx_1_1SimCalorimeterHit.html#af20ad7848d15ee64334922fec873d8d1">ldmx::SimCalorimeterHit::Print</a></div><div class="ttdeci">void Print() const</div></div>
<div class="ttc" id="aclassldmx_1_1SimTrackerHit_html"><div class="ttname"><a href="classldmx_1_1SimTrackerHit.html">ldmx::SimTrackerHit</a></div><div class="ttdoc">Represents a simulated tracker hit in the simulation.</div><div class="ttdef"><b>Definition:</b> <a href="SimTrackerHit_8h_source.html#l00024">SimTrackerHit.h:24</a></div></div>
<div class="ttc" id="aclassldmx_1_1SimTrackerHit_html_aae4cc91adad2e546e882d5581f30e74e"><div class="ttname"><a href="classldmx_1_1SimTrackerHit.html#aae4cc91adad2e546e882d5581f30e74e">ldmx::SimTrackerHit::Print</a></div><div class="ttdeci">void Print() const</div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_a45e054309e9d01d8f4e2689c5acd3d36"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#a45e054309e9d01d8f4e2689c5acd3d36">recon::OverlayProducer::overlayIncidentID_</a></div><div class="ttdeci">int overlayIncidentID_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00181">OverlayProducer.h:181</a></div></div>
<div class="ttc" id="aclassrecon_1_1OverlayProducer_html_a4a0e8ff73303c03a99ba1dc33f83fb61"><div class="ttname"><a href="classrecon_1_1OverlayProducer.html#a4a0e8ff73303c03a99ba1dc33f83fb61">recon::OverlayProducer::rndmTime_</a></div><div class="ttdeci">std::unique_ptr&lt; TRandom2 &gt; rndmTime_</div><div class="ttdef"><b>Definition:</b> <a href="OverlayProducer_8h_source.html#l00136">OverlayProducer.h:136</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="OverlayProducer_8h_source.html#l00154">bunchSpacing_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00089">caloCollections_</a>, <a class="el" href="RandomNumberSeedService_8h_source.html#l00037">framework::RandomNumberSeedService::CONDITIONS_OBJECT_NAME</a>, <a class="el" href="OverlayProducer_8h_source.html#l00111">doPoissonIT_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00117">doPoissonOOT_</a>, <a class="el" href="Event_8h_source.html#l00366">framework::Event::getCollection()</a>, <a class="el" href="Event_8h_source.html#l00057">framework::Event::getEventHeader()</a>, <a class="el" href="EventHeader_8h_source.html#l00076">ldmx::EventHeader::getEventNumber()</a>, <a class="el" href="OverlayProducer_8h_source.html#l00161">nEarlier_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00168">nLater_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00083">overlayEvent_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00078">overlayFile_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00181">overlayIncidentID_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00100">overlayPassName_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00122">poissonMu_</a>, <a class="el" href="classldmx_1_1SimCalorimeterHit.html#af20ad7848d15ee64334922fec873d8d1">ldmx::SimCalorimeterHit::Print()</a>, <a class="el" href="classldmx_1_1SimTrackerHit.html#aae4cc91adad2e546e882d5581f30e74e">ldmx::SimTrackerHit::Print()</a>, <a class="el" href="OverlayProducer_8h_source.html#l00129">rndm_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00136">rndmTime_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00105">simPassName_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00149">timeMean_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00142">timeSigma_</a>, <a class="el" href="OverlayProducer_8h_source.html#l00095">trackerCollections_</a>, and <a class="el" href="OverlayProducer_8h_source.html#l00173">verbosity_</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7656fa545946f041b4cfc838842c9266"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7656fa545946f041b4cfc838842c9266">&#9670;&nbsp;</a></span>bunchSpacing_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double recon::OverlayProducer::bunchSpacing_ {0.}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Spacing in time (in [ns]) between electron bunches. </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00154">154</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00009">configure()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="a2205db8ef8271d145c2b19ffef396f52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2205db8ef8271d145c2b19ffef396f52">&#9670;&nbsp;</a></span>caloCollections_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; recon::OverlayProducer::caloCollections_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>List of SimCalorimeterHit collection(s) to loop over and add hits from, combining sim and pileup </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00089">89</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00009">configure()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="aa43fe964b5ec5140db07d86e15e83759"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa43fe964b5ec5140db07d86e15e83759">&#9670;&nbsp;</a></span>doPoissonIT_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool recon::OverlayProducer::doPoissonIT_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Let the total number of in-time events be poisson distributed, or fix at the chosen value, poissonMu_ </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00111">111</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00009">configure()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="aceae956b6155bebc153ff5dd0eb0f623"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aceae956b6155bebc153ff5dd0eb0f623">&#9670;&nbsp;</a></span>doPoissonOOT_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool recon::OverlayProducer::doPoissonOOT_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Let the total number of out-of-time events be poisson distributed, or fix at the chosen value, poissonMu_ </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00117">117</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00009">configure()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="a5a6dbb8775915483a6cb9ea4783cca00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a6dbb8775915483a6cb9ea4783cca00">&#9670;&nbsp;</a></span>nEarlier_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int recon::OverlayProducer::nEarlier_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of bunches before the sim event to pull pileup events from. Defaults to 0 --&gt; all events occur in the same bunch as the sim event. </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00161">161</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00009">configure()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="a9afe91252e3d51f23ed55a01ce261170"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9afe91252e3d51f23ed55a01ce261170">&#9670;&nbsp;</a></span>nLater_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int recon::OverlayProducer::nLater_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of bunches after the sim event to pull pileup events from. Defaults to 0 --&gt; all events occur in the same bunch as the sim event. </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00168">168</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00009">configure()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="a96d8cd99504f5f0384ee99f83b0ddcad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96d8cd99504f5f0384ee99f83b0ddcad">&#9670;&nbsp;</a></span>overlayEvent_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classframework_1_1Event.html">framework::Event</a> recon::OverlayProducer::overlayEvent_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The overlay ldmx event bus </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00083">83</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00060">onNewRun()</a>, <a class="el" href="OverlayProducer_8cxx_source.html#l00391">onProcessStart()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="a02c1155cfb0813096e053bd94c7ba0cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02c1155cfb0813096e053bd94c7ba0cc">&#9670;&nbsp;</a></span>overlayFile_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classframework_1_1EventFile.html">framework::EventFile</a>&gt; recon::OverlayProducer::overlayFile_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pileup overlay events input file </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00078">78</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00060">onNewRun()</a>, <a class="el" href="OverlayProducer_8cxx_source.html#l00391">onProcessStart()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="a0dbd9669144ad1f76b142b15b76692bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dbd9669144ad1f76b142b15b76692bb">&#9670;&nbsp;</a></span>overlayFileName_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string recon::OverlayProducer::overlayFileName_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pileup overlay events input file name </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00073">73</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00009">configure()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00391">onProcessStart()</a>.</p>

</div>
</div>
<a id="a45e054309e9d01d8f4e2689c5acd3d36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45e054309e9d01d8f4e2689c5acd3d36">&#9670;&nbsp;</a></span>overlayIncidentID_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int recon::OverlayProducer::overlayIncidentID_ {-1000}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For Ecal, overlay hits should be added as contribs. But these are required to be unique, by the Ecal rconstruction code. So assign a nonsensical trackID, incidentID, and PDG ID to the contribs from overlay. These are hardwired right here. </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00181">181</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="a0736bc5ae8a8a925e895fb3674aeb73b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0736bc5ae8a8a925e895fb3674aeb73b">&#9670;&nbsp;</a></span>overlayPassName_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string recon::OverlayProducer::overlayPassName_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pileup overlay events input pass name </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00100">100</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00009">configure()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="a943f0fe1114b078eafa155704af6ef51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a943f0fe1114b078eafa155704af6ef51">&#9670;&nbsp;</a></span>poissonMu_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double recon::OverlayProducer::poissonMu_ {0.}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>(average) total number of events </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00122">122</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00009">configure()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="aa6be7162431aa875af19a1283eb452bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6be7162431aa875af19a1283eb452bb">&#9670;&nbsp;</a></span>rndm_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;TRandom2&gt; recon::OverlayProducer::rndm_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Random number generator for number of overlaid events. TRandom2 slightly (~10%) faster than TRandom3; shorter period but our input files will have way shorter period anyway. </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00129">129</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00060">onNewRun()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="a4a0e8ff73303c03a99ba1dc33f83fb61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a0e8ff73303c03a99ba1dc33f83fb61">&#9670;&nbsp;</a></span>rndmTime_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;TRandom2&gt; recon::OverlayProducer::rndmTime_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Random number generator for pileup event time offset. TRandom2 slightly (~10%) faster than TRandom3; shorter period but our input files will have way shorter period anyway. </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00136">136</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="a01f539b7a524d4e6e45d90b373305c4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01f539b7a524d4e6e45d90b373305c4b">&#9670;&nbsp;</a></span>simPassName_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string recon::OverlayProducer::simPassName_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>To use for finding the sim event bus passengers, mostly a disambiguation </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00105">105</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00009">configure()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="a7d4c515ea528ee4efebece4b419f3871"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d4c515ea528ee4efebece4b419f3871">&#9670;&nbsp;</a></span>timeMean_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double recon::OverlayProducer::timeMean_ {0.}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Average position in time (in [ns]) of pileup bunches, relative to the sim event. Should realistically be 0. Using a non-zero mean and sigma = 0 is however useful for validation. </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00149">149</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00009">configure()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="aba18fc2354cede52dd928017347f7ba1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba18fc2354cede52dd928017347f7ba1">&#9670;&nbsp;</a></span>timeSigma_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double recon::OverlayProducer::timeSigma_ {0.}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Width of pileup bunch spread in time (in [ns]), specified as a sigma of a Gaussian distribution </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00142">142</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00009">configure()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="af9ae0715ad48bba2b6911de7871b65e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9ae0715ad48bba2b6911de7871b65e8">&#9670;&nbsp;</a></span>trackerCollections_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; recon::OverlayProducer::trackerCollections_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>List of SimTrackerHit collection(s) to loop over and add hits from, combining sim and pileup </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00095">95</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00009">configure()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<a id="a2cffa0b7248b6adc427461db12478319"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cffa0b7248b6adc427461db12478319">&#9670;&nbsp;</a></span>verbosity_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int recon::OverlayProducer::verbosity_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Local control of processor verbosity </p>

<p class="definition">Definition at line <a class="el" href="OverlayProducer_8h_source.html#l00173">173</a> of file <a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="OverlayProducer_8cxx_source.html#l00009">configure()</a>, <a class="el" href="OverlayProducer_8cxx_source.html#l00391">onProcessStart()</a>, and <a class="el" href="OverlayProducer_8cxx_source.html#l00080">produce()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Recon/include/Recon/<a class="el" href="OverlayProducer_8h_source.html">OverlayProducer.h</a></li>
<li>Recon/src/Recon/<a class="el" href="OverlayProducer_8cxx_source.html">OverlayProducer.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
		<script src="custom.js"></script>
	</body>
</html>