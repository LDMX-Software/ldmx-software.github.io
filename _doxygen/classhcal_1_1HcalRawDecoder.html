<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.9.5"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>LDMX Software: hcal::HcalRawDecoder Class Reference</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">LDMX Software
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part --><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>hcal</b></li><li class="navelem"><a class="el" href="classhcal_1_1HcalRawDecoder.html">HcalRawDecoder</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classhcal_1_1HcalRawDecoder-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">hcal::HcalRawDecoder Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a338ed61b89b1db2cb647986c1de7eb73"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhcal_1_1HcalRawDecoder.html#a338ed61b89b1db2cb647986c1de7eb73">HcalRawDecoder</a> (const std::string &amp;name, <a class="el" href="classframework_1_1Process.html">framework::Process</a> &amp;process)</td></tr>
<tr class="separator:a338ed61b89b1db2cb647986c1de7eb73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b348b6177897a148702180b5d07e260"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhcal_1_1HcalRawDecoder.html#a4b348b6177897a148702180b5d07e260">configure</a> (<a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;) final override</td></tr>
<tr class="separator:a4b348b6177897a148702180b5d07e260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e46474721eadbb9a724ee9ea0e91c70"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhcal_1_1HcalRawDecoder.html#a4e46474721eadbb9a724ee9ea0e91c70">beforeNewRun</a> (<a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> &amp;rh) final override</td></tr>
<tr class="memdesc:a4e46474721eadbb9a724ee9ea0e91c70"><td class="mdescLeft">&#160;</td><td class="mdescRight">add detector name if we are reading from file  <a href="classhcal_1_1HcalRawDecoder.html#a4e46474721eadbb9a724ee9ea0e91c70">More...</a><br /></td></tr>
<tr class="separator:a4e46474721eadbb9a724ee9ea0e91c70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec3b4cb2671812000906c97252be14ca"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhcal_1_1HcalRawDecoder.html#aec3b4cb2671812000906c97252be14ca">produce</a> (<a class="el" href="classframework_1_1Event.html">framework::Event</a> &amp;event) final override</td></tr>
<tr class="memdesc:aec3b4cb2671812000906c97252be14ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">use read function to decode data, then translate EIDs into DetIDs  <a href="classhcal_1_1HcalRawDecoder.html#aec3b4cb2671812000906c97252be14ca">More...</a><br /></td></tr>
<tr class="separator:aec3b4cb2671812000906c97252be14ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classframework_1_1Producer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classframework_1_1Producer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classframework_1_1Producer.html">framework::Producer</a></td></tr>
<tr class="memitem:a27ea7492352028e450f24f4750c62e1b inherit pub_methods_classframework_1_1Producer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1Producer.html#a27ea7492352028e450f24f4750c62e1b">Producer</a> (const std::string &amp;name, <a class="el" href="classframework_1_1Process.html">Process</a> &amp;process)</td></tr>
<tr class="separator:a27ea7492352028e450f24f4750c62e1b inherit pub_methods_classframework_1_1Producer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8591fb1e12fd5d8b1f2a5838d030042e inherit pub_methods_classframework_1_1Producer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1Producer.html#a8591fb1e12fd5d8b1f2a5838d030042e">produce</a> (<a class="el" href="classframework_1_1Event.html">Event</a> &amp;event)=0</td></tr>
<tr class="separator:a8591fb1e12fd5d8b1f2a5838d030042e inherit pub_methods_classframework_1_1Producer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b68d090cd4e50c3c572825bc57bebff inherit pub_methods_classframework_1_1Producer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1Producer.html#a8b68d090cd4e50c3c572825bc57bebff">beforeNewRun</a> (<a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> &amp;header)</td></tr>
<tr class="separator:a8b68d090cd4e50c3c572825bc57bebff inherit pub_methods_classframework_1_1Producer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classframework_1_1EventProcessor"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classframework_1_1EventProcessor')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classframework_1_1EventProcessor.html">framework::EventProcessor</a></td></tr>
<tr class="memitem:a7b079c9d4c0ac12bd9d1342073a6ae19 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a7b079c9d4c0ac12bd9d1342073a6ae19">EventProcessor</a> (const std::string &amp;name, <a class="el" href="classframework_1_1Process.html">Process</a> &amp;process)</td></tr>
<tr class="separator:a7b079c9d4c0ac12bd9d1342073a6ae19 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa9cc0358f4d501e403263b19ddc613c inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#aaa9cc0358f4d501e403263b19ddc613c">~EventProcessor</a> ()</td></tr>
<tr class="separator:aaa9cc0358f4d501e403263b19ddc613c inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21156f6f3954394925e9a265de9d702a inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a21156f6f3954394925e9a265de9d702a">configure</a> (<a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;parameters)</td></tr>
<tr class="separator:a21156f6f3954394925e9a265de9d702a inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93e19454e18fd62bc2081d40b3f41c62 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a93e19454e18fd62bc2081d40b3f41c62">onNewRun</a> (const <a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> &amp;runHeader)</td></tr>
<tr class="separator:a93e19454e18fd62bc2081d40b3f41c62 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab717fa73bbfb14424eb856e87b760e2c inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#ab717fa73bbfb14424eb856e87b760e2c">onFileOpen</a> (<a class="el" href="classframework_1_1EventFile.html">EventFile</a> &amp;eventFile)</td></tr>
<tr class="separator:ab717fa73bbfb14424eb856e87b760e2c inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6692c259d89b5ad39ceb2a302cd7e0e5 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a6692c259d89b5ad39ceb2a302cd7e0e5">onFileClose</a> (<a class="el" href="classframework_1_1EventFile.html">EventFile</a> &amp;eventFile)</td></tr>
<tr class="separator:a6692c259d89b5ad39ceb2a302cd7e0e5 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab54bb3abaafcb4f4b4b42d0a2ff616a9 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#ab54bb3abaafcb4f4b4b42d0a2ff616a9">onProcessStart</a> ()</td></tr>
<tr class="separator:ab54bb3abaafcb4f4b4b42d0a2ff616a9 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a527ebdf1fe665011964d9ce42a5521ad inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a527ebdf1fe665011964d9ce42a5521ad">onProcessEnd</a> ()</td></tr>
<tr class="separator:a527ebdf1fe665011964d9ce42a5521ad inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cfbb5c6279eb9095d56bbb31653aa73 inherit pub_methods_classframework_1_1EventProcessor"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:a7cfbb5c6279eb9095d56bbb31653aa73 inherit pub_methods_classframework_1_1EventProcessor"><td class="memTemplItemLeft" align="right" valign="top">const T &amp;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a7cfbb5c6279eb9095d56bbb31653aa73">getCondition</a> (const std::string &amp;condition_name)</td></tr>
<tr class="separator:a7cfbb5c6279eb9095d56bbb31653aa73 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae243bb073918259e747a8f8f144b0053 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">TDirectory *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#ae243bb073918259e747a8f8f144b0053">getHistoDirectory</a> ()</td></tr>
<tr class="separator:ae243bb073918259e747a8f8f144b0053 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f93ec80a4207c3847d629482e81989d inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a2f93ec80a4207c3847d629482e81989d">setStorageHint</a> (framework::StorageControlHint hint)</td></tr>
<tr class="separator:a2f93ec80a4207c3847d629482e81989d inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacc5699b669ced944eac4eeea2ade915 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#aacc5699b669ced944eac4eeea2ade915">setStorageHint</a> (framework::StorageControlHint hint, const std::string &amp;purposeString)</td></tr>
<tr class="separator:aacc5699b669ced944eac4eeea2ade915 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af212ff21b3ebec223facbfb02502ecdf inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#af212ff21b3ebec223facbfb02502ecdf">getLogFrequency</a> () const</td></tr>
<tr class="separator:af212ff21b3ebec223facbfb02502ecdf inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adde4ce813307a7d232eb5f4eda859b42 inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#adde4ce813307a7d232eb5f4eda859b42">getRunNumber</a> () const</td></tr>
<tr class="separator:adde4ce813307a7d232eb5f4eda859b42 inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9467d0d35043af7ed66a6b46cbca85ca inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a9467d0d35043af7ed66a6b46cbca85ca">getName</a> () const</td></tr>
<tr class="separator:a9467d0d35043af7ed66a6b46cbca85ca inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ed5966370da67ee0c89f7d6f9c8436d inherit pub_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a5ed5966370da67ee0c89f7d6f9c8436d">createHistograms</a> (const std::vector&lt; <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &gt; &amp;histos)</td></tr>
<tr class="separator:a5ed5966370da67ee0c89f7d6f9c8436d inherit pub_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:abc6800a26a75580894508987e4d4dcff"><td class="memTemplParams" colspan="2">template&lt;typename ReaderType &gt; </td></tr>
<tr class="memitem:abc6800a26a75580894508987e4d4dcff"><td class="memTemplItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classldmx_1_1HcalElectronicsID.html">ldmx::HcalElectronicsID</a>, std::vector&lt; <a class="el" href="classldmx_1_1HgcrocDigiCollection_1_1Sample.html">ldmx::HgcrocDigiCollection::Sample</a> &gt; &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classhcal_1_1HcalRawDecoder.html#abc6800a26a75580894508987e4d4dcff">read</a> (ReaderType &amp;reader, <a class="el" href="structhcal_1_1PolarfireEventHeader.html">PolarfireEventHeader</a> &amp;eh)</td></tr>
<tr class="separator:abc6800a26a75580894508987e4d4dcff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a4e1d6e1e21720c7f9118ef299dfd8ff3"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhcal_1_1HcalRawDecoder.html#a4e1d6e1e21720c7f9118ef299dfd8ff3">input_file_</a></td></tr>
<tr class="memdesc:a4e1d6e1e21720c7f9118ef299dfd8ff3"><td class="mdescLeft">&#160;</td><td class="mdescRight">input file of encoded data  <a href="classhcal_1_1HcalRawDecoder.html#a4e1d6e1e21720c7f9118ef299dfd8ff3">More...</a><br /></td></tr>
<tr class="separator:a4e1d6e1e21720c7f9118ef299dfd8ff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a969c6943a127904e4c47b07c03dc030c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhcal_1_1HcalRawDecoder.html#a969c6943a127904e4c47b07c03dc030c">input_names_</a></td></tr>
<tr class="memdesc:a969c6943a127904e4c47b07c03dc030c"><td class="mdescLeft">&#160;</td><td class="mdescRight">input object of encoded data  <a href="classhcal_1_1HcalRawDecoder.html#a969c6943a127904e4c47b07c03dc030c">More...</a><br /></td></tr>
<tr class="separator:a969c6943a127904e4c47b07c03dc030c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2f62ffa4149345dac777f7ebdccdab1"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhcal_1_1HcalRawDecoder.html#ae2f62ffa4149345dac777f7ebdccdab1">input_pass_</a></td></tr>
<tr class="memdesc:ae2f62ffa4149345dac777f7ebdccdab1"><td class="mdescLeft">&#160;</td><td class="mdescRight">input pass of creating encoded data  <a href="classhcal_1_1HcalRawDecoder.html#ae2f62ffa4149345dac777f7ebdccdab1">More...</a><br /></td></tr>
<tr class="separator:ae2f62ffa4149345dac777f7ebdccdab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1766b565bb28b0371c13bc13ff34ea06"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhcal_1_1HcalRawDecoder.html#a1766b565bb28b0371c13bc13ff34ea06">output_name_</a></td></tr>
<tr class="memdesc:a1766b565bb28b0371c13bc13ff34ea06"><td class="mdescLeft">&#160;</td><td class="mdescRight">output object to put onto event bus  <a href="classhcal_1_1HcalRawDecoder.html#a1766b565bb28b0371c13bc13ff34ea06">More...</a><br /></td></tr>
<tr class="separator:a1766b565bb28b0371c13bc13ff34ea06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01be7b9afb6ad869d9c0cf1ec061a554"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhcal_1_1HcalRawDecoder.html#a01be7b9afb6ad869d9c0cf1ec061a554">detector_name_</a></td></tr>
<tr class="memdesc:a01be7b9afb6ad869d9c0cf1ec061a554"><td class="mdescLeft">&#160;</td><td class="mdescRight">the detector name if we are reading from a file  <a href="classhcal_1_1HcalRawDecoder.html#a01be7b9afb6ad869d9c0cf1ec061a554">More...</a><br /></td></tr>
<tr class="separator:a01be7b9afb6ad869d9c0cf1ec061a554"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2d6d2472517d99dc354918d409662be"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhcal_1_1HcalRawDecoder.html#ae2d6d2472517d99dc354918d409662be">roc_version_</a></td></tr>
<tr class="memdesc:ae2d6d2472517d99dc354918d409662be"><td class="mdescLeft">&#160;</td><td class="mdescRight">version of HGC ROC we are decoding  <a href="classhcal_1_1HcalRawDecoder.html#ae2d6d2472517d99dc354918d409662be">More...</a><br /></td></tr>
<tr class="separator:ae2d6d2472517d99dc354918d409662be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4858afd454e79477c71f6426f09901a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhcal_1_1HcalRawDecoder.html#ac4858afd454e79477c71f6426f09901a">translate_eid_</a></td></tr>
<tr class="memdesc:ac4858afd454e79477c71f6426f09901a"><td class="mdescLeft">&#160;</td><td class="mdescRight">are get translating electronic IDs?  <a href="classhcal_1_1HcalRawDecoder.html#ac4858afd454e79477c71f6426f09901a">More...</a><br /></td></tr>
<tr class="separator:ac4858afd454e79477c71f6426f09901a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a119d231da32e350a0ac61dac26cd7fc3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhcal_1_1HcalRawDecoder.html#a119d231da32e350a0ac61dac26cd7fc3">read_from_file_</a></td></tr>
<tr class="memdesc:a119d231da32e350a0ac61dac26cd7fc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">is the input_name a file or an event object  <a href="classhcal_1_1HcalRawDecoder.html#a119d231da32e350a0ac61dac26cd7fc3">More...</a><br /></td></tr>
<tr class="separator:a119d231da32e350a0ac61dac26cd7fc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a693196e84aabd7060558dfbc915133ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classpacking_1_1utility_1_1Reader.html">packing::utility::Reader</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhcal_1_1HcalRawDecoder.html#a693196e84aabd7060558dfbc915133ab">file_reader_</a></td></tr>
<tr class="memdesc:a693196e84aabd7060558dfbc915133ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">the file reader (if we are doing that)  <a href="classhcal_1_1HcalRawDecoder.html#a693196e84aabd7060558dfbc915133ab">More...</a><br /></td></tr>
<tr class="separator:a693196e84aabd7060558dfbc915133ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classframework_1_1EventProcessor"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classframework_1_1EventProcessor')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classframework_1_1EventProcessor.html">framework::EventProcessor</a></td></tr>
<tr class="memitem:a055eb62b2fdde542be4225dfe3a7f9c9 inherit pub_static_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a055eb62b2fdde542be4225dfe3a7f9c9">declare</a> (const std::string &amp;classname, int classtype, <a class="el" href="namespaceframework.html#a3cc065ab8608a2973b4c60767177d483">EventProcessorMaker</a> *)</td></tr>
<tr class="separator:a055eb62b2fdde542be4225dfe3a7f9c9 inherit pub_static_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_attribs_classframework_1_1Producer"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_classframework_1_1Producer')"><img src="closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="classframework_1_1Producer.html">framework::Producer</a></td></tr>
<tr class="memitem:a6433d7808e67a79fc83d4c6f7e57224a inherit pub_static_attribs_classframework_1_1Producer"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1Producer.html#a6433d7808e67a79fc83d4c6f7e57224a">CLASSTYPE</a> {1}</td></tr>
<tr class="separator:a6433d7808e67a79fc83d4c6f7e57224a inherit pub_static_attribs_classframework_1_1Producer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classframework_1_1EventProcessor"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classframework_1_1EventProcessor')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classframework_1_1EventProcessor.html">framework::EventProcessor</a></td></tr>
<tr class="memitem:a8d42387da8fbb2d1f01f5ecebb64dd7d inherit pro_methods_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a8d42387da8fbb2d1f01f5ecebb64dd7d">abortEvent</a> ()</td></tr>
<tr class="separator:a8d42387da8fbb2d1f01f5ecebb64dd7d inherit pro_methods_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classframework_1_1EventProcessor"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classframework_1_1EventProcessor')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classframework_1_1EventProcessor.html">framework::EventProcessor</a></td></tr>
<tr class="memitem:ae8a2bfe0849be1531e195438c1eaba4c inherit pro_attribs_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classframework_1_1HistogramHelper.html">HistogramHelper</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#ae8a2bfe0849be1531e195438c1eaba4c">histograms_</a></td></tr>
<tr class="memdesc:ae8a2bfe0849be1531e195438c1eaba4c inherit pro_attribs_classframework_1_1EventProcessor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface class for making and filling histograms.  <a href="classframework_1_1EventProcessor.html#ae8a2bfe0849be1531e195438c1eaba4c">More...</a><br /></td></tr>
<tr class="separator:ae8a2bfe0849be1531e195438c1eaba4c inherit pro_attribs_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a410e35c73c9b196961e5c35127321814 inherit pro_attribs_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classframework_1_1NtupleManager.html">NtupleManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#a410e35c73c9b196961e5c35127321814">ntuple_</a> {<a class="el" href="classframework_1_1NtupleManager.html#a95b2bb3823b5a35568c5facb85d441d1">NtupleManager::getInstance</a>()}</td></tr>
<tr class="memdesc:a410e35c73c9b196961e5c35127321814 inherit pro_attribs_classframework_1_1EventProcessor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manager for any ntuples.  <a href="classframework_1_1EventProcessor.html#a410e35c73c9b196961e5c35127321814">More...</a><br /></td></tr>
<tr class="separator:a410e35c73c9b196961e5c35127321814 inherit pro_attribs_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae350c3e5c91a69b8910bf1229ed21430 inherit pro_attribs_classframework_1_1EventProcessor"><td class="memItemLeft" align="right" valign="top">logging::logger&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventProcessor.html#ae350c3e5c91a69b8910bf1229ed21430">theLog_</a></td></tr>
<tr class="memdesc:ae350c3e5c91a69b8910bf1229ed21430 inherit pro_attribs_classframework_1_1EventProcessor"><td class="mdescLeft">&#160;</td><td class="mdescRight">The logger for this <a class="el" href="classframework_1_1EventProcessor.html" title="Base class for all event processing components.">EventProcessor</a>.  <a href="classframework_1_1EventProcessor.html#ae350c3e5c91a69b8910bf1229ed21430">More...</a><br /></td></tr>
<tr class="separator:ae350c3e5c91a69b8910bf1229ed21430 inherit pro_attribs_classframework_1_1EventProcessor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="HcalRawDecoder_8cxx_source.html#l00120">120</a> of file <a class="el" href="HcalRawDecoder_8cxx_source.html">HcalRawDecoder.cxx</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a338ed61b89b1db2cb647986c1de7eb73" name="a338ed61b89b1db2cb647986c1de7eb73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a338ed61b89b1db2cb647986c1de7eb73">&#9670;&#160;</a></span>HcalRawDecoder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">hcal::HcalRawDecoder::HcalRawDecoder </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classframework_1_1Process.html">framework::Process</a> &amp;&#160;</td>
          <td class="paramname"><em>process</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="HcalRawDecoder_8cxx_source.html#l00122">122</a> of file <a class="el" href="HcalRawDecoder_8cxx_source.html">HcalRawDecoder.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  123</span>      : <a class="code hl_class" href="classframework_1_1Producer.html">framework::Producer</a>(name, process) {}</div>
<div class="ttc" id="aclassframework_1_1Producer_html"><div class="ttname"><a href="classframework_1_1Producer.html">framework::Producer</a></div><div class="ttdoc">Base class for a module which produces a data product.</div><div class="ttdef"><b>Definition:</b> <a href="EventProcessor_8h_source.html#l00252">EventProcessor.h:252</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4e46474721eadbb9a724ee9ea0e91c70" name="a4e46474721eadbb9a724ee9ea0e91c70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e46474721eadbb9a724ee9ea0e91c70">&#9670;&#160;</a></span>beforeNewRun()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void hcal::HcalRawDecoder::beforeNewRun </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> &amp;&#160;</td>
          <td class="paramname"><em>rh</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>add detector name if we are reading from file </p>

<p>Reimplemented from <a class="el" href="classframework_1_1Producer.html#a8b68d090cd4e50c3c572825bc57bebff">framework::Producer</a>.</p>

<p class="definition">Definition at line <a class="el" href="HcalRawDecoder_8cxx_source.html#l00617">617</a> of file <a class="el" href="HcalRawDecoder_8cxx_source.html">HcalRawDecoder.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  617</span>                                                   {</div>
<div class="line"><span class="lineno">  618</span>  <span class="comment">// if we are reading from a file, we need to provide the detector name</span></div>
<div class="line"><span class="lineno">  619</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a119d231da32e350a0ac61dac26cd7fc3">read_from_file_</a>) {</div>
<div class="line"><span class="lineno">  620</span>    rh.<a class="code hl_function" href="classldmx_1_1RunHeader.html#a42e321c3639bb8fc2021ae0d8664744c">setDetectorName</a>(<a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a01be7b9afb6ad869d9c0cf1ec061a554">detector_name_</a>);</div>
<div class="line"><span class="lineno">  621</span>  }</div>
<div class="line"><span class="lineno">  622</span>}</div>
<div class="ttc" id="aclasshcal_1_1HcalRawDecoder_html_a01be7b9afb6ad869d9c0cf1ec061a554"><div class="ttname"><a href="classhcal_1_1HcalRawDecoder.html#a01be7b9afb6ad869d9c0cf1ec061a554">hcal::HcalRawDecoder::detector_name_</a></div><div class="ttdeci">std::string detector_name_</div><div class="ttdoc">the detector name if we are reading from a file</div><div class="ttdef"><b>Definition:</b> <a href="HcalRawDecoder_8cxx_source.html#l00590">HcalRawDecoder.cxx:590</a></div></div>
<div class="ttc" id="aclasshcal_1_1HcalRawDecoder_html_a119d231da32e350a0ac61dac26cd7fc3"><div class="ttname"><a href="classhcal_1_1HcalRawDecoder.html#a119d231da32e350a0ac61dac26cd7fc3">hcal::HcalRawDecoder::read_from_file_</a></div><div class="ttdeci">bool read_from_file_</div><div class="ttdoc">is the input_name a file or an event object</div><div class="ttdef"><b>Definition:</b> <a href="HcalRawDecoder_8cxx_source.html#l00596">HcalRawDecoder.cxx:596</a></div></div>
<div class="ttc" id="aclassldmx_1_1RunHeader_html_a42e321c3639bb8fc2021ae0d8664744c"><div class="ttname"><a href="classldmx_1_1RunHeader.html#a42e321c3639bb8fc2021ae0d8664744c">ldmx::RunHeader::setDetectorName</a></div><div class="ttdeci">void setDetectorName(const std::string &amp;det)</div><div class="ttdef"><b>Definition:</b> <a href="RunHeader_8h_source.html#l00048">RunHeader.h:48</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="HcalRawDecoder_8cxx_source.html#l00590">detector_name_</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00596">read_from_file_</a>, and <a class="el" href="RunHeader_8h_source.html#l00048">ldmx::RunHeader::setDetectorName()</a>.</p>

</div>
</div>
<a id="a4b348b6177897a148702180b5d07e260" name="a4b348b6177897a148702180b5d07e260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b348b6177897a148702180b5d07e260">&#9670;&#160;</a></span>configure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void hcal::HcalRawDecoder::configure </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;&#160;</td>
          <td class="paramname"><em>parameters</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Callback for the EventProcessor to configure itself from the given set of parameters.</p>
<p >The parameters a processor has access to are the member variables of the python class in the sequence that has className equal to the EventProcessor class name.</p>
<p >For an example, look at MyProcessor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parameters</td><td>Parameters for configuration. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classframework_1_1EventProcessor.html#a21156f6f3954394925e9a265de9d702a">framework::EventProcessor</a>.</p>

<p class="definition">Definition at line <a class="el" href="HcalRawDecoder_8cxx_source.html#l00603">603</a> of file <a class="el" href="HcalRawDecoder_8cxx_source.html">HcalRawDecoder.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  603</span>                                                            {</div>
<div class="line"><span class="lineno">  604</span>  <a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a4e1d6e1e21720c7f9118ef299dfd8ff3">input_file_</a> = ps.getParameter&lt;std::string&gt;(<span class="stringliteral">&quot;input_file&quot;</span>);</div>
<div class="line"><span class="lineno">  605</span>  <a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a969c6943a127904e4c47b07c03dc030c">input_names_</a> = ps.getParameter&lt;std::vector&lt;std::string&gt;&gt;(<span class="stringliteral">&quot;input_names&quot;</span>, {});</div>
<div class="line"><span class="lineno">  606</span>  <a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#ae2f62ffa4149345dac777f7ebdccdab1">input_pass_</a> = ps.getParameter&lt;std::string&gt;(<span class="stringliteral">&quot;input_pass&quot;</span>);</div>
<div class="line"><span class="lineno">  607</span>  <a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a1766b565bb28b0371c13bc13ff34ea06">output_name_</a> = ps.getParameter&lt;std::string&gt;(<span class="stringliteral">&quot;output_name&quot;</span>);</div>
<div class="line"><span class="lineno">  608</span>  <a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#ae2d6d2472517d99dc354918d409662be">roc_version_</a> = ps.getParameter&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;roc_version&quot;</span>);</div>
<div class="line"><span class="lineno">  609</span>  <a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#ac4858afd454e79477c71f6426f09901a">translate_eid_</a> = ps.getParameter&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;translate_eid&quot;</span>);</div>
<div class="line"><span class="lineno">  610</span>  <a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a119d231da32e350a0ac61dac26cd7fc3">read_from_file_</a> = ps.getParameter&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;read_from_file&quot;</span>);</div>
<div class="line"><span class="lineno">  611</span>  <a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a01be7b9afb6ad869d9c0cf1ec061a554">detector_name_</a> = ps.getParameter&lt;std::string&gt;(<span class="stringliteral">&quot;detector_name&quot;</span>);</div>
<div class="line"><span class="lineno">  612</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a119d231da32e350a0ac61dac26cd7fc3">read_from_file_</a>) {</div>
<div class="line"><span class="lineno">  613</span>    <a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a693196e84aabd7060558dfbc915133ab">file_reader_</a>.<a class="code hl_function" href="classpacking_1_1utility_1_1Reader.html#a3f079b5932b585a729b22e653e8a8b20">open</a>(<a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a4e1d6e1e21720c7f9118ef299dfd8ff3">input_file_</a>);</div>
<div class="line"><span class="lineno">  614</span>  }</div>
<div class="line"><span class="lineno">  615</span>}</div>
<div class="ttc" id="aclasshcal_1_1HcalRawDecoder_html_a1766b565bb28b0371c13bc13ff34ea06"><div class="ttname"><a href="classhcal_1_1HcalRawDecoder.html#a1766b565bb28b0371c13bc13ff34ea06">hcal::HcalRawDecoder::output_name_</a></div><div class="ttdeci">std::string output_name_</div><div class="ttdoc">output object to put onto event bus</div><div class="ttdef"><b>Definition:</b> <a href="HcalRawDecoder_8cxx_source.html#l00588">HcalRawDecoder.cxx:588</a></div></div>
<div class="ttc" id="aclasshcal_1_1HcalRawDecoder_html_a4e1d6e1e21720c7f9118ef299dfd8ff3"><div class="ttname"><a href="classhcal_1_1HcalRawDecoder.html#a4e1d6e1e21720c7f9118ef299dfd8ff3">hcal::HcalRawDecoder::input_file_</a></div><div class="ttdeci">std::string input_file_</div><div class="ttdoc">input file of encoded data</div><div class="ttdef"><b>Definition:</b> <a href="HcalRawDecoder_8cxx_source.html#l00582">HcalRawDecoder.cxx:582</a></div></div>
<div class="ttc" id="aclasshcal_1_1HcalRawDecoder_html_a693196e84aabd7060558dfbc915133ab"><div class="ttname"><a href="classhcal_1_1HcalRawDecoder.html#a693196e84aabd7060558dfbc915133ab">hcal::HcalRawDecoder::file_reader_</a></div><div class="ttdeci">packing::utility::Reader file_reader_</div><div class="ttdoc">the file reader (if we are doing that)</div><div class="ttdef"><b>Definition:</b> <a href="HcalRawDecoder_8cxx_source.html#l00600">HcalRawDecoder.cxx:600</a></div></div>
<div class="ttc" id="aclasshcal_1_1HcalRawDecoder_html_a969c6943a127904e4c47b07c03dc030c"><div class="ttname"><a href="classhcal_1_1HcalRawDecoder.html#a969c6943a127904e4c47b07c03dc030c">hcal::HcalRawDecoder::input_names_</a></div><div class="ttdeci">std::vector&lt; std::string &gt; input_names_</div><div class="ttdoc">input object of encoded data</div><div class="ttdef"><b>Definition:</b> <a href="HcalRawDecoder_8cxx_source.html#l00584">HcalRawDecoder.cxx:584</a></div></div>
<div class="ttc" id="aclasshcal_1_1HcalRawDecoder_html_ac4858afd454e79477c71f6426f09901a"><div class="ttname"><a href="classhcal_1_1HcalRawDecoder.html#ac4858afd454e79477c71f6426f09901a">hcal::HcalRawDecoder::translate_eid_</a></div><div class="ttdeci">bool translate_eid_</div><div class="ttdoc">are get translating electronic IDs?</div><div class="ttdef"><b>Definition:</b> <a href="HcalRawDecoder_8cxx_source.html#l00594">HcalRawDecoder.cxx:594</a></div></div>
<div class="ttc" id="aclasshcal_1_1HcalRawDecoder_html_ae2d6d2472517d99dc354918d409662be"><div class="ttname"><a href="classhcal_1_1HcalRawDecoder.html#ae2d6d2472517d99dc354918d409662be">hcal::HcalRawDecoder::roc_version_</a></div><div class="ttdeci">int roc_version_</div><div class="ttdoc">version of HGC ROC we are decoding</div><div class="ttdef"><b>Definition:</b> <a href="HcalRawDecoder_8cxx_source.html#l00592">HcalRawDecoder.cxx:592</a></div></div>
<div class="ttc" id="aclasshcal_1_1HcalRawDecoder_html_ae2f62ffa4149345dac777f7ebdccdab1"><div class="ttname"><a href="classhcal_1_1HcalRawDecoder.html#ae2f62ffa4149345dac777f7ebdccdab1">hcal::HcalRawDecoder::input_pass_</a></div><div class="ttdeci">std::string input_pass_</div><div class="ttdoc">input pass of creating encoded data</div><div class="ttdef"><b>Definition:</b> <a href="HcalRawDecoder_8cxx_source.html#l00586">HcalRawDecoder.cxx:586</a></div></div>
<div class="ttc" id="aclasspacking_1_1utility_1_1Reader_html_a3f079b5932b585a729b22e653e8a8b20"><div class="ttname"><a href="classpacking_1_1utility_1_1Reader.html#a3f079b5932b585a729b22e653e8a8b20">packing::utility::Reader::open</a></div><div class="ttdeci">void open(const std::string &amp;file_name)</div><div class="ttdef"><b>Definition:</b> <a href="Reader_8h_source.html#l00037">Reader.h:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="HcalRawDecoder_8cxx_source.html#l00590">detector_name_</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00600">file_reader_</a>, <a class="el" href="Parameters_8h_source.html#l00089">framework::config::Parameters::getParameter()</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00582">input_file_</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00584">input_names_</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00586">input_pass_</a>, <a class="el" href="Reader_8h_source.html#l00037">packing::utility::Reader::open()</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00588">output_name_</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00596">read_from_file_</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00592">roc_version_</a>, and <a class="el" href="HcalRawDecoder_8cxx_source.html#l00594">translate_eid_</a>.</p>

</div>
</div>
<a id="aec3b4cb2671812000906c97252be14ca" name="aec3b4cb2671812000906c97252be14ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec3b4cb2671812000906c97252be14ca">&#9670;&#160;</a></span>produce()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void hcal::HcalRawDecoder::produce </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classframework_1_1Event.html">framework::Event</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>use read function to decode data, then translate EIDs into DetIDs </p>
<p >Translation</p>
<p >Now the HgcrocDigiCollection::Sample class handles the unpacking of individual samples; however, we still need to translate electronic IDs into detector IDs.</p>
<p >DO NOTHING skip hits where the EID aren't in the detector mapping no zero supp during test beam on the front-end, so channels that aren't connected to anything are still being readout.</p>
<p >no EID translation, just add the digis to the digi collection with their raw electronic ID TODO: remove this, we shouldn't be able to get past the decoding stage without translating the EID into a detector ID to avoid confusion in recon</p>

<p>Implements <a class="el" href="classframework_1_1Producer.html#a8591fb1e12fd5d8b1f2a5838d030042e">framework::Producer</a>.</p>

<p class="definition">Definition at line <a class="el" href="HcalRawDecoder_8cxx_source.html#l00624">624</a> of file <a class="el" href="HcalRawDecoder_8cxx_source.html">HcalRawDecoder.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  624</span>                                                  {</div>
<div class="line"><span class="lineno">  625</span>  std::map&lt;<a class="code hl_class" href="classldmx_1_1HcalElectronicsID.html">ldmx::HcalElectronicsID</a>,</div>
<div class="line"><span class="lineno">  626</span>           std::vector&lt;ldmx::HgcrocDigiCollection::Sample&gt;&gt;</div>
<div class="line"><span class="lineno">  627</span>      eid_to_samples;</div>
<div class="line"><span class="lineno">  628</span>  PolarfireEventHeader eh;</div>
<div class="line"><span class="lineno">  629</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a119d231da32e350a0ac61dac26cd7fc3">read_from_file_</a>) {</div>
<div class="line"><span class="lineno">  630</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a693196e84aabd7060558dfbc915133ab">file_reader_</a> or <a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a693196e84aabd7060558dfbc915133ab">file_reader_</a>.<a class="code hl_function" href="classpacking_1_1utility_1_1Reader.html#a6b5ae36ce746cc77969bbafb0a0d661f">eof</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  631</span>    eid_to_samples = this-&gt;<a class="code hl_function" href="classhcal_1_1HcalRawDecoder.html#abc6800a26a75580894508987e4d4dcff">read</a>(<a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a693196e84aabd7060558dfbc915133ab">file_reader_</a>, eh);</div>
<div class="line"><span class="lineno">  632</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  633</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; name : <a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a969c6943a127904e4c47b07c03dc030c">input_names_</a>) {</div>
<div class="line"><span class="lineno">  634</span>      <a class="code hl_class" href="classhcal_1_1utility_1_1Reader.html">hcal::utility::Reader</a> bus_reader(</div>
<div class="line"><span class="lineno">  635</span>          event.<a class="code hl_function" href="classframework_1_1Event.html#a114c2b1849dc2223d2077fe1f1ae0294">getCollection</a>&lt;uint8_t&gt;(name, <a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#ae2f62ffa4149345dac777f7ebdccdab1">input_pass_</a>));</div>
<div class="line"><span class="lineno">  636</span>      <span class="keyword">auto</span> single_pf_samples = this-&gt;<a class="code hl_function" href="classhcal_1_1HcalRawDecoder.html#abc6800a26a75580894508987e4d4dcff">read</a>(bus_reader, eh);</div>
<div class="line"><span class="lineno">  637</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [<span class="keywordtype">id</span>, samples] : single_pf_samples) {</div>
<div class="line"><span class="lineno">  638</span>        eid_to_samples[id] = samples;</div>
<div class="line"><span class="lineno">  639</span>      }</div>
<div class="line"><span class="lineno">  640</span>    }</div>
<div class="line"><span class="lineno">  641</span>  }</div>
<div class="line"><span class="lineno">  642</span> </div>
<div class="line"><span class="lineno">  643</span>  eh.board(event, <a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a1766b565bb28b0371c13bc13ff34ea06">output_name_</a>);</div>
<div class="line"><span class="lineno">  644</span> </div>
<div class="line"><span class="lineno">  645</span>  <a class="code hl_class" href="classldmx_1_1HgcrocDigiCollection.html">ldmx::HgcrocDigiCollection</a> digis;</div>
<div class="line"><span class="lineno">  646</span>  <span class="comment">// assume all channels have same number of samples</span></div>
<div class="line"><span class="lineno">  647</span>  digis.<a class="code hl_function" href="classldmx_1_1HgcrocDigiCollection.html#a710b705f129831a7029b9b42c3dcdf23">setNumSamplesPerDigi</a>(eid_to_samples.begin()-&gt;second.size());</div>
<div class="line"><span class="lineno">  648</span>  digis.<a class="code hl_function" href="classldmx_1_1HgcrocDigiCollection.html#aa7400fd63b92e03d22f94898630f1f77">setSampleOfInterestIndex</a>(0);  <span class="comment">// TODO configurable</span></div>
<div class="line"><span class="lineno">  649</span>  digis.<a class="code hl_function" href="classldmx_1_1HgcrocDigiCollection.html#abe9ba46a6f93aedf901a6d8209ea0408">setVersion</a>(<a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#ae2d6d2472517d99dc354918d409662be">roc_version_</a>);</div>
<div class="line"><span class="lineno">  650</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#ac4858afd454e79477c71f6426f09901a">translate_eid_</a>) {</div>
<div class="line"><span class="lineno">  658</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  659</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;Translating EIDs into DetIDs. Printing skipped EIDs...&quot;</span></div>
<div class="line"><span class="lineno">  660</span>              &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  661</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  662</span>    <span class="keyword">auto</span> detmap{</div>
<div class="line"><span class="lineno">  663</span>        getCondition&lt;HcalDetectorMap&gt;(<a class="code hl_variable" href="classhcal_1_1HcalDetectorMap.html#a64e9061e89c3d90fae0bdece25648f2c">HcalDetectorMap::CONDITIONS_OBJECT_NAME</a>)};</div>
<div class="line"><span class="lineno">  664</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; [eid, digi] : eid_to_samples) {</div>
<div class="line"><span class="lineno">  665</span>      <span class="comment">// The electronics map returns an empty ID of the correct</span></div>
<div class="line"><span class="lineno">  666</span>      <span class="comment">// type when the electronics ID is not found.</span></div>
<div class="line"><span class="lineno">  667</span>      <span class="comment">//  need to check if the electronics ID exists</span></div>
<div class="line"><span class="lineno">  668</span>      <span class="comment">//  TODO: do we want to end processing if this happens?</span></div>
<div class="line"><span class="lineno">  669</span>      <span class="keywordflow">if</span> (detmap.exists(eid)) {</div>
<div class="line"><span class="lineno">  670</span>        uint32_t did_raw = detmap.get(eid).raw();</div>
<div class="line"><span class="lineno">  671</span>        digis.<a class="code hl_function" href="classldmx_1_1HgcrocDigiCollection.html#ad6607762651c38c82453a787dd2da582">addDigi</a>(did_raw, digi);</div>
<div class="line"><span class="lineno">  672</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  679</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  680</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;EID(&quot;</span> &lt;&lt; eid.fiber() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; eid.elink() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span></div>
<div class="line"><span class="lineno">  681</span>                  &lt;&lt; eid.channel() &lt;&lt; <span class="stringliteral">&quot;) &quot;</span>;</div>
<div class="line"><span class="lineno">  682</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; s : digi) std::cout &lt;&lt; debug::hex(s.raw()) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno">  683</span>        std::cout &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  684</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  685</span>      }</div>
<div class="line"><span class="lineno">  686</span>    }</div>
<div class="line"><span class="lineno">  687</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  695</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; [eid, digi] : eid_to_samples) {</div>
<div class="line"><span class="lineno">  696</span>      digis.<a class="code hl_function" href="classldmx_1_1HgcrocDigiCollection.html#ad6607762651c38c82453a787dd2da582">addDigi</a>(eid.raw(), digi);</div>
<div class="line"><span class="lineno">  697</span>    }</div>
<div class="line"><span class="lineno">  698</span>  }</div>
<div class="line"><span class="lineno">  699</span> </div>
<div class="line"><span class="lineno">  700</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  701</span>  std::cout &lt;&lt; <span class="stringliteral">&quot;adding &quot;</span> &lt;&lt; digis.<a class="code hl_function" href="classldmx_1_1HgcrocDigiCollection.html#ae3580a8a632b91b0ff4265346cc74715">getNumDigis</a>() &lt;&lt; <span class="stringliteral">&quot; digis each with &quot;</span></div>
<div class="line"><span class="lineno">  702</span>            &lt;&lt; digis.<a class="code hl_function" href="classldmx_1_1HgcrocDigiCollection.html#a49b29a90c1b5595c224362ae682474ae">getNumSamplesPerDigi</a>() &lt;&lt; <span class="stringliteral">&quot; samples to event bus&quot;</span></div>
<div class="line"><span class="lineno">  703</span>            &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  704</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  705</span>  <span class="keyword">event</span>.add(<a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#a1766b565bb28b0371c13bc13ff34ea06">output_name_</a>, digis);</div>
<div class="line"><span class="lineno">  706</span>  <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  707</span>}  <span class="comment">// produce</span></div>
<div class="ttc" id="aclassframework_1_1Event_html_a114c2b1849dc2223d2077fe1f1ae0294"><div class="ttname"><a href="classframework_1_1Event.html#a114c2b1849dc2223d2077fe1f1ae0294">framework::Event::getCollection</a></div><div class="ttdeci">const std::vector&lt; ContentType &gt; &amp; getCollection(const std::string &amp;collectionName, const std::string &amp;passName=&quot;&quot;) const</div><div class="ttdef"><b>Definition:</b> <a href="Event_8h_source.html#l00366">Event.h:366</a></div></div>
<div class="ttc" id="aclasshcal_1_1HcalDetectorMap_html_a64e9061e89c3d90fae0bdece25648f2c"><div class="ttname"><a href="classhcal_1_1HcalDetectorMap.html#a64e9061e89c3d90fae0bdece25648f2c">hcal::HcalDetectorMap::CONDITIONS_OBJECT_NAME</a></div><div class="ttdeci">static constexpr const char * CONDITIONS_OBJECT_NAME</div><div class="ttdoc">The name of the EID &lt;-&gt; DetID map for the ECal.</div><div class="ttdef"><b>Definition:</b> <a href="HcalDetectorMap_8h_source.html#l00038">HcalDetectorMap.h:38</a></div></div>
<div class="ttc" id="aclasshcal_1_1HcalRawDecoder_html_abc6800a26a75580894508987e4d4dcff"><div class="ttname"><a href="classhcal_1_1HcalRawDecoder.html#abc6800a26a75580894508987e4d4dcff">hcal::HcalRawDecoder::read</a></div><div class="ttdeci">std::map&lt; ldmx::HcalElectronicsID, std::vector&lt; ldmx::HgcrocDigiCollection::Sample &gt; &gt; read(ReaderType &amp;reader, PolarfireEventHeader &amp;eh)</div><div class="ttdef"><b>Definition:</b> <a href="HcalRawDecoder_8cxx_source.html#l00140">HcalRawDecoder.cxx:140</a></div></div>
<div class="ttc" id="aclasshcal_1_1utility_1_1Reader_html"><div class="ttname"><a href="classhcal_1_1utility_1_1Reader.html">hcal::utility::Reader</a></div><div class="ttdef"><b>Definition:</b> <a href="HcalRawDecoder_8cxx_source.html#l00025">HcalRawDecoder.cxx:25</a></div></div>
<div class="ttc" id="aclassldmx_1_1HcalElectronicsID_html"><div class="ttname"><a href="classldmx_1_1HcalElectronicsID.html">ldmx::HcalElectronicsID</a></div><div class="ttdoc">Identifies a location in the Hcal readout chain.</div><div class="ttdef"><b>Definition:</b> <a href="HcalElectronicsID_8h_source.html#l00026">HcalElectronicsID.h:26</a></div></div>
<div class="ttc" id="aclassldmx_1_1HgcrocDigiCollection_html"><div class="ttname"><a href="classldmx_1_1HgcrocDigiCollection.html">ldmx::HgcrocDigiCollection</a></div><div class="ttdoc">Represents a collection of the digi hits readout by an HGCROC.</div><div class="ttdef"><b>Definition:</b> <a href="HgcrocDigiCollection_8h_source.html#l00042">HgcrocDigiCollection.h:42</a></div></div>
<div class="ttc" id="aclassldmx_1_1HgcrocDigiCollection_html_a49b29a90c1b5595c224362ae682474ae"><div class="ttname"><a href="classldmx_1_1HgcrocDigiCollection.html#a49b29a90c1b5595c224362ae682474ae">ldmx::HgcrocDigiCollection::getNumSamplesPerDigi</a></div><div class="ttdeci">unsigned int getNumSamplesPerDigi() const</div><div class="ttdef"><b>Definition:</b> <a href="HgcrocDigiCollection_8h_source.html#l00363">HgcrocDigiCollection.h:363</a></div></div>
<div class="ttc" id="aclassldmx_1_1HgcrocDigiCollection_html_a710b705f129831a7029b9b42c3dcdf23"><div class="ttname"><a href="classldmx_1_1HgcrocDigiCollection.html#a710b705f129831a7029b9b42c3dcdf23">ldmx::HgcrocDigiCollection::setNumSamplesPerDigi</a></div><div class="ttdeci">void setNumSamplesPerDigi(unsigned int n)</div><div class="ttdef"><b>Definition:</b> <a href="HgcrocDigiCollection_8h_source.html#l00369">HgcrocDigiCollection.h:369</a></div></div>
<div class="ttc" id="aclassldmx_1_1HgcrocDigiCollection_html_aa7400fd63b92e03d22f94898630f1f77"><div class="ttname"><a href="classldmx_1_1HgcrocDigiCollection.html#aa7400fd63b92e03d22f94898630f1f77">ldmx::HgcrocDigiCollection::setSampleOfInterestIndex</a></div><div class="ttdeci">void setSampleOfInterestIndex(unsigned int n)</div><div class="ttdef"><b>Definition:</b> <a href="HgcrocDigiCollection_8h_source.html#l00388">HgcrocDigiCollection.h:388</a></div></div>
<div class="ttc" id="aclassldmx_1_1HgcrocDigiCollection_html_abe9ba46a6f93aedf901a6d8209ea0408"><div class="ttname"><a href="classldmx_1_1HgcrocDigiCollection.html#abe9ba46a6f93aedf901a6d8209ea0408">ldmx::HgcrocDigiCollection::setVersion</a></div><div class="ttdeci">void setVersion(int v)</div><div class="ttdef"><b>Definition:</b> <a href="HgcrocDigiCollection_8h_source.html#l00354">HgcrocDigiCollection.h:354</a></div></div>
<div class="ttc" id="aclassldmx_1_1HgcrocDigiCollection_html_ad6607762651c38c82453a787dd2da582"><div class="ttname"><a href="classldmx_1_1HgcrocDigiCollection.html#ad6607762651c38c82453a787dd2da582">ldmx::HgcrocDigiCollection::addDigi</a></div><div class="ttdeci">void addDigi(unsigned int id, const std::vector&lt; Sample &gt; &amp;digi)</div></div>
<div class="ttc" id="aclassldmx_1_1HgcrocDigiCollection_html_ae3580a8a632b91b0ff4265346cc74715"><div class="ttname"><a href="classldmx_1_1HgcrocDigiCollection.html#ae3580a8a632b91b0ff4265346cc74715">ldmx::HgcrocDigiCollection::getNumDigis</a></div><div class="ttdeci">unsigned int getNumDigis() const</div><div class="ttdef"><b>Definition:</b> <a href="HgcrocDigiCollection_8h_source.html#l00412">HgcrocDigiCollection.h:412</a></div></div>
<div class="ttc" id="aclasspacking_1_1utility_1_1Reader_html_a6b5ae36ce746cc77969bbafb0a0d661f"><div class="ttname"><a href="classpacking_1_1utility_1_1Reader.html#a6b5ae36ce746cc77969bbafb0a0d661f">packing::utility::Reader::eof</a></div><div class="ttdeci">bool eof()</div><div class="ttdef"><b>Definition:</b> <a href="Reader_8h_source.html#l00215">Reader.h:215</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classldmx_1_1HgcrocDigiCollection.html#ad6607762651c38c82453a787dd2da582">ldmx::HgcrocDigiCollection::addDigi()</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00099">hcal::PolarfireEventHeader::board()</a>, <a class="el" href="HcalDetectorMap_8h_source.html#l00038">hcal::HcalDetectorMap::CONDITIONS_OBJECT_NAME</a>, <a class="el" href="Reader_8h_source.html#l00215">packing::utility::Reader::eof()</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00600">file_reader_</a>, <a class="el" href="Event_8h_source.html#l00366">framework::Event::getCollection()</a>, <a class="el" href="HgcrocDigiCollection_8h_source.html#l00412">ldmx::HgcrocDigiCollection::getNumDigis()</a>, <a class="el" href="HgcrocDigiCollection_8h_source.html#l00363">ldmx::HgcrocDigiCollection::getNumSamplesPerDigi()</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00584">input_names_</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00586">input_pass_</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00588">output_name_</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00140">read()</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00596">read_from_file_</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00592">roc_version_</a>, <a class="el" href="HgcrocDigiCollection_8h_source.html#l00369">ldmx::HgcrocDigiCollection::setNumSamplesPerDigi()</a>, <a class="el" href="HgcrocDigiCollection_8h_source.html#l00388">ldmx::HgcrocDigiCollection::setSampleOfInterestIndex()</a>, <a class="el" href="HgcrocDigiCollection_8h_source.html#l00354">ldmx::HgcrocDigiCollection::setVersion()</a>, and <a class="el" href="HcalRawDecoder_8cxx_source.html#l00594">translate_eid_</a>.</p>

</div>
</div>
<a id="abc6800a26a75580894508987e4d4dcff" name="abc6800a26a75580894508987e4d4dcff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc6800a26a75580894508987e4d4dcff">&#9670;&#160;</a></span>read()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ReaderType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; <a class="el" href="classldmx_1_1HcalElectronicsID.html">ldmx::HcalElectronicsID</a>, std::vector&lt; <a class="el" href="classldmx_1_1HgcrocDigiCollection_1_1Sample.html">ldmx::HgcrocDigiCollection::Sample</a> &gt; &gt; hcal::HcalRawDecoder::read </td>
          <td>(</td>
          <td class="paramtype">ReaderType &amp;&#160;</td>
          <td class="paramname"><em>reader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhcal_1_1PolarfireEventHeader.html">PolarfireEventHeader</a> &amp;&#160;</td>
          <td class="paramname"><em>eh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Assume input reader behaves like a binary data input stream where we can "pop" individual 32-bit words with operator&gt;&gt; and we can check if the reader is done using operator bool() </p>
<p >Static parameters depending on ROC version</p>
<p >words for reading and decoding</p>
<p >Decode event header</p>
<p >For the time being, the number of sample lengths is fixed to make the firmware for DMA readout simpler. This means we readout the leftover dummy words to move the pointer on the reader.</p>
<p >extended event header in version 2</p>
<p >Re-sort the data from grouped by bunch to by channel</p>
<p >The readout chip streams the data off of it, so it doesn't have time to re-group the signals across multiple bunches (samples) by their channel ID. We need to do that here.</p>
<p >Decode Bunch Header We have a few words of header material before the actual data. This header material is assumed to be encoded as in Table 3 of the DAQ specs.</p>
<p >&lt;name&gt; (bits)</p>
<p >VERSION (4) | FPGA_ID (8) | NLINKS (6) | 00 | LEN (12) BX ID (12) | RREQ (10) | OR (10) RID ok (1) | CRC ok (1) | LEN3 (6) | RID ok (1) | CRC ok (1) | LEN2 (6) | RID ok (1) | CRC ok (1) | LEN1 (6) | RID ok (1) | CRC ok (1) | LEN0 (6) ... other listing of links ...</p>
<p >Decode Each Link in Sequence Now we should be decoding each link serially where each link was encoded as in Table 4 of the DAQ specs</p>
<p >ROC_ID (16) | CRC ok (1) | 0 (7) | RO Map (8) RO Map (32)</p>
<p >If minimum length of 2 is not written for this link, assume it went down and skip</p>
<p >Special "Header" Word from ROC</p>
<p >version 3: 0101 | BXID (12) | RREQ (6) | OR (3) | HE (3) | 0101</p>
<p >version 2: 10101010 | BXID (12) | WADD (9) | 1010</p>
<p >Common Mode Channels 10 | 0000000000 | Common Mode ADC 0 (10) | Common Mode ADC 1 (10)</p>
<p >DAQ Channels</p>
<p >The HGC ROC has some odd behavior in terms of reading out the different channels.</p><ul>
<li>extra header word in row j = 0</li>
<li>common mode channel in row (j) number 19 or 1 (depending on the version)</li>
<li><p class="startli">calib channel in row j = 20 This introduces a special shift for the channel number to "align" with the range 0-35 per link.</p>
<p class="startli">polarfire fpga = fpga readout roc = i_link / 2 // integer division channel = j - 1 - (j &gt; common_mode_channel)*1 - (j &gt; calib_channel)*1</p>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="HcalRawDecoder_8cxx_source.html#l00140">140</a> of file <a class="el" href="HcalRawDecoder_8cxx_source.html">HcalRawDecoder.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  140</span>                                                     {</div>
<div class="line"><span class="lineno">  144</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> common_mode_channel = <a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#ae2d6d2472517d99dc354918d409662be">roc_version_</a> == 2 ? 19 : 1;</div>
<div class="line"><span class="lineno">  145</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> calib_channel = 20;</div>
<div class="line"><span class="lineno">  147</span>    <span class="keyword">static</span> uint32_t head1, head2, w;</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>    <span class="comment">// special header words not counted in event length</span></div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno">  151</span>      reader &gt;&gt; head1;</div>
<div class="line"><span class="lineno">  152</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  153</span>      <span class="keywordflow">if</span> (head1 == 0xbeef2021) {</div>
<div class="line"><span class="lineno">  154</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;Signal words imply version 1&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  155</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (head1 == 0xbeef2022) {</div>
<div class="line"><span class="lineno">  156</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;Signal words imply version 2&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  157</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  158</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;Extra header (inserted by rogue): &quot;</span> &lt;&lt; debug::hex(head1)</div>
<div class="line"><span class="lineno">  159</span>                  &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  160</span>      }</div>
<div class="line"><span class="lineno">  161</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  162</span>    } <span class="keywordflow">while</span> (head1 != 0xbeef2021 and head1 != 0xbeef2022);</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  167</span>    <span class="keywordtype">long</span> <span class="keywordtype">int</span> eventlen;</div>
<div class="line"><span class="lineno">  168</span>    <span class="keywordtype">long</span> <span class="keywordtype">int</span> i_event{0};</div>
<div class="line"><span class="lineno">  169</span>    <span class="comment">/* whole event header word looks like</span></div>
<div class="line"><span class="lineno">  170</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  171</span><span class="comment">     * VERSION (4) | FPGA ID (8) | NSAMPLES (4) | LEN (16)</span></div>
<div class="line"><span class="lineno">  172</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  173</span>    reader &gt;&gt; head1;</div>
<div class="line"><span class="lineno">  174</span>    i_event++;</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>    eh.version = (head1 &gt;&gt; 28) &amp; packing::utility::mask&lt;4&gt;;</div>
<div class="line"><span class="lineno">  177</span>    eh.fpga = (head1 &gt;&gt; 20) &amp; packing::utility::mask&lt;8&gt;;</div>
<div class="line"><span class="lineno">  178</span>    eh.nsamples = (head1 &gt;&gt; 16) &amp; packing::utility::mask&lt;4&gt;;</div>
<div class="line"><span class="lineno">  179</span>    eventlen = head1 &amp; packing::utility::mask&lt;16&gt;;</div>
<div class="line"><span class="lineno">  180</span>    <span class="keywordflow">if</span> (eh.version == 1u) {</div>
<div class="line"><span class="lineno">  181</span>      <span class="comment">// eventlen is 32-bit words in event</span></div>
<div class="line"><span class="lineno">  182</span>      <span class="comment">// do nothing here</span></div>
<div class="line"><span class="lineno">  183</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (eh.version == 2u) {</div>
<div class="line"><span class="lineno">  184</span>      <span class="comment">// eventlen is 64-bit words in event,</span></div>
<div class="line"><span class="lineno">  185</span>      <span class="comment">// need to multiply by 2 to get actual 32-bit event length</span></div>
<div class="line"><span class="lineno">  186</span>      eventlen *= 2;</div>
<div class="line"><span class="lineno">  187</span>      <span class="comment">// and subtract off the special header word above</span></div>
<div class="line"><span class="lineno">  188</span>      eventlen -= 1;</div>
<div class="line"><span class="lineno">  189</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  190</span>      EXCEPTION_RAISE(</div>
<div class="line"><span class="lineno">  191</span>          <span class="stringliteral">&quot;VersMis&quot;</span>,</div>
<div class="line"><span class="lineno">  192</span>          <span class="stringliteral">&quot;HcalRawDecoder only knows version 1 and 2 of DAQ format.&quot;</span>);</div>
<div class="line"><span class="lineno">  193</span>    }</div>
<div class="line"><span class="lineno">  194</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  195</span>    std::cout &lt;&lt; debug::hex(head1) &lt;&lt; <span class="stringliteral">&quot; EventHeader(version = &quot;</span> &lt;&lt; eh.version</div>
<div class="line"><span class="lineno">  196</span>              &lt;&lt; <span class="stringliteral">&quot;, fpga = &quot;</span> &lt;&lt; eh.fpga &lt;&lt; <span class="stringliteral">&quot;, nsamples = &quot;</span> &lt;&lt; eh.nsamples</div>
<div class="line"><span class="lineno">  197</span>              &lt;&lt; <span class="stringliteral">&quot;, eventlen = &quot;</span> &lt;&lt; eventlen &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  198</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;Sample Lenghts: &quot;</span>;</div>
<div class="line"><span class="lineno">  199</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  200</span>    <span class="comment">// sample counters</span></div>
<div class="line"><span class="lineno">  201</span>    <span class="keywordtype">int</span> n_words{0};</div>
<div class="line"><span class="lineno">  202</span>    std::vector&lt;uint32_t&gt; length_per_sample(eh.nsamples, 0);</div>
<div class="line"><span class="lineno">  203</span>    <span class="keywordflow">for</span> (uint32_t i_sample{0}; i_sample &lt; eh.nsamples; i_sample++) {</div>
<div class="line"><span class="lineno">  204</span>      <span class="keywordflow">if</span> (i_sample % 2 == 0) {</div>
<div class="line"><span class="lineno">  205</span>        n_words++;</div>
<div class="line"><span class="lineno">  206</span>        reader &gt;&gt; w;</div>
<div class="line"><span class="lineno">  207</span>        i_event++;</div>
<div class="line"><span class="lineno">  208</span>      }</div>
<div class="line"><span class="lineno">  209</span>      uint32_t shift_in_word = 16 * (i_sample % 2);</div>
<div class="line"><span class="lineno">  210</span>      length_per_sample[i_sample] =</div>
<div class="line"><span class="lineno">  211</span>          (w &gt;&gt; shift_in_word) &amp; packing::utility::mask&lt;12&gt;;</div>
<div class="line"><span class="lineno">  212</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  213</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;len(&quot;</span> &lt;&lt; i_sample &lt;&lt; <span class="stringliteral">&quot;) = &quot;</span> &lt;&lt; length_per_sample[i_sample]</div>
<div class="line"><span class="lineno">  214</span>                &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno">  215</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  216</span>    }</div>
<div class="line"><span class="lineno">  217</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  218</span>    std::cout &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  219</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span>    <span class="keywordflow">if</span> (eh.version == 2) {</div>
<div class="line"><span class="lineno">  227</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  228</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;Padding words to reach 8 total sample length words.&quot;</span></div>
<div class="line"><span class="lineno">  229</span>                &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  230</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  231</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i_word{n_words}; i_word &lt; 8; i_word++) {</div>
<div class="line"><span class="lineno">  232</span>        reader &gt;&gt; head1;</div>
<div class="line"><span class="lineno">  233</span>        i_event++;</div>
<div class="line"><span class="lineno">  234</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  235</span>        std::cout &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; debug::hex(head1);</div>
<div class="line"><span class="lineno">  236</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  237</span>      }</div>
<div class="line"><span class="lineno">  238</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  239</span>      std::cout &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  240</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  245</span>      reader &gt;&gt; head1;</div>
<div class="line"><span class="lineno">  246</span>      i_event++;</div>
<div class="line"><span class="lineno">  247</span>      eh.spill = ((head1 &gt;&gt; 12) &amp; 0xfff);</div>
<div class="line"><span class="lineno">  248</span>      eh.bunch = (head1 &amp; 0xfff);</div>
<div class="line"><span class="lineno">  249</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  250</span>      std::cout &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; debug::hex(head1) &lt;&lt; <span class="stringliteral">&quot; Spill: &quot;</span> &lt;&lt; eh.spill</div>
<div class="line"><span class="lineno">  251</span>                &lt;&lt; <span class="stringliteral">&quot; Bunch: &quot;</span> &lt;&lt; eh.bunch &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  252</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  253</span>      reader &gt;&gt; head1;</div>
<div class="line"><span class="lineno">  254</span>      i_event++;</div>
<div class="line"><span class="lineno">  255</span>      eh.ticks = head1;</div>
<div class="line"><span class="lineno">  256</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  257</span>      std::cout &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; debug::hex(head1)</div>
<div class="line"><span class="lineno">  258</span>                &lt;&lt; <span class="stringliteral">&quot; 5 MHz Ticks since Spill: &quot;</span> &lt;&lt; head1</div>
<div class="line"><span class="lineno">  259</span>                &lt;&lt; <span class="stringliteral">&quot; Time: &quot;</span> &lt;&lt; head1 / 5e6 &lt;&lt; <span class="stringliteral">&quot;s&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  260</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  261</span>      reader &gt;&gt; head1;</div>
<div class="line"><span class="lineno">  262</span>      i_event++;</div>
<div class="line"><span class="lineno">  263</span>      eh.number = head1;</div>
<div class="line"><span class="lineno">  264</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  265</span>      std::cout &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; debug::hex(head1) &lt;&lt; <span class="stringliteral">&quot; Event Number: &quot;</span> &lt;&lt; head1</div>
<div class="line"><span class="lineno">  266</span>                &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  267</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  268</span>      reader &gt;&gt; head1;</div>
<div class="line"><span class="lineno">  269</span>      i_event++;</div>
<div class="line"><span class="lineno">  270</span>      eh.run = (head1 &amp; 0xFFF);</div>
<div class="line"><span class="lineno">  271</span>      eh.DD = (head1 &gt;&gt; 23) &amp; 0x1F;</div>
<div class="line"><span class="lineno">  272</span>      eh.MM = (head1 &gt;&gt; 28) &amp; 0xF;</div>
<div class="line"><span class="lineno">  273</span>      eh.hh = (head1 &gt;&gt; 18) &amp; 0x1F;</div>
<div class="line"><span class="lineno">  274</span>      eh.mm = (head1 &gt;&gt; 12) &amp; 0x3F;</div>
<div class="line"><span class="lineno">  275</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  276</span>      std::cout &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; debug::hex(head1) &lt;&lt; <span class="stringliteral">&quot; Run: &quot;</span> &lt;&lt; eh.run</div>
<div class="line"><span class="lineno">  277</span>                &lt;&lt; <span class="stringliteral">&quot; DD-MM hh:mm &quot;</span> &lt;&lt; eh.DD &lt;&lt; <span class="stringliteral">&quot;-&quot;</span> &lt;&lt; eh.MM &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; eh.hh</div>
<div class="line"><span class="lineno">  278</span>                &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; eh.mm &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  279</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  280</span>    }</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  289</span>    <span class="comment">// fill map of **electronic** IDs to the digis that were read out</span></div>
<div class="line"><span class="lineno">  290</span>    std::map&lt;<a class="code hl_class" href="classldmx_1_1HcalElectronicsID.html">ldmx::HcalElectronicsID</a>,</div>
<div class="line"><span class="lineno">  291</span>             std::vector&lt;ldmx::HgcrocDigiCollection::Sample&gt;&gt;</div>
<div class="line"><span class="lineno">  292</span>        eid_to_samples;</div>
<div class="line"><span class="lineno">  293</span>    std::size_t i_sample{0};</div>
<div class="line"><span class="lineno">  294</span>    <span class="keywordflow">while</span> (i_event &lt; eventlen) {</div>
<div class="line"><span class="lineno">  295</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  296</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;Decoding sample &quot;</span> &lt;&lt; i_sample &lt;&lt; <span class="stringliteral">&quot; on word &quot;</span> &lt;&lt; i_event</div>
<div class="line"><span class="lineno">  297</span>                &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  298</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  299</span>      reader &gt;&gt; head1 &gt;&gt; head2;</div>
<div class="line"><span class="lineno">  300</span>      i_event += 2;</div>
<div class="line"><span class="lineno">  316</span>      <a class="code hl_class" href="classpacking_1_1utility_1_1CRC.html">packing::utility::CRC</a> fpga_crc;</div>
<div class="line"><span class="lineno">  317</span>      fpga_crc &lt;&lt; head1;</div>
<div class="line"><span class="lineno">  318</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  319</span>      std::cout &lt;&lt; debug::hex(head1) &lt;&lt; <span class="stringliteral">&quot; : &quot;</span>;</div>
<div class="line"><span class="lineno">  320</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  321</span>      uint32_t hgcroc_version = (head1 &gt;&gt; 28) &amp; packing::utility::mask&lt;4&gt;;</div>
<div class="line"><span class="lineno">  322</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  323</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;hgcroc_version &quot;</span> &lt;&lt; hgcroc_version &lt;&lt; std::flush;</div>
<div class="line"><span class="lineno">  324</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  325</span>      uint32_t fpga = (head1 &gt;&gt; 20) &amp; packing::utility::mask&lt;8&gt;;</div>
<div class="line"><span class="lineno">  326</span>      uint32_t nlinks = (head1 &gt;&gt; 14) &amp; packing::utility::mask&lt;6&gt;;</div>
<div class="line"><span class="lineno">  327</span>      uint32_t len = head1 &amp; packing::utility::mask&lt;12&gt;;</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  330</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;, fpga: &quot;</span> &lt;&lt; fpga &lt;&lt; <span class="stringliteral">&quot;, nlinks: &quot;</span> &lt;&lt; nlinks</div>
<div class="line"><span class="lineno">  331</span>                &lt;&lt; <span class="stringliteral">&quot;, len: &quot;</span> &lt;&lt; len &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  332</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  333</span>      fpga_crc &lt;&lt; head2;</div>
<div class="line"><span class="lineno">  334</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  335</span>      std::cout &lt;&lt; debug::hex(head2) &lt;&lt; <span class="stringliteral">&quot; : &quot;</span>;</div>
<div class="line"><span class="lineno">  336</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>      uint32_t bx_id = (head2 &gt;&gt; 20) &amp; packing::utility::mask&lt;12&gt;;</div>
<div class="line"><span class="lineno">  339</span>      uint32_t rreq = (head2 &gt;&gt; 10) &amp; packing::utility::mask&lt;10&gt;;</div>
<div class="line"><span class="lineno">  340</span>      uint32_t orbit = head2 &amp; packing::utility::mask&lt;10&gt;;</div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  343</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;bx_id: &quot;</span> &lt;&lt; bx_id &lt;&lt; <span class="stringliteral">&quot;, rreq: &quot;</span> &lt;&lt; rreq</div>
<div class="line"><span class="lineno">  344</span>                &lt;&lt; <span class="stringliteral">&quot;, orbit: &quot;</span> &lt;&lt; orbit &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  345</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>      std::vector&lt;uint32_t&gt; length_per_link(nlinks, 0);</div>
<div class="line"><span class="lineno">  348</span>      <span class="keywordflow">for</span> (uint32_t i_link{0}; i_link &lt; nlinks; i_link++) {</div>
<div class="line"><span class="lineno">  349</span>        <span class="keywordflow">if</span> (i_link % 4 == 0) {</div>
<div class="line"><span class="lineno">  350</span>          i_event++;</div>
<div class="line"><span class="lineno">  351</span>          reader &gt;&gt; w;</div>
<div class="line"><span class="lineno">  352</span>          fpga_crc &lt;&lt; w;</div>
<div class="line"><span class="lineno">  353</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  354</span>          std::cout &lt;&lt; debug::hex(w) &lt;&lt; <span class="stringliteral">&quot; : Four Link Pack &quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  355</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  356</span>        }</div>
<div class="line"><span class="lineno">  357</span>        uint32_t shift_in_word = 8 * (i_link % 4);</div>
<div class="line"><span class="lineno">  358</span>        <span class="keywordtype">bool</span> rid_ok =</div>
<div class="line"><span class="lineno">  359</span>            (w &gt;&gt; (shift_in_word + 7)) &amp; packing::utility::mask&lt;1&gt; == 1;</div>
<div class="line"><span class="lineno">  360</span>        <span class="keywordtype">bool</span> cdc_ok =</div>
<div class="line"><span class="lineno">  361</span>            (w &gt;&gt; (shift_in_word + 6)) &amp; packing::utility::mask&lt;1&gt; == 1;</div>
<div class="line"><span class="lineno">  362</span>        length_per_link[i_link] =</div>
<div class="line"><span class="lineno">  363</span>            (w &gt;&gt; shift_in_word) &amp; packing::utility::mask&lt;6&gt;;</div>
<div class="line"><span class="lineno">  364</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  365</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;  Link &quot;</span> &lt;&lt; i_link &lt;&lt; <span class="stringliteral">&quot; readout &quot;</span></div>
<div class="line"><span class="lineno">  366</span>                  &lt;&lt; length_per_link.at(i_link) &lt;&lt; <span class="stringliteral">&quot; channels&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  367</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  368</span>      }</div>
<div class="line"><span class="lineno">  369</span> </div>
<div class="line"><span class="lineno">  378</span>      eh.good_bxheader.resize(nlinks);</div>
<div class="line"><span class="lineno">  379</span>      eh.good_trailer.resize(nlinks);</div>
<div class="line"><span class="lineno">  380</span>      <span class="keywordflow">for</span> (uint32_t i_link{0}; i_link &lt; nlinks; i_link++) {</div>
<div class="line"><span class="lineno">  381</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  382</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;RO Link &quot;</span> &lt;&lt; i_link &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  383</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  388</span>        <span class="keywordflow">if</span> (length_per_link.at(i_link) &lt; 2) {</div>
<div class="line"><span class="lineno">  389</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  390</span>          std::cout &lt;&lt; <span class="stringliteral">&quot;DOWN&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  391</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  392</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  393</span>        }</div>
<div class="line"><span class="lineno">  394</span>        <span class="comment">// move on from last word counting links or previous link</span></div>
<div class="line"><span class="lineno">  395</span>        <a class="code hl_class" href="classpacking_1_1utility_1_1CRC.html">packing::utility::CRC</a> link_crc;</div>
<div class="line"><span class="lineno">  396</span>        i_event++;</div>
<div class="line"><span class="lineno">  397</span>        reader &gt;&gt; w;</div>
<div class="line"><span class="lineno">  398</span>        fpga_crc &lt;&lt; w;</div>
<div class="line"><span class="lineno">  399</span>        link_crc &lt;&lt; w;</div>
<div class="line"><span class="lineno">  400</span>        uint32_t roc_id = (w &gt;&gt; 16) &amp; packing::utility::mask&lt;16&gt;;</div>
<div class="line"><span class="lineno">  401</span>        <span class="keywordtype">bool</span> crc_ok = (w &gt;&gt; 15) &amp; packing::utility::mask&lt;1&gt; == 1;</div>
<div class="line"><span class="lineno">  402</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  403</span>        std::cout &lt;&lt; debug::hex(w) &lt;&lt; <span class="stringliteral">&quot; : roc_id &quot;</span> &lt;&lt; roc_id</div>
<div class="line"><span class="lineno">  404</span>                  &lt;&lt; <span class="stringliteral">&quot;, crc_ok (v2 always false) &quot;</span> &lt;&lt; std::boolalpha &lt;&lt; crc_ok</div>
<div class="line"><span class="lineno">  405</span>                  &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  406</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span>        <span class="comment">// get readout map from the last 8 bits of this word</span></div>
<div class="line"><span class="lineno">  409</span>        <span class="comment">// and the entire next word</span></div>
<div class="line"><span class="lineno">  410</span>        std::bitset&lt;40&gt; ro_map = w &amp; packing::utility::mask&lt;8&gt;;</div>
<div class="line"><span class="lineno">  411</span>        ro_map &lt;&lt;= 32;</div>
<div class="line"><span class="lineno">  412</span>        i_event++;</div>
<div class="line"><span class="lineno">  413</span>        reader &gt;&gt; w;</div>
<div class="line"><span class="lineno">  414</span>        fpga_crc &lt;&lt; w;</div>
<div class="line"><span class="lineno">  415</span>        link_crc &lt;&lt; w;</div>
<div class="line"><span class="lineno">  416</span>        ro_map |= w;</div>
<div class="line"><span class="lineno">  417</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  418</span>        std::cout &lt;&lt; debug::hex(w) &lt;&lt; <span class="stringliteral">&quot; : lower 32 bits of RO map&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  419</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;Start looping through &quot;</span> &lt;&lt; length_per_link.at(i_link)</div>
<div class="line"><span class="lineno">  420</span>                  &lt;&lt; <span class="stringliteral">&quot; words for this link&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  421</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  422</span>        <span class="comment">// loop through channels on this link,</span></div>
<div class="line"><span class="lineno">  423</span>        <span class="comment">//  since some channels may have been suppressed because of low</span></div>
<div class="line"><span class="lineno">  424</span>        <span class="comment">//  amplitude the channel ID is not the same as the index it</span></div>
<div class="line"><span class="lineno">  425</span>        <span class="comment">//  is listed in.</span></div>
<div class="line"><span class="lineno">  426</span>        <span class="keywordtype">int</span> j{-1};</div>
<div class="line"><span class="lineno">  427</span>        <span class="keywordflow">for</span> (uint32_t i_word{2}; i_word &lt; length_per_link.at(i_link);</div>
<div class="line"><span class="lineno">  428</span>             i_word++) {</div>
<div class="line"><span class="lineno">  429</span>          <span class="comment">// skip zero-suppressed channel IDs</span></div>
<div class="line"><span class="lineno">  430</span>          <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno">  431</span>            j++;</div>
<div class="line"><span class="lineno">  432</span>          } <span class="keywordflow">while</span> (j &lt; 40 and not ro_map.test(j));</div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>          <span class="comment">// next word is this channel</span></div>
<div class="line"><span class="lineno">  435</span>          i_event++;</div>
<div class="line"><span class="lineno">  436</span>          reader &gt;&gt; w;</div>
<div class="line"><span class="lineno">  437</span>          fpga_crc &lt;&lt; w;</div>
<div class="line"><span class="lineno">  438</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  439</span>          std::cout &lt;&lt; debug::hex(w) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; j;</div>
<div class="line"><span class="lineno">  440</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  441</span> </div>
<div class="line"><span class="lineno">  442</span>          <span class="keywordflow">if</span> (j == 0) {</div>
<div class="line"><span class="lineno">  451</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  452</span>            std::cout &lt;&lt; <span class="stringliteral">&quot; : ROC Header&quot;</span>;</div>
<div class="line"><span class="lineno">  453</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  454</span>            link_crc &lt;&lt; w;</div>
<div class="line"><span class="lineno">  455</span>            <span class="comment">// v2</span></div>
<div class="line"><span class="lineno">  456</span>            eh.good_bxheader[i_link] = ((w &amp; 0xff000000) == 0xaa000000);</div>
<div class="line"><span class="lineno">  457</span>            <span class="comment">// v3</span></div>
<div class="line"><span class="lineno">  458</span>            uint32_t bx_id = (w &gt;&gt; 16) &amp; packing::utility::mask&lt;12&gt;;</div>
<div class="line"><span class="lineno">  459</span>            uint32_t short_event = (w &gt;&gt; 10) &amp; packing::utility::mask&lt;6&gt;;</div>
<div class="line"><span class="lineno">  460</span>            uint32_t short_orbit = (w &gt;&gt; 7) &amp; packing::utility::mask&lt;3&gt;;</div>
<div class="line"><span class="lineno">  461</span>            uint32_t hamming_errs = (w &gt;&gt; 4) &amp; packing::utility::mask&lt;3&gt;;</div>
<div class="line"><span class="lineno">  462</span>          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (j == common_mode_channel) {</div>
<div class="line"><span class="lineno">  466</span>            link_crc &lt;&lt; w;</div>
<div class="line"><span class="lineno">  467</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  468</span>            std::cout &lt;&lt; <span class="stringliteral">&quot; : Common Mode&quot;</span>;</div>
<div class="line"><span class="lineno">  469</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  470</span>          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (j == calib_channel) {</div>
<div class="line"><span class="lineno">  471</span>            <span class="comment">// calib channel</span></div>
<div class="line"><span class="lineno">  472</span>            link_crc &lt;&lt; w;</div>
<div class="line"><span class="lineno">  473</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  474</span>            std::cout &lt;&lt; <span class="stringliteral">&quot; : Calib&quot;</span>;</div>
<div class="line"><span class="lineno">  475</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  476</span>          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (j == 39) {</div>
<div class="line"><span class="lineno">  477</span>            <span class="comment">// trailer on each link added by ROC</span></div>
<div class="line"><span class="lineno">  478</span>            <span class="comment">// ROC v2 - IDLE word</span></div>
<div class="line"><span class="lineno">  479</span>            <span class="comment">// ROC v3 - CRC checksum</span></div>
<div class="line"><span class="lineno">  480</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classhcal_1_1HcalRawDecoder.html#ae2d6d2472517d99dc354918d409662be">roc_version_</a> == 2) {</div>
<div class="line"><span class="lineno">  481</span>              <span class="keywordtype">bool</span> good_idle = (w == 0xaccccccc);</div>
<div class="line"><span class="lineno">  482</span>              eh.good_trailer[i_link] = good_idle;</div>
<div class="line"><span class="lineno">  483</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  484</span>              std::cout &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; (good_idle?<span class="stringliteral">&quot;Good&quot;</span>:<span class="stringliteral">&quot;Bad&quot;</span>) &lt;&lt; <span class="stringliteral">&quot; Idle&quot;</span>;</div>
<div class="line"><span class="lineno">  485</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  486</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  487</span>              <span class="keywordtype">bool</span> good_crc = (link_crc.<a class="code hl_function" href="classpacking_1_1utility_1_1CRC.html#a39bd7de79bc06f86ad7b9e1c8e68dbee">get</a>() == w);</div>
<div class="line"><span class="lineno">  488</span>              eh.good_trailer[i_link] = good_crc;</div>
<div class="line"><span class="lineno">  489</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  490</span>              std::cout &lt;&lt; <span class="stringliteral">&quot; : CRC checksum  : &quot;</span> &lt;&lt; debug::hex(link_crc.<a class="code hl_function" href="classpacking_1_1utility_1_1CRC.html#a39bd7de79bc06f86ad7b9e1c8e68dbee">get</a>()) &lt;&lt; <span class="stringliteral">&quot; =? &quot;</span> &lt;&lt; debug::hex(w);</div>
<div class="line"><span class="lineno">  491</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  492</span>            }</div>
<div class="line"><span class="lineno">  493</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  494</span><span class="comment">            if (roc_version_ &gt; 2 and link_crc.get() != w) {</span></div>
<div class="line"><span class="lineno">  495</span><span class="comment">              EXCEPTION_RAISE(&quot;BadCRC&quot;,</span></div>
<div class="line"><span class="lineno">  496</span><span class="comment">                              &quot;Our calculated link checksum doesn&#39;t match the &quot;</span></div>
<div class="line"><span class="lineno">  497</span><span class="comment">                              &quot;one from raw data.&quot;);</span></div>
<div class="line"><span class="lineno">  498</span><span class="comment">            }</span></div>
<div class="line"><span class="lineno">  499</span><span class="comment">            */</span></div>
<div class="line"><span class="lineno">  500</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  502</span> </div>
<div class="line"><span class="lineno">  503</span>            link_crc &lt;&lt; w;</div>
<div class="line"><span class="lineno">  519</span>            <a class="code hl_class" href="classldmx_1_1HcalElectronicsID.html">ldmx::HcalElectronicsID</a> eid(fpga, i_link,</div>
<div class="line"><span class="lineno">  520</span>                                        j - 1 - 1 * (j &gt; common_mode_channel) -</div>
<div class="line"><span class="lineno">  521</span>                                            1 * (j &gt; calib_channel));</div>
<div class="line"><span class="lineno">  522</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  523</span>            std::cout &lt;&lt; <span class="stringliteral">&quot; : DAQ Channel &quot;</span>;</div>
<div class="line"><span class="lineno">  524</span>            std::cout &lt;&lt; <span class="stringliteral">&quot;EID(&quot;</span> &lt;&lt; eid.fiber() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; eid.elink() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span></div>
<div class="line"><span class="lineno">  525</span>                      &lt;&lt; eid.channel() &lt;&lt; <span class="stringliteral">&quot;) &quot;</span>;</div>
<div class="line"><span class="lineno">  526</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  527</span>            <span class="comment">// copy data into EID-&gt;sample map</span></div>
<div class="line"><span class="lineno">  528</span>            eid_to_samples[eid].emplace_back(w);</div>
<div class="line"><span class="lineno">  529</span>          }  <span class="comment">// type of channel</span></div>
<div class="line"><span class="lineno">  530</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  531</span>          std::cout &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  532</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  533</span>        }  <span class="comment">// loop over channels (j in Table 4)</span></div>
<div class="line"><span class="lineno">  534</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  535</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;done looping through channels&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  536</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  537</span>      }  <span class="comment">// loop over links</span></div>
<div class="line"><span class="lineno">  538</span> </div>
<div class="line"><span class="lineno">  539</span>      <span class="comment">// another CRC checksum from FPGA</span></div>
<div class="line"><span class="lineno">  540</span>      i_event++;</div>
<div class="line"><span class="lineno">  541</span>      reader &gt;&gt; w;</div>
<div class="line"><span class="lineno">  542</span>      uint32_t crc = w;</div>
<div class="line"><span class="lineno">  543</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  544</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;Done with sample &quot;</span> &lt;&lt; i_sample &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  545</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;FPGA Checksum : &quot;</span> &lt;&lt; debug::hex(fpga_crc.<a class="code hl_function" href="classpacking_1_1utility_1_1CRC.html#a39bd7de79bc06f86ad7b9e1c8e68dbee">get</a>()) &lt;&lt; <span class="stringliteral">&quot; =? &quot;</span></div>
<div class="line"><span class="lineno">  546</span>                &lt;&lt; debug::hex(crc) &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  547</span>      std::cout &lt;&lt; <span class="stringliteral">&quot; N Sample Words : &quot;</span> &lt;&lt; length_per_sample.at(i_sample)</div>
<div class="line"><span class="lineno">  548</span>                &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  549</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  550</span>      <span class="comment">/* TODO</span></div>
<div class="line"><span class="lineno">  551</span><span class="comment">       *  fix calculation of FPGA checksum</span></div>
<div class="line"><span class="lineno">  552</span><span class="comment">       *  I can&#39;t figure out why it isn&#39;t matching, but there</span></div>
<div class="line"><span class="lineno">  553</span><span class="comment">       *  is definitely a word here where the FPGA checksum would be.</span></div>
<div class="line"><span class="lineno">  554</span><span class="comment">      if (fpga_crc.get() != crc) {</span></div>
<div class="line"><span class="lineno">  555</span><span class="comment">        EXCEPTION_RAISE(</span></div>
<div class="line"><span class="lineno">  556</span><span class="comment">            &quot;BadCRC&quot;,</span></div>
<div class="line"><span class="lineno">  557</span><span class="comment">            &quot;Our calculated FPGA checksum doesn&#39;t match the one read in.&quot;);</span></div>
<div class="line"><span class="lineno">  558</span><span class="comment">      }</span></div>
<div class="line"><span class="lineno">  559</span><span class="comment">      */</span></div>
<div class="line"><span class="lineno">  560</span>      <span class="comment">// padding to reach 64-bit boundary in version 2</span></div>
<div class="line"><span class="lineno">  561</span>      <span class="keywordflow">if</span> (eh.version == 2u and length_per_sample.at(i_sample) % 2 == 1) {</div>
<div class="line"><span class="lineno">  562</span>        i_event++;</div>
<div class="line"><span class="lineno">  563</span>        reader &gt;&gt; head1;</div>
<div class="line"><span class="lineno">  564</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="lineno">  565</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;Padding to reach 64-bit boundary: &quot;</span> &lt;&lt; debug::hex(head1)</div>
<div class="line"><span class="lineno">  566</span>                  &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  567</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  568</span>      }</div>
<div class="line"><span class="lineno">  569</span>      i_sample++;</div>
<div class="line"><span class="lineno">  570</span>    }</div>
<div class="line"><span class="lineno">  571</span> </div>
<div class="line"><span class="lineno">  572</span>    <span class="keywordflow">if</span> (eh.version == 1u) {</div>
<div class="line"><span class="lineno">  573</span>      <span class="comment">// special footer words</span></div>
<div class="line"><span class="lineno">  574</span>      reader &gt;&gt; head1 &gt;&gt; head2;</div>
<div class="line"><span class="lineno">  575</span>    }</div>
<div class="line"><span class="lineno">  576</span> </div>
<div class="line"><span class="lineno">  577</span>    <span class="keywordflow">return</span> eid_to_samples;</div>
<div class="line"><span class="lineno">  578</span>  }</div>
<div class="ttc" id="aclasspacking_1_1utility_1_1CRC_html"><div class="ttname"><a href="classpacking_1_1utility_1_1CRC.html">packing::utility::CRC</a></div><div class="ttdef"><b>Definition:</b> <a href="CRC_8h_source.html#l00050">CRC.h:50</a></div></div>
<div class="ttc" id="aclasspacking_1_1utility_1_1CRC_html_a39bd7de79bc06f86ad7b9e1c8e68dbee"><div class="ttname"><a href="classpacking_1_1utility_1_1CRC.html#a39bd7de79bc06f86ad7b9e1c8e68dbee">packing::utility::CRC::get</a></div><div class="ttdeci">uint32_t get()</div><div class="ttdef"><b>Definition:</b> <a href="CRC_8h_source.html#l00108">CRC.h:108</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="HcalRawDecoder_8cxx_source.html#l00078">hcal::PolarfireEventHeader::bunch</a>, <a class="el" href="HcalElectronicsID_8h_source.html#l00091">ldmx::HcalElectronicsID::channel()</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00084">hcal::PolarfireEventHeader::DD</a>, <a class="el" href="HcalElectronicsID_8h_source.html#l00086">ldmx::HcalElectronicsID::elink()</a>, <a class="el" href="HcalElectronicsID_8h_source.html#l00081">ldmx::HcalElectronicsID::fiber()</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00070">hcal::PolarfireEventHeader::fpga</a>, <a class="el" href="CRC_8h_source.html#l00108">packing::utility::CRC::get()</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00092">hcal::PolarfireEventHeader::good_bxheader</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00094">hcal::PolarfireEventHeader::good_trailer</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00088">hcal::PolarfireEventHeader::hh</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00086">hcal::PolarfireEventHeader::MM</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00090">hcal::PolarfireEventHeader::mm</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00072">hcal::PolarfireEventHeader::nsamples</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00080">hcal::PolarfireEventHeader::number</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00592">roc_version_</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00082">hcal::PolarfireEventHeader::run</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00074">hcal::PolarfireEventHeader::spill</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00076">hcal::PolarfireEventHeader::ticks</a>, and <a class="el" href="HcalRawDecoder_8cxx_source.html#l00068">hcal::PolarfireEventHeader::version</a>.</p>

<p class="reference">Referenced by <a class="el" href="HcalRawDecoder_8cxx_source.html#l00624">produce()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a01be7b9afb6ad869d9c0cf1ec061a554" name="a01be7b9afb6ad869d9c0cf1ec061a554"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01be7b9afb6ad869d9c0cf1ec061a554">&#9670;&#160;</a></span>detector_name_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string hcal::HcalRawDecoder::detector_name_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>the detector name if we are reading from a file </p>

<p class="definition">Definition at line <a class="el" href="HcalRawDecoder_8cxx_source.html#l00590">590</a> of file <a class="el" href="HcalRawDecoder_8cxx_source.html">HcalRawDecoder.cxx</a>.</p>

<p class="reference">Referenced by <a class="el" href="HcalRawDecoder_8cxx_source.html#l00617">beforeNewRun()</a>, and <a class="el" href="HcalRawDecoder_8cxx_source.html#l00603">configure()</a>.</p>

</div>
</div>
<a id="a693196e84aabd7060558dfbc915133ab" name="a693196e84aabd7060558dfbc915133ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a693196e84aabd7060558dfbc915133ab">&#9670;&#160;</a></span>file_reader_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classpacking_1_1utility_1_1Reader.html">packing::utility::Reader</a> hcal::HcalRawDecoder::file_reader_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>the file reader (if we are doing that) </p>

<p class="definition">Definition at line <a class="el" href="HcalRawDecoder_8cxx_source.html#l00600">600</a> of file <a class="el" href="HcalRawDecoder_8cxx_source.html">HcalRawDecoder.cxx</a>.</p>

<p class="reference">Referenced by <a class="el" href="HcalRawDecoder_8cxx_source.html#l00603">configure()</a>, and <a class="el" href="HcalRawDecoder_8cxx_source.html#l00624">produce()</a>.</p>

</div>
</div>
<a id="a4e1d6e1e21720c7f9118ef299dfd8ff3" name="a4e1d6e1e21720c7f9118ef299dfd8ff3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e1d6e1e21720c7f9118ef299dfd8ff3">&#9670;&#160;</a></span>input_file_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string hcal::HcalRawDecoder::input_file_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>input file of encoded data </p>

<p class="definition">Definition at line <a class="el" href="HcalRawDecoder_8cxx_source.html#l00582">582</a> of file <a class="el" href="HcalRawDecoder_8cxx_source.html">HcalRawDecoder.cxx</a>.</p>

<p class="reference">Referenced by <a class="el" href="HcalRawDecoder_8cxx_source.html#l00603">configure()</a>.</p>

</div>
</div>
<a id="a969c6943a127904e4c47b07c03dc030c" name="a969c6943a127904e4c47b07c03dc030c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a969c6943a127904e4c47b07c03dc030c">&#9670;&#160;</a></span>input_names_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; hcal::HcalRawDecoder::input_names_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>input object of encoded data </p>

<p class="definition">Definition at line <a class="el" href="HcalRawDecoder_8cxx_source.html#l00584">584</a> of file <a class="el" href="HcalRawDecoder_8cxx_source.html">HcalRawDecoder.cxx</a>.</p>

<p class="reference">Referenced by <a class="el" href="HcalRawDecoder_8cxx_source.html#l00603">configure()</a>, and <a class="el" href="HcalRawDecoder_8cxx_source.html#l00624">produce()</a>.</p>

</div>
</div>
<a id="ae2f62ffa4149345dac777f7ebdccdab1" name="ae2f62ffa4149345dac777f7ebdccdab1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2f62ffa4149345dac777f7ebdccdab1">&#9670;&#160;</a></span>input_pass_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string hcal::HcalRawDecoder::input_pass_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>input pass of creating encoded data </p>

<p class="definition">Definition at line <a class="el" href="HcalRawDecoder_8cxx_source.html#l00586">586</a> of file <a class="el" href="HcalRawDecoder_8cxx_source.html">HcalRawDecoder.cxx</a>.</p>

<p class="reference">Referenced by <a class="el" href="HcalRawDecoder_8cxx_source.html#l00603">configure()</a>, and <a class="el" href="HcalRawDecoder_8cxx_source.html#l00624">produce()</a>.</p>

</div>
</div>
<a id="a1766b565bb28b0371c13bc13ff34ea06" name="a1766b565bb28b0371c13bc13ff34ea06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1766b565bb28b0371c13bc13ff34ea06">&#9670;&#160;</a></span>output_name_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string hcal::HcalRawDecoder::output_name_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>output object to put onto event bus </p>

<p class="definition">Definition at line <a class="el" href="HcalRawDecoder_8cxx_source.html#l00588">588</a> of file <a class="el" href="HcalRawDecoder_8cxx_source.html">HcalRawDecoder.cxx</a>.</p>

<p class="reference">Referenced by <a class="el" href="HcalRawDecoder_8cxx_source.html#l00603">configure()</a>, and <a class="el" href="HcalRawDecoder_8cxx_source.html#l00624">produce()</a>.</p>

</div>
</div>
<a id="a119d231da32e350a0ac61dac26cd7fc3" name="a119d231da32e350a0ac61dac26cd7fc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a119d231da32e350a0ac61dac26cd7fc3">&#9670;&#160;</a></span>read_from_file_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool hcal::HcalRawDecoder::read_from_file_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>is the input_name a file or an event object </p>

<p class="definition">Definition at line <a class="el" href="HcalRawDecoder_8cxx_source.html#l00596">596</a> of file <a class="el" href="HcalRawDecoder_8cxx_source.html">HcalRawDecoder.cxx</a>.</p>

<p class="reference">Referenced by <a class="el" href="HcalRawDecoder_8cxx_source.html#l00617">beforeNewRun()</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00603">configure()</a>, and <a class="el" href="HcalRawDecoder_8cxx_source.html#l00624">produce()</a>.</p>

</div>
</div>
<a id="ae2d6d2472517d99dc354918d409662be" name="ae2d6d2472517d99dc354918d409662be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2d6d2472517d99dc354918d409662be">&#9670;&#160;</a></span>roc_version_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int hcal::HcalRawDecoder::roc_version_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>version of HGC ROC we are decoding </p>

<p class="definition">Definition at line <a class="el" href="HcalRawDecoder_8cxx_source.html#l00592">592</a> of file <a class="el" href="HcalRawDecoder_8cxx_source.html">HcalRawDecoder.cxx</a>.</p>

<p class="reference">Referenced by <a class="el" href="HcalRawDecoder_8cxx_source.html#l00603">configure()</a>, <a class="el" href="HcalRawDecoder_8cxx_source.html#l00624">produce()</a>, and <a class="el" href="HcalRawDecoder_8cxx_source.html#l00140">read()</a>.</p>

</div>
</div>
<a id="ac4858afd454e79477c71f6426f09901a" name="ac4858afd454e79477c71f6426f09901a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4858afd454e79477c71f6426f09901a">&#9670;&#160;</a></span>translate_eid_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool hcal::HcalRawDecoder::translate_eid_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>are get translating electronic IDs? </p>

<p class="definition">Definition at line <a class="el" href="HcalRawDecoder_8cxx_source.html#l00594">594</a> of file <a class="el" href="HcalRawDecoder_8cxx_source.html">HcalRawDecoder.cxx</a>.</p>

<p class="reference">Referenced by <a class="el" href="HcalRawDecoder_8cxx_source.html#l00603">configure()</a>, and <a class="el" href="HcalRawDecoder_8cxx_source.html#l00624">produce()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Hcal/src/Hcal/<a class="el" href="HcalRawDecoder_8cxx_source.html">HcalRawDecoder.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
		<script src="custom.js"></script>
	</body>
</html>