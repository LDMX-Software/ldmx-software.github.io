<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.9.2"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>LDMX Software: packing::BufferReader&lt; WordType &gt; Class Template Reference</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">LDMX Software
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part --><!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>packing</b></li><li class="navelem"><a class="el" href="classpacking_1_1BufferReader.html">BufferReader</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classpacking_1_1BufferReader-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">packing::BufferReader&lt; WordType &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="BufferReader_8h_source.html">BufferReader.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a46c4994f69cea20dd6f1cfebae01fbfe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpacking_1_1BufferReader.html#a46c4994f69cea20dd6f1cfebae01fbfe">BufferReader</a> (const BufferType &amp;b)</td></tr>
<tr class="separator:a46c4994f69cea20dd6f1cfebae01fbfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b08886b571c0e506c857e685cbdc905"><td class="memItemLeft" align="right" valign="top">const WordType &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpacking_1_1BufferReader.html#a6b08886b571c0e506c857e685cbdc905">now</a> ()</td></tr>
<tr class="separator:a6b08886b571c0e506c857e685cbdc905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3676fe004c56ac9e55b5d832c890a317"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpacking_1_1BufferReader.html#a3676fe004c56ac9e55b5d832c890a317">next</a> (bool should_exist=true)</td></tr>
<tr class="separator:a3676fe004c56ac9e55b5d832c890a317"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a7ba49af6a0e0adf9a9ba7b1c2d48f2ea"><td class="memItemLeft" align="right" valign="top">const BufferType &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpacking_1_1BufferReader.html#a7ba49af6a0e0adf9a9ba7b1c2d48f2ea">buffer_</a></td></tr>
<tr class="separator:a7ba49af6a0e0adf9a9ba7b1c2d48f2ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7d6680eaeb8f14b88143a90c4135215"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpacking_1_1BufferReader.html#ab7d6680eaeb8f14b88143a90c4135215">i_read_</a></td></tr>
<tr class="separator:ab7d6680eaeb8f14b88143a90c4135215"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a909c5430dd683fbb0f93b48915659c8c"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpacking_1_1BufferReader.html#a909c5430dd683fbb0f93b48915659c8c">i_subword_</a></td></tr>
<tr class="separator:a909c5430dd683fbb0f93b48915659c8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:acd092963373a33340aca4f6aa3724133"><td class="memItemLeft" align="right" valign="top">static const std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpacking_1_1BufferReader.html#acd092963373a33340aca4f6aa3724133">max_subwords_</a> {sizeof(BufferType::value_type)/sizeof(WordType)}</td></tr>
<tr class="separator:acd092963373a33340aca4f6aa3724133"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename WordType&gt;<br />
class packing::BufferReader&lt; WordType &gt;</div><p >This class is a helper class for reading the buffer stored in the raw data format.</p>
<p >The raw data format specifies that the buffer for all data is a specific type (BufferType), but the users in different subsystems/translators may want the buffer to be read in different size words than what the word size of BufferType. This class helps in that translation. Note that this reader starts on the zero'th word, so your 'while' loops should be 'do..while'. A basic template for using this reader is</p>
<p >BufferReader&lt;uint32_t&gt; r{buffer_}; do { try { r.now(); //first word in bunch of words r.next(); // another word that you are assuming exists ...other decoding... } catch(std::out_of_range&amp; oor) { ldmx_log(debug) &lt;&lt; oor.what(); EXCEPTION_RAISE("MisFormat", "We were expecting another word in the format " "but there wasn't one!"); } } while(r.next(false)); // its ok if the next word doesn't exist // because we might be done decoding</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>
<p>in] WordType type of word user wants to read out from buffer </p>

<p class="definition">Definition at line <a class="el" href="BufferReader_8h_source.html#l00043">43</a> of file <a class="el" href="BufferReader_8h_source.html">BufferReader.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a46c4994f69cea20dd6f1cfebae01fbfe" name="a46c4994f69cea20dd6f1cfebae01fbfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46c4994f69cea20dd6f1cfebae01fbfe">&#9670;&nbsp;</a></span>BufferReader()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename WordType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classpacking_1_1BufferReader.html">packing::BufferReader</a>&lt; WordType &gt;::<a class="el" href="classpacking_1_1BufferReader.html">BufferReader</a> </td>
          <td>(</td>
          <td class="paramtype">const BufferType &amp;&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Initialize a reader by wrapping a buffer to read. </p>

<p class="definition">Definition at line <a class="el" href="BufferReader_8h_source.html#l00048">48</a> of file <a class="el" href="BufferReader_8h_source.html">BufferReader.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>                                    : buffer_{b}, i_read_{0}, i_subword_{0} {</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    <span class="keyword">static_assert</span>(</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>        std::is_same_v&lt;WordType,uint64_t&gt; or</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>        std::is_same_v&lt;WordType,uint32_t&gt; or</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>        std::is_same_v&lt;WordType,uint16_t&gt; or</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>        std::is_same_v&lt;WordType,uint8_t &gt;,</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>        <span class="stringliteral">&quot;BufferReader::WordType must be one of &quot;</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>        <span class="stringliteral">&quot;uint64_t, uint32_t, uint16_t, uint8_t&quot;</span>);</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3676fe004c56ac9e55b5d832c890a317" name="a3676fe004c56ac9e55b5d832c890a317"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3676fe004c56ac9e55b5d832c890a317">&#9670;&nbsp;</a></span>next()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename WordType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classpacking_1_1BufferReader.html">packing::BufferReader</a>&lt; WordType &gt;::next </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>should_exist</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Go to next word in buffer.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::out_of_range</td><td>if should_exist is true and we reach the end of the buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">should_exist</td><td>set to false if we are okay with the next word not existing </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if we have another word, false if we've reached the end </dd></dl>

<p class="definition">Definition at line <a class="el" href="BufferReader_8h_source.html#l00075">75</a> of file <a class="el" href="BufferReader_8h_source.html">BufferReader.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>                                      {</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <span class="keywordflow">if</span> (i_subword_+1 == max_subwords_) {</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>      <span class="comment">// next buffer word</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>      i_subword_ = 0;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>      i_read_++;</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>      <span class="keywordflow">if</span> (i_read_ == buffer_.size()) {</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        <span class="keywordflow">if</span> (should_exist)</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>          <span class="keywordflow">throw</span> std::out_of_range(<span class="stringliteral">&quot;next word should exist&quot;</span>);</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>      }</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>      <span class="comment">// next subword</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>      i_subword_++;</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    }</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b08886b571c0e506c857e685cbdc905" name="a6b08886b571c0e506c857e685cbdc905"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b08886b571c0e506c857e685cbdc905">&#9670;&nbsp;</a></span>now()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename WordType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const WordType &amp; <a class="el" href="classpacking_1_1BufferReader.html">packing::BufferReader</a>&lt; WordType &gt;::now </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Get the current word in buffer. </p><dl class="section return"><dt>Returns</dt><dd>WordType current word </dd></dl>

<p class="definition">Definition at line <a class="el" href="BufferReader_8h_source.html#l00062">62</a> of file <a class="el" href="BufferReader_8h_source.html">BufferReader.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>                        {</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>WordType*<span class="keyword">&gt;</span>(&amp;buffer_.at(i_read_))[i_subword_];</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7ba49af6a0e0adf9a9ba7b1c2d48f2ea" name="a7ba49af6a0e0adf9a9ba7b1c2d48f2ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ba49af6a0e0adf9a9ba7b1c2d48f2ea">&#9670;&nbsp;</a></span>buffer_</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename WordType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const BufferType&amp; <a class="el" href="classpacking_1_1BufferReader.html">packing::BufferReader</a>&lt; WordType &gt;::buffer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BufferReader_8h_source.html#l00097">97</a> of file <a class="el" href="BufferReader_8h_source.html">BufferReader.h</a>.</p>

</div>
</div>
<a id="ab7d6680eaeb8f14b88143a90c4135215" name="ab7d6680eaeb8f14b88143a90c4135215"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7d6680eaeb8f14b88143a90c4135215">&#9670;&nbsp;</a></span>i_read_</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename WordType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t <a class="el" href="classpacking_1_1BufferReader.html">packing::BufferReader</a>&lt; WordType &gt;::i_read_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BufferReader_8h_source.html#l00099">99</a> of file <a class="el" href="BufferReader_8h_source.html">BufferReader.h</a>.</p>

</div>
</div>
<a id="a909c5430dd683fbb0f93b48915659c8c" name="a909c5430dd683fbb0f93b48915659c8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a909c5430dd683fbb0f93b48915659c8c">&#9670;&nbsp;</a></span>i_subword_</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename WordType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t <a class="el" href="classpacking_1_1BufferReader.html">packing::BufferReader</a>&lt; WordType &gt;::i_subword_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BufferReader_8h_source.html#l00101">101</a> of file <a class="el" href="BufferReader_8h_source.html">BufferReader.h</a>.</p>

</div>
</div>
<a id="acd092963373a33340aca4f6aa3724133" name="acd092963373a33340aca4f6aa3724133"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd092963373a33340aca4f6aa3724133">&#9670;&nbsp;</a></span>max_subwords_</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename WordType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::size_t <a class="el" href="classpacking_1_1BufferReader.html">packing::BufferReader</a>&lt; WordType &gt;::max_subwords_ {sizeof(BufferType::value_type)/sizeof(WordType)}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="BufferReader_8h_source.html#l00095">95</a> of file <a class="el" href="BufferReader_8h_source.html">BufferReader.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Packing/include/Packing/Utility/<a class="el" href="BufferReader_8h_source.html">BufferReader.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
		<script src="custom.js"></script>
	</body>
</html>