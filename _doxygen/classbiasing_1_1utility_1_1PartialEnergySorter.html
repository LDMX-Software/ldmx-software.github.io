<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.9.2"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>LDMX Software: biasing::utility::PartialEnergySorter Class Reference</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">LDMX Software
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part --><!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>biasing</b></li><li class="navelem"><b>utility</b></li><li class="navelem"><a class="el" href="classbiasing_1_1utility_1_1PartialEnergySorter.html">PartialEnergySorter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classbiasing_1_1utility_1_1PartialEnergySorter-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">biasing::utility::PartialEnergySorter Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="PartialEnergySorter_8h_source.html">PartialEnergySorter.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a627867bd197e0695e81da3551b6a198d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#a627867bd197e0695e81da3551b6a198d">PartialEnergySorter</a> (const std::string &amp;name, <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;parameters)</td></tr>
<tr class="separator:a627867bd197e0695e81da3551b6a198d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fda51268a062f29a4f3100d7532f915"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#a6fda51268a062f29a4f3100d7532f915">~PartialEnergySorter</a> ()</td></tr>
<tr class="memdesc:a6fda51268a062f29a4f3100d7532f915"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="classbiasing_1_1utility_1_1PartialEnergySorter.html#a6fda51268a062f29a4f3100d7532f915">More...</a><br /></td></tr>
<tr class="separator:a6fda51268a062f29a4f3100d7532f915"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0240494b0218c5a4e03446df97d77245"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#a0240494b0218c5a4e03446df97d77245">BeginOfEventAction</a> (const G4Event *event) final override</td></tr>
<tr class="separator:a0240494b0218c5a4e03446df97d77245"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6af6c1a2a88eb4e480f6b7911a8e12ab"><td class="memItemLeft" align="right" valign="top">G4ClassificationOfNewTrack&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#a6af6c1a2a88eb4e480f6b7911a8e12ab">ClassifyNewTrack</a> (const G4Track *aTrack, const G4ClassificationOfNewTrack &amp;currentTrackClass) final override</td></tr>
<tr class="separator:a6af6c1a2a88eb4e480f6b7911a8e12ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2d219835f8161159391805385c2e978"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#af2d219835f8161159391805385c2e978">stepping</a> (const G4Step *step) final override</td></tr>
<tr class="separator:af2d219835f8161159391805385c2e978"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bab0694e6fb5d732c9c35f7af9f07d1"><td class="memItemLeft" align="right" valign="top">std::vector&lt; simcore::TYPE &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#a0bab0694e6fb5d732c9c35f7af9f07d1">getTypes</a> ()</td></tr>
<tr class="memdesc:a0bab0694e6fb5d732c9c35f7af9f07d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the type of actions this class defines.  <a href="classbiasing_1_1utility_1_1PartialEnergySorter.html#a0bab0694e6fb5d732c9c35f7af9f07d1">More...</a><br /></td></tr>
<tr class="separator:a0bab0694e6fb5d732c9c35f7af9f07d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80bc7d8942c2f45535fb03985ae20384"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#a80bc7d8942c2f45535fb03985ae20384">NewStage</a> () final override</td></tr>
<tr class="separator:a80bc7d8942c2f45535fb03985ae20384"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classsimcore_1_1UserAction"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classsimcore_1_1UserAction')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classsimcore_1_1UserAction.html">simcore::UserAction</a></td></tr>
<tr class="memitem:a4bb74e3451fa581346b72dc15ee00eb8 inherit pub_methods_classsimcore_1_1UserAction"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1UserAction.html#a4bb74e3451fa581346b72dc15ee00eb8">UserAction</a> (const std::string &amp;name, <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;parameters)</td></tr>
<tr class="separator:a4bb74e3451fa581346b72dc15ee00eb8 inherit pub_methods_classsimcore_1_1UserAction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeffbd18131716ef99f1cba2b9331e12 inherit pub_methods_classsimcore_1_1UserAction"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1UserAction.html#abeffbd18131716ef99f1cba2b9331e12">~UserAction</a> ()</td></tr>
<tr class="memdesc:abeffbd18131716ef99f1cba2b9331e12 inherit pub_methods_classsimcore_1_1UserAction"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="classsimcore_1_1UserAction.html#abeffbd18131716ef99f1cba2b9331e12">More...</a><br /></td></tr>
<tr class="separator:abeffbd18131716ef99f1cba2b9331e12 inherit pub_methods_classsimcore_1_1UserAction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a846adbda3c1a0a3625a2e6ac39f16a36 inherit pub_methods_classsimcore_1_1UserAction"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1UserAction.html#a846adbda3c1a0a3625a2e6ac39f16a36">EndOfEventAction</a> (const G4Event *)</td></tr>
<tr class="separator:a846adbda3c1a0a3625a2e6ac39f16a36 inherit pub_methods_classsimcore_1_1UserAction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74d87b793fc538412230d5aec53cc035 inherit pub_methods_classsimcore_1_1UserAction"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1UserAction.html#a74d87b793fc538412230d5aec53cc035">BeginOfRunAction</a> (const G4Run *)</td></tr>
<tr class="separator:a74d87b793fc538412230d5aec53cc035 inherit pub_methods_classsimcore_1_1UserAction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a444c9a408fb3b0df3846a0af06bdd966 inherit pub_methods_classsimcore_1_1UserAction"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1UserAction.html#a444c9a408fb3b0df3846a0af06bdd966">EndOfRunAction</a> (const G4Run *)</td></tr>
<tr class="separator:a444c9a408fb3b0df3846a0af06bdd966 inherit pub_methods_classsimcore_1_1UserAction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71e8ff588bdacd2689d9c939808b457d inherit pub_methods_classsimcore_1_1UserAction"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1UserAction.html#a71e8ff588bdacd2689d9c939808b457d">PreUserTrackingAction</a> (const G4Track *)</td></tr>
<tr class="separator:a71e8ff588bdacd2689d9c939808b457d inherit pub_methods_classsimcore_1_1UserAction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0da9c435376614505eb1b66b68c7a30 inherit pub_methods_classsimcore_1_1UserAction"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1UserAction.html#ae0da9c435376614505eb1b66b68c7a30">PostUserTrackingAction</a> (const G4Track *)</td></tr>
<tr class="separator:ae0da9c435376614505eb1b66b68c7a30 inherit pub_methods_classsimcore_1_1UserAction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b84a66487620fdd612ebd220fe6c893 inherit pub_methods_classsimcore_1_1UserAction"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1UserAction.html#a0b84a66487620fdd612ebd220fe6c893">PrepareNewEvent</a> ()</td></tr>
<tr class="separator:a0b84a66487620fdd612ebd220fe6c893 inherit pub_methods_classsimcore_1_1UserAction"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ab9aa700c71499ca5804aaa117bced7a0"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#ab9aa700c71499ca5804aaa117bced7a0">threshold_</a></td></tr>
<tr class="memdesc:ab9aa700c71499ca5804aaa117bced7a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum Kinetic Energy [MeV] we want to simulate first.  <a href="classbiasing_1_1utility_1_1PartialEnergySorter.html#ab9aa700c71499ca5804aaa117bced7a0">More...</a><br /></td></tr>
<tr class="separator:ab9aa700c71499ca5804aaa117bced7a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e3f22ea99b14d69acbd811b9a19b8dd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#a2e3f22ea99b14d69acbd811b9a19b8dd">below_threshold_</a></td></tr>
<tr class="memdesc:a2e3f22ea99b14d69acbd811b9a19b8dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Are we simulating below the threshold yet?  <a href="classbiasing_1_1utility_1_1PartialEnergySorter.html#a2e3f22ea99b14d69acbd811b9a19b8dd">More...</a><br /></td></tr>
<tr class="separator:a2e3f22ea99b14d69acbd811b9a19b8dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classsimcore_1_1UserAction"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classsimcore_1_1UserAction')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classsimcore_1_1UserAction.html">simcore::UserAction</a></td></tr>
<tr class="memitem:a1d20452de6e26f22c322330b2ac106f8 inherit pub_static_methods_classsimcore_1_1UserAction"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1UserAction.html#a1d20452de6e26f22c322330b2ac106f8">declare</a> (const std::string &amp;className, UserActionBuilder *builder)</td></tr>
<tr class="separator:a1d20452de6e26f22c322330b2ac106f8 inherit pub_static_methods_classsimcore_1_1UserAction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_static_methods_classsimcore_1_1UserAction"><td colspan="2" onclick="javascript:toggleInherit('pro_static_methods_classsimcore_1_1UserAction')"><img src="closed.png" alt="-"/>&#160;Static Protected Member Functions inherited from <a class="el" href="classsimcore_1_1UserAction.html">simcore::UserAction</a></td></tr>
<tr class="memitem:a90a43ffd1708bbdd25411f9cfe529a41 inherit pro_static_methods_classsimcore_1_1UserAction"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classsimcore_1_1UserEventInformation.html">UserEventInformation</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1UserAction.html#a90a43ffd1708bbdd25411f9cfe529a41">getEventInfo</a> ()</td></tr>
<tr class="separator:a90a43ffd1708bbdd25411f9cfe529a41 inherit pro_static_methods_classsimcore_1_1UserAction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classsimcore_1_1UserAction"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classsimcore_1_1UserAction')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classsimcore_1_1UserAction.html">simcore::UserAction</a></td></tr>
<tr class="memitem:aeafb03d8345959dfe2c18bada9d13917 inherit pro_attribs_classsimcore_1_1UserAction"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1UserAction.html#aeafb03d8345959dfe2c18bada9d13917">name_</a> {&quot;&quot;}</td></tr>
<tr class="memdesc:aeafb03d8345959dfe2c18bada9d13917 inherit pro_attribs_classsimcore_1_1UserAction"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of the <a class="el" href="classsimcore_1_1UserAction.html" title="Interface that defines a user action.">UserAction</a>.  <a href="classsimcore_1_1UserAction.html#aeafb03d8345959dfe2c18bada9d13917">More...</a><br /></td></tr>
<tr class="separator:aeafb03d8345959dfe2c18bada9d13917 inherit pro_attribs_classsimcore_1_1UserAction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af02fcb18b66d1f02514b43d0c5803e6c inherit pro_attribs_classsimcore_1_1UserAction"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimcore_1_1UserAction.html#af02fcb18b66d1f02514b43d0c5803e6c">parameters_</a></td></tr>
<tr class="memdesc:af02fcb18b66d1f02514b43d0c5803e6c inherit pro_attribs_classsimcore_1_1UserAction"><td class="mdescLeft">&#160;</td><td class="mdescRight">The set of parameters used to configure this class.  <a href="classsimcore_1_1UserAction.html#af02fcb18b66d1f02514b43d0c5803e6c">More...</a><br /></td></tr>
<tr class="separator:af02fcb18b66d1f02514b43d0c5803e6c inherit pro_attribs_classsimcore_1_1UserAction"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >A simulation action that makes sure that all particles above a certain threshold are processed first. This is not intended to modify any physics or perform any filters, only to improve efficiency by processing the more important, higher energy particles first before applying filtering.</p>
<p >This UserAction can run on its own or combined with other actions doing the filtering.</p>
<dl class="section note"><dt>Note</dt><dd>The threshold in this sorter is for <em>kinetic</em> energy. It was implemented in this way to avoid processing slower-moving but heavier particles, but you should keep this in mind when setting the threshold.</dd></dl>
<h2><a class="anchor" id="autotoc_md0"></a>
Necessities for Filters Run in Sequence</h2>
<ul>
<li><em>If</em> your derived class re-defines ClassifyNewTrack, you should avoid changing the classification and return the current track classification.</li>
<li><em>If</em> your derived class re-defines stepping, you should avoid change the track status. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="PartialEnergySorter_8h_source.html#l00041">41</a> of file <a class="el" href="PartialEnergySorter_8h_source.html">PartialEnergySorter.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a627867bd197e0695e81da3551b6a198d" name="a627867bd197e0695e81da3551b6a198d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a627867bd197e0695e81da3551b6a198d">&#9670;&nbsp;</a></span>PartialEnergySorter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">biasing::utility::PartialEnergySorter::PartialEnergySorter </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;&#160;</td>
          <td class="paramname"><em>parameters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Constructor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>the name of the instance of this UserAction. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">parameters</td><td>the parameters used to configure this UserAction. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PartialEnergySorter_8cxx_source.html#l00014">14</a> of file <a class="el" href="PartialEnergySorter_8cxx_source.html">PartialEnergySorter.cxx</a>.</p>
<div class="fragment"><div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span>    : <a class="code hl_class" href="classsimcore_1_1UserAction.html">simcore::UserAction</a>(name, parameters) {</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>  <a class="code hl_variable" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#ab9aa700c71499ca5804aaa117bced7a0">threshold_</a> = parameters.<a class="code hl_function" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">double</span>&gt;(<span class="stringliteral">&quot;threshold&quot;</span>);</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>}</div>
<div class="ttc" id="aclassbiasing_1_1utility_1_1PartialEnergySorter_html_ab9aa700c71499ca5804aaa117bced7a0"><div class="ttname"><a href="classbiasing_1_1utility_1_1PartialEnergySorter.html#ab9aa700c71499ca5804aaa117bced7a0">biasing::utility::PartialEnergySorter::threshold_</a></div><div class="ttdeci">double threshold_</div><div class="ttdoc">Minimum Kinetic Energy [MeV] we want to simulate first.</div><div class="ttdef"><b>Definition:</b> <a href="PartialEnergySorter_8h_source.html#l00142">PartialEnergySorter.h:142</a></div></div>
<div class="ttc" id="aclassframework_1_1config_1_1Parameters_html_a18206b7c01007dd706abce7e5505eae1"><div class="ttname"><a href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">framework::config::Parameters::getParameter</a></div><div class="ttdeci">T getParameter(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="Parameters_8h_source.html#l00089">Parameters.h:89</a></div></div>
<div class="ttc" id="aclasssimcore_1_1UserAction_html"><div class="ttname"><a href="classsimcore_1_1UserAction.html">simcore::UserAction</a></div><div class="ttdoc">Interface that defines a user action.</div><div class="ttdef"><b>Definition:</b> <a href="UserAction_8h_source.html#l00046">UserAction.h:46</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Parameters_8h_source.html#l00089">framework::config::Parameters::getParameter()</a>, and <a class="el" href="PartialEnergySorter_8h_source.html#l00142">threshold_</a>.</p>

</div>
</div>
<a id="a6fda51268a062f29a4f3100d7532f915" name="a6fda51268a062f29a4f3100d7532f915"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fda51268a062f29a4f3100d7532f915">&#9670;&nbsp;</a></span>~PartialEnergySorter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual biasing::utility::PartialEnergySorter::~PartialEnergySorter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>

<p class="definition">Definition at line <a class="el" href="PartialEnergySorter_8h_source.html#l00052">52</a> of file <a class="el" href="PartialEnergySorter_8h_source.html">PartialEnergySorter.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a0240494b0218c5a4e03446df97d77245" name="a0240494b0218c5a4e03446df97d77245"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0240494b0218c5a4e03446df97d77245">&#9670;&nbsp;</a></span>BeginOfEventAction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void biasing::utility::PartialEnergySorter::BeginOfEventAction </td>
          <td>(</td>
          <td class="paramtype">const G4Event *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >At the beginning of a new event, we reset the counter for the number of particles above the energy threshold. This reset is mandatory because sometimes previous events will be aborted before all of the particles above threshold are processed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">event</td><td>unused </td></tr>
  </table>
  </dd>
</dl>
<p >debug printout std::cout &lt;&lt; "[ PartialEnergySorter ] : " &lt;&lt; "Starting a new event." &lt;&lt; std::endl;</p>

<p>Reimplemented from <a class="el" href="classsimcore_1_1UserAction.html#a12d3c3d224954a150aa0d584ee1eaf05">simcore::UserAction</a>.</p>

<p class="definition">Definition at line <a class="el" href="PartialEnergySorter_8cxx_source.html#l00020">20</a> of file <a class="el" href="PartialEnergySorter_8cxx_source.html">PartialEnergySorter.cxx</a>.</p>
<div class="fragment"><div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>                                                           {</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>  <a class="code hl_variable" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#a2e3f22ea99b14d69acbd811b9a19b8dd">below_threshold_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>}</div>
<div class="ttc" id="aclassbiasing_1_1utility_1_1PartialEnergySorter_html_a2e3f22ea99b14d69acbd811b9a19b8dd"><div class="ttname"><a href="classbiasing_1_1utility_1_1PartialEnergySorter.html#a2e3f22ea99b14d69acbd811b9a19b8dd">biasing::utility::PartialEnergySorter::below_threshold_</a></div><div class="ttdeci">bool below_threshold_</div><div class="ttdoc">Are we simulating below the threshold yet?</div><div class="ttdef"><b>Definition:</b> <a href="PartialEnergySorter_8h_source.html#l00145">PartialEnergySorter.h:145</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="PartialEnergySorter_8h_source.html#l00145">below_threshold_</a>.</p>

</div>
</div>
<a id="a6af6c1a2a88eb4e480f6b7911a8e12ab" name="a6af6c1a2a88eb4e480f6b7911a8e12ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6af6c1a2a88eb4e480f6b7911a8e12ab">&#9670;&nbsp;</a></span>ClassifyNewTrack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">G4ClassificationOfNewTrack biasing::utility::PartialEnergySorter::ClassifyNewTrack </td>
          <td>(</td>
          <td class="paramtype">const G4Track *&#160;</td>
          <td class="paramname"><em>aTrack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const G4ClassificationOfNewTrack &amp;&#160;</td>
          <td class="paramname"><em>currentTrackClass</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Classify a "new" track</p>
<p >This is called when a new track is created <em>or</em> when a current track is suspended. We can use this functionality to move any tracks below the energy threshold to the waiting stack.</p>
<p >All tracks with kinetic energy above the threshold are put onto the urgent stack while any other particles are put onto the waiting stack if there are particles still above threshold.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aTrack</td><td>The Geant4 track. </td></tr>
    <tr><td class="paramname">currentTrackClass</td><td>The current track classification. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the updated classification </dd></dl>
<p >debug printout std::cout &lt;&lt; "[ PartialEnergySorter ] : Classifying track " &lt;&lt; aTrack-&gt;GetTrackID() &lt;&lt; " with energy " &lt;&lt; aTrack-&gt;GetKineticEnergy() &lt;&lt; " MeV." &lt;&lt; std::endl;</p>
<p >debug printout std::cout &lt;&lt; "[ PartialEnergySorter ] : Classifying track " &lt;&lt; aTrack-&gt;GetTrackID() &lt;&lt; " with energy " &lt;&lt; aTrack-&gt;GetKineticEnergy() &lt;&lt; " MeV." &lt;&lt; std::endl;</p>

<p>Reimplemented from <a class="el" href="classsimcore_1_1UserAction.html#a586e1338f2c0f2d6590a9992c353ccbe">simcore::UserAction</a>.</p>

<p class="definition">Definition at line <a class="el" href="PartialEnergySorter_8cxx_source.html#l00029">29</a> of file <a class="el" href="PartialEnergySorter_8cxx_source.html">PartialEnergySorter.cxx</a>.</p>
<div class="fragment"><div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>                                                                  {</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>  <span class="keywordflow">if</span> (aTrack-&gt;GetKineticEnergy() &gt; <a class="code hl_variable" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#ab9aa700c71499ca5804aaa117bced7a0">threshold_</a>) {</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <span class="keywordflow">return</span> fUrgent;</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>  }</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>  <span class="comment">/*</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="comment">   * Track has kinetic energy less than or equal to</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="comment">   * the threshold, so we put it on the waiting stack</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="comment">   * if there are still particles above threshold to be processed.</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="comment">   */</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#a2e3f22ea99b14d69acbd811b9a19b8dd">below_threshold_</a> ? currentTrackClassification : fWaiting;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="PartialEnergySorter_8h_source.html#l00145">below_threshold_</a>, and <a class="el" href="PartialEnergySorter_8h_source.html#l00142">threshold_</a>.</p>

</div>
</div>
<a id="a0bab0694e6fb5d732c9c35f7af9f07d1" name="a0bab0694e6fb5d732c9c35f7af9f07d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bab0694e6fb5d732c9c35f7af9f07d1">&#9670;&nbsp;</a></span>getTypes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; simcore::TYPE &gt; biasing::utility::PartialEnergySorter::getTypes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the type of actions this class defines. </p>

<p>Implements <a class="el" href="classsimcore_1_1UserAction.html#a88236347eb3d75a26bf1cf33a842800c">simcore::UserAction</a>.</p>

<p class="definition">Definition at line <a class="el" href="PartialEnergySorter_8h_source.html#l00100">100</a> of file <a class="el" href="PartialEnergySorter_8h_source.html">PartialEnergySorter.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>                                    {</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>    <span class="keywordflow">return</span> {simcore::TYPE::STEPPING, simcore::TYPE::STACKING, simcore::TYPE::EVENT};</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a80bc7d8942c2f45535fb03985ae20384" name="a80bc7d8942c2f45535fb03985ae20384"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80bc7d8942c2f45535fb03985ae20384">&#9670;&nbsp;</a></span>NewStage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void biasing::utility::PartialEnergySorter::NewStage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">final</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Flag that we are now going below threshold.</p>
<p >This function is called when the urgent stack is empty and the waiting stack is transferred to the urgent stack.</p>
<p >With all tracks below threshold being pushed to the waiting stack, the first time this occurs during the event is when the rest of the particles are below the threshold energy, so we reset the counter on the number of particles above the threshold here.</p>
<p >This function can be called several times in an event, but the <em>first</em> time it is called in an event is when there is no more particles with kinetic energy above the threshold left to be processed.</p>
<p >Sometimes (e.g. in the case when you are using this with the custom dark brem process) there will still be particles "left-over" that are above the threshold. These particles are the electron that went dark brem and the A' which are above the threshold but both don't interact with anything else. Since they don't interact with anything else, they finish tracking without "stepping" from above the threshold to below it. </p>
<p >debug printout std::cout &lt;&lt; "[ PartialEnergySorter ] : " &lt;&lt; "Starting new stage with " &lt;&lt; num_particles_above_threshold_ &lt;&lt; " particles above threshold." &lt;&lt; std::endl;</p>

<p>Reimplemented from <a class="el" href="classsimcore_1_1UserAction.html#a9f658a98be802d03fea7899abe846bd9">simcore::UserAction</a>.</p>

<p class="definition">Definition at line <a class="el" href="PartialEnergySorter_8h_source.html#l00129">129</a> of file <a class="el" href="PartialEnergySorter_8h_source.html">PartialEnergySorter.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>                                 {</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    <a class="code hl_variable" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#a2e3f22ea99b14d69acbd811b9a19b8dd">below_threshold_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="PartialEnergySorter_8h_source.html#l00145">below_threshold_</a>.</p>

</div>
</div>
<a id="af2d219835f8161159391805385c2e978" name="af2d219835f8161159391805385c2e978"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2d219835f8161159391805385c2e978">&#9670;&nbsp;</a></span>stepping()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void biasing::utility::PartialEnergySorter::stepping </td>
          <td>(</td>
          <td class="paramtype">const G4Step *&#160;</td>
          <td class="paramname"><em>step</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Checks if a particle steps from above the threshold to below it. If the particle does step below the threshold it is suspended, so that it can be re-classifed onto the waiting stack.</p>
<p >Nothing happens if we are already below threshold (i.e. below_threshold_ is true).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">step</td><td>Geant4 step </td></tr>
  </table>
  </dd>
</dl>
<p >debug printout std::cout &lt;&lt; "[ PartialEnergySorter ] : Stepping track " &lt;&lt; step-&gt;GetTrack()-&gt;GetTrackID() &lt;&lt; " going from " &lt;&lt; pre_energy &lt;&lt; " MeV to " &lt;&lt; post_energy &lt;&lt; " MeV." &lt;&lt; std::endl;</p>

<p>Reimplemented from <a class="el" href="classsimcore_1_1UserAction.html#a066db4c649082f798e29bd8594e95d9e">simcore::UserAction</a>.</p>

<p class="definition">Definition at line <a class="el" href="PartialEnergySorter_8cxx_source.html#l00057">57</a> of file <a class="el" href="PartialEnergySorter_8cxx_source.html">PartialEnergySorter.cxx</a>.</p>
<div class="fragment"><div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>                                                     {</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#a2e3f22ea99b14d69acbd811b9a19b8dd">below_threshold_</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>  <span class="keyword">auto</span> pre_energy{step-&gt;GetPreStepPoint()-&gt;GetKineticEnergy()};</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>  <span class="keyword">auto</span> post_energy{step-&gt;GetPostStepPoint()-&gt;GetKineticEnergy()};</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>  <span class="keywordflow">if</span> (pre_energy &gt;= <a class="code hl_variable" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#ab9aa700c71499ca5804aaa117bced7a0">threshold_</a> and post_energy &lt;= <a class="code hl_variable" href="classbiasing_1_1utility_1_1PartialEnergySorter.html#ab9aa700c71499ca5804aaa117bced7a0">threshold_</a>) {</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    step-&gt;GetTrack()-&gt;SetTrackStatus(fSuspend);</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>  }</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="PartialEnergySorter_8h_source.html#l00145">below_threshold_</a>, and <a class="el" href="PartialEnergySorter_8h_source.html#l00142">threshold_</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a2e3f22ea99b14d69acbd811b9a19b8dd" name="a2e3f22ea99b14d69acbd811b9a19b8dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e3f22ea99b14d69acbd811b9a19b8dd">&#9670;&nbsp;</a></span>below_threshold_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool biasing::utility::PartialEnergySorter::below_threshold_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Are we simulating below the threshold yet? </p>

<p class="definition">Definition at line <a class="el" href="PartialEnergySorter_8h_source.html#l00145">145</a> of file <a class="el" href="PartialEnergySorter_8h_source.html">PartialEnergySorter.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="PartialEnergySorter_8cxx_source.html#l00020">BeginOfEventAction()</a>, <a class="el" href="PartialEnergySorter_8cxx_source.html#l00029">ClassifyNewTrack()</a>, <a class="el" href="PartialEnergySorter_8h_source.html#l00129">NewStage()</a>, and <a class="el" href="PartialEnergySorter_8cxx_source.html#l00057">stepping()</a>.</p>

</div>
</div>
<a id="ab9aa700c71499ca5804aaa117bced7a0" name="ab9aa700c71499ca5804aaa117bced7a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9aa700c71499ca5804aaa117bced7a0">&#9670;&nbsp;</a></span>threshold_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double biasing::utility::PartialEnergySorter::threshold_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Minimum Kinetic Energy [MeV] we want to simulate first. </p>

<p class="definition">Definition at line <a class="el" href="PartialEnergySorter_8h_source.html#l00142">142</a> of file <a class="el" href="PartialEnergySorter_8h_source.html">PartialEnergySorter.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="PartialEnergySorter_8cxx_source.html#l00029">ClassifyNewTrack()</a>, <a class="el" href="PartialEnergySorter_8cxx_source.html#l00014">PartialEnergySorter()</a>, and <a class="el" href="PartialEnergySorter_8cxx_source.html#l00057">stepping()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Biasing/include/Biasing/Utility/<a class="el" href="PartialEnergySorter_8h_source.html">PartialEnergySorter.h</a></li>
<li>Biasing/src/Biasing/Utility/<a class="el" href="PartialEnergySorter_8cxx_source.html">PartialEnergySorter.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
		<script src="custom.js"></script>
	</body>
</html>