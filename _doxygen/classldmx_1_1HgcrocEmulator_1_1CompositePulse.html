<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.9.1"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>LDMX Software: ldmx::HgcrocEmulator::CompositePulse Class Reference</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">LDMX Software
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part --><!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ldmx</b></li><li class="navelem"><a class="el" href="classldmx_1_1HgcrocEmulator.html">HgcrocEmulator</a></li><li class="navelem"><a class="el" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html">CompositePulse</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classldmx_1_1HgcrocEmulator_1_1CompositePulse-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ldmx::HgcrocEmulator::CompositePulse Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afd6fb7a7fea939944a2e299fdf594885"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#afd6fb7a7fea939944a2e299fdf594885">CompositePulse</a> (TF1 &amp;func, const double &amp;g, const double &amp;p)</td></tr>
<tr class="separator:afd6fb7a7fea939944a2e299fdf594885"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad55dffcafe7fcd2bcc2bcf121a2452ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#ad55dffcafe7fcd2bcc2bcf121a2452ba">addOrMerge</a> (const std::pair&lt; double, double &gt; &amp;hit, double hit_merge_ns)</td></tr>
<tr class="separator:ad55dffcafe7fcd2bcc2bcf121a2452ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5f751fcd5fd3ddd97a5835fbf231b86"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#aa5f751fcd5fd3ddd97a5835fbf231b86">findCrossing</a> (double low, double high, double level, double prec=0.01)</td></tr>
<tr class="separator:aa5f751fcd5fd3ddd97a5835fbf231b86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15e3baa0f9cc7d12244fa09c656637d1"><td class="memItemLeft" align="right" valign="top"><a id="a15e3baa0f9cc7d12244fa09c656637d1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#a15e3baa0f9cc7d12244fa09c656637d1">setGainPedestal</a> (double <a class="el" href="classldmx_1_1HgcrocEmulator.html#aa6897487befcdc0c93e93e7e2fdef1e7">gain</a>, double <a class="el" href="classldmx_1_1HgcrocEmulator.html#a445cb84888558b67adbbe9a0e1c8d58a">pedestal</a>)</td></tr>
<tr class="memdesc:a15e3baa0f9cc7d12244fa09c656637d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the pulses for the current chip. <br /></td></tr>
<tr class="separator:a15e3baa0f9cc7d12244fa09c656637d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaddcd11fc169a6a08409a814076fa019"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#aaddcd11fc169a6a08409a814076fa019">operator()</a> (double time) const</td></tr>
<tr class="separator:aaddcd11fc169a6a08409a814076fa019"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5584381945f66aba6ed76e808afbb622"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#a5584381945f66aba6ed76e808afbb622">at</a> (double time) const</td></tr>
<tr class="separator:a5584381945f66aba6ed76e808afbb622"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3427be455aa786964545f653f08c8ef1"><td class="memItemLeft" align="right" valign="top"><a id="a3427be455aa786964545f653f08c8ef1"></a>
const std::vector&lt; std::pair&lt; double, double &gt; &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#a3427be455aa786964545f653f08c8ef1">hits</a> () const</td></tr>
<tr class="memdesc:a3427be455aa786964545f653f08c8ef1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get list of individual pulses that are entering the chip. <br /></td></tr>
<tr class="separator:a3427be455aa786964545f653f08c8ef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aeea5e69a4a96082d9f1ac65f97c6ca89"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::pair&lt; double, double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#aeea5e69a4a96082d9f1ac65f97c6ca89">hits_</a></td></tr>
<tr class="separator:aeea5e69a4a96082d9f1ac65f97c6ca89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cae0abd58c629935bd6615c05f5e46a"><td class="memItemLeft" align="right" valign="top"><a id="a9cae0abd58c629935bd6615c05f5e46a"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#a9cae0abd58c629935bd6615c05f5e46a">gain_</a></td></tr>
<tr class="memdesc:a9cae0abd58c629935bd6615c05f5e46a"><td class="mdescLeft">&#160;</td><td class="mdescRight">gain for current chip we are emulating <br /></td></tr>
<tr class="separator:a9cae0abd58c629935bd6615c05f5e46a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a778ce043530b521ceb41f078dc1ff6d9"><td class="memItemLeft" align="right" valign="top"><a id="a778ce043530b521ceb41f078dc1ff6d9"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#a778ce043530b521ceb41f078dc1ff6d9">pedestal_</a></td></tr>
<tr class="memdesc:a778ce043530b521ceb41f078dc1ff6d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">pedestal for current chip we are emulating <br /></td></tr>
<tr class="separator:a778ce043530b521ceb41f078dc1ff6d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4a940e7e0bdc474129e4e2688f28183"><td class="memItemLeft" align="right" valign="top"><a id="ac4a940e7e0bdc474129e4e2688f28183"></a>
TF1 &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#ac4a940e7e0bdc474129e4e2688f28183">pulseFunc_</a></td></tr>
<tr class="memdesc:ac4a940e7e0bdc474129e4e2688f28183"><td class="mdescLeft">&#160;</td><td class="mdescRight">reference to pulse shape function shared by all pulses <br /></td></tr>
<tr class="separator:ac4a940e7e0bdc474129e4e2688f28183"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html">CompositePulse</a></p>
<p>An emulator for a pulse that the chip needs to read. This handles merging two hits that are "close-enough" to one another. </p>

<p class="definition">Definition at line <a class="el" href="HgcrocEmulator_8h_source.html#l00240">240</a> of file <a class="el" href="HgcrocEmulator_8h_source.html">HgcrocEmulator.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="afd6fb7a7fea939944a2e299fdf594885"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd6fb7a7fea939944a2e299fdf594885">&#9670;&nbsp;</a></span>CompositePulse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ldmx::HgcrocEmulator::CompositePulse::CompositePulse </td>
          <td>(</td>
          <td class="paramtype">TF1 &amp;&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>g</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructore</p>
<p>Connect this pulse emulator with the pulse shape function already configured by the chip emulator. </p>

<p class="definition">Definition at line <a class="el" href="HgcrocEmulator_8h_source.html#l00249">249</a> of file <a class="el" href="HgcrocEmulator_8h_source.html">HgcrocEmulator.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      : <a class="code" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#ac4a940e7e0bdc474129e4e2688f28183">pulseFunc_</a>{func}, <a class="code" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#a9cae0abd58c629935bd6615c05f5e46a">gain_</a>{g}, <a class="code" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#a778ce043530b521ceb41f078dc1ff6d9">pedestal_</a>{p} { }</div>
<div class="ttc" id="aclassldmx_1_1HgcrocEmulator_1_1CompositePulse_html_a778ce043530b521ceb41f078dc1ff6d9"><div class="ttname"><a href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#a778ce043530b521ceb41f078dc1ff6d9">ldmx::HgcrocEmulator::CompositePulse::pedestal_</a></div><div class="ttdeci">double pedestal_</div><div class="ttdoc">pedestal for current chip we are emulating</div><div class="ttdef"><b>Definition:</b> <a href="HgcrocEmulator_8h_source.html#l00351">HgcrocEmulator.h:351</a></div></div>
<div class="ttc" id="aclassldmx_1_1HgcrocEmulator_1_1CompositePulse_html_a9cae0abd58c629935bd6615c05f5e46a"><div class="ttname"><a href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#a9cae0abd58c629935bd6615c05f5e46a">ldmx::HgcrocEmulator::CompositePulse::gain_</a></div><div class="ttdeci">double gain_</div><div class="ttdoc">gain for current chip we are emulating</div><div class="ttdef"><b>Definition:</b> <a href="HgcrocEmulator_8h_source.html#l00348">HgcrocEmulator.h:348</a></div></div>
<div class="ttc" id="aclassldmx_1_1HgcrocEmulator_1_1CompositePulse_html_ac4a940e7e0bdc474129e4e2688f28183"><div class="ttname"><a href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#ac4a940e7e0bdc474129e4e2688f28183">ldmx::HgcrocEmulator::CompositePulse::pulseFunc_</a></div><div class="ttdeci">TF1 &amp; pulseFunc_</div><div class="ttdoc">reference to pulse shape function shared by all pulses</div><div class="ttdef"><b>Definition:</b> <a href="HgcrocEmulator_8h_source.html#l00354">HgcrocEmulator.h:354</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad55dffcafe7fcd2bcc2bcf121a2452ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad55dffcafe7fcd2bcc2bcf121a2452ba">&#9670;&nbsp;</a></span>addOrMerge()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ldmx::HgcrocEmulator::CompositePulse::addOrMerge </td>
          <td>(</td>
          <td class="paramtype">const std::pair&lt; double, double &gt; &amp;&#160;</td>
          <td class="paramname"><em>hit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>hit_merge_ns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Put another hit into this composite pulse.</p>
<p>If the hit is within the merge input of a hit already included, then it is merged with that hit. Otherwise, it is included as its own hit.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hit</td><td>voltage,time pair representing a sime hit </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hit_merge_ns</td><td>maximum time separation [ns] to merge two hits </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="HgcrocEmulator_8h_source.html#l00262">262</a> of file <a class="el" href="HgcrocEmulator_8h_source.html">HgcrocEmulator.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                                                                            {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="keyword">auto</span> imerge{<a class="code" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#aeea5e69a4a96082d9f1ac65f97c6ca89">hits_</a>.begin()};</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="keywordflow">for</span> (; imerge!=<a class="code" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#aeea5e69a4a96082d9f1ac65f97c6ca89">hits_</a>.end(); imerge++) </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">if</span> (fabs(imerge-&gt;second-hit.second)&lt;hit_merge_ns) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keywordflow">if</span> (imerge == <a class="code" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#aeea5e69a4a96082d9f1ac65f97c6ca89">hits_</a>.end()) { <span class="comment">// didn&#39;t find a match, add to the list</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <a class="code" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#aeea5e69a4a96082d9f1ac65f97c6ca89">hits_</a>.push_back(hit);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      } <span class="keywordflow">else</span> { <span class="comment">// merge hits, shifting time to average</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        imerge-&gt;second=(imerge-&gt;second*imerge-&gt;first+hit.first*hit.second);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        imerge-&gt;first+=hit.first;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        imerge-&gt;second/=imerge-&gt;first;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="ttc" id="aclassldmx_1_1HgcrocEmulator_1_1CompositePulse_html_aeea5e69a4a96082d9f1ac65f97c6ca89"><div class="ttname"><a href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#aeea5e69a4a96082d9f1ac65f97c6ca89">ldmx::HgcrocEmulator::CompositePulse::hits_</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; double, double &gt; &gt; hits_</div><div class="ttdef"><b>Definition:</b> <a href="HgcrocEmulator_8h_source.html#l00345">HgcrocEmulator.h:345</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="HgcrocEmulator_8h_source.html#l00345">hits_</a>.</p>

<p class="reference">Referenced by <a class="el" href="HgcrocEmulator_8cxx_source.html#l00046">ldmx::HgcrocEmulator::digitize()</a>.</p>

</div>
</div>
<a id="a5584381945f66aba6ed76e808afbb622"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5584381945f66aba6ed76e808afbb622">&#9670;&nbsp;</a></span>at()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ldmx::HgcrocEmulator::CompositePulse::at </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Measure the voltage at the input time</p>
<p>Includes the effects from all pulses but does not put any noise into the measurement.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">time</td><td>time to measure [ns] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>voltage at that time [mV] </dd></dl>

<p class="definition">Definition at line <a class="el" href="HgcrocEmulator_8h_source.html#l00329">329</a> of file <a class="el" href="HgcrocEmulator_8h_source.html">HgcrocEmulator.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                                 {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="keywordtype">double</span> signal = <a class="code" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#a9cae0abd58c629935bd6615c05f5e46a">gain_</a> * <a class="code" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#a778ce043530b521ceb41f078dc1ff6d9">pedestal_</a>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> hit : <a class="code" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#aeea5e69a4a96082d9f1ac65f97c6ca89">hits_</a>)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        signal += hit.first * <a class="code" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#ac4a940e7e0bdc474129e4e2688f28183">pulseFunc_</a>.Eval(time-hit.second);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keywordflow">return</span> signal;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    };</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="HgcrocEmulator_8h_source.html#l00348">gain_</a>, <a class="el" href="HgcrocEmulator_8h_source.html#l00345">hits_</a>, <a class="el" href="HgcrocEmulator_8h_source.html#l00351">pedestal_</a>, and <a class="el" href="HgcrocEmulator_8h_source.html#l00354">pulseFunc_</a>.</p>

<p class="reference">Referenced by <a class="el" href="HgcrocEmulator_8h_source.html#l00287">findCrossing()</a>, and <a class="el" href="HgcrocEmulator_8h_source.html#l00316">operator()()</a>.</p>

</div>
</div>
<a id="aa5f751fcd5fd3ddd97a5835fbf231b86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5f751fcd5fd3ddd97a5835fbf231b86">&#9670;&nbsp;</a></span>findCrossing()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ldmx::HgcrocEmulator::CompositePulse::findCrossing </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>low</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>high</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>prec</em> = <code>0.01</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Find the time at which we cross the input level.</p>
<p>We use the midpoint algorithm, assuming the input low is below the threshold and hight is above.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">low</td><td>minimum value (below threshold) to start search at [mV] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">high</td><td>maximum value (above threshold) to start search at [mV] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">level</td><td>threshold to look for time [mV] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">prec</td><td>precision with which to look [mV] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>time [ns] at which the pulse cross level </dd></dl>

<p class="definition">Definition at line <a class="el" href="HgcrocEmulator_8h_source.html#l00287">287</a> of file <a class="el" href="HgcrocEmulator_8h_source.html">HgcrocEmulator.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                                                                                 {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="comment">// use midpoint algorithm, assumes low is below and high is above</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordtype">double</span> step=high-low;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordtype">double</span> pt=(high+low)/2;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="keywordflow">while</span> (step&gt;prec) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordtype">double</span> vmid=<a class="code" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#a5584381945f66aba6ed76e808afbb622">at</a>(pt);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">if</span> (vmid&lt;level) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;          low=pt;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;          high=pt;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        step=high-low;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        pt=(high+low)/2;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keywordflow">return</span> pt;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div>
<div class="ttc" id="aclassldmx_1_1HgcrocEmulator_1_1CompositePulse_html_a5584381945f66aba6ed76e808afbb622"><div class="ttname"><a href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#a5584381945f66aba6ed76e808afbb622">ldmx::HgcrocEmulator::CompositePulse::at</a></div><div class="ttdeci">double at(double time) const</div><div class="ttdef"><b>Definition:</b> <a href="HgcrocEmulator_8h_source.html#l00329">HgcrocEmulator.h:329</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="HgcrocEmulator_8h_source.html#l00329">at()</a>.</p>

<p class="reference">Referenced by <a class="el" href="HgcrocEmulator_8cxx_source.html#l00046">ldmx::HgcrocEmulator::digitize()</a>.</p>

</div>
</div>
<a id="aaddcd11fc169a6a08409a814076fa019"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaddcd11fc169a6a08409a814076fa019">&#9670;&nbsp;</a></span>operator()()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ldmx::HgcrocEmulator::CompositePulse::operator() </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Evaluating this object as a function gives the same result as at.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#a5584381945f66aba6ed76e808afbb622">at</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="HgcrocEmulator_8h_source.html#l00316">316</a> of file <a class="el" href="HgcrocEmulator_8h_source.html">HgcrocEmulator.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                                         {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classldmx_1_1HgcrocEmulator_1_1CompositePulse.html#a5584381945f66aba6ed76e808afbb622">at</a>(time);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="HgcrocEmulator_8h_source.html#l00329">at()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aeea5e69a4a96082d9f1ac65f97c6ca89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeea5e69a4a96082d9f1ac65f97c6ca89">&#9670;&nbsp;</a></span>hits_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::pair&lt;double,double&gt; &gt; ldmx::HgcrocEmulator::CompositePulse::hits_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>pulses entering the chip</p>
<p>The pair is {voltage amplitude [mV], time of peak [ns]} </p>

<p class="definition">Definition at line <a class="el" href="HgcrocEmulator_8h_source.html#l00345">345</a> of file <a class="el" href="HgcrocEmulator_8h_source.html">HgcrocEmulator.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="HgcrocEmulator_8h_source.html#l00262">addOrMerge()</a>, <a class="el" href="HgcrocEmulator_8h_source.html#l00329">at()</a>, and <a class="el" href="HgcrocEmulator_8h_source.html#l00337">hits()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Tools/include/Tools/<a class="el" href="HgcrocEmulator_8h_source.html">HgcrocEmulator.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
		<script src="custom.js"></script>
	</body>
</html>