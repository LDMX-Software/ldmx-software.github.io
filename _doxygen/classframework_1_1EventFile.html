<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.9.1"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>LDMX Software: framework::EventFile Class Reference</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">LDMX Software
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part --><!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceframework.html">framework</a></li><li class="navelem"><a class="el" href="classframework_1_1EventFile.html">EventFile</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classframework_1_1EventFile-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">framework::EventFile Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="EventFile_8h_source.html">EventFile.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae6dade655030389eab5d03cdaae47d9c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#ae6dade655030389eab5d03cdaae47d9c">EventFile</a> (const <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;params, const std::string &amp;filename, <a class="el" href="classframework_1_1EventFile.html">EventFile</a> *parent, bool isOutputFile, bool isSingleOutput, bool isLoopable)</td></tr>
<tr class="separator:ae6dade655030389eab5d03cdaae47d9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af939fa08c3558a5e65a06f4a3292ffa2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#af939fa08c3558a5e65a06f4a3292ffa2">EventFile</a> (const <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;param, const std::string &amp;fileName, bool isLoopable)</td></tr>
<tr class="separator:af939fa08c3558a5e65a06f4a3292ffa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae43ae384a507fa2557fe8cd8ca18aa79"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#ae43ae384a507fa2557fe8cd8ca18aa79">EventFile</a> (const <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;param, const std::string &amp;fileName, <a class="el" href="classframework_1_1EventFile.html">EventFile</a> *parent, bool isSingleOutput=false)</td></tr>
<tr class="separator:ae43ae384a507fa2557fe8cd8ca18aa79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d894cbc770469324cf520a10ed5b340"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a4d894cbc770469324cf520a10ed5b340">EventFile</a> (const <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;params, const std::string &amp;fileName)</td></tr>
<tr class="separator:a4d894cbc770469324cf520a10ed5b340"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d41ef06421d1a9eb1144269aa9df0b4"><td class="memItemLeft" align="right" valign="top"><a id="a7d41ef06421d1a9eb1144269aa9df0b4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a7d41ef06421d1a9eb1144269aa9df0b4">~EventFile</a> ()=default</td></tr>
<tr class="memdesc:a7d41ef06421d1a9eb1144269aa9df0b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defult destructor. <br /></td></tr>
<tr class="separator:a7d41ef06421d1a9eb1144269aa9df0b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e1126d44d1565e221d5ab07744b6e30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a3e1126d44d1565e221d5ab07744b6e30">addDrop</a> (const std::string &amp;rule)</td></tr>
<tr class="separator:a3e1126d44d1565e221d5ab07744b6e30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58b56c464bdeb555cfd265b00ee59a66"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a58b56c464bdeb555cfd265b00ee59a66">setupEvent</a> (<a class="el" href="classframework_1_1Event.html">Event</a> *evt)</td></tr>
<tr class="separator:a58b56c464bdeb555cfd265b00ee59a66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f7d3ed3ae59ed388a24cf36789e6d0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a0f7d3ed3ae59ed388a24cf36789e6d0e">updateParent</a> (<a class="el" href="classframework_1_1EventFile.html">EventFile</a> *parent)</td></tr>
<tr class="separator:a0f7d3ed3ae59ed388a24cf36789e6d0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8899a8941e6ef6957dfbd2243c9694d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classframework_1_1Event.html">Event</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#ae8899a8941e6ef6957dfbd2243c9694d">getEvent</a> ()</td></tr>
<tr class="separator:ae8899a8941e6ef6957dfbd2243c9694d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bac5b377af59044dcb5f012ea28eecd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a6bac5b377af59044dcb5f012ea28eecd">nextEvent</a> (bool storeCurrentEvent=true)</td></tr>
<tr class="separator:a6bac5b377af59044dcb5f012ea28eecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3993f920881672b4b17f00dae2efd43"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#ad3993f920881672b4b17f00dae2efd43">skipToEvent</a> (int offset)</td></tr>
<tr class="separator:ad3993f920881672b4b17f00dae2efd43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47ca56c3f3fbcbc6c0bd014a767ad108"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a47ca56c3f3fbcbc6c0bd014a767ad108">close</a> ()</td></tr>
<tr class="separator:a47ca56c3f3fbcbc6c0bd014a767ad108"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaf91904ebf8df00f2e209c36767e63a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#aaaf91904ebf8df00f2e209c36767e63a">writeRunHeader</a> (<a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> &amp;runHeader)</td></tr>
<tr class="separator:aaaf91904ebf8df00f2e209c36767e63a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc02f5966e953c33722fdff2d7ee83a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#adc02f5966e953c33722fdff2d7ee83a5">getRunHeader</a> (int runNumber)</td></tr>
<tr class="separator:adc02f5966e953c33722fdff2d7ee83a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add25411caa90fdff2a046d8c1c0f404b"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#add25411caa90fdff2a046d8c1c0f404b">getFileName</a> ()</td></tr>
<tr class="separator:add25411caa90fdff2a046d8c1c0f404b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ace2d91da520359191c19576905ee49be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#ace2d91da520359191c19576905ee49be">importRunHeaders</a> ()</td></tr>
<tr class="separator:ace2d91da520359191c19576905ee49be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a5de56f9ac20f32612c465122ff47bd4f"><td class="memItemLeft" align="right" valign="top"><a id="a5de56f9ac20f32612c465122ff47bd4f"></a>
Long64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a5de56f9ac20f32612c465122ff47bd4f">entries_</a> {-1}</td></tr>
<tr class="memdesc:a5de56f9ac20f32612c465122ff47bd4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of entries in the tree. <br /></td></tr>
<tr class="separator:a5de56f9ac20f32612c465122ff47bd4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a938761ef129a3b1f31a7b163c54488d5"><td class="memItemLeft" align="right" valign="top"><a id="a938761ef129a3b1f31a7b163c54488d5"></a>
Long64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a938761ef129a3b1f31a7b163c54488d5">ientry_</a> {-1}</td></tr>
<tr class="memdesc:a938761ef129a3b1f31a7b163c54488d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current entry in the tree. <br /></td></tr>
<tr class="separator:a938761ef129a3b1f31a7b163c54488d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f95d97b72a83bd4730fe9d8ac8345f9"><td class="memItemLeft" align="right" valign="top"><a id="a3f95d97b72a83bd4730fe9d8ac8345f9"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a3f95d97b72a83bd4730fe9d8ac8345f9">fileName_</a></td></tr>
<tr class="memdesc:a3f95d97b72a83bd4730fe9d8ac8345f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The file name. <br /></td></tr>
<tr class="separator:a3f95d97b72a83bd4730fe9d8ac8345f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77e8acad52a7ccc11c2a719fb3cb5246"><td class="memItemLeft" align="right" valign="top"><a id="a77e8acad52a7ccc11c2a719fb3cb5246"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a77e8acad52a7ccc11c2a719fb3cb5246">isOutputFile_</a></td></tr>
<tr class="memdesc:a77e8acad52a7ccc11c2a719fb3cb5246"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if file is an output file being written to disk. <br /></td></tr>
<tr class="separator:a77e8acad52a7ccc11c2a719fb3cb5246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2819415ad5b52587228eca4728d0a22d"><td class="memItemLeft" align="right" valign="top"><a id="a2819415ad5b52587228eca4728d0a22d"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a2819415ad5b52587228eca4728d0a22d">isSingleOutput_</a></td></tr>
<tr class="memdesc:a2819415ad5b52587228eca4728d0a22d"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if there is only one output file. <br /></td></tr>
<tr class="separator:a2819415ad5b52587228eca4728d0a22d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4967eebc5a561a5778559175a564ff45"><td class="memItemLeft" align="right" valign="top"><a id="a4967eebc5a561a5778559175a564ff45"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a4967eebc5a561a5778559175a564ff45">isLoopable_</a> {false}</td></tr>
<tr class="memdesc:a4967eebc5a561a5778559175a564ff45"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if this is an input file with pileup overlay events *&zwj;/. <br /></td></tr>
<tr class="separator:a4967eebc5a561a5778559175a564ff45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32e45784787a8c55b4581904577ddab3"><td class="memItemLeft" align="right" valign="top"><a id="a32e45784787a8c55b4581904577ddab3"></a>
TFile *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">file_</a> {nullptr}</td></tr>
<tr class="memdesc:a32e45784787a8c55b4581904577ddab3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The backing TFile for this <a class="el" href="classframework_1_1EventFile.html">EventFile</a>. <br /></td></tr>
<tr class="separator:a32e45784787a8c55b4581904577ddab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4e4e14bb809320de0d173c22e6bf9bc"><td class="memItemLeft" align="right" valign="top"><a id="af4e4e14bb809320de0d173c22e6bf9bc"></a>
TTree *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a> {nullptr}</td></tr>
<tr class="memdesc:af4e4e14bb809320de0d173c22e6bf9bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The tree with event data. <br /></td></tr>
<tr class="separator:af4e4e14bb809320de0d173c22e6bf9bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af18cc990fc75c5ce3982b905c1a9522c"><td class="memItemLeft" align="right" valign="top"><a id="af18cc990fc75c5ce3982b905c1a9522c"></a>
<a class="el" href="classframework_1_1EventFile.html">EventFile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a> {nullptr}</td></tr>
<tr class="memdesc:af18cc990fc75c5ce3982b905c1a9522c"><td class="mdescLeft">&#160;</td><td class="mdescRight">A parent file containing event data. <br /></td></tr>
<tr class="separator:af18cc990fc75c5ce3982b905c1a9522c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af830217e3dbd325eb3a1a6bd61dc3fc5"><td class="memItemLeft" align="right" valign="top"><a id="af830217e3dbd325eb3a1a6bd61dc3fc5"></a>
<a class="el" href="classframework_1_1Event.html">Event</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a> {nullptr}</td></tr>
<tr class="memdesc:af830217e3dbd325eb3a1a6bd61dc3fc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The object containing the actual event data (trees and branches). <br /></td></tr>
<tr class="separator:af830217e3dbd325eb3a1a6bd61dc3fc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67ad07be1583f5fd6670bdee5fb62e05"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::pair&lt; std::string, bool &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a67ad07be1583f5fd6670bdee5fb62e05">preCloneRules_</a></td></tr>
<tr class="separator:a67ad07be1583f5fd6670bdee5fb62e05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6055851e7b0fa9fed0ed15b0d1f6e741"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a6055851e7b0fa9fed0ed15b0d1f6e741">reactivateRules_</a></td></tr>
<tr class="separator:a6055851e7b0fa9fed0ed15b0d1f6e741"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5442935a1fd82941ae556bd671b50db9"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::pair&lt; bool, <a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> * &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classframework_1_1EventFile.html#a5442935a1fd82941ae556bd671b50db9">runMap_</a></td></tr>
<tr class="separator:a5442935a1fd82941ae556bd671b50db9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class manages all ROOT file input/output operations. </p>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00026">26</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae6dade655030389eab5d03cdaae47d9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6dade655030389eab5d03cdaae47d9c">&#9670;&nbsp;</a></span>EventFile() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">framework::EventFile::EventFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classframework_1_1EventFile.html">EventFile</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isOutputFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isSingleOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isLoopable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor to make a general file.</p>
<p>This is not used directly, but it is called in the more specialised constructors. This method is mainly focused on reducing code copying.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">params</td><td>The parameters used to configure this <a class="el" href="classframework_1_1EventFile.html">EventFile</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>the name of the file to read/write </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">parent</td><td>a pointer to the parent file to copy </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">isOutputFile</td><td>true if this file is written out </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">isSingleOutput</td><td>true if only one output file is being written to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">isLoopable</td><td>true for an input file where events can be reused </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00013">13</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    : <a class="code" href="classframework_1_1EventFile.html#a3f95d97b72a83bd4730fe9d8ac8345f9">fileName_</a>(filename), <a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>(parent), <a class="code" href="classframework_1_1EventFile.html#a77e8acad52a7ccc11c2a719fb3cb5246">isOutputFile_</a>(isOutputFile),</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#a2819415ad5b52587228eca4728d0a22d">isSingleOutput_</a>(isSingleOutput), <a class="code" href="classframework_1_1EventFile.html#a4967eebc5a561a5778559175a564ff45">isLoopable_</a>(isLoopable) {</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#a77e8acad52a7ccc11c2a719fb3cb5246">isOutputFile_</a>) {</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <span class="comment">// we are writting out so open the file and make sure it is writable</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">file_</a> = <span class="keyword">new</span> TFile(<a class="code" href="classframework_1_1EventFile.html#a3f95d97b72a83bd4730fe9d8ac8345f9">fileName_</a>.c_str(), <span class="stringliteral">&quot;RECREATE&quot;</span>);</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">file_</a>-&gt;IsOpen() or !<a class="code" href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">file_</a>-&gt;IsWritable()) {</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;      EXCEPTION_RAISE(<span class="stringliteral">&quot;FileError&quot;</span>,</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;                      <span class="stringliteral">&quot;Output file &#39;&quot;</span> + <a class="code" href="classframework_1_1EventFile.html#a3f95d97b72a83bd4730fe9d8ac8345f9">fileName_</a> + <span class="stringliteral">&quot;&#39; is not writable.&quot;</span>);</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    }</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="comment">// set compression settings</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="comment">//  Check out the TFile constructor for explanation of how this integer is</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="comment">//  built Short Reference: setting = 100*algorithem + level algorithm = 0</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="comment">//  ==&gt; use global default</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">file_</a>-&gt;SetCompressionSettings(</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        params.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;compressionSetting&quot;</span>, 9));</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>) {</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;      <span class="comment">// output file when there are input files</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;      <span class="comment">//  might be drop/keep rules, so we should have these rules to make sure</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;      <span class="comment">//  it works</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;      <span class="comment">// turn everything on</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      <span class="comment">//  hypothetically could turn everything off? Doesn&#39;t work for some</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;      <span class="comment">//  reason?</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#a67ad07be1583f5fd6670bdee5fb62e05">preCloneRules_</a>.emplace_back(<span class="stringliteral">&quot;*&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;      <span class="comment">// except EventHeader (copies over to output)</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#a67ad07be1583f5fd6670bdee5fb62e05">preCloneRules_</a>.emplace_back(<span class="stringliteral">&quot;EventHeader*&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      <span class="comment">// reactivate all branches so default behavior is drop</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#a6055851e7b0fa9fed0ed15b0d1f6e741">reactivateRules_</a>.push_back(<span class="stringliteral">&quot;*&quot;</span>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">// open file with only reading enabled</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">file_</a> = <span class="keyword">new</span> TFile(<a class="code" href="classframework_1_1EventFile.html#a3f95d97b72a83bd4730fe9d8ac8345f9">fileName_</a>.c_str());</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// double check that file is open</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">file_</a>-&gt;IsOpen()) {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      EXCEPTION_RAISE(<span class="stringliteral">&quot;FileError&quot;</span>, <span class="stringliteral">&quot;Input file &#39;&quot;</span> + <a class="code" href="classframework_1_1EventFile.html#a3f95d97b72a83bd4730fe9d8ac8345f9">fileName_</a> +</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                                       <span class="stringliteral">&quot;&#39; is not readable or does not exist.&quot;</span>);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">// Get the tree name from the configuration</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keyword">auto</span> tree_name{params.<a class="code" href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">getParameter</a>&lt;std::string&gt;(<span class="stringliteral">&quot;tree_name&quot;</span>)};</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a> = <span class="keyword">static_cast&lt;</span>TTree *<span class="keyword">&gt;</span>(<a class="code" href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">file_</a>-&gt;Get(tree_name.c_str()));</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>) {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      EXCEPTION_RAISE(<span class="stringliteral">&quot;FileError&quot;</span>, <span class="stringliteral">&quot;File &#39;&quot;</span> + <a class="code" href="classframework_1_1EventFile.html#a3f95d97b72a83bd4730fe9d8ac8345f9">fileName_</a> +</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                                       <span class="stringliteral">&quot;&#39; does not have a TTree named &#39;&quot;</span> +</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                       tree_name + <span class="stringliteral">&quot;&#39; in it.&quot;</span>);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    }</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#a5de56f9ac20f32612c465122ff47bd4f">entries_</a> = <a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>-&gt;GetEntriesFast();</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="classframework_1_1EventFile.html#ace2d91da520359191c19576905ee49be">importRunHeaders</a>();</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;}</div>
<div class="ttc" id="aclassframework_1_1EventFile_html_a2819415ad5b52587228eca4728d0a22d"><div class="ttname"><a href="classframework_1_1EventFile.html#a2819415ad5b52587228eca4728d0a22d">framework::EventFile::isSingleOutput_</a></div><div class="ttdeci">bool isSingleOutput_</div><div class="ttdoc">True if there is only one output file.</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00230">EventFile.h:230</a></div></div>
<div class="ttc" id="aclassframework_1_1EventFile_html_a32e45784787a8c55b4581904577ddab3"><div class="ttname"><a href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">framework::EventFile::file_</a></div><div class="ttdeci">TFile * file_</div><div class="ttdoc">The backing TFile for this EventFile.</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00236">EventFile.h:236</a></div></div>
<div class="ttc" id="aclassframework_1_1EventFile_html_a3f95d97b72a83bd4730fe9d8ac8345f9"><div class="ttname"><a href="classframework_1_1EventFile.html#a3f95d97b72a83bd4730fe9d8ac8345f9">framework::EventFile::fileName_</a></div><div class="ttdeci">std::string fileName_</div><div class="ttdoc">The file name.</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00224">EventFile.h:224</a></div></div>
<div class="ttc" id="aclassframework_1_1EventFile_html_a4967eebc5a561a5778559175a564ff45"><div class="ttname"><a href="classframework_1_1EventFile.html#a4967eebc5a561a5778559175a564ff45">framework::EventFile::isLoopable_</a></div><div class="ttdeci">bool isLoopable_</div><div class="ttdoc">True if this is an input file with pileup overlay events *‚Äç/.</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00233">EventFile.h:233</a></div></div>
<div class="ttc" id="aclassframework_1_1EventFile_html_a5de56f9ac20f32612c465122ff47bd4f"><div class="ttname"><a href="classframework_1_1EventFile.html#a5de56f9ac20f32612c465122ff47bd4f">framework::EventFile::entries_</a></div><div class="ttdeci">Long64_t entries_</div><div class="ttdoc">The number of entries in the tree.</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00218">EventFile.h:218</a></div></div>
<div class="ttc" id="aclassframework_1_1EventFile_html_a6055851e7b0fa9fed0ed15b0d1f6e741"><div class="ttname"><a href="classframework_1_1EventFile.html#a6055851e7b0fa9fed0ed15b0d1f6e741">framework::EventFile::reactivateRules_</a></div><div class="ttdeci">std::vector&lt; std::string &gt; reactivateRules_</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00262">EventFile.h:262</a></div></div>
<div class="ttc" id="aclassframework_1_1EventFile_html_a67ad07be1583f5fd6670bdee5fb62e05"><div class="ttname"><a href="classframework_1_1EventFile.html#a67ad07be1583f5fd6670bdee5fb62e05">framework::EventFile::preCloneRules_</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; std::string, bool &gt; &gt; preCloneRules_</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00253">EventFile.h:253</a></div></div>
<div class="ttc" id="aclassframework_1_1EventFile_html_a77e8acad52a7ccc11c2a719fb3cb5246"><div class="ttname"><a href="classframework_1_1EventFile.html#a77e8acad52a7ccc11c2a719fb3cb5246">framework::EventFile::isOutputFile_</a></div><div class="ttdeci">bool isOutputFile_</div><div class="ttdoc">True if file is an output file being written to disk.</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00227">EventFile.h:227</a></div></div>
<div class="ttc" id="aclassframework_1_1EventFile_html_ace2d91da520359191c19576905ee49be"><div class="ttname"><a href="classframework_1_1EventFile.html#ace2d91da520359191c19576905ee49be">framework::EventFile::importRunHeaders</a></div><div class="ttdeci">void importRunHeaders()</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8cxx_source.html#l00356">EventFile.cxx:356</a></div></div>
<div class="ttc" id="aclassframework_1_1EventFile_html_af18cc990fc75c5ce3982b905c1a9522c"><div class="ttname"><a href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">framework::EventFile::parent_</a></div><div class="ttdeci">EventFile * parent_</div><div class="ttdoc">A parent file containing event data.</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00242">EventFile.h:242</a></div></div>
<div class="ttc" id="aclassframework_1_1EventFile_html_af4e4e14bb809320de0d173c22e6bf9bc"><div class="ttname"><a href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">framework::EventFile::tree_</a></div><div class="ttdeci">TTree * tree_</div><div class="ttdoc">The tree with event data.</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00239">EventFile.h:239</a></div></div>
<div class="ttc" id="aclassframework_1_1config_1_1Parameters_html_a18206b7c01007dd706abce7e5505eae1"><div class="ttname"><a href="classframework_1_1config_1_1Parameters.html#a18206b7c01007dd706abce7e5505eae1">framework::config::Parameters::getParameter</a></div><div class="ttdeci">T getParameter(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="Parameters_8h_source.html#l00089">Parameters.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EventFile_8h_source.html#l00218">entries_</a>, <a class="el" href="EventFile_8h_source.html#l00236">file_</a>, <a class="el" href="EventFile_8h_source.html#l00224">fileName_</a>, <a class="el" href="Parameters_8h_source.html#l00089">framework::config::Parameters::getParameter()</a>, <a class="el" href="EventFile_8cxx_source.html#l00356">importRunHeaders()</a>, <a class="el" href="EventFile_8h_source.html#l00227">isOutputFile_</a>, <a class="el" href="EventFile_8h_source.html#l00242">parent_</a>, <a class="el" href="EventFile_8h_source.html#l00253">preCloneRules_</a>, <a class="el" href="EventFile_8h_source.html#l00262">reactivateRules_</a>, and <a class="el" href="EventFile_8h_source.html#l00239">tree_</a>.</p>

</div>
</div>
<a id="af939fa08c3558a5e65a06f4a3292ffa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af939fa08c3558a5e65a06f4a3292ffa2">&#9670;&nbsp;</a></span>EventFile() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">framework::EventFile::EventFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;&#160;</td>
          <td class="paramname"><em>param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isLoopable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor to make a pileup overlay file.</p>
<p>This is an additional input file from which collections are pulled to be overlaid with simulated hit collections.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">params</td><td>The parameters used to configure this <a class="el" href="classframework_1_1EventFile.html">EventFile</a>. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">fileName</td><td>The file name. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">isLoopable</td><td>true if we want to reset the event counter and keep processing from the start when we hit the end of the event tree in this input file (set in the call in the producer) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00073">73</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    : <a class="code" href="classframework_1_1EventFile.html#ae6dade655030389eab5d03cdaae47d9c">EventFile</a>(params, filename, <span class="keyword">nullptr</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, isLoopable) {}</div>
<div class="ttc" id="aclassframework_1_1EventFile_html_ae6dade655030389eab5d03cdaae47d9c"><div class="ttname"><a href="classframework_1_1EventFile.html#ae6dade655030389eab5d03cdaae47d9c">framework::EventFile::EventFile</a></div><div class="ttdeci">EventFile(const framework::config::Parameters &amp;params, const std::string &amp;filename, EventFile *parent, bool isOutputFile, bool isSingleOutput, bool isLoopable)</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8cxx_source.html#l00013">EventFile.cxx:13</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae43ae384a507fa2557fe8cd8ca18aa79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae43ae384a507fa2557fe8cd8ca18aa79">&#9670;&nbsp;</a></span>EventFile() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">framework::EventFile::EventFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;&#160;</td>
          <td class="paramname"><em>param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classframework_1_1EventFile.html">EventFile</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isSingleOutput</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Class constructor for cloning data from a "parent" file.</p>
<p>This is used for output files when there is an input file. (OR for files with a parent <a class="el" href="classframework_1_1EventFile.html">EventFile</a> to clone)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">params</td><td>The parameters used to configure this <a class="el" href="classframework_1_1EventFile.html">EventFile</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileName</td><td>The file name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">parent</td><td>Parent file for cloning data tree. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">isSingleOutput</td><td>boolean check if only one output file is being written to </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00081">81</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    : <a class="code" href="classframework_1_1EventFile.html#ae6dade655030389eab5d03cdaae47d9c">EventFile</a>(params, filename, parent, <span class="keyword">true</span>, isSingleOutput, <span class="keyword">false</span>) {}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d894cbc770469324cf520a10ed5b340"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d894cbc770469324cf520a10ed5b340">&#9670;&nbsp;</a></span>EventFile() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">framework::EventFile::EventFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classframework_1_1config_1_1Parameters.html">framework::config::Parameters</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>fileName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Class constructor to make a file to read in an event root file.</p>
<p>This constructor just wraps the constructor above and sets the parent to null and the parameters isOutputFile/isSingleOutput to false.</p>
<p>This is used for all input files.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">params</td><td>The parameters used to configure this <a class="el" href="classframework_1_1EventFile.html">EventFile</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fileName</td><td>The file name. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00077">77</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    : <a class="code" href="classframework_1_1EventFile.html#ae6dade655030389eab5d03cdaae47d9c">EventFile</a>(params, filename, <span class="keyword">nullptr</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>) {}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3e1126d44d1565e221d5ab07744b6e30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e1126d44d1565e221d5ab07744b6e30">&#9670;&nbsp;</a></span>addDrop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void framework::EventFile::addDrop </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>rule</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a rule for dropping collections from the output.</p>
<p>This needs to be called <em>after</em> setupEvent. This method uses the event to help drop collections.</p>
<p>The rules should be of the following form: &lt;drop,keep, or ignore&gt; exp where exp is an expression that matches the collectionName. ignore ==&gt; any branch with name matching exp is not even read in from the input file (if it exists) keep ==&gt; any branch with name matching exp is read in from the input (if exists) and written to output (if exists) drop ==&gt; any branch with name matching exp is read in from the input (if exists) and NOT written to output</p>
<p>The default behavior for all branches is keep.</p>
<p>ROOT uses the internal TRegexp to match branch names to the passed expression and set the status of the branch (whether it will be read or not). This internal object has different rules than real regular expressions, so it is best to keep it safe and only use asterisks or full names. Additionally, the rules you pass are analyzed in succession, so you can go from something more general to something more specific.</p>
<p>For example to drop all EcalSimHits.* drop EcalSimHits.*</p>
<p>or drop scoring plane collections drop .*ScoringPlane.*</p>
<p>or drop scoring plane collections but keep EcalScoringPlane collection drop .*ScoringPlane.* keep EcalScoringPlane.*</p>
<dl class="section note"><dt>Note</dt><dd>The <a class="el" href="classframework_1_1Event.html#ae5b5406e4d1585517fd47e0b70d1a88c">Event::getImpl</a> overrides any ignore rules for the input file in order to avoid any seg faults. The items accessed will still be dropped.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rule</td><td>The rule for dropping collections. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00086">86</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                                             {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordtype">int</span> offset;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordtype">bool</span> isKeep = <span class="keyword">false</span>, isDrop = <span class="keyword">false</span>, isIgnore = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordtype">size_t</span> i = rule.find(<span class="stringliteral">&quot;keep&quot;</span>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">if</span> (i != std::string::npos) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    offset = i + 4;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    isKeep = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  i = rule.find(<span class="stringliteral">&quot;drop&quot;</span>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">if</span> (i != std::string::npos) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    offset = i + 4;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    isDrop = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  i = rule.find(<span class="stringliteral">&quot;ignore&quot;</span>);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">if</span> (i != std::string::npos) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    offset = i + 6;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    isIgnore = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// more than one of (keep,drop,ignore) was provided =&gt; not valid rule</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">if</span> (<span class="keywordtype">int</span>(isKeep) + <span class="keywordtype">int</span>(isDrop) + <span class="keywordtype">int</span>(isIgnore) != 1)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  std::string srule = rule.substr(offset);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">for</span> (i = srule.find_first_of(<span class="stringliteral">&quot; \t\n\r&quot;</span>); i != std::string::npos;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;       i = srule.find_first_of(<span class="stringliteral">&quot; \t\n\r&quot;</span>))</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    srule.erase(i, 1);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="comment">// name of branch is not given</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keywordflow">if</span> (srule.length() == 0)</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// add wild card at end for matching purposes</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">if</span> (srule.back() != <span class="charliteral">&#39;*&#39;</span>)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    srule += <span class="stringliteral">&quot;.*&quot;</span>; <span class="comment">// add wildcard to back</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keywordflow">if</span> (isKeep) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// turn both the input and output tree&#39;s on</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// root needs . removed otherwise it gets cranky</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    srule.erase(std::remove(srule.begin(), srule.end(), <span class="charliteral">&#39;.&#39;</span>), srule.end());</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#a67ad07be1583f5fd6670bdee5fb62e05">preCloneRules_</a>.emplace_back(srule, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// this branch will then be copied over into output tree and be active</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isIgnore) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// don&#39;t even read it from the input file</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// root needs . removed otherwise it gets cranky</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    srule.erase(std::remove(srule.begin(), srule.end(), <span class="charliteral">&#39;.&#39;</span>), srule.end());</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#a67ad07be1583f5fd6670bdee5fb62e05">preCloneRules_</a>.emplace_back(srule, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// these branches won&#39;t be copied over into output tree</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isDrop) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// drop means allowing it on reading but not writing</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// pass these regex to event bus so Event::add knows</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>-&gt;<a class="code" href="classframework_1_1Event.html#aeb8657b4810cfe2f34f62b217b81ccf0">addDrop</a>(srule); <span class="comment">// requires event_ to be set</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">// root needs . removed otherwise it gets cranky</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    srule.erase(std::remove(srule.begin(), srule.end(), <span class="charliteral">&#39;.&#39;</span>), srule.end());</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#a67ad07be1583f5fd6670bdee5fb62e05">preCloneRules_</a>.emplace_back(srule, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// these branches won&#39;t be copied over into output tree</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">// reactivate input branch after clone</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#a6055851e7b0fa9fed0ed15b0d1f6e741">reactivateRules_</a>.push_back(srule);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div>
<div class="ttc" id="aclassframework_1_1EventFile_html_af830217e3dbd325eb3a1a6bd61dc3fc5"><div class="ttname"><a href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">framework::EventFile::event_</a></div><div class="ttdeci">Event * event_</div><div class="ttdoc">The object containing the actual event data (trees and branches).</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00245">EventFile.h:245</a></div></div>
<div class="ttc" id="aclassframework_1_1Event_html_aeb8657b4810cfe2f34f62b217b81ccf0"><div class="ttname"><a href="classframework_1_1Event.html#aeb8657b4810cfe2f34f62b217b81ccf0">framework::Event::addDrop</a></div><div class="ttdeci">void addDrop(const std::string &amp;exp)</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00020">Event.cxx:20</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Event_8cxx_source.html#l00020">framework::Event::addDrop()</a>, <a class="el" href="EventFile_8h_source.html#l00245">event_</a>, <a class="el" href="EventFile_8h_source.html#l00253">preCloneRules_</a>, and <a class="el" href="EventFile_8h_source.html#l00262">reactivateRules_</a>.</p>

<p class="reference">Referenced by <a class="el" href="Process_8cxx_source.html#l00116">framework::Process::run()</a>.</p>

</div>
</div>
<a id="a47ca56c3f3fbcbc6c0bd014a767ad108"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47ca56c3f3fbcbc6c0bd014a767ad108">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void framework::EventFile::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the file, writing the tree to disk if creating an output file.</p>
<p>Deletes any RunHeaders that this instance of <a class="el" href="classframework_1_1EventFile.html">EventFile</a> owns.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>if run tree already exists in output file. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00289">289</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                      {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">// MEMORY &#39;Conditional jump or move depends on uninitialised values&#39; when</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">// closing TFile and/or writing TTree</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="comment">//  TFile::Close --&gt; TDirectoryFile::Close --&gt; ~TTree</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">// MEMORY &#39;Syscall param write(buf) points to uninitialised byte(s)&#39;</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="comment">//  when writing TTree below</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">//  From filling TTree in nextEvent</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="comment">// Before an output file, the Event tree needs to be written.</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#a77e8acad52a7ccc11c2a719fb3cb5246">isOutputFile_</a>) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>-&gt;Write();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// store the run map into the output tree</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="comment">// Check for the existence of the run tree in the file.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">// If it already exists, throw an exception.</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">// TODO: Tree name shouldn&#39;t be hardcoded. Is this check really necessary?</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keyword">auto</span> runTree{<span class="keyword">static_cast&lt;</span>TTree *<span class="keyword">&gt;</span>(<a class="code" href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">file_</a>-&gt;Get(<span class="stringliteral">&quot;LDMX_Run&quot;</span>))};</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (runTree) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      EXCEPTION_RAISE(<span class="stringliteral">&quot;RunTree&quot;</span>,</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                      <span class="stringliteral">&quot;RunTree &#39;LDMX_Run&#39; already exists in output file &#39;&quot;</span> +</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                          <a class="code" href="classframework_1_1EventFile.html#a3f95d97b72a83bd4730fe9d8ac8345f9">fileName_</a> + <span class="stringliteral">&quot;&#39;.&quot;</span>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    runTree = <span class="keyword">new</span> TTree(<span class="stringliteral">&quot;LDMX_Run&quot;</span>, <span class="stringliteral">&quot;LDMX run header&quot;</span>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment">// create the branch on this tree</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> *theHandle = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    runTree-&gt;Branch(<span class="stringliteral">&quot;RunHeader&quot;</span>, <span class="stringliteral">&quot;ldmx::RunHeader&quot;</span>, &amp;theHandle, 32000, 3);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="comment">// copy over the run headers into the tree</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;[num, header_pair] : <a class="code" href="classframework_1_1EventFile.html#a5442935a1fd82941ae556bd671b50db9">runMap_</a>) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      theHandle = header_pair.second;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      runTree-&gt;Fill();</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keywordflow">if</span> (header_pair.first)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keyword">delete</span> header_pair.second;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    runTree-&gt;Write();</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="comment">// Close the file</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <a class="code" href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">file_</a>-&gt;Close();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;}</div>
<div class="ttc" id="aclassframework_1_1EventFile_html_a5442935a1fd82941ae556bd671b50db9"><div class="ttname"><a href="classframework_1_1EventFile.html#a5442935a1fd82941ae556bd671b50db9">framework::EventFile::runMap_</a></div><div class="ttdeci">std::map&lt; int, std::pair&lt; bool, ldmx::RunHeader * &gt; &gt; runMap_</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00274">EventFile.h:274</a></div></div>
<div class="ttc" id="aclassldmx_1_1RunHeader_html"><div class="ttname"><a href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a></div><div class="ttdef"><b>Definition:</b> <a href="RunHeader_8h_source.html#l00022">RunHeader.h:22</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EventFile_8h_source.html#l00236">file_</a>, <a class="el" href="EventFile_8h_source.html#l00224">fileName_</a>, <a class="el" href="EventFile_8h_source.html#l00227">isOutputFile_</a>, <a class="el" href="EventFile_8h_source.html#l00274">runMap_</a>, and <a class="el" href="EventFile_8h_source.html#l00239">tree_</a>.</p>

<p class="reference">Referenced by <a class="el" href="Process_8cxx_source.html#l00116">framework::Process::run()</a>.</p>

</div>
</div>
<a id="ae8899a8941e6ef6957dfbd2243c9694d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8899a8941e6ef6957dfbd2243c9694d">&#9670;&nbsp;</a></span>getEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classframework_1_1Event.html">Event</a>* framework::EventFile::getEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the <a class="el" href="classframework_1_1Event.html" title="Implements an event buffer system for storing event data.">Event</a> object containing the event data. </p><dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="classframework_1_1Event.html" title="Implements an event buffer system for storing event data.">Event</a> object containing event data. </dd></dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00151">151</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>; };</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EventFile_8h_source.html#l00245">event_</a>.</p>

</div>
</div>
<a id="add25411caa90fdff2a046d8c1c0f404b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add25411caa90fdff2a046d8c1c0f404b">&#9670;&nbsp;</a></span>getFileName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::string&amp; framework::EventFile::getFileName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the name of the ROOT file being managed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00195">195</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classframework_1_1EventFile.html#a3f95d97b72a83bd4730fe9d8ac8345f9">fileName_</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EventFile_8h_source.html#l00224">fileName_</a>.</p>

<p class="reference">Referenced by <a class="el" href="Process_8cxx_source.html#l00116">framework::Process::run()</a>.</p>

</div>
</div>
<a id="adc02f5966e953c33722fdff2d7ee83a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc02f5966e953c33722fdff2d7ee83a5">&#9670;&nbsp;</a></span>getRunHeader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> &amp; framework::EventFile::getRunHeader </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>runNumber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the RunHeader for a given run, if it exists in the input file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">runNumber</td><td>The run number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The RunHeader from the input file. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>if there is no RunHeader in the map with the given run number. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00346">346</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                                                    {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#a5442935a1fd82941ae556bd671b50db9">runMap_</a>.find(runNumber) != <a class="code" href="classframework_1_1EventFile.html#a5442935a1fd82941ae556bd671b50db9">runMap_</a>.end()) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">return</span> *(<a class="code" href="classframework_1_1EventFile.html#a5442935a1fd82941ae556bd671b50db9">runMap_</a>.at(runNumber).second);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    EXCEPTION_RAISE(<span class="stringliteral">&quot;DataError&quot;</span>, <span class="stringliteral">&quot;No run header exists for &quot;</span> +</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                                     std::to_string(runNumber) +</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                                     <span class="stringliteral">&quot; in the run map.&quot;</span>);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EventFile_8h_source.html#l00274">runMap_</a>.</p>

<p class="reference">Referenced by <a class="el" href="Process_8cxx_source.html#l00116">framework::Process::run()</a>, and <a class="el" href="RootPersistencyManager_8cxx_source.html#l00073">simcore::persist::RootPersistencyManager::Store()</a>.</p>

</div>
</div>
<a id="ace2d91da520359191c19576905ee49be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace2d91da520359191c19576905ee49be">&#9670;&nbsp;</a></span>importRunHeaders()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void framework::EventFile::importRunHeaders </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Fill the internal map of run numbers to RunHeader objects from the input file.</p>
<p>If this file is an output file and parent_ and parent_-&gt;file_ are valid pointers, then the run headers are imported from parent_-&gt;file_.</p>
<p>Otherwise, we try to import run headers from file_.</p>
<p>Does not check if any run headers are getting overwritten!</p>
<p>Any RunHeaders read in from this function are owned by this instance of <a class="el" href="classframework_1_1EventFile.html">EventFile</a> and are deleted in <a class="el" href="classframework_1_1EventFile.html#a47ca56c3f3fbcbc6c0bd014a767ad108">close()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>This function does nothing if parent_-&gt;file_ and file_ are nullptrs. </dd></dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00356">356</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                                 {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">// choose which file to import from</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keyword">auto</span> theImportFile{<a class="code" href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">file_</a>}; <span class="comment">// if this is an input file</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#a77e8acad52a7ccc11c2a719fb3cb5246">isOutputFile_</a> and <a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a> and <a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>-&gt;<a class="code" href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">file_</a>)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    theImportFile = <a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>-&gt;<a class="code" href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">file_</a>; <span class="comment">// output file with input parent to read</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                                    <span class="comment">// from</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#a77e8acad52a7ccc11c2a719fb3cb5246">isOutputFile_</a>)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">return</span>; <span class="comment">// output file, no input parent to read from</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordflow">if</span> (theImportFile) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="comment">// the file exist</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    TTreeReader oldRunTree(<span class="stringliteral">&quot;LDMX_Run&quot;</span>, theImportFile);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    TTreeReaderValue&lt;ldmx::RunHeader&gt; oldRunHeader(oldRunTree, <span class="stringliteral">&quot;RunHeader&quot;</span>);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">// TODO check that setup went correctly</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">while</span> (oldRunTree.Next()) {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="comment">// copy input run tree into run map</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#a5442935a1fd82941ae556bd671b50db9">runMap_</a>[oldRunHeader-&gt;getRunNumber()] =</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;          std::make_pair(<span class="keyword">true</span>, <span class="keyword">new</span> <a class="code" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a>(*oldRunHeader));</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EventFile_8h_source.html#l00236">file_</a>, <a class="el" href="EventFile_8h_source.html#l00227">isOutputFile_</a>, <a class="el" href="EventFile_8h_source.html#l00242">parent_</a>, and <a class="el" href="EventFile_8h_source.html#l00274">runMap_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00013">EventFile()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00260">updateParent()</a>.</p>

</div>
</div>
<a id="a6bac5b377af59044dcb5f012ea28eecd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bac5b377af59044dcb5f012ea28eecd">&#9670;&nbsp;</a></span>nextEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool framework::EventFile::nextEvent </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>storeCurrentEvent</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepare the next event. </p><dl class="section return"><dt>Returns</dt><dd>If event was prepared/read successfully. </dd></dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00148">148</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                                                {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#a938761ef129a3b1f31a7b163c54488d5">ientry_</a> &lt; 0 &amp;&amp; <a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>-&gt;<a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      EXCEPTION_RAISE(<span class="stringliteral">&quot;EventFile&quot;</span>, <span class="stringliteral">&quot;No event tree in the file&quot;</span>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">// Only clone parent tree if either</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">//  1) There is no tree setup yet (first input file)</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">//  2) This is not single output (new input file --&gt; new output file)</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a> or !<a class="code" href="classframework_1_1EventFile.html#a2819415ad5b52587228eca4728d0a22d">isSingleOutput_</a>) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="comment">// clones parent_-&gt;tree_ to our tree_ keeping drop/keep rules in mind</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="comment">// clone tree (only copies over branches that are active on input tree)</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">file_</a>-&gt;cd(); <span class="comment">// go into output file</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> &amp;rulePair : <a class="code" href="classframework_1_1EventFile.html#a67ad07be1583f5fd6670bdee5fb62e05">preCloneRules_</a>)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>-&gt;<a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>-&gt;SetBranchStatus(rulePair.first.c_str(),</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                                        rulePair.second);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a> = <a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>-&gt;<a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>-&gt;CloneTree(0);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="comment">// reactivate any drop branches (drop) on input tree</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> &amp;rule : <a class="code" href="classframework_1_1EventFile.html#a6055851e7b0fa9fed0ed15b0d1f6e741">reactivateRules_</a>)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>-&gt;<a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>-&gt;SetBranchStatus(rule.c_str(), 1);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>-&gt;<a class="code" href="classframework_1_1Event.html#ab65ee9140a3ba3fa330dba21b85af45c">setInputTree</a>(<a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>-&gt;<a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>-&gt;<a class="code" href="classframework_1_1Event.html#a7237d5b9634ca21606e08f358c442a5e">setOutputTree</a>(<a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// close up the last event</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#a938761ef129a3b1f31a7b163c54488d5">ientry_</a> &gt;= 0) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#a77e8acad52a7ccc11c2a719fb3cb5246">isOutputFile_</a>) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>-&gt;<a class="code" href="classframework_1_1Event.html#a7a691f3405dc9a89deb6676951e80f98">beforeFill</a>();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">if</span> (storeCurrentEvent)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>-&gt;Fill(); <span class="comment">// fill the clones...</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>-&gt;<a class="code" href="classframework_1_1Event.html#a7c2d4df4f4023109a0f365b8eee859fa">Clear</a>();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>-&gt;<a class="code" href="classframework_1_1Event.html#a7bf465b6c0c95042236a1246d9f61f71">onEndOfEvent</a>();</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>-&gt;<a class="code" href="classframework_1_1EventFile.html#a6bac5b377af59044dcb5f012ea28eecd">nextEvent</a>()) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>-&gt;<a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>-&gt;GetEntry(<a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>-&gt;<a class="code" href="classframework_1_1EventFile.html#a938761ef129a3b1f31a7b163c54488d5">ientry_</a>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#a938761ef129a3b1f31a7b163c54488d5">ientry_</a> = <a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>-&gt;<a class="code" href="classframework_1_1EventFile.html#a938761ef129a3b1f31a7b163c54488d5">ientry_</a>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>-&gt;<a class="code" href="classframework_1_1Event.html#a9e34c6938c00a8e579cc0064a9532ed6">nextEvent</a>();</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#a5de56f9ac20f32612c465122ff47bd4f">entries_</a>++;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">// if we are reading, move the pointer</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classframework_1_1EventFile.html#a77e8acad52a7ccc11c2a719fb3cb5246">isOutputFile_</a>) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#a938761ef129a3b1f31a7b163c54488d5">ientry_</a> + 1 &gt;= <a class="code" href="classframework_1_1EventFile.html#a5de56f9ac20f32612c465122ff47bd4f">entries_</a>) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#a4967eebc5a561a5778559175a564ff45">isLoopable_</a>) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;          <span class="comment">// reset the event counter: reuse events from start of pileup tree</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;          <a class="code" href="classframework_1_1EventFile.html#a938761ef129a3b1f31a7b163c54488d5">ientry_</a> = -1; <span class="comment">//happens in onEndOfFile() too, but, still needed here</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>-&gt;<a class="code" href="classframework_1_1Event.html#a4827cc54149a4bea1fbc2d427aa0fd8c">onEndOfFile</a>();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            this-&gt;<a class="code" href="classframework_1_1EventFile.html#a58b56c464bdeb555cfd265b00ee59a66">setupEvent</a>(<a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;          }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#a938761ef129a3b1f31a7b163c54488d5">ientry_</a>++;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>-&gt;LoadTree(<a class="code" href="classframework_1_1EventFile.html#a938761ef129a3b1f31a7b163c54488d5">ientry_</a>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>-&gt;<a class="code" href="classframework_1_1Event.html#a9e34c6938c00a8e579cc0064a9532ed6">nextEvent</a>();</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#a938761ef129a3b1f31a7b163c54488d5">ientry_</a>++;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#a5de56f9ac20f32612c465122ff47bd4f">entries_</a>++;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div>
<div class="ttc" id="aclassframework_1_1EventFile_html_a58b56c464bdeb555cfd265b00ee59a66"><div class="ttname"><a href="classframework_1_1EventFile.html#a58b56c464bdeb555cfd265b00ee59a66">framework::EventFile::setupEvent</a></div><div class="ttdeci">void setupEvent(Event *evt)</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8cxx_source.html#l00233">EventFile.cxx:233</a></div></div>
<div class="ttc" id="aclassframework_1_1EventFile_html_a6bac5b377af59044dcb5f012ea28eecd"><div class="ttname"><a href="classframework_1_1EventFile.html#a6bac5b377af59044dcb5f012ea28eecd">framework::EventFile::nextEvent</a></div><div class="ttdeci">bool nextEvent(bool storeCurrentEvent=true)</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8cxx_source.html#l00148">EventFile.cxx:148</a></div></div>
<div class="ttc" id="aclassframework_1_1EventFile_html_a938761ef129a3b1f31a7b163c54488d5"><div class="ttname"><a href="classframework_1_1EventFile.html#a938761ef129a3b1f31a7b163c54488d5">framework::EventFile::ientry_</a></div><div class="ttdeci">Long64_t ientry_</div><div class="ttdoc">The current entry in the tree.</div><div class="ttdef"><b>Definition:</b> <a href="EventFile_8h_source.html#l00221">EventFile.h:221</a></div></div>
<div class="ttc" id="aclassframework_1_1Event_html_a4827cc54149a4bea1fbc2d427aa0fd8c"><div class="ttname"><a href="classframework_1_1Event.html#a4827cc54149a4bea1fbc2d427aa0fd8c">framework::Event::onEndOfFile</a></div><div class="ttdeci">void onEndOfFile()</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00138">Event.cxx:138</a></div></div>
<div class="ttc" id="aclassframework_1_1Event_html_a7237d5b9634ca21606e08f358c442a5e"><div class="ttname"><a href="classframework_1_1Event.html#a7237d5b9634ca21606e08f358c442a5e">framework::Event::setOutputTree</a></div><div class="ttdeci">void setOutputTree(TTree *tree)</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00081">Event.cxx:81</a></div></div>
<div class="ttc" id="aclassframework_1_1Event_html_a7a691f3405dc9a89deb6676951e80f98"><div class="ttname"><a href="classframework_1_1Event.html#a7a691f3405dc9a89deb6676951e80f98">framework::Event::beforeFill</a></div><div class="ttdeci">void beforeFill()</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00119">Event.cxx:119</a></div></div>
<div class="ttc" id="aclassframework_1_1Event_html_a7bf465b6c0c95042236a1246d9f61f71"><div class="ttname"><a href="classframework_1_1Event.html#a7bf465b6c0c95042236a1246d9f61f71">framework::Event::onEndOfEvent</a></div><div class="ttdeci">void onEndOfEvent()</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00136">Event.cxx:136</a></div></div>
<div class="ttc" id="aclassframework_1_1Event_html_a7c2d4df4f4023109a0f365b8eee859fa"><div class="ttname"><a href="classframework_1_1Event.html#a7c2d4df4f4023109a0f365b8eee859fa">framework::Event::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00128">Event.cxx:128</a></div></div>
<div class="ttc" id="aclassframework_1_1Event_html_a9e34c6938c00a8e579cc0064a9532ed6"><div class="ttname"><a href="classframework_1_1Event.html#a9e34c6938c00a8e579cc0064a9532ed6">framework::Event::nextEvent</a></div><div class="ttdeci">bool nextEvent()</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00113">Event.cxx:113</a></div></div>
<div class="ttc" id="aclassframework_1_1Event_html_ab65ee9140a3ba3fa330dba21b85af45c"><div class="ttname"><a href="classframework_1_1Event.html#ab65ee9140a3ba3fa330dba21b85af45c">framework::Event::setInputTree</a></div><div class="ttdeci">void setInputTree(TTree *tree)</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00083">Event.cxx:83</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Event_8cxx_source.html#l00119">framework::Event::beforeFill()</a>, <a class="el" href="Event_8cxx_source.html#l00128">framework::Event::Clear()</a>, <a class="el" href="EventFile_8h_source.html#l00218">entries_</a>, <a class="el" href="EventFile_8h_source.html#l00245">event_</a>, <a class="el" href="EventFile_8h_source.html#l00236">file_</a>, <a class="el" href="EventFile_8h_source.html#l00221">ientry_</a>, <a class="el" href="EventFile_8h_source.html#l00233">isLoopable_</a>, <a class="el" href="EventFile_8h_source.html#l00227">isOutputFile_</a>, <a class="el" href="EventFile_8h_source.html#l00230">isSingleOutput_</a>, <a class="el" href="Event_8cxx_source.html#l00113">framework::Event::nextEvent()</a>, <a class="el" href="EventFile_8cxx_source.html#l00148">nextEvent()</a>, <a class="el" href="Event_8cxx_source.html#l00136">framework::Event::onEndOfEvent()</a>, <a class="el" href="Event_8cxx_source.html#l00138">framework::Event::onEndOfFile()</a>, <a class="el" href="EventFile_8h_source.html#l00242">parent_</a>, <a class="el" href="EventFile_8h_source.html#l00253">preCloneRules_</a>, <a class="el" href="EventFile_8h_source.html#l00262">reactivateRules_</a>, <a class="el" href="Event_8cxx_source.html#l00083">framework::Event::setInputTree()</a>, <a class="el" href="Event_8cxx_source.html#l00081">framework::Event::setOutputTree()</a>, <a class="el" href="EventFile_8cxx_source.html#l00233">setupEvent()</a>, and <a class="el" href="EventFile_8h_source.html#l00239">tree_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00148">nextEvent()</a>, <a class="el" href="Process_8cxx_source.html#l00116">framework::Process::run()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00250">skipToEvent()</a>.</p>

</div>
</div>
<a id="a58b56c464bdeb555cfd265b00ee59a66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58b56c464bdeb555cfd265b00ee59a66">&#9670;&nbsp;</a></span>setupEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void framework::EventFile::setupEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classframework_1_1Event.html">Event</a> *&#160;</td>
          <td class="paramname"><em>evt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set an <a class="el" href="classframework_1_1Event.html" title="Implements an event buffer system for storing event data.">Event</a> object containing the event data to work with this file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">evt</td><td>The <a class="el" href="classframework_1_1Event.html" title="Implements an event buffer system for storing event data.">Event</a> object with event data. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00233">233</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                                     {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a> = evt;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#a77e8acad52a7ccc11c2a719fb3cb5246">isOutputFile_</a>) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a> &amp;&amp; !<a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a> = <a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>-&gt;<a class="code" href="classframework_1_1Event.html#a4bd52db7a07cc55e8ab17ddf3551098c">createTree</a>();</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#a938761ef129a3b1f31a7b163c54488d5">ientry_</a> = 0;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#a5de56f9ac20f32612c465122ff47bd4f">entries_</a> = 0;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>-&gt;<a class="code" href="classframework_1_1Event.html#ab65ee9140a3ba3fa330dba21b85af45c">setInputTree</a>(<a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>-&gt;<a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#af830217e3dbd325eb3a1a6bd61dc3fc5">event_</a>-&gt;<a class="code" href="classframework_1_1Event.html#ab65ee9140a3ba3fa330dba21b85af45c">setInputTree</a>(<a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div>
<div class="ttc" id="aclassframework_1_1Event_html_a4bd52db7a07cc55e8ab17ddf3551098c"><div class="ttname"><a href="classframework_1_1Event.html#a4bd52db7a07cc55e8ab17ddf3551098c">framework::Event::createTree</a></div><div class="ttdeci">TTree * createTree()</div><div class="ttdef"><b>Definition:</b> <a href="Event_8cxx_source.html#l00075">Event.cxx:75</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Event_8cxx_source.html#l00075">framework::Event::createTree()</a>, <a class="el" href="EventFile_8h_source.html#l00218">entries_</a>, <a class="el" href="EventFile_8h_source.html#l00245">event_</a>, <a class="el" href="EventFile_8h_source.html#l00221">ientry_</a>, <a class="el" href="EventFile_8h_source.html#l00227">isOutputFile_</a>, <a class="el" href="EventFile_8h_source.html#l00242">parent_</a>, <a class="el" href="Event_8cxx_source.html#l00083">framework::Event::setInputTree()</a>, and <a class="el" href="EventFile_8h_source.html#l00239">tree_</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00148">nextEvent()</a>, and <a class="el" href="Process_8cxx_source.html#l00116">framework::Process::run()</a>.</p>

</div>
</div>
<a id="ad3993f920881672b4b17f00dae2efd43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3993f920881672b4b17f00dae2efd43">&#9670;&nbsp;</a></span>skipToEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int framework::EventFile::skipToEvent </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Skip events using an offset. Used in pileup overlay. </p><dl class="section return"><dt>Returns</dt><dd>New event number if read successfully, else -1. </dd></dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00250">250</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                                     {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// make sure the event number exists,</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="comment">// -1 to account for stepping in nextEvent()</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  offset = offset % <a class="code" href="classframework_1_1EventFile.html#a5de56f9ac20f32612c465122ff47bd4f">entries_</a> - 1;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i_shift{0}; i_shift &lt; offset; i_shift++) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classframework_1_1EventFile.html#a6bac5b377af59044dcb5f012ea28eecd">nextEvent</a>()) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classframework_1_1EventFile.html#a938761ef129a3b1f31a7b163c54488d5">ientry_</a>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EventFile_8h_source.html#l00218">entries_</a>, <a class="el" href="EventFile_8h_source.html#l00221">ientry_</a>, and <a class="el" href="EventFile_8cxx_source.html#l00148">nextEvent()</a>.</p>

</div>
</div>
<a id="a0f7d3ed3ae59ed388a24cf36789e6d0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f7d3ed3ae59ed388a24cf36789e6d0e">&#9670;&nbsp;</a></span>updateParent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void framework::EventFile::updateParent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classframework_1_1EventFile.html">EventFile</a> *&#160;</td>
          <td class="paramname"><em>parent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Change pointer to different parent file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parent</td><td>pointer to new parent file </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00260">260</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                                              {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a> = parent;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  TTree *parentTree = (TTree *)<a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>-&gt;<a class="code" href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">file_</a>-&gt;Get(<span class="stringliteral">&quot;LDMX_Events&quot;</span>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordflow">if</span> (parentTree) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">// Enter output file</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#a32e45784787a8c55b4581904577ddab3">file_</a>-&gt;cd();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// need to turn on/off the same branches as in the initial setup...</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> &amp;rulePair : <a class="code" href="classframework_1_1EventFile.html#a67ad07be1583f5fd6670bdee5fb62e05">preCloneRules_</a>)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>-&gt;<a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>-&gt;SetBranchStatus(rulePair.first.c_str(), rulePair.second);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">// Copy over addresses from the new parent</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    parentTree-&gt;CopyAddresses(<a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// and reactivate any dropping rules</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> &amp;rule : <a class="code" href="classframework_1_1EventFile.html#a6055851e7b0fa9fed0ed15b0d1f6e741">reactivateRules_</a>)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>-&gt;<a class="code" href="classframework_1_1EventFile.html#af4e4e14bb809320de0d173c22e6bf9bc">tree_</a>-&gt;SetBranchStatus(rule.c_str(), 1);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// Reset the entry index with the new parent index</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <a class="code" href="classframework_1_1EventFile.html#a938761ef129a3b1f31a7b163c54488d5">ientry_</a> = <a class="code" href="classframework_1_1EventFile.html#af18cc990fc75c5ce3982b905c1a9522c">parent_</a>-&gt;<a class="code" href="classframework_1_1EventFile.html#a938761ef129a3b1f31a7b163c54488d5">ientry_</a>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="comment">// import run headers from new input file</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <a class="code" href="classframework_1_1EventFile.html#ace2d91da520359191c19576905ee49be">importRunHeaders</a>();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="EventFile_8h_source.html#l00236">file_</a>, <a class="el" href="EventFile_8h_source.html#l00221">ientry_</a>, <a class="el" href="EventFile_8cxx_source.html#l00356">importRunHeaders()</a>, <a class="el" href="EventFile_8h_source.html#l00242">parent_</a>, <a class="el" href="EventFile_8h_source.html#l00253">preCloneRules_</a>, <a class="el" href="EventFile_8h_source.html#l00262">reactivateRules_</a>, and <a class="el" href="EventFile_8h_source.html#l00239">tree_</a>.</p>

<p class="reference">Referenced by <a class="el" href="Process_8cxx_source.html#l00116">framework::Process::run()</a>.</p>

</div>
</div>
<a id="aaaf91904ebf8df00f2e209c36767e63a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaf91904ebf8df00f2e209c36767e63a">&#9670;&nbsp;</a></span>writeRunHeader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void framework::EventFile::writeRunHeader </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> &amp;&#160;</td>
          <td class="paramname"><em>runHeader</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write the run header into the run map</p>
<p>Any RunHeader passed here is not owned or cleaned up by this <a class="el" href="classframework_1_1EventFile.html">EventFile</a> instance.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">runHeader</td><td>The run header to write into the map </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>if run number is already in run map </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="EventFile_8cxx_source.html#l00333">333</a> of file <a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a>.</p>
<div class="fragment"><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                                                       {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordtype">int</span> runNumber = runHeader.<a class="code" href="classldmx_1_1RunHeader.html#afe7d7953641fa1edd6d2a77ceb685d0e">getRunNumber</a>();</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classframework_1_1EventFile.html#a5442935a1fd82941ae556bd671b50db9">runMap_</a>.find(runNumber) != <a class="code" href="classframework_1_1EventFile.html#a5442935a1fd82941ae556bd671b50db9">runMap_</a>.end()) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    EXCEPTION_RAISE(<span class="stringliteral">&quot;RunMap&quot;</span>, <span class="stringliteral">&quot;Run map already contains a run with number &#39;&quot;</span> +</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                                  std::to_string(runNumber) + <span class="stringliteral">&quot;&#39;.&quot;</span>);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <a class="code" href="classframework_1_1EventFile.html#a5442935a1fd82941ae556bd671b50db9">runMap_</a>[runNumber] = std::make_pair(<span class="keyword">false</span>, &amp;runHeader);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div>
<div class="ttc" id="aclassldmx_1_1RunHeader_html_afe7d7953641fa1edd6d2a77ceb685d0e"><div class="ttname"><a href="classldmx_1_1RunHeader.html#afe7d7953641fa1edd6d2a77ceb685d0e">ldmx::RunHeader::getRunNumber</a></div><div class="ttdeci">int getRunNumber() const</div><div class="ttdef"><b>Definition:</b> <a href="RunHeader_8h_source.html#l00042">RunHeader.h:42</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="RunHeader_8h_source.html#l00042">ldmx::RunHeader::getRunNumber()</a>, and <a class="el" href="EventFile_8h_source.html#l00274">runMap_</a>.</p>

<p class="reference">Referenced by <a class="el" href="Process_8cxx_source.html#l00116">framework::Process::run()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a67ad07be1583f5fd6670bdee5fb62e05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67ad07be1583f5fd6670bdee5fb62e05">&#9670;&nbsp;</a></span>preCloneRules_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::pair&lt;std::string, bool&gt; &gt; framework::EventFile::preCloneRules_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pre-clone rules.</p>
<p>The series of rules to call before cloning/copying the parent tree. </p>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00253">253</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00086">addDrop()</a>, <a class="el" href="EventFile_8cxx_source.html#l00013">EventFile()</a>, <a class="el" href="EventFile_8cxx_source.html#l00148">nextEvent()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00260">updateParent()</a>.</p>

</div>
</div>
<a id="a6055851e7b0fa9fed0ed15b0d1f6e741"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6055851e7b0fa9fed0ed15b0d1f6e741">&#9670;&nbsp;</a></span>reactivateRules_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; framework::EventFile::reactivateRules_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Vector of drop rules that have been parsed and need to be used to reactivate these branches on the input tree</p>
<p>The branches were initial deactivated so they don't get cloned to output tree. </p>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00262">262</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00086">addDrop()</a>, <a class="el" href="EventFile_8cxx_source.html#l00013">EventFile()</a>, <a class="el" href="EventFile_8cxx_source.html#l00148">nextEvent()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00260">updateParent()</a>.</p>

</div>
</div>
<a id="a5442935a1fd82941ae556bd671b50db9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5442935a1fd82941ae556bd671b50db9">&#9670;&nbsp;</a></span>runMap_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int, std::pair&lt;bool, <a class="el" href="classldmx_1_1RunHeader.html">ldmx::RunHeader</a> *&gt; &gt; framework::EventFile::runMap_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Map of run numbers to RunHeader objects</p>
<p>The value object is a pair that should remain internal.</p><ol type="1">
<li>True if <a class="el" href="classframework_1_1EventFile.html">EventFile</a> owns the RunHeader (and needs to clean it up)<ul>
<li>This happens when RunHeaders are imported from an input file</li>
</ul>
</li>
<li>False if <a class="el" href="classframework_1_1EventFile.html">EventFile</a> does not own the RunHeader<ul>
<li>This happens when the RunHeader is created by <a class="el" href="classframework_1_1Process.html#a2b4c2c15c0892f9ffa5d1edb1e6f55f7">Process::run</a> during production </li>
</ul>
</li>
</ol>

<p class="definition">Definition at line <a class="el" href="EventFile_8h_source.html#l00274">274</a> of file <a class="el" href="EventFile_8h_source.html">EventFile.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="EventFile_8cxx_source.html#l00289">close()</a>, <a class="el" href="EventFile_8cxx_source.html#l00346">getRunHeader()</a>, <a class="el" href="EventFile_8cxx_source.html#l00356">importRunHeaders()</a>, and <a class="el" href="EventFile_8cxx_source.html#l00333">writeRunHeader()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Framework/include/Framework/<a class="el" href="EventFile_8h_source.html">EventFile.h</a></li>
<li>Framework/src/Framework/<a class="el" href="EventFile_8cxx_source.html">EventFile.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
		<script src="custom.js"></script>
	</body>
</html>